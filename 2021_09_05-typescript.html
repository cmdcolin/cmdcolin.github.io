<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/82eb5efba2a6c9217a68.css" as="style"/><link rel="stylesheet" href="/_next/static/css/82eb5efba2a6c9217a68.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-1a8a258926ecde76681b.js" defer=""></script><script src="/_next/static/chunks/framework-b97a0ed4f13ff8397343.js" defer=""></script><script src="/_next/static/chunks/main-1f2c591c5d3bfcfc95e6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-72a03db9ecdc52193d45.js" defer=""></script><script src="/_next/static/chunks/pages/2021_09_05-typescript-7c5160baee257a720e05.js" defer=""></script><script src="/_next/static/Z3jgugmIjFxXvM2N8hHNP/_buildManifest.js" defer=""></script><script src="/_next/static/Z3jgugmIjFxXvM2N8hHNP/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><a href="/">Return home</a><div class="blog"><h1>Decrease your idle CPU usage when developing typescript apps with this one weird environment variable</h1><p>TL;DR:</p><p>add this to your bashrc</p><pre><code>export TSC_WATCHFILE=UseFsEventsWithFallbackDynamicPolling
</code></pre><p>This particular watcher variable is not the default setting for typescript, but
it changes the default from polling for file changes to a watcher. There is
discussion here</p><p><a href="https://github.com/microsoft/TypeScript/issues/31048">https://github.com/microsoft/TypeScript/issues/31048</a></p><p>The issue thread shows that it can go from roughly ~7% idle CPU usage to 0.2%.
This corresponds roughly what I see too. Detailed docs for typescript discuss
some of the reasoning behing not making this the default</p><p><a href="https://github.com/microsoft/TypeScript-Handbook/blob/master/pages/Configuring%20Watch.md#background">https://github.com/microsoft/TypeScript-Handbook/blob/master/pages/Configuring%20Watch.md#background</a></p><p>It claims that some OS specific behaviors of file watching could be harmful to
making it the default. For example, that (maybe?) on linux, it may use a large
number of file watchers which can exceed notify handles (this is a setting I
commonly have to increase in linux, guide here
<a href="https://dev.to/rubiin/ubuntu-increase-inotify-watcher-file-watch-limit-kf4">https://dev.to/rubiin/ubuntu-increase-inotify-watcher-file-watch-limit-kf4</a>)</p><p>PS: you could also edit your package.json of your <code>create-react-app –template
typescript</code> for example like this…then users of your app will get a similar
benefit.</p><pre><code>-&quot;start&quot;: &quot;react-scripts start&quot;
+&quot;start&quot;: &quot;cross-env TSC_WATCHFILE=UseFsEventsWithFallbackDynamicPolling react-scripts start&quot;
</code></pre><p>disclaimer: there may be reasons that typescript does not have this enabled by
default so be aware</p></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/2021_09_05-typescript","query":{},"buildId":"Z3jgugmIjFxXvM2N8hHNP","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>