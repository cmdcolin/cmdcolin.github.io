{"pageProps":{"post":{"title":"Handling component state with React...you gotta reset it sometimes","date":"2022-10-10","slug":"2022-10-10-reactstate","html":"<p>If you make a React component that has, say, a prop for a item id, and an async\naction in a <code>useEffect</code> to fetch data for that item from an API, then you\nprobably also have a <code>useState</code> to set data after you get results back from\nyour API (or an error occurs). But, the interesting thing to me is</p>\n<p><strong>you have to remember to reset that state, including error state, when your\nprops change</strong></p>\n<p>It seems obvious, but I just wanted to write some working examples here</p>\n<h2 id=\"part-1-having-component-state-for-api-response-or-error\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#part-1-having-component-state-for-api-response-or-error\"><a href=\"#part-1-having-component-state-for-api-response-or-error\" style=\"margin-right: 10px\">#</a></a>Part 1: Having component state for API response or error</h2>\n<p>Working codesandbox</p>\n<p><a href=\"https://codesandbox.io/s/practical-rubin-l2d5el?file=/src/App.tsx:0-2003\">https://codesandbox.io/s/practical-rubin-l2d5el?file=/src/App.tsx:0-2003</a></p>\n<p>In the below example, we will handle fetching from the Pokemon API, and use a\n<code>useState</code> to handle the returned data or a returned error. The important thing\nto highlight is: when you go to refetch a new item from the API, you likely\nneed to clear the state of what was previously there (unless you want to\ndisplay stale results)</p>\n<pre class=\"shiki\" style=\"background-color: #1b1e28\"><code><span class=\"line\"><span style=\"color: #5DE4C7\">import </span><span style=\"color: #A6ACCD\">{</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #ADD7FF\">useState</span><span style=\"color: #A6ACCD\">,</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #ADD7FF\">useEffect</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">}</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">from</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">react</span><span style=\"color: #A6ACCD\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #91B4D5\">interface</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">PokemonType</span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  type</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    name</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">string</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"><span style=\"color: #91B4D5\">interface</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">PokemonInfo</span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  name</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">string</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  types</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">PokemonType</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #767C9DB0\">// util fetch function to throw if !response.ok, I use this util often</span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">async</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #ADD7FF\">myfetch</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">url</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">string</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #E4F0FB\">opts</span><span style=\"color: #91B4D5\">?:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">RequestInit</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">response</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7C0\">await</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">fetch</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">url</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #E4F0FB\">opts</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  if (</span><span style=\"color: #91B4D5\">!</span><span style=\"color: #E4F0FB\">response</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">ok</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #D0679D\">throw</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7\">new</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">Error</span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #A6ACCD\">`</span><span style=\"color: #5DE4C7\">Error fetching </span><span style=\"color: #A6ACCD\">${</span><span style=\"color: #E4F0FB\">url</span><span style=\"color: #A6ACCD\">}</span><span style=\"color: #5DE4C7\">: HTTP </span><span style=\"color: #A6ACCD\">${</span><span style=\"color: #E4F0FB\">response</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">status</span><span style=\"color: #A6ACCD\">}</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">${</span><span style=\"color: #5DE4C7C0\">await</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #E4F0FB\">response</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">text</span><span style=\"color: #A6ACCD\">()</span><span style=\"color: #A6ACCD\">}`</span><span style=\"color: #A6ACCD\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    )</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">response</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">json</span><span style=\"color: #A6ACCD\">()</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #91B4D5\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #ADD7FF\">ErrorMessage</span><span style=\"color: #A6ACCD\">({ </span><span style=\"color: #E4F0FB\">error</span><span style=\"color: #A6ACCD\"> }</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> { error</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">unknown</span><span style=\"color: #A6ACCD\"> }) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">&#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">style</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{</span><span style=\"color: #A6ACCD\">{</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #ADD7FF\">background</span><span style=\"color: #A6ACCD\">:</span><span style=\"color: #ADD7FF\"> </span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">red</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #ADD7FF\"> </span><span style=\"color: #A6ACCD\">}</span><span style=\"color: #E4F0FB\">}>{</span><span style=\"color: #A6ACCD\">`${</span><span style=\"color: #E4F0FB\">error</span><span style=\"color: #A6ACCD\">}`</span><span style=\"color: #E4F0FB\">}&#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #91B4D5\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #ADD7FF\">PokemonCard</span><span style=\"color: #A6ACCD\">({ </span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #A6ACCD\"> }</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> { pokemonName</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">string</span><span style=\"color: #A6ACCD\"> }) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #E4F0FB\">error</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #E4F0FB\">setError</span><span style=\"color: #A6ACCD\">] </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">useState</span><span style=\"color: #A6ACCD\">&#x3C;</span><span style=\"color: #A6ACCDC0\">unknown</span><span style=\"color: #A6ACCD\">>()</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #E4F0FB\">pokemonInfo</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #E4F0FB\">setPokemonInfo</span><span style=\"color: #A6ACCD\">] </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">useState</span><span style=\"color: #A6ACCD\">&#x3C;</span><span style=\"color: #A6ACCDC0\">PokemonInfo</span><span style=\"color: #A6ACCD\">>()</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #E4F0FBD0\">useEffect</span><span style=\"color: #A6ACCD\">(() </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #91B4D5\">let</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #D0679D\">false</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    ;(</span><span style=\"color: #5DE4C7\">async</span><span style=\"color: #A6ACCD\"> () </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #D0679D\">try</span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #767C9DB0\">// important: reset the error and item state of the component!</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #E4F0FBD0\">setError</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #D0679D\">undefined</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #E4F0FBD0\">setPokemonInfo</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #D0679D\">undefined</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">data</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7C0\">await</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">myfetch</span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">          </span><span style=\"color: #A6ACCD\">`</span><span style=\"color: #5DE4C7\">https://pokeapi.co/api/v2/pokemon/</span><span style=\"color: #A6ACCD\">${</span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #A6ACCD\">}`</span><span style=\"color: #A6ACCD\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        )</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        if (</span><span style=\"color: #91B4D5\">!</span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">          </span><span style=\"color: #E4F0FBD0\">setPokemonInfo</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">data</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      } </span><span style=\"color: #D0679D\">catch</span><span style=\"color: #A6ACCD\"> (</span><span style=\"color: #E4F0FB\">e</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #E4F0FB\">console</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">error</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">e</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        if (</span><span style=\"color: #91B4D5\">!</span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">          </span><span style=\"color: #E4F0FBD0\">setError</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">e</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    })()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> () </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7\">true</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  }, [</span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #A6ACCD\">])</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> (</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #E4F0FB\">&#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      {error </span><span style=\"color: #91B4D5\">?</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        &#x3C;</span><span style=\"color: #5DE4C7\">ErrorMessage</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">error</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{error} /></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      </span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">:</span><span style=\"color: #E4F0FB\"> pokemonInfo </span><span style=\"color: #91B4D5\">?</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        &#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">          {pokemonInfo</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">name} is of type{</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #E4F0FB\">}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">          {pokemonInfo</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">types</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">map</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">t </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #E4F0FB\"> t</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">type</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">name</span><span style=\"color: #A6ACCD\">).</span><span style=\"color: #E4F0FBD0\">join</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">, </span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\">}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        &#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      </span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">:</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        &#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">>Loading...&#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      </span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\">}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">    &#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  )</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">export default </span><span style=\"color: #91B4D5\">function</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #ADD7FF\">App</span><span style=\"color: #A6ACCD\">()</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">{</span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">  </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">[</span><span style=\"color: #E4F0FB\">value</span><span style=\"color: #A6ACCD\">,</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #E4F0FB\">setValue</span><span style=\"color: #A6ACCD\">]</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #E4F0FBD0\">useState</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">oddish</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">    </span><span style=\"color: #E4F0FB\">&#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">className</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #5DE4C7\">App</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      &#x3C;</span><span style=\"color: #5DE4C7\">label</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">htmlFor</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #5DE4C7\">pokemon_name</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #E4F0FB\">>Pokemon name&#x3C;/</span><span style=\"color: #5DE4C7\">label</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      &#x3C;</span><span style=\"color: #5DE4C7\">input</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        </span><span style=\"color: #91B4D5\">id</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #5DE4C7\">pokemon_name</span><span style=\"color: #A6ACCD\">\"</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        </span><span style=\"color: #91B4D5\">type</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #5DE4C7\">text</span><span style=\"color: #A6ACCD\">\"</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        </span><span style=\"color: #91B4D5\">value</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{value}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        </span><span style=\"color: #91B4D5\">onChange</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{e </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #E4F0FBD0\">setValue</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">e</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">target</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">value</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\">}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      /></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      &#x3C;</span><span style=\"color: #5DE4C7\">PokemonCard</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">pokemonName</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{value} /></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">    &#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">  </span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span></code></pre>\n<h2 id=\"part-2-a-custom-hook\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#part-2-a-custom-hook\"><a href=\"#part-2-a-custom-hook\" style=\"margin-right: 10px\">#</a></a>Part 2: A custom hook?</h2>\n<p>Can we make a hook to make this easier? I don't often make custom hooks, but\nyou can try to \"encapsulate\" some of the multiple-related hooks (the useStates\nfor error, pokemonInfo, and useEffect) into a single hook. This does not\ndrastically affect our approach, but in the below example, we can call\n<code>usePokemonInfo(pokemonName)</code> and error handling and fetching is handled for us</p>\n<p>Working codesandbox</p>\n<p><a href=\"https://codesandbox.io/s/fragrant-wind-008pfn?file=/src/App.tsx:0-2234\">https://codesandbox.io/s/fragrant-wind-008pfn?file=/src/App.tsx:0-2234</a></p>\n<pre class=\"shiki\" style=\"background-color: #1b1e28\"><code><span class=\"line\"><span style=\"color: #5DE4C7\">import </span><span style=\"color: #A6ACCD\">{</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #ADD7FF\">useState</span><span style=\"color: #A6ACCD\">,</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #ADD7FF\">useEffect</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">}</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">from</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">react</span><span style=\"color: #A6ACCD\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #91B4D5\">interface</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">PokemonType</span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  type</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    name</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">string</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"><span style=\"color: #91B4D5\">interface</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">PokemonInfo</span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  name</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">string</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  types</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">PokemonType</span><span style=\"color: #A6ACCD\">[]</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #767C9DB0\">// util fetch function to throw if !response.ok, I use this util often</span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">async</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #ADD7FF\">myfetch</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">url</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">string</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #E4F0FB\">opts</span><span style=\"color: #91B4D5\">?:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">RequestInit</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">response</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7C0\">await</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">fetch</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">url</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #E4F0FB\">opts</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  if (</span><span style=\"color: #91B4D5\">!</span><span style=\"color: #E4F0FB\">response</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">ok</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #D0679D\">throw</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7\">new</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">Error</span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #A6ACCD\">`</span><span style=\"color: #5DE4C7\">Error fetching </span><span style=\"color: #A6ACCD\">${</span><span style=\"color: #E4F0FB\">url</span><span style=\"color: #A6ACCD\">}</span><span style=\"color: #5DE4C7\">: HTTP </span><span style=\"color: #A6ACCD\">${</span><span style=\"color: #E4F0FB\">response</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">status</span><span style=\"color: #A6ACCD\">}</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">${</span><span style=\"color: #5DE4C7C0\">await</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #E4F0FB\">response</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">text</span><span style=\"color: #A6ACCD\">()</span><span style=\"color: #A6ACCD\">}`</span><span style=\"color: #A6ACCD\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    )</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">response</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">json</span><span style=\"color: #A6ACCD\">()</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #91B4D5\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #ADD7FF\">usePokemonInfo</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">string</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #E4F0FB\">error</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #E4F0FB\">setError</span><span style=\"color: #A6ACCD\">] </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">useState</span><span style=\"color: #A6ACCD\">&#x3C;</span><span style=\"color: #A6ACCDC0\">unknown</span><span style=\"color: #A6ACCD\">>()</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #E4F0FB\">pokemonInfo</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #E4F0FB\">setItemInfo</span><span style=\"color: #A6ACCD\">] </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">useState</span><span style=\"color: #A6ACCD\">&#x3C;</span><span style=\"color: #A6ACCDC0\">PokemonInfo</span><span style=\"color: #A6ACCD\">>()</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #E4F0FBD0\">useEffect</span><span style=\"color: #A6ACCD\">(() </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #91B4D5\">let</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #D0679D\">false</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    ;(</span><span style=\"color: #5DE4C7\">async</span><span style=\"color: #A6ACCD\"> () </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #D0679D\">try</span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #E4F0FBD0\">setItemInfo</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #D0679D\">undefined</span><span style=\"color: #A6ACCD\">) </span><span style=\"color: #767C9DB0\">// &#x3C;-- important to reset the state of the app</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #E4F0FBD0\">setError</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #D0679D\">undefined</span><span style=\"color: #A6ACCD\">) </span><span style=\"color: #767C9DB0\">// &#x3C;-- important to reset the state of the app</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">data</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7C0\">await</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">myfetch</span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">          </span><span style=\"color: #A6ACCD\">`</span><span style=\"color: #5DE4C7\">https://pokeapi.co/api/v2/pokemon/</span><span style=\"color: #A6ACCD\">${</span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #A6ACCD\">}`</span><span style=\"color: #A6ACCD\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        )</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        if (</span><span style=\"color: #91B4D5\">!</span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">          </span><span style=\"color: #E4F0FBD0\">setItemInfo</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">data</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      } </span><span style=\"color: #D0679D\">catch</span><span style=\"color: #A6ACCD\"> (</span><span style=\"color: #E4F0FB\">e</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #E4F0FB\">console</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">error</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">e</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        if (</span><span style=\"color: #91B4D5\">!</span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">          </span><span style=\"color: #E4F0FBD0\">setError</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">e</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    })()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> () </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7\">true</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  }, [</span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #A6ACCD\">])</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #E4F0FB\">error</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #E4F0FB\">pokemonInfo</span><span style=\"color: #A6ACCD\">] </span><span style=\"color: #A6ACCDC0\">as</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7\">const</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #91B4D5\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #ADD7FF\">ErrorMessage</span><span style=\"color: #A6ACCD\">({ </span><span style=\"color: #E4F0FB\">error</span><span style=\"color: #A6ACCD\"> }</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> { error</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">unknown</span><span style=\"color: #A6ACCD\"> }) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">&#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">style</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{</span><span style=\"color: #A6ACCD\">{</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #ADD7FF\">background</span><span style=\"color: #A6ACCD\">:</span><span style=\"color: #ADD7FF\"> </span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">red</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #ADD7FF\"> </span><span style=\"color: #A6ACCD\">}</span><span style=\"color: #E4F0FB\">}>{</span><span style=\"color: #A6ACCD\">`${</span><span style=\"color: #E4F0FB\">error</span><span style=\"color: #A6ACCD\">}`</span><span style=\"color: #E4F0FB\">}&#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #91B4D5\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #ADD7FF\">PokemonCard</span><span style=\"color: #A6ACCD\">({ </span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #A6ACCD\"> }</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> { pokemonName</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">string</span><span style=\"color: #A6ACCD\"> }) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #E4F0FB\">error</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #E4F0FB\">pokemonInfo</span><span style=\"color: #A6ACCD\">] </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">usePokemonInfo</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> (</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #E4F0FB\">&#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      {error </span><span style=\"color: #91B4D5\">?</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        &#x3C;</span><span style=\"color: #5DE4C7\">ErrorMessage</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">error</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{error} /></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      </span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">:</span><span style=\"color: #E4F0FB\"> pokemonInfo </span><span style=\"color: #91B4D5\">?</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        &#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">          {pokemonInfo</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">name} is of type{</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #E4F0FB\">}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">          {pokemonInfo</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">types</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">map</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">t </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #E4F0FB\"> t</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">type</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">name</span><span style=\"color: #A6ACCD\">).</span><span style=\"color: #E4F0FBD0\">join</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">, </span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\">}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        &#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      </span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">:</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        &#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">>Loading...&#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      </span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\">}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">    &#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  )</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">export default </span><span style=\"color: #91B4D5\">function</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #ADD7FF\">App</span><span style=\"color: #A6ACCD\">()</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">{</span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">  </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">[</span><span style=\"color: #E4F0FB\">value</span><span style=\"color: #A6ACCD\">,</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #E4F0FB\">setValue</span><span style=\"color: #A6ACCD\">]</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #E4F0FBD0\">useState</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">oddish</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">    </span><span style=\"color: #E4F0FB\">&#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">className</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #5DE4C7\">App</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      &#x3C;</span><span style=\"color: #5DE4C7\">label</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">htmlFor</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #5DE4C7\">pokemon_name</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #E4F0FB\">>Pokemon name&#x3C;/</span><span style=\"color: #5DE4C7\">label</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      &#x3C;</span><span style=\"color: #5DE4C7\">input</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        </span><span style=\"color: #91B4D5\">id</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #5DE4C7\">pokemon_name</span><span style=\"color: #A6ACCD\">\"</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        </span><span style=\"color: #91B4D5\">type</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\">\"</span><span style=\"color: #5DE4C7\">text</span><span style=\"color: #A6ACCD\">\"</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        </span><span style=\"color: #91B4D5\">value</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{value}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        </span><span style=\"color: #91B4D5\">onChange</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{e </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #E4F0FBD0\">setValue</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">e</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">target</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">value</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\">}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      /></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      &#x3C;</span><span style=\"color: #5DE4C7\">PokemonCard</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">pokemonName</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{value} /></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">    &#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">  </span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span></code></pre>\n<h2 id=\"conclusion\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"><a href=\"#conclusion\" style=\"margin-right: 10px\">#</a></a>Conclusion</h2>\n<p>I think it's sometimes common to forget error handling in async JS code\n(useEffect async or many other contexts, etc), and there aren't e.g. lint rules\nto really help, leaving errors uncaught or handled poorly. If you don't\nmanually handle the error in the <code>useEffect</code>, your user probably will not see\nthat an error occured.</p>\n<p>In addition to this error handling rant, the other point of this article is you\nneed to reset your component state when props change, which in the code above,\nare the calls to setError(undefined) and setPokemonInfo(undefined) before I\nfetch a new Pokemon from the API.</p>\n<h2 id=\"footnote-0---web-perf-pontificating\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-0---web-perf-pontificating\"><a href=\"#footnote-0---web-perf-pontificating\" style=\"margin-right: 10px\">#</a></a>Footnote 0 - Web perf pontificating</h2>\n<p>I think sometimes, this manner of fetching data inside a component can lead to\nwhat some web-perf-experts refer to as waterfall. Can you get your state from\nyour parent? That might result in fewer individual requests made, but is also\nquite a different architecture.</p>\n<h2 id=\"footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error\"><a href=\"#footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error\" style=\"margin-right: 10px\">#</a></a>Footnote 1 - ErrorBoundaries don't automatically save you from manually handling error</h2>\n<p>You can also consider using an ErrorBoundary, but this does not automatically\ncatch errors that happen in e.g. a useEffect. If you want your ErrorBoundary to\nhandle your useEffect related error, then you can use something like this. This\nassumes a <code>react-error-boundary</code> type ErrorBoundary.</p>\n<pre class=\"shiki\" style=\"background-color: #1b1e28\"><code><span class=\"line\"><span style=\"color: #5DE4C7\">import </span><span style=\"color: #A6ACCD\">{</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #ADD7FF\">ErrorBoundary</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">}</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">from</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">react-error-boundary</span><span style=\"color: #A6ACCD\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #91B4D5\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #ADD7FF\">PokemonCard</span><span style=\"color: #A6ACCD\">({ </span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #A6ACCD\"> }</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> { pokemonName</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">string</span><span style=\"color: #A6ACCD\"> }) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #E4F0FB\">error</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #E4F0FB\">pokemonInfo</span><span style=\"color: #A6ACCD\">] </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">usePokemonInfo</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  if (</span><span style=\"color: #E4F0FB\">error</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #D0679D\">throw</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">error</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> (</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #E4F0FB\">&#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      {pokemonInfo </span><span style=\"color: #91B4D5\">?</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        &#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">          {pokemonInfo</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">name} is of type{</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #E4F0FB\">}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">          {pokemonInfo</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">types</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">map</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">t </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #E4F0FB\"> t</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">type</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FB\">name</span><span style=\"color: #A6ACCD\">).</span><span style=\"color: #E4F0FBD0\">join</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">, </span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\">}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        &#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      </span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">:</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">        &#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">>Loading...&#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      </span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #E4F0FB\">}</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">    &#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  )</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">export default </span><span style=\"color: #91B4D5\">function</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #ADD7FF\">App</span><span style=\"color: #A6ACCD\">()</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">{</span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">  </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">[</span><span style=\"color: #E4F0FB\">value</span><span style=\"color: #A6ACCD\">,</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #E4F0FB\">setValue</span><span style=\"color: #A6ACCD\">]</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #E4F0FBD0\">useState</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">oddish</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #5DE4C7\"> </span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">    </span><span style=\"color: #E4F0FB\">&#x3C;</span><span style=\"color: #5DE4C7\">ErrorBoundary</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">FallbackComponent</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{</span><span style=\"color: #A6ACCD\">({</span><span style=\"color: #E4F0FB\"> error </span><span style=\"color: #A6ACCD\">})</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #E4F0FB\"> &#x3C;</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">>{</span><span style=\"color: #A6ACCD\">`${</span><span style=\"color: #E4F0FB\">error</span><span style=\"color: #A6ACCD\">}`</span><span style=\"color: #E4F0FB\">}&#x3C;/</span><span style=\"color: #5DE4C7\">div</span><span style=\"color: #E4F0FB\">>}></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">      &#x3C;</span><span style=\"color: #5DE4C7\">PokemonCard</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #91B4D5\">pokemonName</span><span style=\"color: #91B4D5\">=</span><span style=\"color: #E4F0FB\">{value} /></span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">    &#x3C;/</span><span style=\"color: #5DE4C7\">ErrorBoundary</span><span style=\"color: #E4F0FB\">></span></span>\n<span class=\"line\"><span style=\"color: #5DE4C7\">  </span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span></code></pre>\n<p>Another trick, instead of throwing in the body of the component is throwing in\nthe callback form of the useState-setter. Then you wouldn't necessarily need to\nhave a separate useState for the error state, but you would then need an\nErrorBoundary or something to help display a nice error.</p>\n<pre class=\"shiki\" style=\"background-color: #1b1e28\"><code><span class=\"line\"><span style=\"color: #E4F0FBD0\">useEffect</span><span style=\"color: #A6ACCD\">(() </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #91B4D5\">let</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #D0679D\">false</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  ;(</span><span style=\"color: #5DE4C7\">async</span><span style=\"color: #A6ACCD\"> () </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #D0679D\">try</span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #767C9DB0\">// important: reset the error and item state of the component!</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #E4F0FBD0\">setPokemonInfo</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #D0679D\">undefined</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">data</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7C0\">await</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FBD0\">myfetch</span><span style=\"color: #A6ACCD\">(</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #A6ACCD\">`</span><span style=\"color: #5DE4C7\">https://pokeapi.co/api/v2/pokemon/</span><span style=\"color: #A6ACCD\">${</span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #A6ACCD\">}`</span><span style=\"color: #A6ACCD\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      )</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      if (</span><span style=\"color: #91B4D5\">!</span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #E4F0FBD0\">setPokemonInfo</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">data</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    } </span><span style=\"color: #D0679D\">catch</span><span style=\"color: #A6ACCD\"> (</span><span style=\"color: #E4F0FB\">e</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #E4F0FB\">console</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">error</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">e</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      if (</span><span style=\"color: #91B4D5\">!</span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #E4F0FBD0\">setPokemonInfo</span><span style=\"color: #A6ACCD\">(() </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">          </span><span style=\"color: #D0679D\">throw</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">e</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        })</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  })()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> () </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #E4F0FB\">cancelled</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7\">true</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}, [</span><span style=\"color: #E4F0FB\">pokemonName</span><span style=\"color: #A6ACCD\">])</span></span></code></pre>\n<h2 id=\"footnote-2-the-future-with-react-data-fetching\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2-the-future-with-react-data-fetching\"><a href=\"#footnote-2-the-future-with-react-data-fetching\" style=\"margin-right: 10px\">#</a></a>Footnote 2: The future with React data fetching</h2>\n<p>See <a href=\"https://github.com/reactjs/rfcs/pull/229\">https://github.com/reactjs/rfcs/pull/229</a></p>\n<p>This was just announced so there is a lot to unpack there, I can update this\nblog post if I come up with an analogous example using this RFC</p>"}},"__N_SSG":true}