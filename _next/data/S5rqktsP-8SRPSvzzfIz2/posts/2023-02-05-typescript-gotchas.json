{"pageProps":{"post":{"title":"Typescript gotchas","date":"2023-02-05","slug":"2023-02-05-typescript-gotchas","html":"<p>This is a short list of silly things that I wish Typescript would have caught\nfor me, but are silly logic errors</p>\n<h2 id=\"using-objectentries-accidentally-instead-of-objectfromentries\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#using-objectentries-accidentally-instead-of-objectfromentries\"><a href=\"#using-objectentries-accidentally-instead-of-objectfromentries\" style=\"margin-right: 10px\">#</a></a>Using <code>Object.entries</code> accidentally instead of <code>Object.fromEntries</code></h2>\n<p>Typescript will not complain if you use <code>Object.entries</code> instead of\n<code>Object.fromEntries</code></p>\n<pre class=\"shiki poimandres\" style=\"background-color: #1b1e28\"><code><span class=\"line\"><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">stuff</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #5DE4C7\">1</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #5DE4C7\">2</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #5DE4C7\">3</span><span style=\"color: #A6ACCD\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #767C9DB0; font-style: italic\">// woops, meant to use Object.fromEntries</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FB\">Object</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">entries</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">stuff</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">map</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">entry</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #E4F0FB\">entry</span><span style=\"color: #A6ACCD\">, {</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #ADD7FF\">id</span><span style=\"color: #A6ACCD\">:</span><span style=\"color: #ADD7FF\"> </span><span style=\"color: #E4F0FB\">entry</span><span style=\"color: #ADD7FF\"> </span><span style=\"color: #A6ACCD\">}]))</span></span></code></pre>\n<p><a href=\"https://www.typescriptlang.org/play?#code/FAYw9gdgzgLgBLArgM2QXgNoEYA0AmHAZgF1gB5AIwCsBTEGAOhohgCcBLGqACiVQYC2AQwAO3ZmwCeaAHwYJrSTjgBvdgBMAXAskBfYgEoDQA\">https://www.typescriptlang.org/play?#code/FAYw9gdgzgLgBLArgM2QXgNoEYA0AmHAZgF1gB5AIwCsBTEGAOhohgCcBLGqACiVQYC2AQwAO3ZmwCeaAHwYJrSTjgBvdgBMAXAskBfYgEoDQA</a></p>\n<h2 id=\"passing-garbage-to-the-third-argument-of-map-accidentally\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#passing-garbage-to-the-third-argument-of-map-accidentally\"><a href=\"#passing-garbage-to-the-third-argument-of-map-accidentally\" style=\"margin-right: 10px\">#</a></a>Passing garbage to the third argument of map accidentally</h2>\n<pre class=\"shiki poimandres\" style=\"background-color: #1b1e28\"><code><span class=\"line\"><span style=\"color: #91B4D5\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #ADD7FF\">doStuff</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">arr</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">number</span><span style=\"color: #A6ACCD\">[], </span><span style=\"color: #E4F0FB\">extra</span><span style=\"color: #91B4D5\">?:</span><span style=\"color: #A6ACCD\"> { sayHiToMom</span><span style=\"color: #91B4D5\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #A6ACCDC0\">boolean</span><span style=\"color: #A6ACCD\"> }) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  if (</span><span style=\"color: #E4F0FB\">extra</span><span style=\"color: #A6ACCD\">?.</span><span style=\"color: #E4F0FB\">sayHiToMom</span><span style=\"color: #A6ACCD\">) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #E4F0FB\">console</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">log</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #5DE4C7\">Hi mom</span><span style=\"color: #A6ACCD\">'</span><span style=\"color: #A6ACCD\">)</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  }</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #5DE4C7C0\">return</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">arr</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #91B4D5\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">stuff</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=</span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #5DE4C7\">1</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #5DE4C7\">2</span><span style=\"color: #A6ACCD\">, </span><span style=\"color: #5DE4C7\">3</span><span style=\"color: #A6ACCD\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #767C9DB0; font-style: italic\">// woops, meant to pass that as second argument to doStuff</span></span>\n<span class=\"line\"><span style=\"color: #E4F0FBD0\">doStuff</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">stuff</span><span style=\"color: #A6ACCD\">.</span><span style=\"color: #E4F0FBD0\">map</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #E4F0FB\">a</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">=></span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #E4F0FB\">a</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #91B4D5\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #5DE4C7\">2</span><span style=\"color: #A6ACCD\">, {</span><span style=\"color: #E4F0FB\"> </span><span style=\"color: #ADD7FF\">sayHiToMom</span><span style=\"color: #A6ACCD\">:</span><span style=\"color: #ADD7FF\"> </span><span style=\"color: #5DE4C7\">true</span><span style=\"color: #ADD7FF\"> </span><span style=\"color: #A6ACCD\">}))</span></span></code></pre>\n<p><a href=\"https://www.typescriptlang.org/play?#code/FAMwrgdgxgLglgewgAgCYIMozCEAKAQwCciAuCMAWwCMBTIgbQF0AaZWgDxiIIH5SA3gGcCATwAScACoIAsgkqlqCBABtaBCAF8AlMgHBkyOPk7c+AOhETpchXoNGjUJELW0LqhAHM8AcklkSgU-HUNkLXCiWmwiFGIiYEjgFwghGGR0nBAAXgYARhYAJhYAZiZgdCxsvCzcC0oCAAdCHIA+AgAqEuExSRl5RW4wWl0dIA\">https://www.typescriptlang.org/play?#code/FAMwrgdgxgLglgewgAgCYIMozCEAKAQwCciAuCMAWwCMBTIgbQF0AaZWgDxiIIH5SA3gGcCATwAScACoIAsgkqlqCBABtaBCAF8AlMgHBkyOPk7c+AOhETpchXoNGjUJELW0LqhAHM8AcklkSgU-HUNkLXCiWmwiFGIiYEjgFwghGGR0nBAAXgYARhYAJhYAZiZgdCxsvCzcC0oCAAdCHIA+AgAqEuExSRl5RW4wWl0dIA</a></p>\n<p>This one would be difficult for typescript to catch, the second arg is\n\"thisArg\", what the callback refers to as <code>this</code></p>"}},"__N_SSG":true}