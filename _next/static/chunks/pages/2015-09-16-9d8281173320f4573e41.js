(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{3905:function(e,t,n){"use strict";n.d(t,{kt:function(){return f}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"===typeof e?e(t):a(a({},t),e)),n},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,p=u(e,["components","mdxType","originalType","parentName"]),f=l(n),m=o,g=f["".concat(s,".").concat(m)]||f[m]||c[m]||i;return n?r.createElement(g,a(a({ref:t},p),{},{components:n})):r.createElement(g,a({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"===typeof e||o){var i=n.length,a=new Array(i);a[0]=p;var u={};for(var s in t)hasOwnProperty.call(t,s)&&(u[s]=t[s]);u.originalType=e,u.mdxType="string"===typeof e?e:o,a[1]=u;for(var l=2;l<i;l++)a[l]=n[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},4995:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(5893);function o(e){var t=e.children;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("a",{href:"/",children:"Return home"}),(0,r.jsx)("img",{src:"/avatar.png",style:{height:"2em",marginLeft:"1em"}})]}),(0,r.jsx)("div",{className:"blog",children:t})]})}},8191:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(159),o=n(219),i=(n(7294),n(3905)),a=n(4995),u=["components"],s={},l=function(e){var t=e.children;return(0,i.kt)(a.default,null,t)};function c(e){var t=e.components,n=(0,o.Z)(e,u);return(0,i.kt)(l,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",null,"Fixing spiky CPU issues with Tomcat"),(0,i.kt)("p",null,"The symptoms of spiking that we saw were simply that after light usage\nof the applications, the CPU usage would start spiking and rapidly cycle\nfrom many CPU cores (e.g. 2000% CPU usage) back to 0% CPU for no\napparent reason.\xa0"),(0,i.kt)("p",null,"We now know this was due to memory issues and garbage collection, but it\nwas confusing because it wasn't strictly showing up as GC usage in\nJVisualVm (the GC usage, blue spikes on the left in fig 1, are small,\nbut the orange spikes are large, even though the memory issues are the\nproblem)"),(0,i.kt)("p",null,'Here is what it looked like during spiking (obviously, pushing the\nmemory limits here, a linked in article suggests having 6GB of\xa0"newgen"\nmemory, so on top of the old gen, tomcat needs a bunch more for the\nnewgen to make things happy.'),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"/media/129241954103_0.png",alt:null})),(0,i.kt)("p",null,"Here is what it looks like when it is not spiking"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"/media/129241954103_1.png",alt:null})),(0,i.kt)("p",null,"Edit: See this follow up post for showing that increasing memory helps\n",(0,i.kt)("a",{parentName:"p",href:"http://searchvoidstar.tumblr.com/post/131229569383/tomcat-memory-debugging"},"http://searchvoidstar.tumblr.com/post/131229569383/tomcat-memory-debugging")),(0,i.kt)("p",null,"::: {#footer}\n","[ September 16th, 2015 6:37pm ]","{#timestamp} ","[tomcat]","{.tag} ","[java]","{.tag}\n","[programming]","{.tag} ","[coding]","{.tag} ","[troubleshooting]","{.tag}\n","[intermine]","{.tag} ","[bioinformatics]","{.tag}\n:::"))}c.isMDXComponent=!0},3708:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/2015-09-16",function(){return n(8191)}])},159:function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{Z:function(){return r}})},219:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[774,888,179],(function(){return t=3708,e(e.s=t);var t}));var t=e.O();_N_E=t}]);