<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Misc scribblings - Blog archive</title><meta name="next-head-count" content="3"/><link rel="shortcut icon" href="favicon.ico"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><meta name="description" content="Blogging for the future"/><link rel="preload" href="/_next/static/css/97dc5fe527f5d592.css" as="style"/><link rel="stylesheet" href="/_next/static/css/97dc5fe527f5d592.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8c0202d61bc61a66.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-37909fad120a8402.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4496871bbc04f0bd.js" defer=""></script><script src="/_next/static/chunks/996-e3d2aceaf8a36213.js" defer=""></script><script src="/_next/static/chunks/pages/archive-406ab6504d16c1d7.js" defer=""></script><script src="/_next/static/ytiNZVI_Rh2R2rVLudOS-/_buildManifest.js" defer=""></script><script src="/_next/static/ytiNZVI_Rh2R2rVLudOS-/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><main><div><div style="margin-bottom:100px"><a href="/">Misc scribbles</a></div><h1>Blog archive</h1><section><h1>Posts</h1><ul><li><a href="/posts/2023-03-25-commandlinestuff">2023-03-25<!-- --> - <!-- -->Command line productivity stuff</a></li><li><a href="/posts/2023-02-05-typescript-gotchas">2023-02-05<!-- --> - <!-- -->Things typescript didn&#x27;t catch that should probably be lint rules</a></li><li><a href="/posts/2022-12-27-devinterrupted">2022-12-27<!-- --> - <!-- -->The devinterrupted&#x27;ening of /r/programming</a></li><li><a href="/posts/2022-11-20-the-react-tutorial-i-wish-i-had">2022-11-20<!-- --> - <!-- -->The React tutorial I wish I had</a></li><li><a href="/posts/2022-10-10-reactstate">2022-10-10<!-- --> - <!-- -->Handling component state with React...you gotta reset it sometimes</a></li><li><a href="/posts/2022-10-08-ffmpeg-slideshow">2022-10-08<!-- --> - <!-- -->Making an audio slideshow with ffmpeg</a></li><li><a href="/posts/2022-09-05-rustmusicplayer">2022-09-05<!-- --> - <!-- -->Creating a music player using Rust/GTK4 - fml9000</a></li><li><a href="/posts/2022-08-26-twitterbot">2022-08-26<!-- --> - <!-- -->Making a twitter bot in the year 2022 with node.js</a></li><li><a href="/posts/2022-08-22-rustwasm">2022-08-22<!-- --> - <!-- -->Using Rust/WASM in a monorepo with create-react-app</a></li><li><a href="/posts/2022-08-21-vacation">2022-08-21<!-- --> - <!-- -->Photos of vacation</a></li><li><a href="/posts/2022-07-29-happy">2022-07-29<!-- --> - <!-- -->Photos of life</a></li><li><a href="/posts/2022-07-08-pinky">2022-07-08<!-- --> - <!-- -->Watch out for your pinky finger (AND elbow posture)</a></li><li><a href="/posts/2022-05-27-youmaynotneedabundler">2022-05-27<!-- --> - <!-- -->You may not need a bundler for your NPM library</a></li><li><a href="/posts/2022-05-10-performanceprofiling">2022-05-10<!-- --> - <!-- -->Notes on performance profiling JS applications</a></li><li><a href="/posts/2022-05-04-findseddangerous">2022-05-04<!-- --> - <!-- -->Using find . -exec sed is dangerous in a git repo</a></li><li><a href="/posts/2022-03-02-dont-let-it-get-to-you">2022-03-03<!-- --> - <!-- -->Cognitive reframing</a></li><li><a href="/posts/2022-02-26-memoize-async">2022-02-26<!-- --> - <!-- -->Memoizing async functions so that you don&#x27;t cache errors</a></li><li><a href="/posts/2022-02-24-ukraine">2022-02-24<!-- --> - <!-- -->Ukraine</a></li><li><a href="/posts/2022-02-15-noise">2022-02-15<!-- --> - <!-- -->Back when I was a noise musician...</a></li><li><a href="/posts/2022-02-06-sv-sam">2022-02-06<!-- --> - <!-- -->Structural variants and the SAM format - the long (reads) and short (reads) of it</a></li><li><a href="/posts/2021-12-31-npm-package">2021-12-31<!-- --> - <!-- -->How to make your own npm package with typescript</a></li><li><a href="/posts/2021-12-26-nextjs">2021-12-26<!-- --> - <!-- -->My next.js static blog setup</a></li><li><a href="/posts/2021-10-30-spooky">2021-10-30<!-- --> - <!-- -->A spooky error when you have a string bigger than 512MB in Chrome</a></li><li><a href="/posts/2021-10-05-jest">2021-10-05<!-- --> - <!-- -->Jest parallelization, globals, mocks, and squawkless tests</a></li><li><a href="/posts/2021-09-05-typescript">2021-09-05<!-- --> - <!-- -->Decrease your idle CPU usage when developing typescript apps with this one weird environment variable</a></li><li><a href="/posts/2021-08-15-map-limit">2021-08-15<!-- --> - <!-- -->An amazing error message if you put more than 2^24 items in a JS Map object</a></li><li><a href="/posts/2021-07-27-npm-dependencies">2021-07-27<!-- --> - <!-- -->Do you understand your NPM dependencies?</a></li><li><a href="/posts/2020-12-26-pt2">2020-12-26<!-- --> - <!-- -->Making a HTTPS accessible S3 powered static site with CloudFront+route 53</a></li><li><a href="/posts/2020-12-26">2020-12-26<!-- --> - <!-- -->Making a serverless website for photo and video upload pt. 2</a></li><li><a href="/posts/2020-12-24">2020-12-24<!-- --> - <!-- -->Making a serverless website for photo upload pt. 1</a></li><li><a href="/posts/2020-07-04">2020-07-04<!-- --> - <!-- -->Challenges I have faced learning React</a></li><li><a href="/posts/2020-06-03">2020-06-03<!-- --> - <!-- -->Misconceptions your team might have during The Big Rewrite</a></li><li><a href="/posts/2018-12-17">2018-12-17<!-- --> - <!-- -->Behind the release - the story of the bugs and features in JBrowse 1.16.0</a></li><li><a href="/posts/2017-04-21">2017-04-21<!-- --> - <!-- -->Problems that I experienced with the HPCC</a></li><li><a href="/posts/2017-03-12">2017-03-12<!-- --> - <!-- -->How I learned to hate ORM (especially for data import scripts)</a></li><li><a href="/posts/2017-02-16">2017-02-16<!-- --> - <!-- -->Plotting a coordinate on the screen</a></li><li><a href="/posts/2016-11-10">2016-11-10<!-- --> - <!-- -->Creating a JBrowse plugin</a></li><li><a href="/posts/2016-06-20">2016-06-20<!-- --> - <!-- -->Installing clamav on OSX</a></li><li><a href="/posts/2016-06-17">2016-06-17<!-- --> - <!-- -->Querying InterMine databases using R</a></li><li><a href="/posts/2016-04-23">2016-04-23<!-- --> - <!-- -->How to make your resume.json or resume-cli look great</a></li><li><a href="/posts/2016-04-19">2016-04-19<!-- --> - <!-- -->Creating a testing framework for JBrowse plugins</a></li><li><a href="/posts/2016-04-17">2016-04-17<!-- --> - <!-- -->Creating a docker image</a></li><li><a href="/posts/2016-04-06">2016-04-06<!-- --> - <!-- -->Basic command line productivity tricks and learning experiences</a></li><li><a href="/posts/2016-03-28">2016-03-28<!-- --> - <!-- -->Running nginx on containerised travis-CI pt 2</a></li><li><a href="/posts/2016-03-05">2016-03-05<!-- --> - <!-- -->On over-reproducibility</a></li><li><a href="/posts/2015-12-17">2015-12-17<!-- --> - <!-- -->Cheating in your computer science class by copying from stackoverflow</a></li><li><a href="/posts/2015-10-22">2015-10-22<!-- --> - <!-- -->Killing postgres the hard way</a></li><li><a href="/posts/2015-10-15">2015-10-15<!-- --> - <!-- -->Tomcat memory debugging</a></li><li><a href="/posts/2015-09-16">2015-09-16<!-- --> - <!-- -->Fixing spiky CPU issues and unresponsiveness with Tomcat</a></li><li><a href="/posts/2015-08-30">2015-08-30<!-- --> - <!-- -->Weekend project - graphing tumblr reblogs using cytoscape.js</a></li><li><a href="/posts/2015-03-02">2015-03-02<!-- --> - <!-- -->Creating high-resolution screenshots (of jbrowse) with phantomJS</a></li><li><a href="/posts/2015-02-01">2015-02-01<!-- --> - <!-- -->Post graduation survey</a></li><li><a href="/posts/2014-05-22">2014-05-22<!-- --> - <!-- -->High DPI rendering on HTML5 canvas - some problems and solutions</a></li></ul></section></div></main></div><footer style="margin-top:100px"><a href="/">Home</a> <a href="/archive">Blog archive</a> <a href="https://github.com/cmdcolin/">Github</a> <a href="https://twitter.com/cmdcolin">Twitter</a> <a href="/projects">Projects</a><a href="/photos">Photos</a> <a href="/rss.xml">RSS</a><a href="/about">About</a></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"allPosts":[{"title":"Command line productivity stuff","date":"2023-03-25","slug":"2023-03-25-commandlinestuff","html":"\u003cp\u003eIn 2016, I wrote a list of things that I found to be useful or interesting\ninformation about the work I did at the time\n\u003ca href=\"https://cmdcolin.github.io/posts/2016-04-06\"\u003ehttps://cmdcolin.github.io/posts/2016-04-06\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI thought it would be interesting to do the same now\u003c/p\u003e\n\u003ch2 id=\"aliases\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#aliases\"\u003e\u003ca href=\"#aliases\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAliases\u003c/h2\u003e\n\u003cp\u003eI use many \"double tap\" aliases for lots of things. They are not very\n'mnemonic', but I like the action of double tapping a key. Here is a list of\nsome of my favorites. I don't expect you will like the shortenings\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eqq\u003c/code\u003e - runs \u003ccode\u003eexit\u003c/code\u003e to exit shell\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ess\u003c/code\u003e - runs \u003ccode\u003eyarn start\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eyy\u003c/code\u003e - runs \u003ccode\u003eyarn lint\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebb\u003c/code\u003e - one of my favorite non-obvious ones, it lists all git branches recently\nused in a fzf window\n\u003ccode\u003egit branch --sort=-committerdate| fzf --height=20% |xargs git checkout\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eccc\u003c/code\u003e - runs \u003ccode\u003eyarn test --maxWorkers=50%\u003c/code\u003e - my audio glitches out without the\nmaxWorkers\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eg\u003c/code\u003e - \u003ccode\u003egit status\u003c/code\u003e. I will type out \u003ccode\u003egit\u003c/code\u003e for other subcommands, but I check\ngit status a lot and didn't end up liking one letter \u003ccode\u003eg\u003c/code\u003e + subcommand added\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003egd\u003c/code\u003e - \u003ccode\u003egit diff\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003egggg\u003c/code\u003e - runs \u003ccode\u003egit add . \u0026#x26;\u0026#x26; git commit --amend --no-edit\u003c/code\u003e so I can keep adding\nto the last commit instead of making new commits\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAlso recommend \u003ca href=\"https://github.com/rupa/z\"\u003ehttps://github.com/rupa/z\u003c/a\u003e, very quickly jump to commonly used\ndirectories. I alias \u003ccode\u003ez\u003c/code\u003e to \u003ccode\u003ep\u003c/code\u003e because I try to type with my right hand.\u003c/p\u003e\n\u003ch2 id=\"neovimeditor-stuff\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#neovimeditor-stuff\"\u003e\u003ca href=\"#neovimeditor-stuff\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eNeovim/editor stuff\u003c/h2\u003e\n\u003cp\u003eI use neovim, I run lots of stuff off nightly, and my setup changes a lot just\nas I like to tweak things, but here are some currently nice things I like about\nmy workflow\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eVisual select block, use \u003ccode\u003egq\u003c/code\u003e to wrap code comments in vim (or \u003ccode\u003egw\u003c/code\u003e with lsp\nenabled, see reason why \u003ccode\u003egw\u003c/code\u003e here\n\u003ca href=\"https://vi.stackexchange.com/questions/39200/wrapping-comment-in-visual-mode-not-working-with-gq\"\u003ehttps://vi.stackexchange.com/questions/39200/wrapping-comment-in-visual-mode-not-working-with-gq\u003c/a\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAdd \u003ccode\u003eproseWrap: always\u003c/code\u003e to your .prettierrc to wrap e.g. the lines in markdown\nfiles \u003ca href=\"https://prettier.io/docs/en/options.html#prose-wrap\"\u003ehttps://prettier.io/docs/en/options.html#prose-wrap\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSetting up \"LSP support\" in vim can be hard, but rewarding. I went through a\nwhole gammut of using w0rp/ale, then coc.nvim, and then now 'built-in neovim\nLSP'. I like it, but it was to me not easy to set up. I recommend\n\u003ca href=\"https://github.com/VonHeikemen/lsp-zero.nvim\"\u003ehttps://github.com/VonHeikemen/lsp-zero.nvim\u003c/a\u003e as it makes it easier\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSetup format on save. There are many ways to do it, but try to find out some\nway that works for you! For me, I use formatter.nvim to run prettier on most\nweb dev filetypes. I use formatter.nvim and not a LSP-based format like\nnull-ls because I just haven't gotten it to work with null-ls, but I don't\nthink the formatter.nvim is a bad approach either -- formatter.nvim is a bit\n'simpler' compared to LSP based setups\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTo search files in a current directory, I hit \u003ccode\u003e,gg\u003c/code\u003e (comma is my leader key)\nwhich triggers\n\u003ccode\u003emap('n', '\u0026#x3C;leader\u003egg', '\u0026#x3C;cmd\u003eTelescope git_files\u0026#x3C;cr\u003e', default_opts)\u003c/code\u003e, to\nsearch by text, I use \u003ccode\u003e,ff\u003c/code\u003e (comma is my leader key) which triggers\n\u003ccode\u003emap('n', '\u0026#x3C;leader\u003eff', '\u0026#x3C;cmd\u003eTelescope live_grep\u0026#x3C;cr\u003e', default_opts)\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eI do not use a 'sidebar file browser' like nerdtree or similar. As mentioned\nabove, I primarily navigate with \u003ccode\u003e,gg\u003c/code\u003e but I also use \u003ccode\u003evim-vinegar\u003c/code\u003e, which\nlet's me hit \u003ccode\u003e-\u003c/code\u003e and that opens a file browser of the current directory, and I\ncan hop around and hit keys to rename (R), delete (D), create (%) new files in\nthe directory. I often go back to the zsh shell to do more sophisticated\noperations\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSnippets: to \u003ccode\u003econsole.log\u003c/code\u003e, I created a snippet where I can type \u003ccode\u003ecl\u003c/code\u003e, then it\nwill popup an autocomplete window, which let's me choose to insert\n\u003ccode\u003econsole.log({|})\u003c/code\u003e or \u003ccode\u003econsole.log(|)\u003c/code\u003e where | indicates where the cursor goes\nafter hitting enter. The \u003ccode\u003econsole.log({})\u003c/code\u003e is very handy because if you fill\nin \u003ccode\u003econsole.log({variable})\u003c/code\u003e then the output will be \u003ccode\u003e{variable:5}\u003c/code\u003e so you get\nthe variable name and value easily (ref\n\u003ca href=\"https://github.com/cmdcolin/dotfiles/blob/master/lua/snips.lua\"\u003ehttps://github.com/cmdcolin/dotfiles/blob/master/lua/snips.lua\u003c/a\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"typescript\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#typescript\"\u003e\u003ca href=\"#typescript\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eTypescript\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eUse \u003ccode\u003ets-expect-error\u003c/code\u003e instead of \u003ccode\u003ets-ignore\u003c/code\u003e -- probably a better intention\nmost of the time\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eUse type inference as much as possible -- personal opinion but even things\nlike explicit function return type are often worse than the inferred type\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"web-dev\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#web-dev\"\u003e\u003ca href=\"#web-dev\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWeb dev\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTry firefox profiler, it has built-in flamegraph style visualization. For\nChrome profiler, you can use an external tool \u003ca href=\"https://speedscope.app/\"\u003ehttps://speedscope.app/\u003c/a\u003e for\nsimilar\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"tmux\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#tmux\"\u003e\u003ca href=\"#tmux\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eTmux\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eCtrl+]\u003c/code\u003e is my prefix in tmux. I use my right hand entirely to type it, then I\nsplit horizontally with \u003ccode\u003e-\u003c/code\u003e and vertically with \u003ccode\u003e=\u003c/code\u003e. My general coding\ngenerally has my screen split vertically with a horizontal on one or both\nsides\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAdd the weather in your tmux footer I use\n\u003ccode\u003eset -g status-left '#(curl \"wttr.in/Albuquerque?u\u0026#x26;format=3\") ' \u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eEnable truecolors in tmux! On my machine, I needed the following in my\ntmux.conf:\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003eset -g default-terminal \"tmux-256color\"\nset -ag terminal-overrides \",xterm-256color:RGB\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWithout this, all the neovim color schemes I tried looked not just subtly off,\nbut significantly off, because it had only 256 colors without it (way less than\nthe millions with true color). Resources\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://gist.github.com/andersevenrud/015e61af2fd264371032763d4ed965b6\"\u003ehttps://gist.github.com/andersevenrud/015e61af2fd264371032763d4ed965b6\u003c/a\u003e\n\u003ca href=\"https://jdhao.github.io/2018/10/19/tmux_nvim_true_color/\"\u003ehttps://jdhao.github.io/2018/10/19/tmux_nvim_true_color/\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"music-related\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#music-related\"\u003e\u003ca href=\"#music-related\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eMusic related\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eyda\u003c/code\u003e - alias for getting a song from youtube\n\u003ccode\u003e\"youtube-dl -f 'bestaudio[ext=m4a]' \"\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evaporwave\u003c/code\u003e - a function to slow down the audio for a track with ffmpeg\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003evaporwave()\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003effmpeg\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-i\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-af\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easetrate=44100*\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:-\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0.66\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e,aresample=44100\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"`\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003ebasename\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$1\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e.m4a\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e.vaporwave.m4a\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eexample usage:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003evaporwave file.mp3 # default slowdown factor of 0.66, outputs file.vaporwave.mp3\nvaporwave file.mp3 0.5 # custom slowdown factor, outputs file.vaporwave.mp3\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"audio-players\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#audio-players\"\u003e\u003ca href=\"#audio-players\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAudio players\u003c/h2\u003e\n\u003cp\u003eI worked on a couple projects to make custom music players to scratch my own\nitch. I made a Rust one, to try to replace foobar2000, hoping to go back to the\ndays of yore when I used a desktop player, and then a web based one when I\nrealized I just listen to alot of youtube anyways now\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRust+GTK4 app \u003ca href=\"https://github.com/cmdcolin/fml9000\"\u003ehttps://github.com/cmdcolin/fml9000\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eWeb based \u003ca href=\"https://cmdcolin.github.io/ytshuffle/\"\u003ehttps://cmdcolin.github.io/ytshuffle/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eCurrently attempting to get the web based version approved by youtube compliance\nbecause they give you quite a limited number of API requests, so unless I want\nother users of my app to supply their own key, it seems prudent to get it\napproved\u003c/p\u003e\n\u003ch2 id=\"footnote-1---background\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1---background\"\u003e\u003ca href=\"#footnote-1---background\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1 - Background\u003c/h2\u003e\n\u003cp\u003eBefore I graduated college, I did a fair amount of command line, but also used a\nlot of IDEs\u003c/p\u003e\n\u003cp\u003eWhen I started my first job in 2013, I had to ssh into machines a lot where I\nran data analysis and maintained websites. This made me get much more familiar\nwith the command line.\u003c/p\u003e\n\u003cp\u003eI used vim without any plugins, pretty raw experience, hand editing indents,\netc. Example of a vimrc I used in 2018, first commit to my dotfiles repo\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/cmdcolin/dotfiles/commit/54ec820891da67faddb82367d581dd39d1806d78#diff-7ab9074b6049f19f707c3afd253acaed88cef43694799887ba8c01c320bc421e\"\u003ehttps://github.com/cmdcolin/dotfiles/commit/54ec820891da67faddb82367d581dd39d1806d78#diff-7ab9074b6049f19f707c3afd253acaed88cef43694799887ba8c01c320bc421e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eMy setup has evolved many times since then. Things change! Even now, I am not\nvery vim-literate and don't understand most other people's dotfiles, but it's a\ncontinuous learning process, and I also hope blogposts like this might help\npeople understand where I come from\u003c/p\u003e"},{"title":"Things typescript didn't catch that should probably be lint rules","date":"2023-02-05","slug":"2023-02-05-typescript-gotchas","html":"\u003cp\u003eThis is a short list of silly things that I wish Typescript would have caught\nfor me, but are silly logic errors\u003c/p\u003e\n\u003ch2 id=\"using-objectentries-accidentally-instead-of-objectfromentries\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#using-objectentries-accidentally-instead-of-objectfromentries\"\u003e\u003ca href=\"#using-objectentries-accidentally-instead-of-objectfromentries\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eUsing \u003ccode\u003eObject.entries\u003c/code\u003e accidentally instead of \u003ccode\u003eObject.fromEntries\u003c/code\u003e\u003c/h2\u003e\n\u003cp\u003eTypescript will not complain if you use \u003ccode\u003eObject.entries\u003c/code\u003e instead of\n\u003ccode\u003eObject.fromEntries\u003c/code\u003e\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// woops, meant to use Object.fromEntries\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003eObject\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eentries\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eentry\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eentry\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, {\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eid\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eentry\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}]))\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"https://www.typescriptlang.org/play?#code/FAYw9gdgzgLgBLArgM2QXgNoEYA0AmHAZgF1gB5AIwCsBTEGAOhohgCcBLGqACiVQYC2AQwAO3ZmwCeaAHwYJrSTjgBvdgBMAXAskBfYgEoDQA\"\u003eplayground\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eSummary: should probably be a lint rule (a \"types required\" lint rule, a la\n@typescript-eslint) not to accept arrays for Object.entries\u003c/p\u003e\n\u003cp\u003eUpdate 02-27-23: Proposing this rule here \u003ca href=\"https://github.com/typescript-eslint/typescript-eslint/issues/6537\"\u003ehttps://github.com/typescript-eslint/typescript-eslint/issues/6537\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"passing-garbage-to-the-second-argument-of-arrayprototypemap-accidentally\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#passing-garbage-to-the-second-argument-of-arrayprototypemap-accidentally\"\u003e\u003ca href=\"#passing-garbage-to-the-second-argument-of-arrayprototypemap-accidentally\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003ePassing garbage to the second argument of Array.prototype.map accidentally\u003c/h2\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edoStuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003earr\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003enumber\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[], \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eextra\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e { sayHiToMom\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eboolean\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eextra\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e?.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esayHiToMom\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003elog\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHi mom\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003earr\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// woops, meant to pass that as second argument to doStuff\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edoStuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, {\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esayHiToMom\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}))\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"https://www.typescriptlang.org/play?#code/FAMwrgdgxgLglgewgAgCYIMozCEAKAQwCciAuCMAWwCMBTIgbQF0AaZWgDxiIIH5SA3gGcCATwAScACoIAsgkqlqCBABtaBCAF8AlMgHBkyOPk7c+AOhETpchXoNGjUJELW0LqhAHM8AcklkSgU-HUNkLXCiWmwiFGIiYEjgFwghGGR0nBAAXgYARhYAJhYAZiZgdCxsvCzcC0oCAAdCHIA+AgAqEuExSRl5RW4wWl0dIA\"\u003eplayground\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThis one would be difficult for typescript to catch, the second arg is\n\"thisArg\", what the callback refers to as \u003ccode\u003ethis\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eSummary: should probably be a lint rule to avoid this second arg, as it is\nobscure\u003c/p\u003e\n\u003cp\u003eUpdate 02-27-23: This lint rule exists already :)\n\u003ca href=\"https://github.com/sindresorhus/eslint-plugin-unicorn/blob/main/docs/rules/no-array-method-this-argument.md#disallow-using-the-this-argument-in-array-methods\"\u003ehttps://github.com/sindresorhus/eslint-plugin-unicorn/blob/main/docs/rules/no-array-method-this-argument.md#disallow-using-the-this-argument-in-array-methods\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"any-others\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#any-others\"\u003e\u003ca href=\"#any-others\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAny others?\u003c/h2\u003e\n\u003cp\u003eAny other ones that you find in your work? This is just from the past week for\nme :)\u003c/p\u003e\n\u003cp\u003eI will need to learn how to make eslint rules!\u003c/p\u003e"},{"title":"The devinterrupted'ening of /r/programming","date":"2022-12-27","slug":"2022-12-27-devinterrupted","html":"\u003cp\u003eComplaining about spammers is kind of a futile endeavor, and in this case, it\neven seems that there are people behind it which kinda makes me feel bad to\ncomplain about it, but I keep seeing this spam-type substance on my sacred\nforums.\u003c/p\u003e\n\u003cp\u003eMany of these posts come from a blog called devinterrupted. They post things\nrelated to \"engineering management\" type topics. And, they often \"hit a chord\"\nand get highly upvoted and replied to. It's often the type of thing everyone can\nadd their two cents on, or offload some steam, or pontificate.\u003c/p\u003e\n\u003cp\u003eThis wouldn't all be so bad, but it is sometimes posted with formulaic titles,\ncreated by sock puppet accounts(?) and promoting a specific company (linearB). I\ngathered as many posts from them as I can, helpfully grouped into clickbait-y\ncategories.\u003c/p\u003e\n\u003cp\u003eUpdate 2023-01-06: a Reddit user reached out to me who is quite knowledgeable\nabout astroturfing campaigns and confirmed my suspicions here that it's all sock\npuppet accounts\u003c/p\u003e\n\u003ch2 id=\"titleslinks-to-posts\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#titleslinks-to-posts\"\u003e\u003ca href=\"#titleslinks-to-posts\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eTitles/links to posts\u003c/h2\u003e\n\u003ch3 id=\"hot-takes-and-pulling-no-punches\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#hot-takes-and-pulling-no-punches\"\u003e\u003ca href=\"#hot-takes-and-pulling-no-punches\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eHot takes and pulling no punches\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e“There should never be coding exercises in technical interviews. It favors\npeople who have time to do them. Disfavors people with FT jobs and families.\nPlus, your job won’t have people over your shoulder watching you code.” My\nfavorite hot take from a panel on 'Treating Devs Like Human Beings.'\n\u003ca href=\"https://www.reddit.com/r/programming/comments/zkj6pb/there_should_never_be_coding_exercises_in/\"\u003ehttps://www.reddit.com/r/programming/comments/zkj6pb/there_should_never_be_coding_exercises_in/\u003c/a\u003e\n(14k comments, 8.7k, Dec 12 2022, one of the most upvoted articles of the year\non reddit /r/programming)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e“We all use products that are amazing when the company is like 5 devs, just\nbuilding what makes sense. They grow \u0026#x26; through failures of leadership, they\nend up with bloated product teams that don't understand the work of\ndevelopers.\" Former GitHub VP pulling no punches in recent pod on state of\ntech (413 comments, 3.2k, Dec 20, 2022)\n\u003ca href=\"https://www.reddit.com/r/programming/comments/zr9tsr/we_all_use_products_that_are_amazing_when_the/\"\u003ehttps://www.reddit.com/r/programming/comments/zr9tsr/we_all_use_products_that_are_amazing_when_the/\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"tils\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#tils\"\u003e\u003ca href=\"#tils\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eTIL's\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eTIL That developers in larger companies spend 2.5 more hours a week/10 more\nhours a month in meetings than devs in smaller orgs. It's been dubbed the\n\"coordination tax.\"\n(\u003ca href=\"https://www.reddit.com/r/programming/comments/zg6ec9/til_that_developers_in_larger_companies_spend_25/\"\u003ehttps://www.reddit.com/r/programming/comments/zg6ec9/til_that_developers_in_larger_companies_spend_25/\u003c/a\u003e,\n517 comments, 4.5k, Dec 8, 2022)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTIL 9 out of 10 devs said they would give up 24% of their lifetime earnings if\nthey got more meaning in their jobs. Also, 84% say they're disengaged at work\nand don't trust their company leaders.\n\u003ca href=\"https://www.reddit.com/r/webdev/comments/u9ogin/til_9_out_of_10_devs_said_they_would_give_up_24/\"\u003ehttps://www.reddit.com/r/webdev/comments/u9ogin/til_9_out_of_10_devs_said_they_would_give_up_24/\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTIL about the \"Intent-Perception Gap\" in programming. Best exemplified when a\nCTO or manager casually suggests something to their developers they take it as\na new work commandment or direction for their team.\n\u003ca href=\"https://www.reddit.com/r/programming/comments/u7dv5m/til_about_the_intentperception_gap_in_programming/\"\u003ehttps://www.reddit.com/r/programming/comments/u7dv5m/til_about_the_intentperception_gap_in_programming/\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTIL after auditing 2,000 dev teams, data scientists found that programmers are\nwaiting on average 4+ days for their review requests to be picked up by\nother ... (partial result from google, post super deleted\n\u003ca href=\"https://www.reddit.com/r/gamedev/comments/xh649i/deleted_by_user/\"\u003ehttps://www.reddit.com/r/gamedev/comments/xh649i/deleted_by_user/\u003c/a\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cool-convos\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#cool-convos\"\u003e\u003ca href=\"#cool-convos\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eCool convos\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\"Dev burnout drastically decreases when you actually ship things regularly.\nBurnout is caused by crap like toil, rework and spending too much mental\nenergy on bottlenecks.\" Cool conversation with the head engineer of Slack on\nhow burnout is caused by all the things that keep devs from coding.\n(\u003ca href=\"https://www.reddit.com/r/programming/comments/vold1e/dev_burnout_drastically_decreases_when_you/\"\u003ehttps://www.reddit.com/r/programming/comments/vold1e/dev_burnout_drastically_decreases_when_you/\u003c/a\u003e\nalso\n\u003ca href=\"https://www.reddit.com/r/programming/comments/zwjxsf/dev_burnout_drastically_decreases_when_your_team/\"\u003ehttps://www.reddit.com/r/programming/comments/zwjxsf/dev_burnout_drastically_decreases_when_your_team/\u003c/a\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\"Dev managers' most overlooked responsibility is to treat dev bandwidth as a\nvaluable, limited resource. It's the highest leverage for every\nsoftware-driven company and needs to be calculated as such.\" Cool convo with\nStripe's top engineer on how the dev org connects to the rest of the company\n\u003ca href=\"https://www.reddit.com/r/webdev/comments/wwsrw5/dev_managers_most_overlooked_responsibility_is_to/\"\u003ehttps://www.reddit.com/r/webdev/comments/wwsrw5/dev_managers_most_overlooked_responsibility_is_to/\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\"Developers do nothing good after 45 hours of work.\" Fun conversation with\nhead developer of Netflix on the dumbest things engineering orgs do to kill\nproductivity - they really take a crap on retros. (Post deleted\n\u003ca href=\"https://www.reddit.com/r/Python/comments/umhf4v/developers_do_nothing_good_after_45_hours_of_work/\"\u003ehttps://www.reddit.com/r/Python/comments/umhf4v/developers_do_nothing_good_after_45_hours_of_work/\u003c/a\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"studies-and-interesting-cases\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#studies-and-interesting-cases\"\u003e\u003ca href=\"#studies-and-interesting-cases\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStudies and interesting cases\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e“The longer a developer assumes a code review will take, the longer they will\ntake to respond to it.” Interesting case for adding estimated review times to\npull requests (Post deleted after being called a sock puppet account\n\u003ca href=\"https://www.reddit.com/r/programming/comments/z2bo70/comment/ixgfn2x/?utm_source=share\u0026#x26;utm_medium=web2x\u0026#x26;context=3\"\u003ehttps://www.reddit.com/r/programming/comments/z2bo70/comment/ixgfn2x/?utm_source=share\u0026#x26;utm_medium=web2x\u0026#x26;context=3\u003c/a\u003e\n)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eStudy: Developers spend over 2 days a week just waiting for other developers\nto review their code (Post deleted)\n\u003ca href=\"https://www.reddit.com/r/java/comments/t5f6i7/study_developers_spend_over_2_days_a_week_just/\"\u003ehttps://www.reddit.com/r/java/comments/t5f6i7/study_developers_spend_over_2_days_a_week_just/\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\"The modern pull-request process has caused inefficiencies, particularly\nreview delays, as it isn't automated, so speed depends on the availability of\nthe right code reviewer.\" Interesting blog arguing for filtering pull requests\nbased on risk in order to promote \"continuous merge.\" (Post deleted, called\nout as a spammer account\n\u003ca href=\"https://www.reddit.com/r/programming/comments/zdbtfr/the_modern_pullrequest_process_has_caused/\"\u003ehttps://www.reddit.com/r/programming/comments/zdbtfr/the_modern_pullrequest_process_has_caused/\u003c/a\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\"Too many companies treat dev burnout like a 24-hour flu where they can just\nsend a person home or tell them to take the day off.\" A trained\ntherapist-turned-engineer reveals how she diagnoses healthy dev teams from\nones doomed to fail.\n\u003ca href=\"https://www.reddit.com/r/webdev/comments/wonkt6/too_many_companies_treat_dev_burnout_like_a/\"\u003ehttps://www.reddit.com/r/webdev/comments/wonkt6/too_many_companies_treat_dev_burnout_like_a/\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThere was another highly upvoted post about \"cycle time\" posted to\n/r/programming probably that I cannot find now\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h3\u003e\n\u003cp\u003eThe devinterrupted blog/podcast appears to be related to the linearB company,\nwho advocate a notion of \"cycle time\" (\u003ca href=\"https://linearb.io/blog/cycle-time/\"\u003ehttps://linearb.io/blog/cycle-time/\u003c/a\u003e) as a\ndeveloper metric engineering managers should look at, and they pontificate and\ninterview interesting people. It's not all bad. But, it's pretty much a ploy to\nget your clicks. They promote the \"gitStream\" product that linearB makes on all\nthe posts on devinterrupted. \u003ca href=\"https://linearb.io/dev/gitstream/\"\u003ehttps://linearb.io/dev/gitstream/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI'd recommend linearB stop posting these things, or pretending that they are not\nbehind these posts.\u003c/p\u003e"},{"title":"The React tutorial I wish I had","date":"2022-11-20","slug":"2022-11-20-the-react-tutorial-i-wish-i-had","html":"\u003cp\u003eWhen I was learning React, I found it very challenging, and my eyes would glaze\nover any time I tried to learn (I wrote about my struggle here\n\u003ca href=\"https://cmdcolin.github.io/posts/2020-07-04\"\u003ehttps://cmdcolin.github.io/posts/2020-07-04\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eHere is a short tutorial that could help you get started. I wrote in my above\nblogpost that sitting down with a book was what finally helped me, but this\nblogpost aims to be a sort of TLDR for certain concepts.\u003c/p\u003e\n\u003ch3 id=\"the-simplest-react-component\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#the-simplest-react-component\"\u003e\u003ca href=\"#the-simplest-react-component\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eThe simplest React component\u003c/h3\u003e\n\u003cp\u003eHere is a \"React component\" that prints hello world in a div\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eHelloWorld\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003eHello world!\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI like to think of React components as \"functions that return HTML\". That is a\noversimplification, but it can be a helpful thinking tool to help you get\nstarted.\u003c/p\u003e\n\u003ch3 id=\"using-our-helloworld-component-in-another-component\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#using-our-helloworld-component-in-another-component\"\u003e\u003ca href=\"#using-our-helloworld-component-in-another-component\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eUsing our \u003ccode\u003eHelloWorld\u003c/code\u003e component in another component\u003c/h3\u003e\n\u003cp\u003eWe said React can be thought of as \"functions that return HTML\" but we can also\ncombine these them together.\u003c/p\u003e\n\u003cp\u003eFor example, we can create a component named \"App\" that uses our \"HelloWorld\"\ncomponent\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eApp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ep\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003eThis is my app\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ep\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHelloWorld\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt is common to have an \"App\" level component, that renders all the other\ncomponents in your page\u003c/p\u003e\n\u003ch3 id=\"how-do-these-components-get-rendered-to-html\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#how-do-these-components-get-rendered-to-html\"\u003e\u003ca href=\"#how-do-these-components-get-rendered-to-html\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eHow do these components get rendered to HTML?\u003c/h3\u003e\n\u003cp\u003eTypically, just once in your app, you use ReactDOM to render the \"App\" level\ncomponent to the page.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eReactDOM\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ereact-dom\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003eReactDOM\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003erender\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eApp\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e /\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edocument\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetElementById\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eroot\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e))\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd in your index.html you have e.g.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;!\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDOCTYPE\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003ehtml\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehtml\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ebody\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003eid\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eroot\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003e/\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ebody\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehtml\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"accepting-parameters-to-your-components\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#accepting-parameters-to-your-components\"\u003e\u003ca href=\"#accepting-parameters-to-your-components\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAccepting parameters to your components\u003c/h3\u003e\n\u003cp\u003eReact components can accept \"props\" which are like parameters to your component\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eHello\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprops\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprops\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003eHello {name}!\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe then pass props using HTML like attributes\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eApp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHello\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eColin\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis will print \"Hello Colin!\"\u003c/p\u003e\n\u003ch3 id=\"rendering-lists-of-items\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#rendering-lists-of-items\"\u003e\u003ca href=\"#rendering-lists-of-items\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eRendering lists of items\u003c/h3\u003e\n\u003cp\u003eThe \u003ccode\u003e{name}\u003c/code\u003e inside the div is like a little snippet of plain-JS code. It can be\nused to do more complicated things. For example you can render a list of items\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eList\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elist\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eApples\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eOranges\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ePears\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eul\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      {list\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eitem \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eli\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003ekey\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{item}\u003e{item}\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eli\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eul\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eInside the \"list\" each item has a key prop that is specified. See\n\u003ca href=\"https://reactjs.org/docs/lists-and-keys.html\"\u003ehttps://reactjs.org/docs/lists-and-keys.html\u003c/a\u003e for more discussion on this\u003c/p\u003e\n\u003ch3 id=\"how-do-i-use-react-in-my-own-app\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#how-do-i-use-react-in-my-own-app\"\u003e\u003ca href=\"#how-do-i-use-react-in-my-own-app\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eHow do I use React in my own app?\u003c/h3\u003e\n\u003cp\u003eCommonly, React is downloaded from npm using your package manager, but often\nrequires some extra steps to get JSX to compile which is often done by babel. I\nwill not cover a minimal React setup here, but I will recommend a couple setups\nthat make it easy for starting out.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUse \u003ccode\u003ecreate-react-app\u003c/code\u003e. You run \u003ccode\u003enpx create-react-app yourapp\u003c/code\u003e on your command\nline, this creates a folder named \u003ccode\u003eyourapp\u003c/code\u003e on your computer, and then you\n\u003ccode\u003ecd yourapp\u003c/code\u003e to go into that directory and run \u003ccode\u003enpm run start\u003c/code\u003e. This starts a\n\"dev server\" that runs at \u003ca href=\"http://localhost:3000\"\u003ehttp://localhost:3000\u003c/a\u003e, and you can then change the\njs files, and the results are instantly updated in your web browser\u003c/li\u003e\n\u003cli\u003eCodeSandbox: this is a 100% web based IDE that you can use to experiment with\nReact or other toolkits, visit \u003ca href=\"https://codesandbox.io\"\u003ehttps://codesandbox.io\u003c/a\u003e and run \"Create\" and\nthen click \"React app\", this is the React app that it creates\n\u003ca href=\"https://codesandbox.io/s/cool-moon-7x96jk\"\u003ehttps://codesandbox.io/s/cool-moon-7x96jk\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIf you are trying to incorporate React into a legacy or existing project, then I\nencourage you to experiment in these starter kit environments first. It can be\ndifficult to bolt on React to an existing environment in some ways and\nunderstanding the basics will help.\u003c/p\u003e\n\u003ch3 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h3\u003e\n\u003cp\u003eI hope this helps you get started with React, let me know if you have any\nquestions.\u003c/p\u003e\n\u003ch3 id=\"footnote-1-class-based-components\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1-class-based-components\"\u003e\u003ca href=\"#footnote-1-class-based-components\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1. Class based components\u003c/h3\u003e\n\u003cp\u003eIn the old days, React used \"class based components\", here is the Hello world\nexample as a class based component\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eclass\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eHelloWorld\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003erender\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003eHello world!\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe class based components had other \"lifecycle functions\" like\n\"componentDidMount\" and such that do not exist in function based components. In\nfunction components, React hooks are used instead.\u003c/p\u003e\n\u003cp\u003eYou will probably mostly see function components instead of class based\ncomponents these days\u003c/p\u003e\n\u003ch3 id=\"footnote-2-how-is-this-html-allowed-in-react\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2-how-is-this-html-allowed-in-react\"\u003e\u003ca href=\"#footnote-2-how-is-this-html-allowed-in-react\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 2. How is this HTML allowed in React?\u003c/h3\u003e\n\u003cp\u003eThe HTML-like syntax may look odd in JS code. It is called JSX. So code like\nthis:\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eHelloWorld\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003eHello world\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ewould get converted to this by babel or other jsx transpiler:\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eHelloWorld\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// null just means no props to the div element\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eReact\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ecreateElement\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003enull\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHello world\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt's not common to write React without jsx, but as seen above, it can be done :)\u003c/p\u003e\n\u003ch3 id=\"footnote-3-slightly-changed-in-react-18\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-3-slightly-changed-in-react-18\"\u003e\u003ca href=\"#footnote-3-slightly-changed-in-react-18\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 3. Slightly changed in React 18\u003c/h3\u003e\n\u003cp\u003eReact 18 uses \u003ccode\u003ecreateRoot\u003c/code\u003e instead of \u003ccode\u003eReactDOM.render\u003c/code\u003e and is a little bit more\nverbose, but I'm going for brevity here\u003c/p\u003e\n\u003ch3 id=\"footnote-4-things-that-sometimes-complicate-your-react-learning-experience\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-4-things-that-sometimes-complicate-your-react-learning-experience\"\u003e\u003ca href=\"#footnote-4-things-that-sometimes-complicate-your-react-learning-experience\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 4. Things that sometimes complicate your React learning experience\u003c/h3\u003e\n\u003cp\u003eThe React learning experience, when it's good, is quite nice. But there can be\nmany roadblocks\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eYou can be bogged down by many different sometimes conflicted learning\nresources - The new \u003ca href=\"https://beta.reactjs.org\"\u003ehttps://beta.reactjs.org\u003c/a\u003e are currently being implemented\nand hopefully will make the learning experience better.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou can be bogged down by the difficulty in setting up your dev environment -\nthe need to get transpilers and compilers for the JSX syntax and such is not\neasy, and has led to an explosion of developer tooling that often needs to be\nrun on the command line to do any sort of programming for the web. This is a\nunfortunate consequence of the web becoming more complicated. Learning to be\ncomfortable with the command line is often an important stepping stone to\nbecoming comfortable with modern JS dev tooling.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou can be bogged down by \"tangential\" concepts like state management\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eReact codebases often use newer features of javascript like destructuring,\nwhich can be confusing for newcomers (\"Why does this function have curly\nbraces in the place of the arguments?\")\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou can be confused by weird concepts like \"controlled\" components (and how\nReact hooks like useState integrate with these)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou can be bogged down by Typescript or PropTypes - When I was learning React,\nI was confused by PropTypes in code. PropTypes are fully optional though, and\nare just used to check the types of props at runtime. TypeScript can be tricky\nalso, and does type checking at \"compile time\"\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e"},{"title":"Handling component state with React...you gotta reset it sometimes","date":"2022-10-10","slug":"2022-10-10-reactstate","html":"\u003cp\u003eIf you make a React component that has, say, a prop for a item id, and an async\naction in a \u003ccode\u003euseEffect\u003c/code\u003e to fetch data for that item from an API, then you\nprobably also have a \u003ccode\u003euseState\u003c/code\u003e to set data after you get results back from your\nAPI (or an error occurs). But, the interesting thing to me is\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eyou have to remember to reset that state, including error state, when your\nprops change\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eIt seems obvious, but I just wanted to write some working examples here\u003c/p\u003e\n\u003ch2 id=\"part-1-having-component-state-for-api-response-or-error\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#part-1-having-component-state-for-api-response-or-error\"\u003e\u003ca href=\"#part-1-having-component-state-for-api-response-or-error\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003ePart 1: Having component state for API response or error\u003c/h2\u003e\n\u003cp\u003eWorking codesandbox\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/practical-rubin-l2d5el?file=/src/App.tsx:0-2003\"\u003ehttps://codesandbox.io/s/practical-rubin-l2d5el?file=/src/App.tsx:0-2003\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eIn the below example, we will handle fetching from the Pokemon API, and use a\n\u003ccode\u003euseState\u003c/code\u003e to handle the returned data or a returned error. The important thing\nto highlight is: when you go to refetch a new item from the API, you likely need\nto clear the state of what was previously there (unless you want to display\nstale results)\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003euseEffect\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ereact\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003einterface\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003ePokemonType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  type\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    name\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003einterface\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003ePokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  name\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  types\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003ePokemonType\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// util fetch function to throw if !response.ok, I use this util often\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emyfetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eRequestInit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003efetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eok\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ethrow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eError fetching \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e: HTTP \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estatus\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ejson\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eErrorMessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({ \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e }\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e { error\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eunknown\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003estyle\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebackground\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ered\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003e{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ePokemonCard\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({ \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e }\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e { pokemonName\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eunknown\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetPokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003ePokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseEffect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(() \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003efalse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    ;(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003etry\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// important: reset the error and item state of the component!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetPokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edata\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emyfetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://pokeapi.co/api/v2/pokemon/\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetPokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edata\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      } \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    })()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }, [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e])\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      {error \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eErrorMessage\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{error} /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e pokemonInfo \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          {pokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename} is of type{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          {pokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etypes\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003et \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003eLoading...\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eexport default \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eApp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetValue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e]\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eoddish\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eclassName\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eApp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elabel\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003ehtmlFor\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epokemon_name\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003ePokemon name\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elabel\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003einput\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eid\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epokemon_name\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{value}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eonChange\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetValue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etarget\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ePokemonCard\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{value} /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"part-2-a-custom-hook\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#part-2-a-custom-hook\"\u003e\u003ca href=\"#part-2-a-custom-hook\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003ePart 2: A custom hook?\u003c/h2\u003e\n\u003cp\u003eCan we make a hook to make this easier? I don't often make custom hooks, but you\ncan try to \"encapsulate\" some of the multiple-related hooks (the useStates for\nerror, pokemonInfo, and useEffect) into a single hook. This does not drastically\naffect our approach, but in the below example, we can call\n\u003ccode\u003eusePokemonInfo(pokemonName)\u003c/code\u003e and error handling and fetching is handled for us\u003c/p\u003e\n\u003cp\u003eWorking codesandbox\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/fragrant-wind-008pfn?file=/src/App.tsx:0-2234\"\u003ehttps://codesandbox.io/s/fragrant-wind-008pfn?file=/src/App.tsx:0-2234\u003c/a\u003e\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003euseEffect\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ereact\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003einterface\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003ePokemonType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  type\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    name\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003einterface\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003ePokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  name\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  types\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003ePokemonType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// util fetch function to throw if !response.ok, I use this util often\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emyfetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eRequestInit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003efetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eok\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ethrow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eError fetching \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e: HTTP \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estatus\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ejson\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eusePokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eunknown\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetItemInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003ePokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseEffect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(() \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003efalse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    ;(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003etry\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetItemInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// \u0026#x3C;-- important to reset the state of the app\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// \u0026#x3C;-- important to reset the state of the app\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edata\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emyfetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://pokeapi.co/api/v2/pokemon/\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetItemInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edata\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      } \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    })()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }, [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e])\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eas\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003econst\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eErrorMessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({ \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e }\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e { error\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eunknown\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003estyle\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebackground\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ered\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003e{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ePokemonCard\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({ \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e }\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e { pokemonName\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eusePokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      {error \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eErrorMessage\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{error} /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e pokemonInfo \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          {pokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename} is of type{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          {pokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etypes\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003et \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003eLoading...\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eexport default \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eApp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetValue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e]\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eoddish\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eclassName\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eApp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elabel\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003ehtmlFor\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epokemon_name\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003ePokemon name\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elabel\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003einput\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eid\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epokemon_name\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{value}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eonChange\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetValue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etarget\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ePokemonCard\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{value} /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eI think it's sometimes common to forget error handling in async JS code\n(useEffect async or many other contexts, etc), and there aren't e.g. lint rules\nto really help, leaving errors uncaught or handled poorly. If you don't manually\nhandle the error in the \u003ccode\u003euseEffect\u003c/code\u003e, your user probably will not see that an\nerror occurred.\u003c/p\u003e\n\u003cp\u003eIn addition to this error handling rant, the other point of this article is you\nneed to reset your component state when props change, which in the code above,\nare the calls to setError(undefined) and setPokemonInfo(undefined) before I\nfetch a new Pokemon from the API.\u003c/p\u003e\n\u003ch2 id=\"footnote-0---web-perf-pontificating\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-0---web-perf-pontificating\"\u003e\u003ca href=\"#footnote-0---web-perf-pontificating\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 0 - Web perf pontificating\u003c/h2\u003e\n\u003cp\u003eI think sometimes, this manner of fetching data inside a component can lead to\nwhat some web-perf-experts refer to as waterfall. Can you get your state from\nyour parent? That might result in fewer individual requests made, but is also\nquite a different architecture.\u003c/p\u003e\n\u003ch2 id=\"footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error\"\u003e\u003ca href=\"#footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1 - ErrorBoundaries don't automatically save you from manually handling error\u003c/h2\u003e\n\u003cp\u003eYou can also consider using an ErrorBoundary, but this does not automatically\ncatch errors that happen in e.g. a useEffect. If you want your ErrorBoundary to\nhandle your useEffect related error, then you can use something like this. This\nassumes a \u003ccode\u003ereact-error-boundary\u003c/code\u003e type ErrorBoundary.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eErrorBoundary\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ereact-error-boundary\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ePokemonCard\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({ \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e }\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e { pokemonName\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eusePokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ethrow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      {pokemonInfo \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          {pokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename} is of type{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          {pokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etypes\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003et \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003eLoading...\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eexport default \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eApp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetValue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e]\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eoddish\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eErrorBoundary\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eFallbackComponent\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e error \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e}\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ePokemonCard\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{value} /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eErrorBoundary\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnother trick, instead of throwing in the body of the component is throwing in\nthe callback form of the useState-setter. Then you wouldn't necessarily need to\nhave a separate useState for the error state, but you would then need an\nErrorBoundary or something to help display a nice error.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseEffect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(() \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003efalse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  ;(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003etry\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// important: reset the error and item state of the component!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetPokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edata\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emyfetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://pokeapi.co/api/v2/pokemon/\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetPokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edata\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    } \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetPokemonInfo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(() \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ethrow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  })()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}, [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e])\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"footnote-2-the-future-with-react-data-fetching\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2-the-future-with-react-data-fetching\"\u003e\u003ca href=\"#footnote-2-the-future-with-react-data-fetching\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 2: The future with React data fetching\u003c/h2\u003e\n\u003cp\u003eSee \u003ca href=\"https://github.com/reactjs/rfcs/pull/229\"\u003ehttps://github.com/reactjs/rfcs/pull/229\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThis was just announced so there is a lot to unpack there, I can update this\nblog post if I come up with an analogous example using this RFC\u003c/p\u003e\n\u003ch2 id=\"footnote-3-using-react-query-or-swr\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-3-using-react-query-or-swr\"\u003e\u003ca href=\"#footnote-3-using-react-query-or-swr\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 3: Using react-query or swr\u003c/h2\u003e\n\u003cp\u003eThere are helper libraries that try to help\u003c/p\u003e\n\u003cp\u003eOne helper library suggested was called \u003ccode\u003ereact-query\u003c/code\u003e, so I made a demo using\n\u003ccode\u003e@tanstack/react-query\u003c/code\u003e v4.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/hungry-framework-ctmhkz?file=/src/App.tsx\"\u003ehttps://codesandbox.io/s/hungry-framework-ctmhkz?file=/src/App.tsx\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eAnother is \u003ccode\u003eswr\u003c/code\u003e, here is a demo for that library\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/condescending-poitras-fiwxym?file=/src/App.tsx\"\u003ehttps://codesandbox.io/s/condescending-poitras-fiwxym?file=/src/App.tsx\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThese libraries definitely \u003cstrong\u003edo\u003c/strong\u003e a lot of things, so take on some more baggage\nthan the simple hooks described above, but may be helpful to you also.\u003c/p\u003e\n\u003ch2 id=\"footnote-4-fetching-is-just-one-aspect-of-this-blogpost\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-4-fetching-is-just-one-aspect-of-this-blogpost\"\u003e\u003ca href=\"#footnote-4-fetching-is-just-one-aspect-of-this-blogpost\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 4: Fetching is just one aspect of this blogpost\u003c/h2\u003e\n\u003cp\u003eReally, the thing I wanted to make more clear in general was also how \"sticky\"\nuseState can be. I find other patterns in my codebase besides just fetching\nwhere I have to \"reset\" the useState hook to a neutral state, sometimes related\nto controlled components.\u003c/p\u003e\n\u003ch2 id=\"footnote-5-you-can-also-use-the-key-prop-as-an-alternative-to-manually-resetting-state\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-5-you-can-also-use-the-key-prop-as-an-alternative-to-manually-resetting-state\"\u003e\u003ca href=\"#footnote-5-you-can-also-use-the-key-prop-as-an-alternative-to-manually-resetting-state\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 5: You can also use the \"key\" prop as an alternative to manually resetting state\u003c/h2\u003e\n\u003cp\u003eSee \u003ca href=\"https://codesandbox.io/s/cool-grass-9nb43y?file=/src/App.tsx\"\u003ehttps://codesandbox.io/s/cool-grass-9nb43y?file=/src/App.tsx\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI am not sure I recommend this as it basically forces the component to unmount,\nwhich may be ok in some cases but I don't know all the ramifications. A quote\nfrom \u003ca href=\"https://kentcdodds.com/blog/understanding-reacts-key-prop\"\u003ehttps://kentcdodds.com/blog/understanding-reacts-key-prop\u003c/a\u003e explains\u003c/p\u003e\n\u003cp\u003e\"This allows you to return the exact same element type, but force React to\nunmount the previous instance, and mount a new one. This means that all state\nthat had existed in the component at the time is completely removed and the\ncomponent is \"reinitialized\" for all intents and purposes.\"\u003c/p\u003e\n\u003cp\u003eSee also\n\u003ca href=\"https://react.dev/learn/you-might-not-need-an-effect#resetting-all-state-when-a-prop-changes\"\u003ehttps://react.dev/learn/you-might-not-need-an-effect#resetting-all-state-when-a-prop-changes\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"footnote-6-the-use-hook\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-6-the-use-hook\"\u003e\u003ca href=\"#footnote-6-the-use-hook\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 6: The \u003ccode\u003euse\u003c/code\u003e hook\u003c/h2\u003e\n\u003cp\u003eMight also be related \u003ca href=\"https://blixtdev.com/all-about-reacts-new-use-hook/\"\u003ehttps://blixtdev.com/all-about-reacts-new-use-hook/\u003c/a\u003e\u003c/p\u003e"},{"title":"Making an audio slideshow with ffmpeg","date":"2022-10-08","slug":"2022-10-08-ffmpeg-slideshow","html":"\u003cp\u003eInspired by a new trend of posting \"playlists\" on youtube with visual\naccompaniment (\u003ca href=\"https://www.youtube.com/watch?v=zG92ss_2Vjw\u0026#x26;t=1937s\"\u003ehttps://www.youtube.com/watch?v=zG92ss_2Vjw\u0026#x26;t=1937s\u003c/a\u003e), I wanted to\ntry to make my own with a slideshow. I used ffmpeg as the heavy lifting tool\u003c/p\u003e\n\u003ch2 id=\"step-1---prepare-your-playlist\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-1---prepare-your-playlist\"\u003e\u003ca href=\"#step-1---prepare-your-playlist\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 1 - prepare your playlist\u003c/h2\u003e\n\u003cp\u003eI like foobar2000, because it can combine multiple files into a single output\nfile.\u003c/p\u003e\n\u003cp\u003eUse right-click -\u003e \"Convert ...\" in the foobar2000 playlist\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/foobar1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eUse \"Merge all tracks into one file\" in the \"Convert...\" dialog\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/foobar2.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eNote: If you have a folder of mp3's only, you can directly concatenate them with\n\u003ccode\u003ecat *.mp3 \u003e out.mp3\u003c/code\u003e or use ffmpeg to concatenate them for a pure command-line\nalternative.\u003c/p\u003e\n\u003ch2 id=\"step-2---prepare-the-slideshow\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-2---prepare-the-slideshow\"\u003e\u003ca href=\"#step-2---prepare-the-slideshow\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 2 - prepare the slideshow\u003c/h2\u003e\n\u003cp\u003eUse 10 seconds per picture. Note the glob pattern is in quotes\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003effmpeg\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-framerate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e10\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-pattern_type\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eglob\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-i\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e*.jpg\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epics.mp4\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"step-3---combine-the-slideshow-and-playlist\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-3---combine-the-slideshow-and-playlist\"\u003e\u003ca href=\"#step-3---combine-the-slideshow-and-playlist\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 3 - combine the slideshow and playlist\u003c/h2\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003effmpeg\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-stream_loop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-i\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epics.mp4\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-i\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eplaylist.wav\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-shortest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-vcodec\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecopy\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eoutput.mp4\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUsing \u003ccode\u003e-stream_loop -1\u003c/code\u003e on pics.mp4 will loop the pics until playlist.wav ends,\nbut then limit itself to the length of the playlist.wav with \u003ccode\u003e-shortest\u003c/code\u003e\u003c/p\u003e\n\u003ch2 id=\"step-4---upload-to-youtube\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-4---upload-to-youtube\"\u003e\u003ca href=\"#step-4---upload-to-youtube\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 4 - upload to youtube\u003c/h2\u003e\n\u003cp\u003eDone!\u003c/p\u003e\n\u003ch3 id=\"footnote-1-what-if-you-just-want-a-single-picture\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1-what-if-you-just-want-a-single-picture\"\u003e\u003ca href=\"#footnote-1-what-if-you-just-want-a-single-picture\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1: What if you just want a single picture?\u003c/h3\u003e\n\u003cp\u003eCommon for posting an album to youtube, you post the album art and some audio,\nyou can try searching from stackoverflow for options related to this\u003c/p\u003e\n\u003cp\u003eExample \u003ca href=\"https://superuser.com/a/332867/415552\"\u003ehttps://superuser.com/a/332867/415552\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"footnote-2-distortion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2-distortion\"\u003e\u003ca href=\"#footnote-2-distortion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 2: Distortion\u003c/h3\u003e\n\u003cp\u003eThe pictures may get distorted to fit the video frame, I haven't experimented\nwith options that modify this behavior\u003c/p\u003e"},{"title":"Creating a music player using Rust/GTK4 - fml9000","date":"2022-09-05","slug":"2022-09-05-rustmusicplayer","html":"\u003cp\u003eI have started endeavoring to learn Rust. I did the rustlings exercises but I\nknew the concepts would fade rapidly from my brain without some practice. I have\nnow started making a music player using Rust+GTK4.\u003c/p\u003e\n\u003cp\u003eI chose GTK4 to have a linux native GUI music player. Particularly, I have a\nparticular \u003ccode\u003efoobar2000\u003c/code\u003e setup that I wanted to emulate. I have used \u003ccode\u003efoobar2000\u003c/code\u003e\nunder wine (windows emulator on linux) and it's not terrible, but it has\nbackground CPU consumption of about 15% idle and doesn't feel quite right\nsometimes. I have used a variety of other linux music players such as\n\u003ccode\u003equodlibet\u003c/code\u003e (GUI/GTK based) and \u003ccode\u003ecmus\u003c/code\u003e (command line) but they didn't really\nfeel quite right.\u003c/p\u003e\n\u003ch3 id=\"choosing-a-tech-stack\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#choosing-a-tech-stack\"\u003e\u003ca href=\"#choosing-a-tech-stack\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eChoosing a tech stack\u003c/h3\u003e\n\u003cp\u003eI started by attempting with \u003ccode\u003eRelm4\u003c/code\u003e, which I may return to at some point, but\ntrying to juggle learning Relm4-style widgets, GTK, and rust all at once was a\nbit much. I stepped to using \u003ccode\u003egtk4-rs\u003c/code\u003e directly.\u003c/p\u003e\n\u003ch3 id=\"create-a-spreadsheet-style-data-grid-of-tracks-with-columnview\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#create-a-spreadsheet-style-data-grid-of-tracks-with-columnview\"\u003e\u003ca href=\"#create-a-spreadsheet-style-data-grid-of-tracks-with-columnview\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eCreate a \"spreadsheet style\" data grid of tracks with \u003ccode\u003eColumnView\u003c/code\u003e\u003c/h3\u003e\n\u003cp\u003eThen, I wanted to create a data grid showing to display e.g. a table with\nartist, track, album, etc. I chose to use the GTK\n\u003ca href=\"https://docs.gtk.org/gtk4/class.ColumnView.html\"\u003e\u003ccode\u003eColumnView\u003c/code\u003e\u003c/a\u003e to drive this. I\nstumbled around looking for example code, but there was none specifically for\nthe \u003ccode\u003eColumnView\u003c/code\u003e. I also realized the \u003ccode\u003eListView\u003c/code\u003e example from the \u003ccode\u003egtk4-rs\u003c/code\u003e\nexamples with it's factory function had similar needs that the \u003ccode\u003eColumnView\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eI found out that I basically needed to create a \u003ccode\u003eListStore\u003c/code\u003e. I thought if I\ncould make my own \u003ccode\u003eGObject\u003c/code\u003e subclass, it would solve everything, but I had\ntrouble getting making this work (rust doesn't have the concept of extending a\nclass for one thing, you implement various traits instead). Finally, I randomly\nstumbled on this link using a \u003ccode\u003eBoxedAnyObject\u003c/code\u003e with a good example of storing\ndata in a ListStore\n\u003ca href=\"https://gtk-rs.org/gtk-rs-core/git/docs/glib/struct.BoxedAnyObject.html\"\u003ehttps://gtk-rs.org/gtk-rs-core/git/docs/glib/struct.BoxedAnyObject.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003eBoxedAnyObject\u003c/code\u003e is a \u003ccode\u003eGObject\u003c/code\u003e, so this was an good route to storing the\n\u003ccode\u003eListView\u003c/code\u003e items. There was no example code for connecting the \u003ccode\u003eListStore\u003c/code\u003e with\nthe \u003ccode\u003eColumnView\u003c/code\u003e, so I stuggled for awhile before realizing that the \u003ccode\u003eListView\u003c/code\u003e\nexample in the \u003ccode\u003egtk4-rs\u003c/code\u003e codebase has similar concepts.\u003c/p\u003e\n\u003cp\u003eSee [1] for minimal usage of \u003ccode\u003eColumnView\u003c/code\u003e that I contributed to the \u003ccode\u003egtk4-rs\u003c/code\u003e\nrepo!\u003c/p\u003e\n\u003ch3 id=\"choosing-an-audio-library\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#choosing-an-audio-library\"\u003e\u003ca href=\"#choosing-an-audio-library\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eChoosing an audio library\u003c/h3\u003e\n\u003cp\u003eTo actually play audio, I looked at a couple options. There was even one option\ncalled GTK\n\u003ca href=\"https://gtk-rs.org/gtk4-rs/git/docs/gtk4/struct.MediaFile.html\"\u003e\u003ccode\u003eMediaFile\u003c/code\u003e\u003c/a\u003e\nwhich should to be able to play e.g. mp3s, making my job of making a media\nplayer much simpler, but it produced an error\n\u003ca href=\"https://www.google.com/search?q=%22GTK+could+not+find+a+media+module.+Check+your+installation.%22\u0026#x26;oq=%22GTK+could+not+find+a+media+module.+Check+your+installation.%22\u0026#x26;aqs=chrome..69i57.267j0j7\u0026#x26;sourceid=chrome\u0026#x26;ie=UTF-8\"\u003e\"GTK could not find a media module. Check your installation.\"\u003c/a\u003e\nwhich had very few references on the internet. I figured this could be difficult\nto solve or point to issues I could face later on making minimal executables for\nusers.\u003c/p\u003e\n\u003cp\u003eSo, next I tried out \u003ccode\u003esymphonia\u003c/code\u003e (\u003ca href=\"https://github.com/pdeljanov/Symphonia/\"\u003ehttps://github.com/pdeljanov/Symphonia/\u003c/a\u003e).\nSymphonia requires a lot more code to work (~1000 lines so far, copying from the\n\u003ccode\u003esymphonia-play\u003c/code\u003e example) but it has broad file format support, pure-rust audio\nstack, etc. I got confused about how to package it into an easy-to-use system\nthough, having to create a symphonia player on a separate thread, so I looked\nelsewhere...\u003c/p\u003e\n\u003cp\u003eNext I turned to \u003ccode\u003erodio\u003c/code\u003e. This works well, and automatically plays on a separate\nthread, but I found two issues 1) I have to initialize the rodio player in \"fn\nmain\" and not anywhere else, or it would just play a short blip of audio\n(\u003ca href=\"https://github.com/RustAudio/rodio/issues/381\"\u003ehttps://github.com/RustAudio/rodio/issues/381\u003c/a\u003e). Then, it turned out that the\n\u003ccode\u003erodio\u003c/code\u003e\n\u003ca href=\"https://docs.rs/rodio/0.14.0/rodio/struct.Sink.html#method.stop\"\u003e\u003ccode\u003eSink\u003c/code\u003e\u003c/a\u003e\ninstance (which you pass audio to) cannot stop and then play new song xref\n(\u003ca href=\"https://github.com/RustAudio/rodio/issues/315\"\u003ehttps://github.com/RustAudio/rodio/issues/315\u003c/a\u003e). To workaround, I replace it\nwith a new \u003ccode\u003eSink\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThis required me to learn about \u003ccode\u003eRefCell\u003c/code\u003e. I googled probably about 50 things\njust grasping at straws for awhile, but then landed on the solution of putting\nthe \u003ccode\u003eSink\u003c/code\u003e in a \u003ccode\u003eRc\u0026#x3C;RefCell\u0026#x3C;Sink\u003e\u003e\u003c/code\u003e, then that allows me to pass it into my\ncallback that handles double clicking the songs in the \u003ccode\u003eColumnView\u003c/code\u003e, and then I\nborrow the \u003ccode\u003eRefCell\u003c/code\u003e mutably to replace it with a new \u003ccode\u003eSink\u003c/code\u003e.\u003c/p\u003e\n\u003ch3 id=\"reading-audio-metadata-into-an-sqlite-db\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#reading-audio-metadata-into-an-sqlite-db\"\u003e\u003ca href=\"#reading-audio-metadata-into-an-sqlite-db\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eReading audio metadata into an \u003ccode\u003esqlite\u003c/code\u003e DB\u003c/h3\u003e\n\u003cp\u003eI also wanted to have the option of reading and writing audio metadata.\nSymphonia only reads metadata, so I found the \u003ccode\u003elofty\u003c/code\u003e crate.\u003c/p\u003e\n\u003cp\u003eI also realized that reading tens of thousands of file's metadata at each app\nstartup would be slow, so I endeavored to store that data in an \u003ccode\u003esqlite\u003c/code\u003e\ndatabase. I found that music players like \u003ccode\u003efoobar2000\u003c/code\u003e and \u003ccode\u003e0xdeadbeef\u003c/code\u003e have\ndatabases of track metadata also (Example folder on \u003ccode\u003efoobar2000\u003c/code\u003e (1.x) for this\nsnap/foobar2000/433/foobar2000/profile/library/74E45640B1C695CC/meta-0001,\nmeta-0002, etc.)\u003c/p\u003e\n\u003cp\u003eI used the \u003ccode\u003ewalkdir\u003c/code\u003e crate to walk a directory for files, \u003ccode\u003elofty\u003c/code\u003e to read the\nmetadata, and then finally inserted the data into the \u003ccode\u003esqlite\u003c/code\u003e db. I am still\nworking out the schema for the database but it provisionally associates data\nwith a primary key of filename.\u003c/p\u003e\n\u003ch3 id=\"learning-about-reference-counting-and-move-semantics\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#learning-about-reference-counting-and-move-semantics\"\u003e\u003ca href=\"#learning-about-reference-counting-and-move-semantics\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eLearning about reference counting and move semantics\u003c/h3\u003e\n\u003cp\u003eOriginally I queried the sqlite database and stored a \u003ccode\u003eVec\u0026#x3C;Track\u003e\u003c/code\u003e, where\n\u003ccode\u003eTrack\u003c/code\u003e is a struct with artist, album, song title, etc. I realized that this\ncauses issues passing this around to different functions, and storing them in\nthe \u003ccode\u003eBoxedAnyObject\u003c/code\u003e, (example thread discussing issue\n\u003ca href=\"https://stackoverflow.com/questions/42954008/how-to-pass-one-vec-to-multiple-functions-in-rust\"\u003ehttps://stackoverflow.com/questions/42954008/how-to-pass-one-vec-to-multiple-functions-in-rust\u003c/a\u003e)\nso I changed functions to accept slices of the Vec, and to make it a\n\u003ccode\u003eVec\u0026#x3C;Rc\u0026#x3C;Track\u003e\u003e\u003c/code\u003e instead of just \u003ccode\u003eVec\u0026#x3C;Track\u003e\u003c/code\u003e (another related thread\n\u003ca href=\"https://users.rust-lang.org/t/self-has-an-anonymous-lifetime-but-it-needs-to-satisfy-a-static-lifetime-requirement/58641/3\"\u003ehttps://users.rust-lang.org/t/self-has-an-anonymous-lifetime-but-it-needs-to-satisfy-a-static-lifetime-requirement/58641/3\u003c/a\u003e).\u003c/p\u003e\n\u003ch3 id=\"result\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#result\"\u003e\u003ca href=\"#result\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eResult\u003c/h3\u003e\n\u003cp\u003eThe current work is at \u003ca href=\"https://github.com/cmdcolin/fml9000\"\u003ehttps://github.com/cmdcolin/fml9000\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/fml9000_1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eScreenshot shows the current look and feel. Some stuff in the screenshot is\nmocked and not fully functional, but it has been a great learning experience\nthus far\u003c/p\u003e\n\u003ch3 id=\"footnote-1-creating-a-pr-to-the-gtk4-rs-repo-to-demonstrate-example-columnview-usage\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1-creating-a-pr-to-the-gtk4-rs-repo-to-demonstrate-example-columnview-usage\"\u003e\u003ca href=\"#footnote-1-creating-a-pr-to-the-gtk4-rs-repo-to-demonstrate-example-columnview-usage\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1: Creating a PR to the \u003ccode\u003egtk4-rs\u003c/code\u003e repo to demonstrate example ColumnView usage\u003c/h3\u003e\n\u003cp\u003eI created a PR (\u003ca href=\"https://github.com/gtk-rs/gtk4-rs/pull/1111\"\u003ehttps://github.com/gtk-rs/gtk4-rs/pull/1111\u003c/a\u003e) to demonstrate\nsimple \u003ccode\u003eColumnView\u003c/code\u003e usage. The code review that was given on the PR was\nexcellent. They explained how to simplify the code I submitted so that each grid\ncell was very minimal (starting from a \u003ccode\u003egtk::Box\u003c/code\u003e with a \u003ccode\u003egtk::Label\u003c/code\u003e inside of\nit, to just being a \u003ccode\u003egtk::Inscription\u003c/code\u003e which is very fast). Big thanks to the\nteam for helping out with this!\u003c/p\u003e\n\u003cp\u003eAfter this hurdle was crossed, I felt much more comfortable in the GTK mindset,\nand I quickly fleshed out some more UI for the app\u003c/p\u003e"},{"title":"Making a twitter bot in the year 2022 with node.js","date":"2022-08-26","slug":"2022-08-26-twitterbot","html":"\u003cp\u003eRecently, we made the logistic map fractal visualizer app, but, how do we keep\nUSER ENGAGEMENT METRICS up? Gotta make a twitter bot to post fractals, that's\nhow!\u003c/p\u003e\n\u003cp\u003eI found it somewhat tricky to get this working, because there is a lot of odd\nlingo out there. There are libraries that may help you, but this post goes\nthrough making an OAuth client in node.js to post to the twitter API with fairly\nunabstracted code. OAuth still confuses me, but if you follow these steps, you\ncan make a bot!\u003c/p\u003e\n\u003ch3 id=\"step-1\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-1\"\u003e\u003ca href=\"#step-1\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 1\u003c/h3\u003e\n\u003cp\u003eGet your keys. I forget the exact procedure for this but go to\n\u003ca href=\"https://developer.twitter.com\"\u003ehttps://developer.twitter.com\u003c/a\u003e and sign up, register an \"app\" with them, and poke\naround for awhile. This github repo provides a couple more details about the\nprocess of registering\n\u003ca href=\"https://github.com/manzt/cron-tweet#create-a-standalone-app-in-the-developer-portal\"\u003ehttps://github.com/manzt/cron-tweet#create-a-standalone-app-in-the-developer-portal\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eAfter sometime, you should get a screen that looks like this. Keep this around\nfor Step 4. Note: I did not have to apply for any elevated access for this\narticle, just the basic level you get from the initial registration! I believe\nin twitter terms, this article only requires \"Essential\" access and not any\n\"Elevated\" access.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/cmdcolin/twitter_fractal_bot/blob/master/img/devpanel.png?raw=true\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch3 id=\"step-2\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-2\"\u003e\u003ca href=\"#step-2\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 2\u003c/h3\u003e\n\u003cp\u003eMake a repo with a couple dependencies\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003emkdir\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emybot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ecd\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emybot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einit\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enode-fetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eformdata-node\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eoauth\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edotenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etypescript\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"step-3\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-3\"\u003e\u003ca href=\"#step-3\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 3\u003c/h3\u003e\n\u003cp\u003eUpdate \u003ccode\u003epackage.json\u003c/code\u003e with a couple scripts to build these typescript files\n(alternatively use \u003ccode\u003ets-node\u003c/code\u003e or similar to run the ts files directly)\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edependencies\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edotenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^16.0.1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eformdata-node\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^4.4.1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enode-fetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^3.2.10\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eoauth\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^0.10.0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etypescript\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^4.7.4\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elicense\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eMIT\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emodule\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edevDependencies\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e@types/node\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^18.7.9\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e@types/oauth\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^0.9.1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003escripts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etsc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eprepost\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eyarn build\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epost\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enode dist/bot.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd \u003ccode\u003etsconfig.json\u003c/code\u003e file\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003einclude\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: [\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecompilerOptions\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etarget\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eesnext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eoutDir\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edist\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emoduleResolution\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enode\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edeclaration\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003estrict\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eesModuleInterop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis compiles the \u003ccode\u003esrc\u003c/code\u003e folder and outputs js files to the \u003ccode\u003edist\u003c/code\u003e directory, and\nwe can run the \u003ccode\u003enode dist/bot.js\u003c/code\u003e file with node to post the file\u003c/p\u003e\n\u003ch3 id=\"step-4\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-4\"\u003e\u003ca href=\"#step-4\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 4\u003c/h3\u003e\n\u003cp\u003eCreate a .env file with your keys that you found in the above screenshot\ncorresponding to the box1 (which gives you API_KEY/API_SECRET, sometimes also\nreferred to as consumer keys in other documents) and box2 (which gives you\nACCESS_TOKEN and ACCESS_TOKEN_SECRET) from the above screenshot\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eAPI_KEY=\"xxxxxxxxxxxxxxxxxxxxxxxxx\"\nAPI_SECRET=\"yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy\"\nACCESS_TOKEN=\"aaaaaaaaaaaaaaaaaaa-aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"\nACCESS_TOKEN_SECRET=\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eImportant: Also add the .env to your .gitignore, you don't want to commit this\nto github!\u003c/p\u003e\n\u003ch3 id=\"step-5\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-5\"\u003e\u003ca href=\"#step-5\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 5\u003c/h3\u003e\n\u003cp\u003eMake the bot! Create \u003ccode\u003esrc/bot.ts\u003c/code\u003e\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efs\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efs\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport * \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eas\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edotenv\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edotenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eOAuth\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eoauth\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eRequestInit\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enode-fetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eFormData\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eFile\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eformdata-node\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003edotenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emfetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eparams\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eRequestInit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003efetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eparams\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eok\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ethrow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHTTP \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estatus\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ejson\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eas\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003ePromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eRecord\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eunknown\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egetAuthHeader\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eoauth\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eOAuth\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eOAuth\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eoauth\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eauthHeader\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eACCESS_TOKEN\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eas\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eACCESS_TOKEN_SECRET\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eas\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epost\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e;(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003etry\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eclient\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eOAuth\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eOAuth\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://api.twitter.com/oauth/request_token\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://api.twitter.com/oauth/access_token\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eAPI_KEY\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eas\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eAPI_SECRET\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eas\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1.0A\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003enull\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHMAC-SHA1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epicEndpoint\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://upload.twitter.com/1.1/media/upload.json\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etweetEndpoint\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://api.twitter.com/2/tweets\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eclientName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ev3CreateTweetJS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eform\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eFormData\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eform\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eset\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emedia\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eFile\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e([\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efs\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ereadFileSync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eyourpicture.png\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)], \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eyourpicture.png\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// first post a picture\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emfetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epicEndpoint\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAuthorization\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetAuthHeader\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eclient\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epicEndpoint\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003euser-agent\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eclientName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emethod\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ePOST\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e//@ts-ignore\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebody\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eform\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// then post a tweet, referring to the media_id_string from response1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emfetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etweetEndpoint\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAuthorization\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetAuthHeader\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eclient\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etweetEndpoint\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003euser-agent\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eclientName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003econtent-type\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eapplication/json\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eaccept\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eapplication/json\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebody\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e JSON\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003estringify\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emedia\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emedia_ids\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emedia_id_string\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e]\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHello world!\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emethod\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epost\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003elog\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  } \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eexit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"step-6\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-6\"\u003e\u003ca href=\"#step-6\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 6\u003c/h3\u003e\n\u003cp\u003eNow that you have the bot, you can run it locally with \u003ccode\u003eyarn post\u003c/code\u003e (runs the\n\"post\" script in \u003ccode\u003epackage.json\u003c/code\u003e) to test it out\u003c/p\u003e\n\u003ch3 id=\"step-7\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-7\"\u003e\u003ca href=\"#step-7\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 7\u003c/h3\u003e\n\u003cp\u003eNow to create a github action to run the bot.\u003c/p\u003e\n\u003cp\u003eNavigate to your repo's settings page, then go to Secrets-\u003eActions and paste the\nkeys one by one, see below screenshot\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://user-images.githubusercontent.com/6511937/187038172-80b35e34-03dd-4613-b6f6-9f8e25d2fc34.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch3 id=\"step-8\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-8\"\u003e\u003ca href=\"#step-8\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 8\u003c/h3\u003e\n\u003cp\u003eCreate a file with the path \u003ccode\u003e.github/workflows/post.yml\u003c/code\u003e in your repo to make\nthe post\u003c/p\u003e\n\u003cp\u003eYou can use a cron/scheduled workflow in the github action, which the below\nexample does\n\u003ca href=\"https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule\"\u003ehttps://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe below github action posts every 5 hours on the hour (see\n\u003ca href=\"https://crontab.guru/\"\u003ehttps://crontab.guru/\u003c/a\u003e for more info on cron syntax)\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ePost tweet\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eon\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eschedule\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    - \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ecron\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0 */5 * * *\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejobs\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ePost tweet\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eruns-on\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eubuntu-latest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003esteps\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003euses\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eactions/checkout@v2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eUse Node.js 14.x\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003euses\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eactions/setup-node@v2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ewith\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enode-version\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e14\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eInstall deps (with cache)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003euses\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebahmutov/npm-install@v1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ePost tweet\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAPI_KEY\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e${{ secrets.API_KEY }}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAPI_SECRET\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e${{ secrets.API_SECRET }}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eACCESS_TOKEN\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e${{ secrets.ACCESS_TOKEN }}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eACCESS_TOKEN_SECRET\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e${{ secrets.ACCESS_TOKEN_SECRET }}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003erun\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eyarn post\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eSee \u003ca href=\"https://github.com/cmdcolin/twitter_fractal_bot\"\u003ehttps://github.com/cmdcolin/twitter_fractal_bot\u003c/a\u003e for working example. I could\nhave, in retrospect, used a library like \u003ccode\u003etwit\u003c/code\u003e\n(\u003ca href=\"https://www.npmjs.com/package/twit\"\u003ehttps://www.npmjs.com/package/twit\u003c/a\u003e) but this code sample is not substantially\nmore complicated than using the \u003ccode\u003etwit\u003c/code\u003e library.\u003c/p\u003e\n\u003cp\u003eYou can also adapt this to post only when you push to your repo, or release a\nnew version from your repo!\u003c/p\u003e\n\u003ch2 id=\"footnote-1-examples-of-odd-lingo-or-stumbling-blocks-you-might-come-across\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1-examples-of-odd-lingo-or-stumbling-blocks-you-might-come-across\"\u003e\u003ca href=\"#footnote-1-examples-of-odd-lingo-or-stumbling-blocks-you-might-come-across\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1: Examples of odd lingo or stumbling blocks you might come across\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eBearer token - The Bearer token is an alternative method of authenticating,\nbut it cannot be used to post tweets\u003c/li\u003e\n\u003cli\u003eTwitter API v1 vs v2 - We use a mix of v1 and v2, it's just the different URLs\nthat we are posting to and can be mixed in our example\u003c/li\u003e\n\u003cli\u003eConsumer key vs API key - they are the same thing in our example. If you look\nclosely at the box 1 in the screenshot it says \"Consumer keys\" and then gives\nyou an API key below *\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"footnote-2-posting-on-release-with-a-github-action\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2-posting-on-release-with-a-github-action\"\u003e\u003ca href=\"#footnote-2-posting-on-release-with-a-github-action\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 2: Posting on release with a github action\u003c/h2\u003e\n\u003cp\u003eReplace the cron section of the github action with\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eon: release\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"footnote-3-additional-reading\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-3-additional-reading\"\u003e\u003ca href=\"#footnote-3-additional-reading\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 3: Additional reading\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://aaronparecki.com/oauth-2-simplified/\"\u003ehttps://aaronparecki.com/oauth-2-simplified/\u003c/a\u003e\u003c/p\u003e"},{"title":"Using Rust/WASM in a monorepo with create-react-app","date":"2022-08-22","slug":"2022-08-22-rustwasm","html":"\u003cp\u003eBehold, the buzzwords:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRust / WASM / wasm-bindgen\u003c/li\u003e\n\u003cli\u003eReact\u003c/li\u003e\n\u003cli\u003eMonorepo / Yarn workspaces\u003c/li\u003e\n\u003cli\u003eWebpack 5 / create-react-app 5\u003c/li\u003e\n\u003cli\u003eTypescript\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe main goal here: To use Rust + WASM in a react app, inside a monorepo.\u003c/p\u003e\n\u003cp\u003eTLDR: visit the final product!\n\u003ca href=\"https://github.com/cmdcolin/rust_react_monorepo_template\"\u003ehttps://github.com/cmdcolin/rust_react_monorepo_template\u003c/a\u003e. It is also deployed\nlive here \u003ca href=\"https://cmdcolin.github.io/rust_react_monorepo_template\"\u003ehttps://cmdcolin.github.io/rust_react_monorepo_template\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"steps-to-create-this-type-of-integration-from-scratch\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#steps-to-create-this-type-of-integration-from-scratch\"\u003e\u003ca href=\"#steps-to-create-this-type-of-integration-from-scratch\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eSteps to create this type of integration from scratch\u003c/h2\u003e\n\u003ch3 id=\"create-repo\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#create-repo\"\u003e\u003ca href=\"#create-repo\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eCreate repo\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003emkdir template\ncd template\ngit init\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"create-root-packagejson\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#create-root-packagejson\"\u003e\u003ca href=\"#create-root-packagejson\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eCreate root \u003ccode\u003epackage.json\u003c/code\u003e\u003c/h3\u003e\n\u003cp\u003eThen put this in the monorepo's root \u003ccode\u003epackage.json\u003c/code\u003e\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprivate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eworkspaces\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: [\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehello-wasm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eapp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis sets our repo up as a \"monorepo\" with two \"workspaces\". one will be the\nwasm code, in \u003ccode\u003ehello-wasm\u003c/code\u003e, one will be an instance of \u003ccode\u003ecreate-react-app\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"add-a-create-react-app-instance-inside-the-monorepo\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#add-a-create-react-app-instance-inside-the-monorepo\"\u003e\u003ca href=\"#add-a-create-react-app-instance-inside-the-monorepo\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAdd a \u003ccode\u003ecreate-react-app\u003c/code\u003e instance inside the monorepo\u003c/h3\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpx\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecreate-react-app\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--template\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etypescript\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eapp\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis will make an \u003ccode\u003eapp\u003c/code\u003e subfolder inside our monorepo\u003c/p\u003e\n\u003ch3 id=\"download-the-hello-world-rust-wasm-bindgen-example-and-put-it-in-a-folder-named-hello-wasm\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#download-the-hello-world-rust-wasm-bindgen-example-and-put-it-in-a-folder-named-hello-wasm\"\u003e\u003ca href=\"#download-the-hello-world-rust-wasm-bindgen-example-and-put-it-in-a-folder-named-hello-wasm\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eDownload the hello world rust \u003ccode\u003ewasm-bindgen\u003c/code\u003e example and put it in a folder named \u003ccode\u003ehello-wasm\u003c/code\u003e\u003c/h3\u003e\n\u003cp\u003eDownload \u003ca href=\"https://github.com/rustwasm/wasm-bindgen/tree/main/examples/hello_world\"\u003ehttps://github.com/rustwasm/wasm-bindgen/tree/main/examples/hello_world\u003c/a\u003e\nto the hello-wasm folder\u003c/p\u003e\n\u003cp\u003eThis link can help\n\u003ca href=\"https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Frustwasm%2Fwasm-bindgen%2Ftree%2Fmain%2Fexamples%2Fhello_world\"\u003ehttps://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Frustwasm%2Fwasm-bindgen%2Ftree%2Fmain%2Fexamples%2Fhello_world\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"add-some-extra-fields-to-the-packagejson-in-the-hello-wasm-folder\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#add-some-extra-fields-to-the-packagejson-in-the-hello-wasm-folder\"\u003e\u003ca href=\"#add-some-extra-fields-to-the-packagejson-in-the-hello-wasm-folder\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAdd some extra fields to the \u003ccode\u003epackage.json\u003c/code\u003e in the \u003ccode\u003ehello-wasm\u003c/code\u003e folder\u003c/h3\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehello-wasm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eversion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1.0.0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efiles\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: [\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epkg\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epkg/index.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003e...\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003erest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"modify-the-hello-wasm-example-to-return-a-value-instead-of-making-an-alert\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#modify-the-hello-wasm-example-to-return-a-value-instead-of-making-an-alert\"\u003e\u003ca href=\"#modify-the-hello-wasm-example-to-return-a-value-instead-of-making-an-alert\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eModify the \u003ccode\u003ehello-wasm\u003c/code\u003e example to return a value instead of making an alert\u003c/h3\u003e\n\u003cp\u003eI changed the rust code to return a String value instead of making an alert box\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e#[wasm_bindgen]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003epub\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egreet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estr\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eformat!\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHello \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{}\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"build-the-hello-wasm-pkg\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#build-the-hello-wasm-pkg\"\u003e\u003ca href=\"#build-the-hello-wasm-pkg\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eBuild the \u003ccode\u003ehello-wasm\u003c/code\u003e pkg\u003c/h3\u003e\n\u003cp\u003eGo into the \u003ccode\u003ehello-wasm\u003c/code\u003e folder and run \u003ccode\u003eyarn build\u003c/code\u003e. This creates a directory\nnamed \u003ccode\u003epkg\u003c/code\u003e which has \u003ccode\u003e.wasm\u003c/code\u003e files and \u003ccode\u003e.js\u003c/code\u003e files. Now, the \u003ccode\u003ehello-wasm\u003c/code\u003e\nfolder is effectively a node package. We could publish this to \u003ccode\u003eNPM\u003c/code\u003e (see\nfootnote 1)\u003c/p\u003e\n\u003ch3 id=\"add-the-hello-wasm-package-to-the-app-dependencies\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#add-the-hello-wasm-package-to-the-app-dependencies\"\u003e\u003ca href=\"#add-the-hello-wasm-package-to-the-app-dependencies\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAdd the \u003ccode\u003ehello-wasm\u003c/code\u003e package to the \u003ccode\u003eapp\u003c/code\u003e dependencies\u003c/h3\u003e\n\u003cp\u003eAdd \u003ccode\u003e\"hello-wasm\":\"^1.0.0\"\u003c/code\u003e to the \u003ccode\u003edependencies\u003c/code\u003e array in \u003ccode\u003eapp/package.json\u003c/code\u003e.\nThis will refer to our local monorepo's rust wasm package!\u003c/p\u003e\n\u003ch3 id=\"create-craco-config-for-create-react-app\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#create-craco-config-for-create-react-app\"\u003e\u003ca href=\"#create-craco-config-for-create-react-app\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eCreate craco config for \u003ccode\u003ecreate-react-app\u003c/code\u003e\u003c/h3\u003e\n\u003cp\u003eAs of writing, with \u003ccode\u003ewebpack\u003c/code\u003e v5/\u003ccode\u003ecreate-react-app\u003c/code\u003e v5, you have to customize\nthe \u003ccode\u003ecreate-react-app\u003c/code\u003e to add extra \u003ccode\u003ewebpack\u003c/code\u003e flags.\u003c/p\u003e\n\u003cp\u003eSo, \u003ccode\u003eyarn add @craco/craco\u003c/code\u003e in the app folder, then create this\n\u003ccode\u003ecraco.config.js\u003c/code\u003e\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003emodule\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eexports\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ewebpack\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003econfigure\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ewasmExtensionRegExp\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #5FB3A1\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e/\u003c/span\u003e\u003cspan style=\"color: #5FB3A1\"\u003e\\.wasm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e$/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresolve\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eextensions\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003epush\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e.wasm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eexperiments\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esyncWebAssembly\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emodule\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003erules\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eforEach\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003erule\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e;(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003erule\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eoneOf\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e||\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[]).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eforEach\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eoneOf\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003eif\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eoneOf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easset/resource\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eoneOf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eexclude\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003epush\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ewasmExtensionRegExp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econfig\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNote: this thread helped me to create the craco config\n\u003ca href=\"https://github.com/Emurgo/cardano-serialization-lib/issues/295\"\u003ehttps://github.com/Emurgo/cardano-serialization-lib/issues/295\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eAlso see footnote 2 for more info\u003c/p\u003e\n\u003ch3 id=\"final-step-use-async-import-to-import-the-hello-wasm-greeting\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#final-step-use-async-import-to-import-the-hello-wasm-greeting\"\u003e\u003ca href=\"#final-step-use-async-import-to-import-the-hello-wasm-greeting\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFinal step: Use async \u003ccode\u003eimport()\u003c/code\u003e to import the \u003ccode\u003ehello-wasm\u003c/code\u003e greeting\u003c/h3\u003e\n\u003cp\u003eWe use a \u003ccode\u003euseEffect\u003c/code\u003e hook to import the code asynchronously, and can call our\nrust function, \u003ccode\u003egreet\u003c/code\u003e, from javascript!\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eApp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003egreeting\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetGreeting\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseEffect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(() \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    ;(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003etry\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ewasm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eimport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehello-wasm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003egreeting\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ewasm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egreet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eColin\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetGreeting\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003egreeting\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      } \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    })()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }, [])\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eh1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003erust\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emonorepo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ewasm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edemo\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eh1\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eh2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eGreeting\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ewasm\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {!\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003egreeting\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eLoading...\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003egreeting\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eh2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn order to greet an arbitrary person, I modified this slightly in the live\ndemo. See\n\u003ca href=\"https://github.com/cmdcolin/rust_react_monorepo_template/blob/master/app/src/App.tsx\"\u003ehttps://github.com/cmdcolin/rust_react_monorepo_template/blob/master/app/src/App.tsx\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"run-the-app\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#run-the-app\"\u003e\u003ca href=\"#run-the-app\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eRun the app!\u003c/h3\u003e\n\u003cp\u003eGo into the \u003ccode\u003eapp\u003c/code\u003e folder, and then run \u003ccode\u003eyarn start\u003c/code\u003e\u003c/p\u003e\n\u003ch2 id=\"result\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#result\"\u003e\u003ca href=\"#result\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eResult!\u003c/h2\u003e\n\u003cp\u003eA screenshot of the app, showing the string \"Hello Colin\" which is generated via\nrust and wasm\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/rust_wasm_demo.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eMy main aim was to demonstrate creating a \"simple\" monorepo setup showing how\nyou can integrate Rust+WASM and React. Feel free to ask me any questions and go\ncheck out the repo!\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/cmdcolin/rust_react_monorepo_template\"\u003ehttps://github.com/cmdcolin/rust_react_monorepo_template\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"other-resources\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#other-resources\"\u003e\u003ca href=\"#other-resources\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eOther resources\u003c/h2\u003e\n\u003cp\u003eThis article is quite helpful also, but uses a file:/ reference in their\n\u003ccode\u003epackage.json\u003c/code\u003e while my approach uses a monorepo, it is fundamentally quite\nsimilar though!\n\u003ca href=\"https://tkat0.github.io/posts/how-to-create-a-react-app-with-rust-and-wasm\"\u003ehttps://tkat0.github.io/posts/how-to-create-a-react-app-with-rust-and-wasm\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"footnote-1-the-hello-wasm-folder-is-a-npm-package-with-wasm-files\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1-the-hello-wasm-folder-is-a-npm-package-with-wasm-files\"\u003e\u003ca href=\"#footnote-1-the-hello-wasm-folder-is-a-npm-package-with-wasm-files\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1: The \u003ccode\u003ehello-wasm\u003c/code\u003e folder IS a npm package with wasm files\u003c/h2\u003e\n\u003cp\u003eThe \u003ccode\u003ehello-wasm\u003c/code\u003e folder can be published to NPM by itself. When consumers of the\npackage import the module, they would receive \u003ccode\u003epkg/index.js\u003c/code\u003e from the \u003ccode\u003emain\u003c/code\u003e\nfield in \u003ccode\u003epackage.json\u003c/code\u003e, and then \u003ccode\u003epkg/index.js\u003c/code\u003e in turn imports the\n\u003ccode\u003eindex.wasm\u003c/code\u003e file. Then it is up to the consumers bundler to package that\ncorrectly.\u003c/p\u003e\n\u003ch2 id=\"footnote-2-bundlers-and-wasm\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2-bundlers-and-wasm\"\u003e\u003ca href=\"#footnote-2-bundlers-and-wasm\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 2: Bundlers and wasm\u003c/h2\u003e\n\u003cp\u003eAs of writing, I am using \u003ccode\u003ewebpack\u003c/code\u003e v5 (part of \u003ccode\u003ecreate-react-app\u003c/code\u003e v5), which\nhas \"native support\" for wasm. Still, it is hidden behind a flag called\n\"experiments\" (see first google result for webpack wasm here\n\u003ca href=\"https://webpack.js.org/configuration/experiments/\"\u003ehttps://webpack.js.org/configuration/experiments/\u003c/a\u003e) so I use \u003ccode\u003e@craco/craco\u003c/code\u003e to\nmodify the \u003ccode\u003ewebpack\u003c/code\u003e config of \u003ccode\u003ecreate-react-app\u003c/code\u003e v5 to add this.\u003c/p\u003e\n\u003cp\u003eNote also: The first time I wrote this, I used \u003ccode\u003ewebpack\u003c/code\u003e v4, which used a\nslightly different workflow (used a special \u003ccode\u003ewebpack\u003c/code\u003e loader called\n\u003ccode\u003ewasm-loader\u003c/code\u003e)\u003c/p\u003e\n\u003cp\u003eYou can also likely use similar techniques described in this article to\nincorporate into \u003ccode\u003enext.js\u003c/code\u003e since it also uses \u003ccode\u003ewebpack\u003c/code\u003e. If you have info on how\nother bundlers use wasm, feel free to leave a comment.\u003c/p\u003e\n\u003ch2 id=\"footnote-3-why-do-i-have-to-use-async-imports\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-3-why-do-i-have-to-use-async-imports\"\u003e\u003ca href=\"#footnote-3-why-do-i-have-to-use-async-imports\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 3: Why do I have to use async imports?\u003c/h2\u003e\n\u003cp\u003eFundamentally, the \u003ccode\u003e.wasm\u003c/code\u003e file has to be fetched asynchronously before it can\nbe run (it is not in my experience e.g. embedded as binary data inside a js\nfile) which means it would be difficult to use the wasm code as a synchronous\nimport.\u003c/p\u003e\n\u003cp\u003eThere are hints that this may be possible but it would rely on the bundler\nembedding the wasm code in the js itself, or maybe top-level-await. If anyone\nhas more info, feel free to leave a comment!\u003c/p\u003e\n\u003ch2 id=\"footnote-4-build-setup\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-4-build-setup\"\u003e\u003ca href=\"#footnote-4-build-setup\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 4: Build setup\u003c/h2\u003e\n\u003cp\u003eThe \u003ccode\u003ehello-wasm\u003c/code\u003e package does not automatically recompile when we are running\ne.g. \u003ccode\u003eyarn start\u003c/code\u003e in the \u003ccode\u003eapp\u003c/code\u003e folder. Therefore, changes to the rust requires\nyou to manually run \u003ccode\u003eyarn build\u003c/code\u003e in the \u003ccode\u003ehello-wasm\u003c/code\u003e folder. Just something to\nbe aware of\u003c/p\u003e\n\u003ch2 id=\"footnote-5-my-first-experience-with-trying-to-make-this-work-was-rocky\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-5-my-first-experience-with-trying-to-make-this-work-was-rocky\"\u003e\u003ca href=\"#footnote-5-my-first-experience-with-trying-to-make-this-work-was-rocky\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 5: My first experience with trying to make this work was rocky!\u003c/h2\u003e\n\u003cp\u003eI first created an example of rust+wasm+react almost two years ago when creating\na fractal viewer \u003ca href=\"https://github.com/cmdcolin/logistic_chaos_map\"\u003ehttps://github.com/cmdcolin/logistic_chaos_map\u003c/a\u003e and it has some\ndevelopment notes on the stumbling blocks I faced\n\u003ca href=\"https://github.com/cmdcolin/logistic_chaos_map/blob/master/NOTES.md\"\u003ehttps://github.com/cmdcolin/logistic_chaos_map/blob/master/NOTES.md\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"footnote-6-i-thought-you-said-typescript-too\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-6-i-thought-you-said-typescript-too\"\u003e\u003ca href=\"#footnote-6-i-thought-you-said-typescript-too\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 6: I thought you said typescript too\u003c/h2\u003e\n\u003cp\u003eYep! The \u003ccode\u003ehello-wasm\u003c/code\u003e example generates typescript \u003ccode\u003e.d.ts\u003c/code\u003e files! Check out the\n\u003ccode\u003ehello-wasm/pkg/\u003c/code\u003e folder after you build it! This was none of my doing, just a\nbuilt-in feature. PS: I highly recommend inspecting the \u003ccode\u003epkg\u003c/code\u003e folder that is\nproduced in the \u003ccode\u003ehello-wasm\u003c/code\u003e build to help understand the details. I also\nrecommend reading the \u003ca href=\"https://rustwasm.github.io/wasm-bindgen/\"\u003ehttps://rustwasm.github.io/wasm-bindgen/\u003c/a\u003e docs and if you\nare getting started with rust, read the Rust Book along with doing rustlings\n\u003ca href=\"https://github.com/rust-lang/rustlings\"\u003ehttps://github.com/rust-lang/rustlings\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"footnote-7-another-resource\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-7-another-resource\"\u003e\u003ca href=\"#footnote-7-another-resource\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 7: Another resource\u003c/h2\u003e\n\u003cp\u003eThis article was posted on reddit and is also a great resource especially about\nsync vs async webpack loading schemes for wasm\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://canvasapp.com/blog/building-modern-web-apps-with-rust-wasm-and-webpack/\"\u003ehttps://canvasapp.com/blog/building-modern-web-apps-with-rust-wasm-and-webpack/\u003c/a\u003e\u003c/p\u003e"},{"title":"Photos of vacation","date":"2022-08-21","slug":"2022-08-21-vacation","html":"\u003cp\u003eFrom Aug 1st-\u003eAug 18 I did a road trip from the South Carolina to New Mexico. I\nflew out and met my partner who had driven there earlier to help her mom out at\nthe house.\u003c/p\u003e\n\u003cp\u003eIt was a great trip\u003c/p\u003e\n\u003cp\u003eRoute stops\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCharleston, SC (Several days)\u003c/li\u003e\n\u003cli\u003eCharlotte, NC (Several days, Wedding)\u003c/li\u003e\n\u003cli\u003eMontgomery, AL (One night)\u003c/li\u003e\n\u003cli\u003eNew Orleans, LA (Several days)\u003c/li\u003e\n\u003cli\u003eHouston, TX (One night)\u003c/li\u003e\n\u003cli\u003eJunction, TX (One night)\u003c/li\u003e\n\u003cli\u003eAlpine, TX (One night)\u003c/li\u003e\n\u003cli\u003eValentine, TX (One night)\u003c/li\u003e\n\u003cli\u003eTruth or Consequences, NM (One night)\u003c/li\u003e\n\u003cli\u003eAlbuquerque, NM (Home)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220803_155653295.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eamazing results from the sea turtle rescue at the charleston, SC aquarium\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220805_145459605_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emy partner Leah at edisto beach state park\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220805_151340018_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emore edisto, the beach has many dead and standing dead trees on the beach\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220805_151800531_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emore edisto\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220805_151805593_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emore edisto\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220806_093129359.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ewetlands near bowen's island SC\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220806_094813656_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ea worn down house with a mural, and fallen traffic signal in SC\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220807_173529613_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ephoto of a butterfly from wedding site near charlotte, NC\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220808_103832831_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eour weird airbnb cabin in near charlotte, SC which was a civil war era cabin\nfrom virginia moved in it's entirety to NC\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220809_174740904_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003enew orleans skyline from a weird industrial art park\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220809_182035943_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ecare bear in new orleans\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220809_190950114.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ereality continues to ruin my life\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220810_121137729.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ewild \"surf n turf po boy\" (right) and a more conventional muffalata sandwich\n(left) in new orleans, had while hiding from a rain storm\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220811_140043783_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ecity park, new orleans\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220811_140543522_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003elarge oak, new orleans city park\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220811_142427022.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eapple snail eggs in new orleans city park, an invasive species\n\u003ca href=\"https://www.theadvocate.com/baton_rouge/entertainment_life/home_garden/article_775fb018-5268-11ea-8f75-f7e8fb8525fe.html\"\u003ehttps://www.theadvocate.com/baton_rouge/entertainment_life/home_garden/article_775fb018-5268-11ea-8f75-f7e8fb8525fe.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220811_153012540.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eplacard describing \"pit beef\", a baltimore sandwich from the southern museum of\ncooking\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220811_154040098.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eengraving describing some native american beach early \"bbq\" method (gator and\ndog possibly visible) from the southern museum of cooking\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220811_154404713.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ehistory of bbq from the southern museum of cooking\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220811_154549161.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ehot brown sandwich, placard from the southern museum of cooking\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220812_110617743.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eour airbnb in new orleans, in a very cool mansion in the garden district\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220812_113038243.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emore airbnb\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220812_113224854.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emore airbnb\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220812_113234259.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emore airbnb\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220813_211534759.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eour airbnb hosts in junction, TX gave us tickets to the rodeo there, a one night\nonly event. lot's of cowboy hats\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220814_133823204_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003egoats near socorro caverns\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220814_135951677_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003epeacocks (including an albino?) near socorro caverns\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220815_092445801_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emule ears, big bend nat'l park\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220815_101452396_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003edung beetle, big bend nat'l park\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220815_102214238_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ecanyon at big bend nat'l park\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220815_191014795_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003efire in valentine, tx. note, my feet are very muddy from trying to wade in the\nrio grande\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220815_203037340.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ecooking on the fire in valentine, TX\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220816_125951579_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emetal grave placard, el paso, TX\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220817_092022789_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003educk pond, truth or consequences, NM\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220820_185137107.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eback in ABQ, fermenting some hot peppers we got on trip\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_7091.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eme in city park, new orleans\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_7378.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eme at the mule ears, big bend nat'l park\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_7384.JPG\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ecows at big bend nat'l park\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_7391.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e(wild?) horses at big bend nat'l park\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_7403.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eme in the canyon at big bend nat'l park\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_7663.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ebeezle celebrating my birthday (8/17) on return to ABQ\u003c/p\u003e"},{"title":"Photos of life","date":"2022-07-29","slug":"2022-07-29-happy","html":"\u003cp\u003eI started this post to try to talk about things that make me happy. It's not\nreally a happiness though that I wanted to talk about, it's just about living\nlife...sometimes it's a struggle and that can be rewarding also. So here are\nsome photos of everyday things\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220619_201622482.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003esunset from backyard. my house is adjacent to an \"abandoned\" golf course so it's\njust a big open space\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220622_100019949.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ea dog named remy i saw at the dog park visiting parents. remy has a funny habit\nof herding other dogs around\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220624_210922889.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ethe sky from my parents backyard\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220626_071349516.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emy parents dogs zoe (right) and tux (left). my parents walk them everyday and\nit's great to join them\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220627_145201639_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ethe place I live is a house that we rent. unfortunately and the owners are\nletting the place fall apart due to leaks in the roof\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220704_133123492.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ea salad I made with jicama, carrot, greens, and orange on july 4th\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220705_200242153_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003esome hazy sun before a rainstorm in NM\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220705_201600095_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003esome sun after the rain\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220709_111938701_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ecooking purple potatoes\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220709_115455797.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eafter cooking the purple potatoes\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220709_175755642.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ehummingbird hanging out in the backyard\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220710_175851539_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ea fresno pepper from my weird backyard garden (all plants potted with these felt\nbags, works fairly ok)\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220713_200957865.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ebeezle hanging out in his favorite spot, on top of a box spring in the hallway\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220714_200346243.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ethe belt I made for myself from a piece of leather that i found in a shop when I\nvisited toronto pre-pandemic (more pics from making it\n\u003ca href=\"https://imgur.com/a/Ff5Mn3l\"\u003ehttps://imgur.com/a/Ff5Mn3l\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220715_230433785.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003efruit and yogurts\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220716_132939371.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emaking a drip irrigation system for my weird garden. the sunrise timer was\nparticularly funny. I put the battery pack in backwards and it didn't work, and\ntook it apart to fully understand the mechanism (had to see how the battery\ncontacts touched the inside of the system to see it)\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220717_204303427_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003epork belly\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220717_210017665.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ebibimbap with pork belly\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220718_174420132_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003esome little tomatoes. these were eaten by caterpillars shortly after taking\nthese. battling these little critters has been a learning experience\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220719_173156813.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003echicken thighs\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220719_173426354.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ejamaican jerk style sauce\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220719_181601967_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eusing a meat thermometer+grill...been a real level-up\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220719_184903147.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ecooked, perhaps overly so, but quite juicy still due to brining\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220720_174949541_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emy funny backyard setup, the bowl makes little sounds when it rains (sound\nrecording \u003ca href=\"https://cmdcolinphotos.s3.amazonaws.com/out.mp3\"\u003ehttps://cmdcolinphotos.s3.amazonaws.com/out.mp3\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220722_201326050_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003esynthesizering\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220724_104240569.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ecooked down some strawberries that my neighbor gave me, she's awesome\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220725_095848819_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ebeezle in his tree\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220725_111117447.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emy brother came to visit me, synthesizering around the breakfast table\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220725_111129150.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ebeezle playing the synth\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220725_164816159.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emaking some kimchi and saurkraut. these got quite bubbly and active, quite fun\nto make. should get some airlock jars\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220726_162730132_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emy brother and I visiting the dry river bed of the rio grande in south\nalbuquerque\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220726_163019069_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003emore dry rio grande. note that many the irrigation ditches around the rio are\nflowing full...\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220728_170257266_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ethe rio grande north of albuquerque is still flowing\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cmdcolinphotos.s3.amazonaws.com/IMG_20220728_174207531_HDR.resized.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003every tiny purple flowers\u003c/p\u003e"},{"title":"Watch out for your pinky finger (AND elbow posture)","date":"2022-07-08","slug":"2022-07-08-pinky","html":"\u003cp\u003eI have, for several months, suffered a twinge in my left pinky finger from\nexcessive strain due to hand contortions largely caused by keyboard use.\u003c/p\u003e\n\u003cp\u003eParticularly troublesome in my opinion has been the use of the left-ctrl key for\nkeyboard shortcuts.\u003c/p\u003e\n\u003cp\u003eUpdate Sep 2022: I have also come to realize that this can be strongly related\nto elbow posture, so I added sections on this.\u003c/p\u003e\n\u003ch3 id=\"programs-that-are-particularly-troublesome-for-the-left-pinky\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#programs-that-are-particularly-troublesome-for-the-left-pinky\"\u003e\u003ca href=\"#programs-that-are-particularly-troublesome-for-the-left-pinky\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003ePrograms that are particularly troublesome for the left pinky\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003emany programs: ctrl+c, ctrl+v, ctrl+x, ctrl+f\u003c/li\u003e\n\u003cli\u003eterminal: shift+ctrl+v to paste\u003c/li\u003e\n\u003cli\u003etmux: default ctrl+somekey as leader\u003c/li\u003e\n\u003cli\u003echrome: ctrl+w to close tab, ctrl+t for new tab, ctrl+r for refresh,\nshift+ctrl+r for cache-cleared refresh\u003c/li\u003e\n\u003cli\u003evim: using esc key on the far left, custom configurations using ctrl key e.g.\nctrl+p (I also had ctrl+g, ctrl+f for custom file finders for awhile but no\nlonger)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIn order to make these movements, particularly if you use the left hand to do\nit, you have to contort your hand pretty drastically. Chrome is particularly bad\nbecause it is not possible(?) to reconfigure their keyboard shortcuts.\u003c/p\u003e\n\u003cp\u003eUnfortunately, I did not really listen to warning signs from my hand. It started\nout with tingling like my hand \"fell asleep\", but now there is a mild pain from\nalmost any keyboard usage.\u003c/p\u003e\n\u003ch3 id=\"general-approaches-to-help-out\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#general-approaches-to-help-out\"\u003e\u003ca href=\"#general-approaches-to-help-out\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eGeneral approaches to help out\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eTake time out of my day e.g. pomodoro to take rests\u003c/li\u003e\n\u003cli\u003eDo hand exercises and stretches when idle\u003c/li\u003e\n\u003cli\u003eMassages to the muscles\u003c/li\u003e\n\u003cli\u003eUsing touch typing, making my hands float above the keyboard when typing\u003c/li\u003e\n\u003cli\u003eAvoiding curling up the pinky while typing, keep hand relaxed\u003c/li\u003e\n\u003cli\u003eUse both hands to execute shortcuts instead of contorting left hand\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"update-avoiding-elbowulnar-nerve-strain\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#update-avoiding-elbowulnar-nerve-strain\"\u003e\u003ca href=\"#update-avoiding-elbowulnar-nerve-strain\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eUpdate: Avoiding elbow/ulnar nerve strain\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Guyon_syndrome_pain_distribution.jpg/1280px-Guyon_syndrome_pain_distribution.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ePicture from Wikipedia \u003ca href=\"https://en.wikipedia.org/wiki/Ulnar_tunnel_syndrome\"\u003ehttps://en.wikipedia.org/wiki/Ulnar_tunnel_syndrome\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI have come to realize that the pinky finger and ring finger are strongly\nrelated to the elbow and ulnar nerve, also known as your funnybone. This can\ncause issues sometimes called \"ulnar tunnel\" or \"cubital tunnel\" which is\nrelatively distinct from \"carpal tunnel\" and is more strongly related to the\nring and pinky fingers! You can get ring/pinky pain from compression of the\nnerve near the wrist or near the elbow, but the elbow is quite common.\u003c/p\u003e\n\u003cp\u003eSome notes about improving elbow ergonomics\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAvoid applying too much pressure to elbows on armrests (ulnar nerve) while at\ndesk\u003c/li\u003e\n\u003cli\u003eAvoid typing with elbows bent e.g. straighten arms\u003c/li\u003e\n\u003cli\u003eAvoid sleeping with elbows super bent e.g. I get this sleeping on my stomach\nwith my elbows under my body. Use ulnar/elbow brace for sleeping. I am\nordering one of these to try out\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"technical-approaches-and-key-remappings-for-pinky-ergonomics\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#technical-approaches-and-key-remappings-for-pinky-ergonomics\"\u003e\u003ca href=\"#technical-approaches-and-key-remappings-for-pinky-ergonomics\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eTechnical approaches and key remappings for pinky ergonomics\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eRemap caps lock to left+ctrl. This is a common one you hear recommended and it\nmay help, and it has less contortion, particularly for chrome with one hand\nuse. So you can say capslock+w, capslock+t, but it is still using pinky and\ncan be stressful if not careful (capslock+w fine, capslock+t still contortion\nif done with one hand)\u003c/li\u003e\n\u003cli\u003eMore use of the right-hand-only shortcuts or at least avoiding using the left\npinky for shortcuts. I don't have many of these but will look into retraining\nmyself for some of these. I am testing out right ctrl+] for leader in tmux,\nand - and = for split window horizontal and vertical\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"things-still-to-try-better-ergonomics-and-gadgets\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#things-still-to-try-better-ergonomics-and-gadgets\"\u003e\u003ca href=\"#things-still-to-try-better-ergonomics-and-gadgets\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eThings still to try: better ergonomics and gadgets\u003c/h3\u003e\n\u003cp\u003eIn truth, I type a lot on a laptop with a poor keyboard layout, and often use it\naway from a desk. I think improving my desk ergonomics could help, and getting a\nfancy keyboard and maybe mouse (though I much prefer a touchpad) could be a next\nfrontier, along with ensuring proper desk height, chair height, etc.\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eIt is not great to get to this point. My hand posture and body posture at the\nkeyboard has been bad for years, and it has caught up to me. Learning the\nconnection with my elbow and ulnar nerve was very enlightening for my situation.\nThe common problem many people discuss is carpal tunnel related, but the ulnar\nis actually a relatively separate problem, though related in many ways too. I\nrecommend people be aware of contorting their hand or applying pressure on their\nelbows too much, lest they suffer the same!\u003c/p\u003e\n\u003ch2 id=\"any-more-ideas\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#any-more-ideas\"\u003e\u003ca href=\"#any-more-ideas\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAny more ideas?\u003c/h2\u003e\n\u003cp\u003eLet me know of ways you take care of your hands (hardware, software, or\notherwise)\u003c/p\u003e\n\u003ch2 id=\"other-resources\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#other-resources\"\u003e\u003ca href=\"#other-resources\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eOther resources\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eSee this post by Matt Might for some more resources\n\u003ca href=\"https://matt.might.net/articles/preventing-and-managing-rsi/\"\u003ehttps://matt.might.net/articles/preventing-and-managing-rsi/\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eUlnar tunnel \u003ca href=\"https://en.wikipedia.org/wiki/Ulnar_tunnel_syndrome\"\u003ehttps://en.wikipedia.org/wiki/Ulnar_tunnel_syndrome\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e"},{"title":"You may not need a bundler for your NPM library","date":"2022-05-27","slug":"2022-05-27-youmaynotneedabundler","html":"\u003cp\u003eI have seen a couple threads on twitter where people complain about the\ndifficulty with publishing NPM libraries or ask what starter kit they should use\n(or, people recommended starter packs anyways)\u003c/p\u003e\n\u003cp\u003eExample threads\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/cramforce/status/1513903035197526017\"\u003ehttps://twitter.com/cramforce/status/1513903035197526017\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/oleg008/status/1510006191296061441\"\u003ehttps://twitter.com/oleg008/status/1510006191296061441\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/iansu/status/1524860613943382017\"\u003ehttps://twitter.com/iansu/status/1524860613943382017\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/mpocock1/status/1525075901905522691\"\u003ehttps://twitter.com/mpocock1/status/1525075901905522691\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eOne thing that is notable to me in these threads is that people often recommend\nthat you use a bundler (a program that combines multiple src files into a single\nor fewer output files) when developing a library\u003c/p\u003e\n\u003cp\u003eExamples of starter packs suggested in these threads that use bundlers\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003emicrobundle\u003c/code\u003e - \u003ca href=\"https://github.com/developit/microbundle\"\u003ehttps://github.com/developit/microbundle\u003c/a\u003e - uses rollup\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eesno\u003c/code\u003e - \u003ca href=\"https://www.npmjs.com/package/esno\"\u003ehttps://www.npmjs.com/package/esno\u003c/a\u003e - uses esbuild\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eunbuild\u003c/code\u003e - \u003ca href=\"https://github.com/unjs/unbuild\"\u003ehttps://github.com/unjs/unbuild\u003c/a\u003e - uses rollup\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epreconstruct\u003c/code\u003e - \u003ca href=\"https://github.com/preconstruct/preconstruct\"\u003ehttps://github.com/preconstruct/preconstruct\u003c/a\u003e - uses rollup\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etsup\u003c/code\u003e - \u003ca href=\"https://github.com/egoist/tsup\"\u003ehttps://github.com/egoist/tsup\u003c/a\u003e - uses esbuild\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etsdx\u003c/code\u003e - \u003ca href=\"https://github.com/jaredpalmer/tsdx\"\u003ehttps://github.com/jaredpalmer/tsdx\u003c/a\u003e - uses rollup\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evite library mode\u003c/code\u003e - \u003ca href=\"https://vitejs.dev/guide/build.html#library-mode\"\u003ehttps://vitejs.dev/guide/build.html#library-mode\u003c/a\u003e - uses\nrollup\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epackemon\u003c/code\u003e - \u003ca href=\"https://github.com/milesj/packemon\"\u003ehttps://github.com/milesj/packemon\u003c/a\u003e - uses rollup\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ets-library-template\u003c/code\u003e - \u003ca href=\"https://github.com/shortercode/ts-library-template\"\u003ehttps://github.com/shortercode/ts-library-template\u003c/a\u003e -\nuses rollup\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eparcel\u003c/code\u003e - \u003ca href=\"https://twitter.com/devongovett/status/1524944991402999810\"\u003ehttps://twitter.com/devongovett/status/1524944991402999810\u003c/a\u003e - uses\nparcel\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edts\u003c/code\u003e - \u003ca href=\"https://weiran-zsd.github.io/dts-cli/\"\u003ehttps://weiran-zsd.github.io/dts-cli/\u003c/a\u003e - uses rollup\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epkgroll\u003c/code\u003e - \u003ca href=\"https://github.com/privatenumber/pkgroll\"\u003ehttps://github.com/privatenumber/pkgroll\u003c/a\u003e - uses rollup\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emkdist\u003c/code\u003e - \u003ca href=\"https://github.com/unjs/mkdist\"\u003ehttps://github.com/unjs/mkdist\u003c/a\u003e - referenced by \u003ccode\u003eunbuild\u003c/code\u003e, uses\nesbuild\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eNot using bundlers\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003egts\u003c/code\u003e - \u003ca href=\"https://github.com/google/gts\"\u003ehttps://github.com/google/gts\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ets-react-toolbox\u003c/code\u003e - \u003ca href=\"https://github.com/zzarcon/ts-react-toolbox/\"\u003ehttps://github.com/zzarcon/ts-react-toolbox/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIn summary 2/15 do not use a bundler, 13/15 do use a bundler. Sidenote: webpack\nnotably absent. Sidenote 2: I don't necessarily give praise to the two not using\nbundlers, just saying they exist.\u003c/p\u003e\n\u003ch2 id=\"why-would-you-not-want-a-bundler-for-your-library\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#why-would-you-not-want-a-bundler-for-your-library\"\u003e\u003ca href=\"#why-would-you-not-want-a-bundler-for-your-library\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhy would you \u003cem\u003eNOT\u003c/em\u003e want a bundler for your library?\u003c/h2\u003e\n\u003cp\u003eMy main argument is that the consumer of your library is the one that should use\na bundler if it is relevant to them. If the library uses a bundler:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ein the best case, it has no impact on the consumer\u003c/li\u003e\n\u003cli\u003ein the worst case, it affects the complexity of your library and makes\npossible limitations for your consumers also.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAn example where it can actually create limitations, you might consider code\nsplitting with async \u003ccode\u003eimport()\u003c/code\u003e. If you create a single file bundle, then the\nconsumer of your library may not be able to do code splitting properly via async\n\u003ccode\u003eimport()\u003c/code\u003e\u003c/p\u003e\n\u003ch2 id=\"why-would-you-maybe-want-a-bundler-for-your-library\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#why-would-you-maybe-want-a-bundler-for-your-library\"\u003e\u003ca href=\"#why-would-you-maybe-want-a-bundler-for-your-library\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhy would you \u003cem\u003eMAYBE\u003c/em\u003e want a bundler for your library\u003c/h2\u003e\n\u003cp\u003eIf you really care about producing a \u003ccode\u003eUMD\u003c/code\u003e bundle that can be used in a script\ntag, maybe you want a bundler, but the future does not seem to be in \u003ccode\u003eUMD\u003c/code\u003e. One\nother possible bundle type is maybe you like the idea of a single file \u003ccode\u003eESM\u003c/code\u003e\nmodule. It is similar where you could maybe reference this from a script tag\nwith type module, but this seems like a niche usage. For example, you would\nstill have to consider:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIf you are not bundling dependencies, then what is the benefit of using a\nbundler?\u003c/li\u003e\n\u003cli\u003eIf you are bundling dependencies, you are not allowing people to get updates\nto your sub-dependencies with semver!\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAdd-on: Another concern brought up by users in discussion thread: There is a\ncost to having many small files, e.g. in app startup cost on serverless or any\nnodejs application to loading many small files off disk. To me, this is an app\nlevel concern, similar to bundling for the browser though.\u003c/p\u003e\n\u003ch2 id=\"my-suggestion-no-bundler-no-starter-pack-just-tsc\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#my-suggestion-no-bundler-no-starter-pack-just-tsc\"\u003e\u003ca href=\"#my-suggestion-no-bundler-no-starter-pack-just-tsc\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eMy suggestion: no bundler, no starter pack, just \u003ccode\u003etsc\u003c/code\u003e\u003c/h2\u003e\n\u003cp\u003eI'd recommend just compiling your code with \u003ccode\u003etsc\u003c/code\u003e, no bundler involved. This\nway, you can develop with typescript, it will output \u003ccode\u003ejs\u003c/code\u003e files, and you can\ndirectly deploy a \u003ccode\u003edist\u003c/code\u003e folder of \u003ccode\u003ejs\u003c/code\u003e files to NPM.\u003c/p\u003e\n\u003ch3 id=\"example-packagejson\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#example-packagejson\"\u003e\u003ca href=\"#example-packagejson\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eExample \u003ccode\u003epackage.json\u003c/code\u003e\u003c/h3\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eyourlib\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eversion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1.0.0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edist/index.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003escripts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eclean\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003erimraf dist\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eprebuild\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enpm run clean\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etsc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epreversion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enpm run build\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epostversion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003egit push --follow-tags\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efiles\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: [\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edist\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edevDependencies\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003erimraf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^3.0.2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etypescript\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^4.6.2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"features-of-the-above-packagejson\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#features-of-the-above-packagejson\"\u003e\u003ca href=\"#features-of-the-above-packagejson\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFeatures of the above \u003ccode\u003epackage.json\u003c/code\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eWe can use a single command, \u003ccode\u003eyarn publish\u003c/code\u003e to publish to npm\u003c/li\u003e\n\u003cli\u003eThe single \u003ccode\u003eyarn publish\u003c/code\u003e automatically runs \u003ccode\u003eclean\u003c/code\u003e and \u003ccode\u003ebuild\u003c/code\u003e via\n\u003ccode\u003epreversion\u003c/code\u003e, then \u003ccode\u003epostversion\u003c/code\u003e, which pushes the tag to the remote repo\u003c/li\u003e\n\u003cli\u003eThe \u003ccode\u003e\"files\": [\"dist\", \"src\"]\u003c/code\u003e refers to publishing the \u003ccode\u003edist\u003c/code\u003e and \u003ccode\u003esrc\u003c/code\u003e\ndirectories, and src is used for the \u003ccode\u003esourceMap\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"example-tsconfigjson\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#example-tsconfigjson\"\u003e\u003ca href=\"#example-tsconfigjson\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eExample\u003ccode\u003e tsconfig.json\u003c/code\u003e\u003c/h3\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003einclude\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: [\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecompilerOptions\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etarget\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ees2018\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eoutDir\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edist\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003elib\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: [\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edom\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eesnext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edeclaration\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emoduleResolution\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enode\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esourceMap\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003estrict\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eesModuleInterop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"features-of-the-above-tsconfigjson\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#features-of-the-above-tsconfigjson\"\u003e\u003ca href=\"#features-of-the-above-tsconfigjson\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFeatures of the above \u003ccode\u003etsconfig.json\u003c/code\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eUses \u003ccode\u003e\"moduleResolution\": \"node\"\u003c/code\u003e - this is not pure-ESM because pure-ESM\nexpects you to import filenames with their file extension, while node module\nresolution can import extensionless paths, but node module resolution\ngenerally works well with consumers that use bundlers themselves\u003c/li\u003e\n\u003cli\u003eUses \u003ccode\u003e\"target\": \"es2018\"\u003c/code\u003e - This is does a small amount of transpilation of\nsuper modern features, but would generally not require your users to babel-ify\ntheir \u003ccode\u003enode_modules\u003c/code\u003e if they consume your library\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"what-about-testing\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#what-about-testing\"\u003e\u003ca href=\"#what-about-testing\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhat about testing?\u003c/h2\u003e\n\u003cp\u003eAdding testing is not immediately solved by the above, but bundling doesn't\nreally help testing anyways. It's just a starter pack feature we can add on.\nSome options you have include\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUse \u003ccode\u003ets-jest\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003ejest\u003c/code\u003e on it's own, plus a \u003ccode\u003ebabel\u003c/code\u003e config with \u003ccode\u003e@babel/preset-typescript\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003ejest\u003c/code\u003e on it's own, run over the compiled output without a \u003ccode\u003ebabel\u003c/code\u003e config\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003evitest\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003ePossibly something else? Node now has a built-in test runner. It will be a\nslow road to adoption but might become more popular over time\n\u003ca href=\"https://fusebit.io/blog/node-testing-comes-to-core/\"\u003ehttps://fusebit.io/blog/node-testing-comes-to-core/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eIt is tempting to have nice zero-config solutions and starter kits, but to me,\nit is not really beneficial to use the bundler aspect of many of these for\npublishing to NPM. Am I wrong? Let me know if I am.\u003c/p\u003e\n\u003cp\u003eAlso, these starter kits may not be maintained for perpetuity. Our team used\n\u003ccode\u003etsdx\u003c/code\u003e for some time, but it was not maintained well, and used old typescript\nversion 3.x, and it ended up being hard to remove from our codebase. Learning\nthe basic tools like \u003ccode\u003etsc\u003c/code\u003e will help\u003c/p\u003e\n\u003ch2 id=\"footnote-1-shipping-pure-esm\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1-shipping-pure-esm\"\u003e\u003ca href=\"#footnote-1-shipping-pure-esm\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1: Shipping \"pure-ESM\"\u003c/h2\u003e\n\u003cp\u003eDo you want to make a pure-ESM package? Then you do not want to use\n\u003ccode\u003e\"moduleResolution\": \"node\"\u003c/code\u003e in \u003ccode\u003etsconfig.json\u003c/code\u003e, and you will want to set\n\u003ccode\u003e\"type\": \"module\"\u003c/code\u003e in \u003ccode\u003epackage.json\u003c/code\u003e. You may also need to explicitly import\nwith \u003ccode\u003e.js\u003c/code\u003e extensions in your source code, even if you write \u003ccode\u003e.ts\u003c/code\u003e. This is\nawkward, and something the community is still grappling with.\u003c/p\u003e\n\u003cp\u003eIf you have ever stumbled on this topic, you will probably want to see this link\n\u003ca href=\"https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c\"\u003ehttps://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"footnote-2-shipping-esm-and-commonjs-side-by-side-without-going-pure-esm\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2-shipping-esm-and-commonjs-side-by-side-without-going-pure-esm\"\u003e\u003ca href=\"#footnote-2-shipping-esm-and-commonjs-side-by-side-without-going-pure-esm\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 2: Shipping ESM and CommonJS side by side without going \"pure-ESM\"\u003c/h2\u003e\n\u003cp\u003eIt can be tricky to go pure-ESM, but you can go most of the way there by using\nboth the \"main\" and \"module\" fields in package.json\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCompile with tsc with \u003ccode\u003etsc --module commonjs --outDir dist\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eCompile with tsc again with \u003ccode\u003etsc --module esnext --outDir esm\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eThen set \"main\":\"dist/index.js\" for node and \u003ccode\u003e\"module\":\"esm/index.js\"\u003c/code\u003e for\nbundlers\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe \"module\" field is a field only bundlers recognizes\n\u003ca href=\"https://stackoverflow.com/questions/42708484/what-is-the-module-package-json-field-for\"\u003ehttps://stackoverflow.com/questions/42708484/what-is-the-module-package-json-field-for\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eNote: This is different from the \"type\":\"module\" which marks your module as\npure-ESM!\u003c/p\u003e\n\u003cp\u003eI have found this technique can go a long ways towards keeping your package\ncompatible with nodeJS and bundlers and it does not require \"export maps\" or\nanything which I have found to be difficult to configure\u003c/p\u003e\n\u003ch2 id=\"footnote-3-learning-your-tools\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-3-learning-your-tools\"\u003e\u003ca href=\"#footnote-3-learning-your-tools\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 3: Learning your tools\u003c/h2\u003e\n\u003cp\u003eSeveral people on the\n\u003ca href=\"https://cmdcolin.github.io/posts/2022-05-04-findseddangerous\"\u003emy recent post\u003c/a\u003e\npost suggested that I did not understand my tools, and that I should just learn\nthe tools correctly and I wouldn't have the problem I had.\u003c/p\u003e\n\u003cp\u003eIndeed, what I am now telling people to do in this post is similar: I am saying\n\"just use \u003ccode\u003etsc\u003c/code\u003e by itself! Understand you tools! You may have to do more\nresearch and create more boilerplate, but it's \u003cstrong\u003ebetter\u003c/strong\u003e\".\u003c/p\u003e\n\u003cp\u003eUltimately though, it's up to you to choose your tools and starter packs and\nwhatnot.\u003c/p\u003e\n\u003ch2 id=\"footnote-4-what-does-it-look-like-when-you-compile-with-tsc\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-4-what-does-it-look-like-when-you-compile-with-tsc\"\u003e\u003ca href=\"#footnote-4-what-does-it-look-like-when-you-compile-with-tsc\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 4: What does it look like when you compile with tsc?\u003c/h2\u003e\n\u003cp\u003eWhen I refer to compiling with tsc above, I compile a \u003ccode\u003esrc\u003c/code\u003e directory into a\n\u003ccode\u003edist\u003c/code\u003e directory\u003c/p\u003e\n\u003cp\u003eSo if I have:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003esrc/index.ts\nsrc/util.ts\nsrc/components/Button.ts\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRunning \u003ccode\u003etsc\u003c/code\u003e will output:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003edist/index.js\ndist/index.d.ts\ndist/index.js.map\ndist/util.js\ndist/util.d.ts\ndist/util.js.map\ndist/components/Button.js\ndist/components/Button.d.ts\ndist/components/Button.js.map\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen, the \u003ccode\u003edist\u003c/code\u003e and \u003ccode\u003esrc\u003c/code\u003e directories are published to npm which enables the\n\u003ccode\u003esourceMaps\u003c/code\u003e to work.\u003c/p\u003e\n\u003cp\u003eNote: We do not need to explicitly say where the typescript types are with\n\"types\" in \u003ccode\u003epackage.json\u003c/code\u003e, many starter packs do this but it is unneeded for\nthis package as the d.ts files are automatically found.\u003c/p\u003e\n\u003cp\u003eSee \u003ca href=\"https://cmdcolin.github.io/posts/2021-12-31-npm-package\"\u003ehttps://cmdcolin.github.io/posts/2021-12-31-npm-package\u003c/a\u003e for my article on\ncreating a typescript package for npm\u003c/p\u003e\n\u003ch2 id=\"footnote-5-other-things-people-recommend\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-5-other-things-people-recommend\"\u003e\u003ca href=\"#footnote-5-other-things-people-recommend\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 5: Other things people recommend\u003c/h2\u003e\n\u003cp\u003eOther things people recommend in the starter pack threads\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edeno\u003c/code\u003e - not clear to me how this helps when deploying to npm, but I still\ngotta try deno\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ets-node \u003c/code\u003e - not clear to me how this helps when deploying to npm\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003enx\u003c/code\u003e - heavy monorepo-based solution\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eelm\u003c/code\u003e - that's just a different thing\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eTypescript-Node-Starter\u003c/code\u003e -\n\u003ca href=\"https://github.com/microsoft/TypeScript-Node-Starter\"\u003ehttps://github.com/microsoft/TypeScript-Node-Starter\u003c/a\u003e - not a library, full\nstack framework\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ejoystick\u003c/code\u003e - \u003ca href=\"https://github.com/CheatCode/joystick\"\u003ehttps://github.com/CheatCode/joystick\u003c/a\u003e - not a library, full stack\nframework\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"footnote-6\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-6\"\u003e\u003ca href=\"#footnote-6\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 6:\u003c/h2\u003e\n\u003cp\u003eSimilar things happen if you take on dependencies of starter kits like\n\u003ccode\u003ecreate-react-app\u003c/code\u003e. You become very committed to their particular way of doing\nthings, and can only modify their config with things like \u003ccode\u003erescripts\u003c/code\u003e, \u003ccode\u003ecraco\u003c/code\u003e\nor \u003ccode\u003erewired\u003c/code\u003e. If you crafted your setup with just \u003ccode\u003ewebpack\u003c/code\u003e, you may not be so\ntied down. But, I still use things like \u003ccode\u003ecreate-react-app\u003c/code\u003e because they do seem\nto help me significantly. Now though, the tide seems to be turning other\ndirections like next.js which can do static site generation at a basic level and\nextend to multiple pages more easily.\u003c/p\u003e\n\u003ch2 id=\"footnote-7\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-7\"\u003e\u003ca href=\"#footnote-7\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 7:\u003c/h2\u003e\n\u003cp\u003eYou may not even need \u003ccode\u003etsc\u003c/code\u003e to compile your dist folder. You can literally\npublish your source \u003ccode\u003e.js\u003c/code\u003e files as-is to NPM. This suggestion comes from\n@trevmanz \u003ca href=\"https://twitter.com/trevmanz/status/1534962190008172545\"\u003e1\u003c/a\u003e\n\u003ca href=\"https://twitter.com/trevmanz/status/1534962940348092417\"\u003e2\u003c/a\u003e. I don't personally\nuse this technique yet but there are many users with this workflow\u003c/p\u003e\n\u003cp\u003eAn interesting thing is you can write in \u003ccode\u003e.js\u003c/code\u003e but still get \u003ccode\u003etypescript\u003c/code\u003e to get\ntype checking using \u003ccode\u003ejsdoc\u003c/code\u003e, just use \u003ccode\u003eallowJs\u003c/code\u003e/\u003ccode\u003echeckJs\u003c/code\u003e flags in\n\u003ccode\u003etsconfig.json\u003c/code\u003e\u003c/p\u003e\n\u003ch2 id=\"footnote-8\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-8\"\u003e\u003ca href=\"#footnote-8\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 8:\u003c/h2\u003e\n\u003cp\u003eWhat about React? Bundlers not needed, and not even babel is needed: you can\ncode your library as in \u003ccode\u003ejsx\u003c/code\u003e or \u003ccode\u003etsx\u003c/code\u003e files and use \u003ccode\u003etsc\u003c/code\u003e to compile it to\nReact.createElement statements or other jsx transforms.\u003c/p\u003e"},{"title":"Notes on performance profiling JS applications","date":"2022-05-10","slug":"2022-05-10-performanceprofiling","html":"\u003cp\u003eKeeping your program fast is important for\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003euser satisfaction in everyday apps\u003c/li\u003e\n\u003cli\u003emaking certain things tractable\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIn our application, we visualize some large-ish datasets using the browser and\njavascript\u003c/p\u003e\n\u003ch2 id=\"the-chrome-profiler\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#the-chrome-profiler\"\u003e\u003ca href=\"#the-chrome-profiler\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eThe Chrome profiler\u003c/h2\u003e\n\u003cp\u003eI use the Chrome DevTools \"Performance\" profiler, which is a\nstatistical/sampling profiler\n\u003ca href=\"https://en.wikipedia.org/wiki/Profiling_(computer_programming)#Statistical_profilers\"\u003ehttps://en.wikipedia.org/wiki/Profiling_(computer_programming)#Statistical_profilers\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThis means it samples at some rate and see's where in the callstack the program\nis executing.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIf you see large rectangles in the profiler, you may have a long running\nfunction\u003c/li\u003e\n\u003cli\u003eIf you see many small rectangles, your small function may be called many times\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eNote: sometimes your function may be so fast, it is rarely or never encountered\nby the sampling. It is a good thing (TM) to be this fast, but I mention it to\nnote that the sampling profiler does not give us a complete log of all function\ncalls.\u003c/p\u003e\n\u003ch2 id=\"creating-a-flamegraph-from-the-chrome-profiler-results\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#creating-a-flamegraph-from-the-chrome-profiler-results\"\u003e\u003ca href=\"#creating-a-flamegraph-from-the-chrome-profiler-results\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eCreating a flamegraph from the Chrome profiler results\u003c/h2\u003e\n\u003cp\u003eNote: sometimes, it is also useful to see the results as a \"flamegraph\" (see\n\u003ca href=\"https://www.brendangregg.com/flamegraphs.html\"\u003ehttps://www.brendangregg.com/flamegraphs.html\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eThe website \u003ca href=\"https://www.speedscope.app/\"\u003ehttps://www.speedscope.app/\u003c/a\u003e can create \"flamegraph\" style figures\nfor Chrome profiling results\u003c/p\u003e\n\u003cp\u003eUpdate: Firefox actually has the concept of flamegraph built into their\nprofiler. In 2022, I switched to using Firefox as my daily driver, so enjoy this\nbuilt-in feature.\u003c/p\u003e\n\u003ch2 id=\"stacking-up-many-small-optimizations\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#stacking-up-many-small-optimizations\"\u003e\u003ca href=\"#stacking-up-many-small-optimizations\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStacking up many small optimizations\u003c/h2\u003e\n\u003cp\u003eWorking with large datasets, sometimes your program will take a long time to\ncomplete. Especially if you work with javascript in the browser, it is a\nchallenge to make things go fast. But you can use micro optimizations to help\nimprove performance over time.\u003c/p\u003e\n\u003cp\u003eFor example, say a program takes 30 seconds to run on a certain dataset\u003c/p\u003e\n\u003cp\u003eIf you do profiling and find a couple microoptimizations that give you a 15%,\n10% and 5% performance improvement, then you program now takes 20 seconds to\nrun. That is still not instantaneous, but it is saving users a good 10 seconds.\u003c/p\u003e\n\u003ch2 id=\"examples-of-micro-optimizations\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#examples-of-micro-optimizations\"\u003e\u003ca href=\"#examples-of-micro-optimizations\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eExamples of micro optimizations\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eUsing \u003ccode\u003eMap\u003c/code\u003e instead of \u003ccode\u003eObject\u003c/code\u003e can often get small performance boosts\u003c/li\u003e\n\u003cli\u003eComparing value against \u003ccode\u003eundefined\u003c/code\u003e e.g. \u003ccode\u003eif(val===undefined)\u003c/code\u003e vs just\ncomparing against falsy e.g. \u003ccode\u003eif(!val)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eUsing \u003ccode\u003eTypedArray\u003c/code\u003e/\u003ccode\u003eUint8Array\u003c/code\u003e natively instead of \u003ccode\u003eBuffer\u003c/code\u003e polyfill. This\none is a kicker for me because we relied on \u003ccode\u003eBuffer\u003c/code\u003e polyfill, and webpack 5\nstopped bundling polyfills by default which made us wake up to this\u003c/li\u003e\n\u003cli\u003eWhen converting \u003ccode\u003eUint8Array\u003c/code\u003e to string, use \u003ccode\u003eTextDecoder\u003c/code\u003e for large strings,\nand just small string concatenations of \u003ccode\u003eString.fromCharCode\u003c/code\u003e for small ones.\nThere is an inflection point for string size where one is faster\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003efor\u003c/code\u003e loops instead of \u003ccode\u003eArray.prototype.forEach\u003c/code\u003e/\u003ccode\u003eArray.prototype.map\u003c/code\u003e. I\nthink similar to above, there is an inflection point (not where it gets faster\nin the \u003ccode\u003eforEach\u003c/code\u003e/\u003ccode\u003emap\u003c/code\u003e case, but where you can choose to care whether the\nsmall performance diff matters) based on number of elements in your array\u003c/li\u003e\n\u003cli\u003ePre-allocate an array with \u003ccode\u003enew Array(N)\u003c/code\u003e instead of just \u003ccode\u003e[]\u003c/code\u003e if possible\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI have tried to keep track of more microoptimizations here, but they are pretty\nspecific to small examples and may not generalize across browsers or browser\nversions \u003ca href=\"https://gist.github.com/cmdcolin/ef57d2783e47b16aa07a03967fd870d8\"\u003ehttps://gist.github.com/cmdcolin/ef57d2783e47b16aa07a03967fd870d8\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"examples-of-macro-optimizations\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#examples-of-macro-optimizations\"\u003e\u003ca href=\"#examples-of-macro-optimizations\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eExamples of macro optimizations\u003c/h2\u003e\n\u003cp\u003eOftentimes, large scale re-workings of your code or \"macro\" optimizations are\nthe way to make progress.\u003c/p\u003e\n\u003cp\u003eA macro optimization may be revealed if you are looking at your performance\nprofiling result and you think: this entire section of the program could be\nreworked to remove this overhead\u003c/p\u003e\n\u003cp\u003eIn this case, it is hard to advise on because most of these will be very\nspecific to your particular app.\u003c/p\u003e\n\u003cp\u003eJust as a specific example of a macro optimization I undertook:\u003c/p\u003e\n\u003cp\u003eWe use web workers, and had to serialize a lot of data from the web worker to\nthe main thread. I did a large re-working of the codebase to allow, in\nparticular examples, the main thread to request smaller snippets of data from\nthe web worker thread on-demand (the web worker is kept alive indefinitely)\ninstead of serializing all the web worker data and sending to the main thread.\u003c/p\u003e\n\u003cp\u003eThis change especially pays off with large datasets, where all that\nserialization/data duplication is computationally and memory expensive. Fun\nfact: I remember sitting at a table at a conference in Jan 2020 talking with my\nteam at the Plant and Animal Genome conference, thinking that we should make\nthis change -- finally did it, just took 2 years. [1]\u003c/p\u003e\n\u003ch2 id=\"end-to-end-optimization-testing\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#end-to-end-optimization-testing\"\u003e\u003ca href=\"#end-to-end-optimization-testing\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eEnd-to-end optimization testing\u003c/h2\u003e\n\u003cp\u003eIn order to comprehensively measure whether micro or macro optimizations are\nactually improving your real world performance, it can be useful to create an\nend-to-end test\u003c/p\u003e\n\u003cp\u003eFor our app, I created a \u003ccode\u003epuppeteer\u003c/code\u003e based test where I loaded the website and\nwaited for a \"DONE\" condition. I created a variety of different tests which\nallowed me to see e.g. some optimizations may only affect certain conditions.\u003c/p\u003e\n\u003cp\u003eDeveloping the end-to-end test suite tool awhile to develop (read: weeks to\nmature, though some earlier result were available), but it let me compare the\ncurrent release vs experimental branches, and over time, the experimental\nbranches were merged and things got faster. [2]\u003c/p\u003e\n\u003ch2 id=\"note-that-memory-usage-can-be-very-important-to-your-programs-performance\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#note-that-memory-usage-can-be-very-important-to-your-programs-performance\"\u003e\u003ca href=\"#note-that-memory-usage-can-be-very-important-to-your-programs-performance\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eNote that memory usage can be very important to your programs performance.\u003c/h2\u003e\n\u003cp\u003eExcessive allocations will increase \"GC pressure\" (the garbage collector will\ninvoke more Minor and Major GC, which you will see in your performance profiling\nreuslts as yellow boxes)\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eIt is really important to look at the profiling to see what your program\nactually is spending time on. You can make hypothetical optimizations all day\nand dream of rewriting in rust but you may just have a slow hot path in your JS\ncode that, if optimized, can get big speedups.\u003c/p\u003e\n\u003cp\u003eLet me know about your favorite optimizations in the comments!\u003c/p\u003e\n\u003ch2 id=\"footnotes\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnotes\"\u003e\u003ca href=\"#footnotes\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnotes\u003c/h2\u003e\n\u003cp\u003e[1] Note that things like SharedArrayBuffer also offer a means to share data\nbetween worker and main thread, but these come with many security limitations\nfrom the browser (and was even removed for a time while these security\nimplications were sussed out, due to Spectre/Meltdown vulnerabilities)\u003c/p\u003e\n\u003cp\u003e[2] I still have not found a good way to get automated memory usage profiling\nvia puppeteer. You can access window.process.memory in puppeteer, but this\nvariable does not provide info about webworker memory usage\n\u003ca href=\"https://github.com/puppeteer/puppeteer/issues/8258\"\u003ehttps://github.com/puppeteer/puppeteer/issues/8258\u003c/a\u003e\u003c/p\u003e"},{"title":"Using find . -exec sed is dangerous in a git repo","date":"2022-05-04","slug":"2022-05-04-findseddangerous","html":"\u003cp\u003eYou want to find and replace all instances of a string in your repo, so you\ngoogle \"find replace directory linux command\". You end up here\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://stackoverflow.com/a/6759339/2129219\"\u003ehttps://stackoverflow.com/a/6759339/2129219\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThey tell us\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efind\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e./\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-type\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ef\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-exec\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esed\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-i\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003es/apple/orange/g\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e{}\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1\"\u003e\\;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIgnoring the fact that this syntax is very long and hard to type, this command\nis dangerous to use in a git repository. Specifically, this can corrupt your\n.git contents.\u003c/p\u003e\n\u003ch2 id=\"why\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#why\"\u003e\u003ca href=\"#why\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhy?\u003c/h2\u003e\n\u003cp\u003eThis command is dangerous because, find . will enumerate dotfiles, including the\n.git directory, and then of course will run the find and replace inside them. We\ncan see this in the following session\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e mkdir corruptme\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e cd corruptme\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e git init\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e echo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e# README\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e README.md\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e git add README.md\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e git commit -m\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eInitial commit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e echo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHello world, it is a beautiful day. I sure hope someone doesn't corrupt this git repository\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e README.md\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e git commit -am\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eUpdate README.md\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e find .\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./README.md\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./.git\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./.git/branches\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./.git/config\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./.git/COMMIT_EDITMSG\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e...more\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003estuff...good\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eindication\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ethe\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecommand\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emight\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebe\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edangerous....\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e find ./ -type f -exec sed -i -e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003es/README/CORRUPTME/g\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {} \u003c/span\u003e\u003cspan style=\"color: #5FB3A1\"\u003e\\;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e git status\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eerror:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eindex\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003euses\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emd\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eextension,\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ewhich\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ewe\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enot\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eunderstand\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efatal:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eindex\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efile\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecorrupt\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn this case, you may be able to recover it e.g. with\n\u003ca href=\"https://stackoverflow.com/questions/1115854/how-to-resolve-error-bad-index-fatal-index-file-corrupt-when-using-git\"\u003ehttps://stackoverflow.com/questions/1115854/how-to-resolve-error-bad-index-fatal-index-file-corrupt-when-using-git\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eIf you happened to replace some random text that is actually in an object file\nthough e.g. .git/objects\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e find ./ -type f -exec sed -i -e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003es/VHTHJM/OOOOOO/g\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {} \u003c/span\u003e\u003cspan style=\"color: #5FB3A1\"\u003e\\;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e git status\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eerror:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einflate:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edata\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003estream\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eincorrect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edata\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003echeck\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eerror:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecorrupt\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eloose\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eobject\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e26cfc5964dfa5355a1747eb6eec6250aab5212d5\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efatal:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eunable\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eread\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e26cfc5964dfa5355a1747eb6eec6250aab5212d5\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"what-is-better\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#what-is-better\"\u003e\u003ca href=\"#what-is-better\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhat is better?\u003c/h2\u003e\n\u003cp\u003eMy take: Use ruplacer \u003ca href=\"https://github.com/dmerejkowsky/ruplacer\"\u003ehttps://github.com/dmerejkowsky/ruplacer\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThis tool won't try to replace stuff in your .git directory. It will also skip\nanything in .gitignore including e.g. node_modules. I was delighted to discover\nthis tool so, just spreading the word\u003c/p\u003e\n\u003cp\u003eAddendum: Reddit /u/Snarwin also recommended using git ls-files instead of find\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003egit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003els-files\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003exargs\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esed\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-i\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003es/apple/orange/g\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e"},{"title":"Cognitive reframing","date":"2022-03-03","slug":"2022-03-02-dont-let-it-get-to-you","html":"\u003cp\u003eA big part of my recent career has not been technical but emotional learning\u003c/p\u003e\n\u003cp\u003eThis has been very hard, but the benefits are worth it\u003c/p\u003e\n\u003cp\u003eA lot of it is mental reframing\u003c/p\u003e\n\u003ch2 id=\"meetings\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#meetings\"\u003e\u003ca href=\"#meetings\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eMeetings\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eMake a mental note of things you are grateful for, can do this before a\nmeeting to make sure you go in with a positive attitude\u003c/li\u003e\n\u003cli\u003eDeep breathing, especially if you feel anxious\u003c/li\u003e\n\u003cli\u003eTry not to drop bombs of negativity during a meeting, and at least consider\nyour tone when saying things\u003c/li\u003e\n\u003cli\u003eDon't try to complain about things that are broken too much. It is mean and\ncruel and demoralizes everyone\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"in-your-off-time\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#in-your-off-time\"\u003e\u003ca href=\"#in-your-off-time\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eIn your off time\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTry not to dwell on the things that are broken. You are smart. You will fix\nthem in time. It doesn't help to put your anxiety levels so high\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"remote-work-anxietiesfeeling-appreciated\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#remote-work-anxietiesfeeling-appreciated\"\u003e\u003ca href=\"#remote-work-anxietiesfeeling-appreciated\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eRemote work anxieties/feeling appreciated\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eIf someone isn't getting back to your issues, don't take it personally. Try\nreviewing their code, or check in with them\u003c/li\u003e\n\u003cli\u003eIf you don't feel appreciated, also try not to take it personally. Instead,\ntry to exude positivity in your own life\u003c/li\u003e\n\u003cli\u003eTry not to be a hero programmer \u003ca href=\"https://incident.io/blog/no-capes\"\u003ehttps://incident.io/blog/no-capes\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis cognitive reframing is extremely important and you can apply it to many\nareas of your life. You tell your own personal story, and what goes on in your\nhead makes it to the real world through your behavior.\u003c/p\u003e"},{"title":"Memoizing async functions so that you don't cache errors","date":"2022-02-26","slug":"2022-02-26-memoize-async","html":"\u003cp\u003eThere are two hard problems in computer science:\n\u003ca href=\"https://martinfowler.com/bliki/TwoHardThings.html\"\u003eCache invalidation and naming things\u003c/a\u003e.\nIn this post we'll show how memoize an async function, and how to invalidate the\nmemoization when the promise throws an error.\u003c/p\u003e\n\u003cp\u003eThis helps us with being able to re-try because since the error is not cached,\ncalling it again after an error retries automatically.\u003c/p\u003e\n\u003cp\u003eExample async function: fetch from the pokemon API\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egetPokemon\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eid\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eMath\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003efloor\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eMath\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003erandom\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e150\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://pokeapi.co/api/v2/pokemon/\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eid\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eret\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003efetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eret\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eok\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ethrow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eFailed to fetch \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e HTTP \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eret\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estatus\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eret\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eret\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ejson\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere is a technique that can be used to memoize this function\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egetPokemonMemoized\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #5DE4C7; font-style: italic\"\u003ethis\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7; font-style: italic\"\u003ethis\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetPokemon\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e().\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7; font-style: italic\"\u003ethis\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ethrow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7; font-style: italic\"\u003ethis\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe promise is held in this.promise, and the important part of this function is\nthat when I get an error, I clear this.promise and re-throw the error. The\ncaller of the function, on error, will receive the error message, but caching\nwill not take place, allowing retries to take place later on.\u003c/p\u003e\n\u003cp\u003eSee \u003ca href=\"https://cmdcolin.github.io/pokemon.html\"\u003ehttps://cmdcolin.github.io/pokemon.html\u003c/a\u003e for demo\u003c/p\u003e\n\u003ch2 id=\"footnote-0-arguments-to-function\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-0-arguments-to-function\"\u003e\u003ca href=\"#footnote-0-arguments-to-function\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 0: Arguments to function\u003c/h2\u003e\n\u003cp\u003eIf your function takes arguments, then you can use a hashmap associating the\nargument with the promise. You may also consider using an LRU cache so that your\nhashmap doesn't grow infinitely in size\u003c/p\u003e\n\u003cp\u003eGenerally you need a way to stringify or otherwise make them able to be stored\nin a Map or Object to do this.\u003c/p\u003e\n\u003cp\u003eSee \u003ca href=\"https://github.com/nodeca/promise-memoize\"\u003ehttps://github.com/nodeca/promise-memoize\u003c/a\u003e for example\u003c/p\u003e\n\u003ch2 id=\"footnote-1-error-handling-of-fetch\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1-error-handling-of-fetch\"\u003e\u003ca href=\"#footnote-1-error-handling-of-fetch\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1: Error handling of \u003ccode\u003efetch\u003c/code\u003e\u003c/h2\u003e\n\u003cp\u003eThis demo also demonstrates some basic fetch error handling, and uses\n\u003ccode\u003eawait response.text()\u003c/code\u003e to get the error message from the API. Sometimes an api\nwill return it's error in JSON format, so you can handle that as is, sometimes\nyou have to check both text and json\u003c/p\u003e\n\u003cp\u003eNote also, that response.statusText does\n\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response/statusText\"\u003enot exist in HTTP/2\u003c/a\u003e\nso it's better to use \u003ccode\u003eresponse.text()\u003c/code\u003e or \u003ccode\u003eresponse.json()\u003c/code\u003e.\u003c/p\u003e\n\u003ch2 id=\"footnote-2-global-cache\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2-global-cache\"\u003e\u003ca href=\"#footnote-2-global-cache\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 2: Global cache\u003c/h2\u003e\n\u003cp\u003eYou could also keep a cache in a global variable, or as a property on a class,\nor other methods. I have also found it useful to have a specific function for\nclearing the cache, so you can get a clean slate each time a test runs in unit\ntesting or similar\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egetPokemonMemoized\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetPokemon\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e().\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ethrow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eclearCache\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou can also make a general purpose utility to memoize any promise function\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ememoize\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e().\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ethrow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"footnote-3---aborting\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-3---aborting\"\u003e\u003ca href=\"#footnote-3---aborting\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 3 - Aborting\u003c/h2\u003e\n\u003cp\u003eIf you want to handle aborting, it is a bit trickier. Aborting in javascript is\nhandled by\n\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/AbortController/AbortController\"\u003eAbortController\u003c/a\u003e.\nThis is an object that gives you an\n\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal\"\u003eAbortSignal\u003c/a\u003e that\ncan be passed to fetch calls and the like to stop a big download from happening.\u003c/p\u003e\n\u003cp\u003eIn our above example, if we passed an abort signal to the first call to fetch,\nand then aborted it, it would abort the fetch,\n\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/AbortController/abort\"\u003ewhich throws a DOMException called \"AbortError\"\u003c/a\u003e.\nYou can detect that it is an AbortError like this, and may choose not to display\nor re-throw the abort exception\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eisAbortException\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003einstanceof\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eexception\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAbortError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, what if 5 functions call getPokemonMemoized(), all passing different abort\nsignals. What if the first one aborts? Then all the rest will get aborted also.\nBut what if we only want to abort the cached call if literally all of them\naborted? Then we may have to synthesize an abortcontroller inside our function\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eabortcontroller\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elisteners\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egetPokemonMemoized\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esignal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eabortcontroller\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eAbortController\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// synthesize a new signal instead of using the passed in signal\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetPokemon\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eabortcontroller\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esignal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ethrow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esignal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elisteners\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e++\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// add listener to the passed in signal\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esignal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eaddEventListener\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eabort\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elisteners\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e--\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elisteners\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eabortcontroller\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eabort\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003epromise\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eA library my team created,\n\u003ca href=\"https://github.com/GMOD/abortable-promise-cache\"\u003eabortable-promise-cache\u003c/a\u003e,\ntries to help with this scenario with a cleaner abstraction.\u003c/p\u003e\n\u003ch2 id=\"footnote-4\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-4\"\u003e\u003ca href=\"#footnote-4\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 4\u003c/h2\u003e\n\u003cp\u003eI have been playing through Pokemon Yellow and find it really amusing hence the\npokemon theme\u003c/p\u003e\n\u003cp\u003eFun stuff: The cutting room floor wiki with unused moves, sounds, and sprites in\nPokemon Yellow \u003ca href=\"https://tcrf.net/Pok%C3%A9mon_Yellow\"\u003ehttps://tcrf.net/Pok%C3%A9mon_Yellow\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"footnote-5\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-5\"\u003e\u003ca href=\"#footnote-5\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 5\u003c/h2\u003e\n\u003cp\u003eThis blog post mentioned in a comment thread \u003ca href=\"https://zansh.in/memoizer.html\"\u003ehttps://zansh.in/memoizer.html\u003c/a\u003e has\ngreat interactive examples and shows the \"invalidate on .catch()\" behavior!\u003c/p\u003e"},{"title":"Ukraine","date":"2022-02-24","slug":"2022-02-24-ukraine","html":"\u003cp\u003eAs Russia is actively invading Ukraine my heart goes out to them.\u003c/p\u003e\n\u003cp\u003eEven if I had no personal connection with Ukraine, I would find this abhorrent,\nbut I do have personal connections to Ukraine in various ways that makes me\nthink of them more fondly\u003c/p\u003e\n\u003cp\u003eMy first, and so far only, consulting job was with a company in Ukraine,\naround 2012. I helped them configure JBrowse, and prepared an official looking\nword document with recommendations and hours (a total of like...2 hours) and\nthey were very nice.\u003c/p\u003e\n\u003cp\u003eStand strong Ukraine\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/95/Lesser_Coat_of_Arms_of_Ukraine.svg/172px-Lesser_Coat_of_Arms_of_Ukraine.svg.png\" alt=\"\"\u003e\u003c/p\u003e"},{"title":"Back when I was a noise musician...","date":"2022-02-15","slug":"2022-02-15-noise","html":"\u003cp\u003eFound this photo of myself from a photo book published by john cates called\nauditory depravation...great documentation of michigan area noise activity. I am\nactually the last photo in the book amongst so many amazing artists...totally\nhonored. I forgot I was even in the book when I picked it up randomly.\u003c/p\u003e\n\u003cp\u003ethank you john cates!!!\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/photos/noise/cover-crop-fs8.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003ecover\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/photos/noise/out20-crop-fs8.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eindex p1\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/photos/noise/out21-crop-fs8.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eindex p2\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/photos/noise/out22-crop-fs8.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eindex p3, i'm last as xephedradap\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/photos/noise/out15-crop-fs8.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eme\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/photos/noise/out16-crop-fs8.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eabstract b/w\u003c/p\u003e\n\u003cp\u003esome photos from the book here \u003ca href=\"https://www.johncatesphoto.com/noise\"\u003ehttps://www.johncatesphoto.com/noise\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://soundcloud.com/xephedradap/amazingnoisetreasure\"\u003elightyear fluctuations\u003c/a\u003e\n(hnw)\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://soundcloud.com/xephedradap/symptomatic-of-extreme-decay\"\u003esymptomatic of extreme decay\u003c/a\u003e\n(circuit bent hnw)\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://soundcloud.com/xephedradap/2016-10-10-13-35-49a\"\u003e2016-10-10-13-35-49a\u003c/a\u003e\n(circuit bent drum machine)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI will make more noise soon...stay tuned\u003c/p\u003e"},{"title":"Structural variants and the SAM format - the long (reads) and short (reads) of it","date":"2022-02-06","slug":"2022-02-06-sv-sam","html":"\u003cp\u003eThe \u003ccode\u003eSAM\u003c/code\u003e specification is pretty amazing\n(\u003ca href=\"https://samtools.github.io/hts-specs/SAMv1.pdf\"\u003ehttps://samtools.github.io/hts-specs/SAMv1.pdf\u003c/a\u003e) but it is also fairly terse and\nabstract. True understanding might come from playing with real world data. I\nwill try to relay some things I have learned over the years, with a bit of a\nfocus on how \u003ccode\u003eSAM\u003c/code\u003e file concepts can relate to structural variants.\u003c/p\u003e\n\u003cp\u003eDisclaimer: I'm a developer of JBrowse 2. This document has some screenshots and\nlinks for it, feel free to try it at \u003ca href=\"https://jbrowse.org\"\u003ehttps://jbrowse.org\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"basics\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#basics\"\u003e\u003ca href=\"#basics\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eBasics\u003c/h2\u003e\n\u003ch3 id=\"what-is-a-sam-file-and-how-does-it-relate-to-bam-and-cram\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#what-is-a-sam-file-and-how-does-it-relate-to-bam-and-cram\"\u003e\u003ca href=\"#what-is-a-sam-file-and-how-does-it-relate-to-bam-and-cram\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhat is a \u003ccode\u003eSAM\u003c/code\u003e file and how does it relate to \u003ccode\u003eBAM\u003c/code\u003e and \u003ccode\u003eCRAM\u003c/code\u003e?\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eA \u003ccode\u003eSAM\u003c/code\u003e file \u003cstrong\u003egenerally\u003c/strong\u003e contains \"reads\" from a sequencer, with information\nabout how they are mapped to a reference genome [1][2].\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eA \u003ccode\u003eSAM\u003c/code\u003e file is \u003cstrong\u003egenerally\u003c/strong\u003e produced when an aligner takes in raw unaligned\nreads (often stored in \u003ccode\u003eFASTQ\u003c/code\u003e format files) and aligns them to a reference\ngenome [3].\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eA \u003ccode\u003eSAM\u003c/code\u003e file is a text format that you can read with your text editor. \u003ccode\u003eBAM\u003c/code\u003e\nand \u003ccode\u003eCRAM\u003c/code\u003e are compressed representations of the \u003ccode\u003eSAM\u003c/code\u003e format.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYou can convert \u003ccode\u003eSAM\u003c/code\u003e to \u003ccode\u003eBAM\u003c/code\u003e with samtools\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003esamtools\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eview\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efile.sam\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-o\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efile.bam\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou can also convert a \u003ccode\u003eBAM\u003c/code\u003e back to \u003ccode\u003eSAM\u003c/code\u003e with samtools view\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003esamtools\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eview\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-h\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efile.bam\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-o\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efile.sam\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe -h just makes sure to preserve the header.\u003c/p\u003e\n\u003cp\u003eIf you are converting \u003ccode\u003eSAM\u003c/code\u003e to \u003ccode\u003eCRAM\u003c/code\u003e, it may require the -T argument to specify\nyour reference sequence (this is because the \u003ccode\u003eCRAM\u003c/code\u003e is \"reference compressed\")\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003esamtools\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eview\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-T\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ereference.fa\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efile.sam\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-o\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efile.cram\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAlso see Appendix C: piping FASTQ from \u003ccode\u003eminimap2\u003c/code\u003e directly to CRAM\u003c/p\u003e\n\u003cp\u003e[1] \u003ccode\u003eSAM\u003c/code\u003e can contain any type of sequence, not specifically reads. If you\ncreated a \u003cem\u003ede novo\u003c/em\u003e assembly, you could align the contigs of the \u003cem\u003ede novo\u003c/em\u003e\nassembly to a reference genome and store the results in \u003ccode\u003eSAM\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e[2] Does not always have to have information about mapping to a reference\ngenome. You can also store unaligned data in \u003ccode\u003eSAM\u003c/code\u003e/\u003ccode\u003eBAM\u003c/code\u003e/\u003ccode\u003eCRAM\u003c/code\u003e (so-called\n\u003ccode\u003euBAM\u003c/code\u003e for example) but most of the time, the reads in \u003ccode\u003eSAM\u003c/code\u003e format are aligned\nto a reference genome.\u003c/p\u003e\n\u003cp\u003e[3] Examples of programs that do alignment include \u003ccode\u003ebwa\u003c/code\u003e, \u003ccode\u003ebowtie\u003c/code\u003e, and\n\u003ccode\u003eminimap2\u003c/code\u003e (there are many others). These programs all can produce \u003ccode\u003eSAM\u003c/code\u003e outputs\u003c/p\u003e\n\u003ch3 id=\"what-is-in-a-sam-file\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#what-is-in-a-sam-file\"\u003e\u003ca href=\"#what-is-in-a-sam-file\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhat is in a \u003ccode\u003eSAM\u003c/code\u003e file\u003c/h3\u003e\n\u003cp\u003eA \u003ccode\u003eSAM\u003c/code\u003e file contains a header (\u003ccode\u003eBAM\u003c/code\u003e and \u003ccode\u003eCRAM\u003c/code\u003e files also have the \u003ccode\u003eSAM\u003c/code\u003e\nheader) and a series of records. A record is a single line in a \u003ccode\u003eSAM\u003c/code\u003e file, and\nit generally corresponds to a single read, but as we will see, a split alignment\nmay produce multiple records that refer to the same source read.\u003c/p\u003e\n\u003cp\u003eNote: if a read failed to align to the reference genome, it may still be in your\n\u003ccode\u003eSAM\u003c/code\u003e file, marked as unmapped using the flag column. Sometimes, \"dumpster\ndiving\" (looking at the unmapped records from a \u003ccode\u003eSAM\u003c/code\u003e file) can be used to aid\nstructural variant searches (e.g. there may be novel sequence in there not from\nthe reference genome that could be assembled)\u003c/p\u003e\n\u003ch3 id=\"what-are-tags-in-a-sam-file\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#what-are-tags-in-a-sam-file\"\u003e\u003ca href=\"#what-are-tags-in-a-sam-file\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhat are tags in a \u003ccode\u003eSAM\u003c/code\u003e file\u003c/h3\u003e\n\u003cp\u003eA SAM file has a core set of required fields, and then an arbitrary list of\nextra columns called tags. The tags have a two character abbreviation like \u003ccode\u003eMQ\u003c/code\u003e\n(mapping quality) or many others. They can be upper or lower case. Upper case\nare reserved for official usages (except those with X, Y, or Z prefixed). See\n\u003ca href=\"https://samtools.github.io/hts-specs/SAMtags.pdf\"\u003eSAMtags.pdf\u003c/a\u003e for more details\u003c/p\u003e\n\u003ch3 id=\"what-is-a-cigar-string\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#what-is-a-cigar-string\"\u003e\u003ca href=\"#what-is-a-cigar-string\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhat is a \u003ccode\u003eCIGAR\u003c/code\u003e string\u003c/h3\u003e\n\u003cp\u003eA \u003ccode\u003eCIGAR\u003c/code\u003e string is a \"compact idiosyncratic gapped alignment report\". It tells\nyou about insertions, deletions, and clipping. It is a series of \"operators\"\nwith lengths.\u003c/p\u003e\n\u003cp\u003eInsertion example:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e50M50I50M\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThat would be 50bp of matching bases (\u003ccode\u003e50M\u003c/code\u003e), followed by a 50bp insertion\n(\u003ccode\u003e50I\u003c/code\u003e), followed by another 50bp of matches (\u003ccode\u003e50M\u003c/code\u003e). The 50bp insertion means\nthe read contains 50 bases in the middle which did not match the reference\ngenome that you are comparing the read to.\u003c/p\u003e\n\u003cp\u003eClipping example:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e50S50M50S\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThis means that 50bp matched (\u003ccode\u003e50M\u003c/code\u003e in the middle of the \u003ccode\u003eCIGAR\u003c/code\u003e string) and\nboth sides of the read are soft clipped. The clipping means the aligner was not\nable to align the reads on either side.\u003c/p\u003e\n\u003cp\u003eNotes:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cem\u003eFinding mismatches\u003c/em\u003e: A \u003ccode\u003eCIGAR\u003c/code\u003e string match like \u003ccode\u003e50M\u003c/code\u003e means 50 bases\n\"matched\" the reference genome, but that only means that there are no\ninsertions or deletions in those 50 bases. There could be underlying\nmismatches in the read compared to the reference. Note: there is also extended\n\u003ccode\u003eCIGAR\u003c/code\u003e that replaces \u003ccode\u003eM\u003c/code\u003e with \u003ccode\u003e=\u003c/code\u003e (exact match) and \u003ccode\u003eX\u003c/code\u003e (mismatch). Also see\nAppendix D on the \u003ccode\u003eMD\u003c/code\u003e tag and finding where the mismatches are, but note that\n\u003ccode\u003eMD\u003c/code\u003e tag is tricky\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cem\u003eAmbiguity of representation\u003c/em\u003e: A \u003ccode\u003eCIGAR\u003c/code\u003e string with insertions and deletions\ncould be \u003ccode\u003e50M1D1I50M\u003c/code\u003e. This string had a 1bp deletion and a 1bp insertion\nback-to-back. This could be just a mismatch! There is ambiguity in sequence\nalignment representations. Downstream programs must accommodate this.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cem\u003eSplit records and soft-clipping\u003c/em\u003e: A \u003ccode\u003eCIGAR\u003c/code\u003e string with soft-clipping\n\u003ccode\u003e500S50M\u003c/code\u003e this means that 500 bases of the read were not aligned at this\nposition, but 50 bases were! Note that the alignment might have been a split\nalignment (see section on split alignments below) so another record in the\n\u003ccode\u003eSAM\u003c/code\u003e file, linked by the \u003ccode\u003eSA\u003c/code\u003e (supplementary alignment) tag, might contain\ninfo on where the other 500 bases aligned! (or, they might not map anywhere).\nThe linked split or supplementary alignments all have the same read name\n(\u003ccode\u003eQNAME\u003c/code\u003e).\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eSee \u003ca href=\"https://samtools.github.io/hts-specs/SAMv1.pdf\"\u003eSAMv1.pdf\u003c/a\u003e for all the\nCIGAR operators.\u003c/p\u003e\n\u003cp\u003eIf you are working with \u003ccode\u003eSAM\u003c/code\u003e data, you will often write loops that directly\nparse CIGAR strings. See Appendix B for handy functions for parsing \u003ccode\u003eCIGAR\u003c/code\u003e\nstrings. Don't fear the \u003ccode\u003eCIGAR\u003c/code\u003e!\u003c/p\u003e\n\u003ch2 id=\"detecting-svs-from-long-reads\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#detecting-svs-from-long-reads\"\u003e\u003ca href=\"#detecting-svs-from-long-reads\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eDetecting SVs from long reads\u003c/h2\u003e\n\u003cp\u003eLong reads offer a wide array of methods for detecting SVs\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cem\u003eSmall insertions/deletions\u003c/em\u003e: Long reads can completely span moderate sized\ninsertions and deletions, indicated by \u003ccode\u003eI\u003c/code\u003e or \u003ccode\u003eD\u003c/code\u003e in a \u003ccode\u003eCIGAR\u003c/code\u003e string.\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eLarge insertions/deletions\u003c/em\u003e: If a long read does not completely span an\ninsertion or deletion, it may be split aligned on either side of the SV or\ncould be soft/hard clipped where it can't align all the way through an\ninsertion.\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eTranslocations\u003c/em\u003e: A split long alignment can span long range or even\ninter-chromosomal translocations, so part of the read maps to one chromosome\nand one part maps to the other\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eInversions\u003c/em\u003e: A split alignment can span an inversion, the long read is split\ninto multiple parts, one part of it aligns in the reverse orientation, while\nthe other part aligns in the forward orientation\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eNote that there are many different methods for detecting SVs from long reads,\ne.g. not all use mapped reads from SAM files, some use \u003cem\u003ede novo\u003c/em\u003e assembly, but\nit is still useful to be familiar with mapped read methods.\u003c/p\u003e\n\u003ch3 id=\"what-are-splitsupplementarychimeric-alignments\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#what-are-splitsupplementarychimeric-alignments\"\u003e\u003ca href=\"#what-are-splitsupplementarychimeric-alignments\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhat are split/supplementary/chimeric alignments?\u003c/h3\u003e\n\u003cp\u003eSplit alignments, or chimeric alignments, are alignments where part of the read\nmaps to one place, and another part to another. For example, part of a long read\nmay map to \u003ccode\u003echr1\u003c/code\u003e and part of it maps to \u003ccode\u003echr4\u003c/code\u003e. It is worth reading the\ndefinition of \"Chimeric alignment\" from\n\u003ca href=\"https://samtools.github.io/hts-specs/SAMv1.pdf\"\u003eSAMv1.pdf\u003c/a\u003e when you get the\nchance.\u003c/p\u003e\n\u003cp\u003eAs \u003ca href=\"https://samtools.github.io/hts-specs/SAMv1.pdf\"\u003eSAMv1.pdf\u003c/a\u003e tells us, one\nrecord is marked as \"representative\", sometimes also called the \"primary\"\nrecord, while the other components of the split read are marked \"supplementary\",\ngiven the 2048 flag. The \"primary\" record generally has a \u003ccode\u003eSEQ\u003c/code\u003e field that\nrepresents the entirety of the original read's sequence (with CIGAR soft\nclipping operators saying which part of that sequence aligned), and the\n\"supplementary alignments\" will have \u003ccode\u003eSEQ\u003c/code\u003e field but sometimes just segments of\nthe original read's sequence with CIGAR hard clipping operators indicating that\nit is partial.\u003c/p\u003e\n\u003cp\u003eSupplementary alignments are especially common with long reads, and it can be a\nsignal for structural variants e.g. where two chromosomes are fused together,\nand parts of the read align to multiple chromosomes, or the split alignment may\nalign to either side of a large deletion, or they may be split to align through\nan inversion (part of it aligns to the forward strand, part of it to the reverse\nstrand, and again the forward strand)\u003c/p\u003e\n\u003cp\u003eThere is no limitation on how many splits might occur so the split can align to\n3, 4, or more different places. Each part of the split puts a new line in the\nSAM file, and note that all the records also have the same read name, or \u003ccode\u003eQNAME\u003c/code\u003e\n(first column of \u003ccode\u003eSAM\u003c/code\u003e).\u003c/p\u003e\n\u003ch3 id=\"what-are-secondary-alignmentsmulti-mappers\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#what-are-secondary-alignmentsmulti-mappers\"\u003e\u003ca href=\"#what-are-secondary-alignmentsmulti-mappers\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhat are secondary alignments/multi-mappers\u003c/h3\u003e\n\u003cp\u003eSecondary alignments generally come from \"multi-mappers\" where the entire read\nmaps equally well (or at least somewhat equally well) to, say, somewhere on both\n\u003ccode\u003echr4\u003c/code\u003e and \u003ccode\u003echr1\u003c/code\u003e. \"Multi mapping\" results in secondary alignments, while split\nreads result in supplementary alignments. See \"Multiple mapping\" in the\n\u003ca href=\"https://samtools.github.io/hts-specs/SAMv1.pdf\"\u003eSAMv1.pdf\u003c/a\u003e for the definition\nof multi-mapping. Note also that secondary alignments sometimes are missing the\n\u003ccode\u003eSEQ\u003c/code\u003e field entirely too, see\n\u003ca href=\"https://github.com/lh3/minimap2/issues/458#issuecomment-516661855\"\u003ehttps://github.com/lh3/minimap2/issues/458#issuecomment-516661855\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI wrote a tool called secondary_rewriter to add the \u003ccode\u003eSEQ\u003c/code\u003e field back to\nsecondary alignments, which may help in some cases\u003c/p\u003e\n\u003ch3 id=\"what-is-the-sa-tag\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#what-is-the-sa-tag\"\u003e\u003ca href=\"#what-is-the-sa-tag\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eWhat is the \u003ccode\u003eSA\u003c/code\u003e tag?\u003c/h3\u003e\n\u003cp\u003eThe \u003ccode\u003eSA\u003c/code\u003e tag is outputted on each part of the supplementary/split/chimeric\nalignment, e.g. the primary contains an \u003ccode\u003eSA\u003c/code\u003e tag that refers to information\n(e.g. the location) of where all the supplementary alignments where placed, and\neach of the supplementary alignments also contains an \u003ccode\u003eSA\u003c/code\u003e tag that refers to\nthe primary alignment and each other supplementary alignment.\u003c/p\u003e\n\u003cp\u003eFun fact: The \u003ccode\u003eSA\u003c/code\u003e tag conceptually can result in a 'quadratic explosion' of\ndata, because each part of the split contains references to every other part.\nFor example, if a read is split into 4 pieces, then each record would would have\nan \u003ccode\u003eSA\u003c/code\u003e tag with 3 segments, so 3*4 segments will be documented in the \u003ccode\u003eSA\u003c/code\u003e\ntag. In many cases, this is not a problem, but if you imagine a finished\nchromosome aligned to a draft assembly, it may get split so many times this\ncould be a factor.\u003c/p\u003e\n\u003cp\u003eSee \u003ca href=\"https://samtools.github.io/hts-specs/SAMtags.pdf\"\u003eSAMtags.pdf\u003c/a\u003e for more\ninfo on the \u003ccode\u003eSA\u003c/code\u003e tag.\u003c/p\u003e\n\u003ch3 id=\"visualizing-split-reads-across-a-breakend-or-translocation\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#visualizing-split-reads-across-a-breakend-or-translocation\"\u003e\u003ca href=\"#visualizing-split-reads-across-a-breakend-or-translocation\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eVisualizing split reads across a breakend or translocation\u003c/h3\u003e\n\u003cp\u003eThis is a specialized JBrowse 2 feature, but if there is an inter-chromosomal\ntranslocation, you can load this into JBrowse and visualize support for this\nevent using our \"breakpoint split view\". This view shows the evidence for the\nreads that are split aligned across an SV, and can show connections between\npaired-end reads across an SV too.\u003c/p\u003e\n\u003cp\u003eWe also have a workflow called the \"SV inspector\" that helps you setup the\n\"breakpoint split views\" (\u003ca href=\"https://jbrowse.org/jb2/docs/user_guide/#sv-inspector\"\u003ehttps://jbrowse.org/jb2/docs/user_guide/#sv-inspector\u003c/a\u003e.\nThe SV inspector and Breakpoint split view work best on Breakends (e.g. VCF 4.3\nsection 5.4) and \u003ccode\u003e\u0026#x3C;TRA\u003e\u003c/code\u003e (translocation) events from \u003ccode\u003eVCF\u003c/code\u003e, or \u003ccode\u003eBEDPE\u003c/code\u003e formatted\nSV calls, and you can launch the \"breakpoint split view\" from the \"SV inspector\"\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/breakpoint_split_view.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch3 id=\"visualizing-a-read-vs-reference-view-given-a-split-alignment\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#visualizing-a-read-vs-reference-view-given-a-split-alignment\"\u003e\u003ca href=\"#visualizing-a-read-vs-reference-view-given-a-split-alignment\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eVisualizing a 'read vs reference' view given a split alignment\u003c/h3\u003e\n\u003cp\u003eIf we are given the the primary alignment of an arbitrary split read, then we\ncan construct what that split looks like compared to the reference genome.\u003c/p\u003e\n\u003cp\u003eIf we are not given the primary alignment (e.g. we are starting from a\nsupplementary alignment) then we can search the \u003ccode\u003eSA\u003c/code\u003e list for the one that is\nprimary, because at least one will be.\u003c/p\u003e\n\u003cp\u003eNow that we have the primary alignment, it will have the \u003ccode\u003eSEQ\u003c/code\u003e (of the entire\nread, the supplementary alignments typically have a blank \u003ccode\u003eSEQ\u003c/code\u003e!) and the \u003ccode\u003eSA\u003c/code\u003e\ntag containing the \u003ccode\u003eCIGAR\u003c/code\u003e of all the different parts of the split. We can then\nconstruct how the entire read, not just a particular record of the split\nalignment, compares to the genome. In JBrowse 2 we implemented this and it uses\na synteny-style rendering. [1]\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/linear_alignment.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure showing JBrowse 2 piecing together a long read vs the reference genome\nfrom a single read\u003c/p\u003e\n\u003cp\u003eIn order to do this reconstruction, JBrowse 2 takes the \u003ccode\u003eCIGAR\u003c/code\u003e strings of the\nprimary alignment and each of the pieces of the \u003ccode\u003eSA\u003c/code\u003e tag (it is a semi-colon\nseparated list of chunks), sort them by the amount of softclipping (the\nsoftclipping values will progressively trim off more of the \u003ccode\u003eSEQ\u003c/code\u003e telling you it\naligned further and further on in the long read), and then this tells me where\neach piece of the split alignment came from in the original \u003ccode\u003eSEQ\u003c/code\u003e, so we can\nplot the alignments of the read vs the reference genome using synteny style\ndisplay.\u003c/p\u003e\n\u003cp\u003e[1] Similar functionality also exists in GenomeRibbon \u003ca href=\"https://genomeribbon.org\"\u003ehttps://genomeribbon.org\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"sam-vs-vcf---breakends-vs-split-alignments\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#sam-vs-vcf---breakends-vs-split-alignments\"\u003e\u003ca href=\"#sam-vs-vcf---breakends-vs-split-alignments\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003e\u003ccode\u003eSAM\u003c/code\u003e vs \u003ccode\u003eVCF\u003c/code\u003e - Breakends vs split alignments\u003c/h3\u003e\n\u003cp\u003eAn interesting outcome (to me) is that from a single record in a \u003ccode\u003eSAM\u003c/code\u003e file, I\ncan reconstruct the \"derived\" genome around a region of interest from a single\nread.\u003c/p\u003e\n\u003cp\u003eIf I was to try to do this with the \u003ccode\u003eVCF\u003c/code\u003e Breakend specification (section 5.4 of\n\u003ca href=\"https://samtools.github.io/hts-specs/VCFv4.3.pdf\"\u003eVCF4.3.pdf\u003c/a\u003e), it may actually\nbe more challenging than from a \u003ccode\u003eSAM\u003c/code\u003e read. This is because a Breakend in \u003ccode\u003eVCF\u003c/code\u003e\nformat is only an edge in a graph (and the sequences are nodes). Therefore, in\norder to properly reconstruct a structural variant from a \u003ccode\u003eVCF\u003c/code\u003e with Breakends,\nI would have to construct a graph and decode paths through it.\u003c/p\u003e\n\u003cp\u003eI like the ability to reconstruct the derived genome from a single read, but\nindividual reads can be noisy (contain errors). That said, \u003cem\u003ede novo\u003c/em\u003e assembled\ncontigs can also be stored in \u003ccode\u003eSAM\u003c/code\u003e format and is significantly less noisy\n(being composed of the aggregate information of many reads).\u003c/p\u003e\n\u003cp\u003eThe point though is that interpretation of the \u003ccode\u003eVCF\u003c/code\u003e breakend specification is\nchallenging due to imposing a sequence graph on the genome, while the \u003ccode\u003eSA\u003c/code\u003e tag\nremains just a simple set of linear alignments that can easily be pieced\ntogether, and you only need to refer to a single record in the \u003ccode\u003eSAM\u003c/code\u003e file to do\nso.\u003c/p\u003e\n\u003cp\u003eI am not aware of a lot of tools that work on the \u003ccode\u003eVCF\u003c/code\u003e Breakend graph, and\nexpect more will need to be created to truly work with this standard. An\ninversion for example may create 4 record in the \u003ccode\u003eVCF\u003c/code\u003e file (see section 5.4 in\nthe \u003ca href=\"https://samtools.github.io/hts-specs/VCFv4.3.pdf\"\u003eVCF4.3.pdf\u003c/a\u003e for example),\nand needs careful interpretation.\u003c/p\u003e\n\u003ch3 id=\"haplotype-tagged-reads\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#haplotype-tagged-reads\"\u003e\u003ca href=\"#haplotype-tagged-reads\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eHaplotype tagged reads\u003c/h3\u003e\n\u003cp\u003eA new trend has been to create \u003ccode\u003eSAM\u003c/code\u003e/\u003ccode\u003eBAM\u003c/code\u003e/\u003ccode\u003eCRAM\u003c/code\u003e files with tagged reads, which\ntells us which haplotype a read was inferred to have come from. This is commonly\ndone with the \u003ccode\u003eHP\u003c/code\u003e tag, which might have \u003ccode\u003eHP=0\u003c/code\u003e and \u003ccode\u003eHP=1\u003c/code\u003e for a diploid genome.\nTools like \u003ccode\u003ewhatshap\u003c/code\u003e can add these tags to a \u003ccode\u003eSAM\u003c/code\u003e file, and IGV and JBrowse 2\ncan color and sort by these tags.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/color_by_tag.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eScreenshot of JBrowse 2 with the \"Color by tag\" and \"Sort by tag\" setting\nenabled (coloring and sorting by the \u003ccode\u003eHP\u003c/code\u003e tag) letting us see that only one\nhaplotype has a deletion. Tutorial for how to do this in JBrowse 2 here\n\u003ca href=\"https://jbrowse.org/jb2/docs/user_guide/#sort-color-and-filter-by-tag\"\u003ehttps://jbrowse.org/jb2/docs/user_guide/#sort-color-and-filter-by-tag\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"how-do-you-detect-svs-with-paired-end-reads\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#how-do-you-detect-svs-with-paired-end-reads\"\u003e\u003ca href=\"#how-do-you-detect-svs-with-paired-end-reads\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eHow do you detect SVs with paired-end reads?\u003c/h2\u003e\n\u003ch3 id=\"distance-between-pairs-being-abnormally-large-or-short\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#distance-between-pairs-being-abnormally-large-or-short\"\u003e\u003ca href=\"#distance-between-pairs-being-abnormally-large-or-short\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eDistance between pairs being abnormally large or short\u003c/h3\u003e\n\u003cp\u003eThe distance between pairs is encoded by the \u003ccode\u003eTLEN\u003c/code\u003e column in the \u003ccode\u003eSAM\u003c/code\u003e format.\nThe distance between pairs with good mapping is relatively constant and called\nthe \"insert length\". This comes from how the sequencing is done: paired-end\nsequencing performs sequencing on both ends of a fragment.\u003c/p\u003e\n\u003cp\u003eBut, if you are mapping reads vs the reference genome, and you observe that they\nare abnormally far apart, say 50kb apart instead of 1kb apart, this may indicate\nthere your sample contains a deletion relative to the reference.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/aberrant_size.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eScreenshot of JBrowse 1 with \"View as pairs\" enabled with \"mate paired\"\nsequencing, and large insert size colored as red (from\n\u003ca href=\"https://jbrowse.org/docs/paired_reads.html\"\u003ehttps://jbrowse.org/docs/paired_reads.html\u003c/a\u003e. Note that some of JBrowse 1's View\nas pairs features are not yet available in JBrowse 2\u003c/p\u003e\n\u003ch3 id=\"mate-pairs-vs-paired-end-reads\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#mate-pairs-vs-paired-end-reads\"\u003e\u003ca href=\"#mate-pairs-vs-paired-end-reads\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eMate pairs vs paired end reads\u003c/h3\u003e\n\u003cp\u003e\"Mate paired\" reads have a larger distance between pairs (aka the insert size is\nlarger). Think: mate pairs have 2-5kb between pairs instead of a couple hundred\nbp. Mate pairs can be useful in scaffolding de novo genome assemblies since the\nlarger range can span gaps, giving evidence that multiple contigs are connected.\u003c/p\u003e\n\u003cp\u003e\"Paired-end\" reads typically have like 200-500bp distance between pairs (aka,\nthe insert size).\u003c/p\u003e\n\u003cp\u003eData sheet\n\u003ca href=\"https://web.archive.org/web/20210827021305/https://www.illumina.com/Documents/products/datasheets/datasheet_genomic_sequence.pdf\"\u003ehttps://web.archive.org/web/20210827021305/https://www.illumina.com/Documents/products/datasheets/datasheet_genomic_sequence.pdf\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe above JBrowse screenshot shows mate pairs. Note that mate pairs have a\ndifferent pair orientation, and pairs don't necessarily point at each other,\nthey \"point away from each other\" in normal conditions due. See Appendix A for\nmore info.\u003c/p\u003e\n\u003ch3 id=\"linked-reads-aka-simulated-long-reads\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#linked-reads-aka-simulated-long-reads\"\u003e\u003ca href=\"#linked-reads-aka-simulated-long-reads\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eLinked reads aka simulated long reads\u003c/h3\u003e\n\u003cp\u003eLinked reads are another method that uses short reads but gives long read\ninformation. I don't have a lot of info on this but will update this section if\nI do. The company, 10x genomics, that originally used this discontinued\ncommercial sequencing using this method to focus instead on single cell AFAIK.\n\u003ca href=\"https://www.10xgenomics.com/products/linked-reads\"\u003ehttps://www.10xgenomics.com/products/linked-reads\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"an-abundance-of-reads-being-clipped-at-a-particular-position\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#an-abundance-of-reads-being-clipped-at-a-particular-position\"\u003e\u003ca href=\"#an-abundance-of-reads-being-clipped-at-a-particular-position\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAn abundance of reads being \"clipped\" at a particular position\u003c/h3\u003e\n\u003cp\u003eThis can indicate that part of the reads map well, but then there was an abrupt\nstop to the mapping. This might mean that there is a sequence that was an\ninsertion at that position, or a deletion, or a translocation.\u003c/p\u003e\n\u003cp\u003eThe clipping is indicated by the \u003ccode\u003eCIGAR\u003c/code\u003e string, either at the start or end of\nit by an \u003ccode\u003eS\u003c/code\u003e or an \u003ccode\u003eH\u003c/code\u003e. The \u003ccode\u003eS\u003c/code\u003e indicates \"soft clipping\", and indicates that\nthe sequence of the clipped portion can be found in the \u003ccode\u003eSEQ\u003c/code\u003e field of the\nprimary alignment. The \u003ccode\u003eH\u003c/code\u003e is hard clipped, and the sequence that is hard\nclipped will not appear in the \u003ccode\u003eSEQ\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/clipping_pileup.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eScreenshot of JBrowse 2 showing blue clipping indicator with a \"pileup\" of\nsoft-clipping at a particular position shown in blue. The clipping is an\n\"interbase\" operation (it occurs between base pair coordinates) so it is plotted\nseparately from the normal coverage histogram.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/show_soft_clipping.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eScreenshot of JBrowse 2 showing an insertion with Nanopore (top), PacBio\n(middle) and Illumina short reads. The long reads may completely span the\ninsertion, so the \u003ccode\u003eCIGAR\u003c/code\u003e string on those have an \u003ccode\u003eI\u003c/code\u003e operator and are indicated\nby the purple triangle above the reads. For the short reads, the reads near the\ninsertion will be clipped since they will not properly map to the reference\ngenome and cannot span the sinsertion. The \"Show soft clipping\" setting in\nJBrowse 2 and IGV can be used to show visually the bases that extend into the\ninsertion (shown on the bottom track).\u003c/p\u003e\n\u003ch3 id=\"unexpected-pair-orientation\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#unexpected-pair-orientation\"\u003e\u003ca href=\"#unexpected-pair-orientation\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eUnexpected pair orientation\u003c/h3\u003e\n\u003cp\u003eWith standard paired end sequencing, the pairs normally point at each other\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eforward reverse\n ---\u003e    \u0026#x3C;---\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf the stranded-ness of the pair is off, then it could indicate a structural\nvariant. See Appendix A for a handy function for calculating pair orientation.\u003c/p\u003e\n\u003cp\u003eThis guide from IGV is helpful for interpreting the pair directionality with\npatterns of SVs using \"Color by pair orientation\"\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://software.broadinstitute.org/software/igv/interpreting_pair_orientations\"\u003ehttps://software.broadinstitute.org/software/igv/interpreting_pair_orientations\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/inverted_duplication.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure: JBrowse 2 showing an inverted (tandem) duplication in 1000 genomes data.\nIt uses the same coloring as IGV for pair orientation. The tandem duplication\ncan produce green arrows which have reads pointing in opposite directions e.g.\n\u003ccode\u003e\u0026#x3C;--\u003c/code\u003e and \u003ccode\u003e--\u003e\u003c/code\u003e, while blue arrows which can indicate an inversion point in the\nsame direction e.g. \u003ccode\u003e--\u003e\u003c/code\u003e and \u003ccode\u003e--\u003e\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"caveat-about-tlen\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#caveat-about-tlen\"\u003e\u003ca href=\"#caveat-about-tlen\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eCaveat about TLEN\u003c/h3\u003e\n\u003cp\u003eNote that \u003ccode\u003eTLEN\u003c/code\u003e is a field in the SAM format that is somewhat ill defined, at\nleast in the sense that different tools may use it differently\n\u003ca href=\"https://github.com/pysam-developers/pysam/issues/667#issuecomment-381521767\"\u003ehttps://github.com/pysam-developers/pysam/issues/667#issuecomment-381521767\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eIf needed, you can calculate \u003ccode\u003eTLEN\u003c/code\u003e yourself if you process the file yourself\n(e.g. process all reads, get the actual records for the pairs, and calculate\ndistance) but I have not had trouble with relying on the \u003ccode\u003eTLEN\u003c/code\u003e from the data\nfiles themselves.\u003c/p\u003e\n\u003ch2 id=\"calling-copy-number-variants-with-your-short-or-long-reads\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#calling-copy-number-variants-with-your-short-or-long-reads\"\u003e\u003ca href=\"#calling-copy-number-variants-with-your-short-or-long-reads\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eCalling copy number variants with your short or long reads\u003c/h2\u003e\n\u003cp\u003eAnother type of SV that you can get from your \u003ccode\u003eSAM\u003c/code\u003e files are copy number\nvariants (CNVs). By looking at the depth-of-coverage for your data files, you\ncan look for abnormalities that may indicate copy number variants. By using a\ntool like \u003ccode\u003emosdepth\u003c/code\u003e, you can quickly get a file showing the coverage across the\ngenome.\u003c/p\u003e\n\u003cp\u003eBe aware that if you are comparing the coverage counts from different tools,\nthat they have different defaults that may affect comparison. Some discard\n\u003ccode\u003eQC_FAIL\u003c/code\u003e, \u003ccode\u003eDUP\u003c/code\u003e, and \u003ccode\u003eSECONDARY\u003c/code\u003e flagged reads. This is probably appropriate,\nand corresponds to what most genome browsers will display (see\n\u003ca href=\"https://gist.github.com/cmdcolin/9f677eca28448d8a7c5d6e9917fc56af\"\u003ehttps://gist.github.com/cmdcolin/9f677eca28448d8a7c5d6e9917fc56af\u003c/a\u003e for a short\nsummary of depth calculated from different tools)\u003c/p\u003e\n\u003cp\u003eNote that both long and short reads can be used for CNV detection. Long reads\nmay give more accurate measurements also, with their better ability to map\nsmoothly through difficult regions of the genome.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/coverage_cnv.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eScreenshot showing coverage in \u003ccode\u003eBigWig\u003c/code\u003e format from nanopore reads on normal and\ntumor tissue from a melanoma cancer cell line (COLO829) plotted using JBrowse 2.\nThis coverage data is calculated from nanopore sequencing from\n\u003ca href=\"https://www.biorxiv.org/content/10.1101/2020.10.15.340497v1.full\"\u003ehere\u003c/a\u003e using\n\u003ca href=\"https://github.com/brentp/mosdepth\"\u003e\u003ccode\u003emosdepth\u003c/code\u003e\u003c/a\u003e, converted from \u003ccode\u003eBedGraph\u003c/code\u003e to\n\u003ccode\u003eBigWig\u003c/code\u003e, and loaded into JBrowse 2. See\n(\u003ca href=\"https://jbrowse.org/code/jb2/v1.6.4/?config=test_data%2Fconfig_demo.json\u0026#x26;session=share-MZj3d18lzH\u0026#x26;password=3X7bS\"\u003edemo\u003c/a\u003e\nand\n\u003ca href=\"https://jbrowse.org/jb2/docs/user_guide/#viewing-whole-genome-coverage-for-profiling-cnv\"\u003etutorial\u003c/a\u003e)\u003c/p\u003e\n\u003ch2 id=\"the-future-with-graph-genomes-and-de-novo-assemblies\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#the-future-with-graph-genomes-and-de-novo-assemblies\"\u003e\u003ca href=\"#the-future-with-graph-genomes-and-de-novo-assemblies\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eThe future, with graph genomes and \u003cem\u003ede novo\u003c/em\u003e assemblies\u003c/h2\u003e\n\u003cp\u003eCurrently, SV visualization is highly based on comparing data versus a reference\ngenome (and the \u003ccode\u003eSAM\u003c/code\u003e format is a signature of this: it stores data in terms of\nreference genome coordinates). In the future, SV visualization may look more\nsimilar to comparative genomics, where we compare an SV to a population specific\nreference from a graph genomes or something like this.\u003c/p\u003e\n\u003cp\u003eIt is known that \u003cem\u003ede novo\u003c/em\u003e assembly has more power to detect SVs than some read\noperations (\u003ca href=\"https://twitter.com/lh3lh3/status/1362921612690010118/photo/1\"\u003ehttps://twitter.com/lh3lh3/status/1362921612690010118/photo/1\u003c/a\u003e as \u003cem\u003ede\nnovo\u003c/em\u003e assembled genomes improve and become more widespread, we may see a shift\nin how SVs are called\u003c/p\u003e\n\u003cp\u003eI would also like to see improved ability to do fast or 'on the fly' gene\nprediction on the \u003cem\u003ede novo\u003c/em\u003e assembled genomes, and we can see what SNPs or\nmodified splicing might look like in copies of genes (e.g. derived regions of\nthe CNV duplications).\u003c/p\u003e\n\u003cp\u003eFun fact: the\n\u003ca href=\"https://github.com/lh3/gfatools/blob/master/doc/rGFA.md#the-graph-alignment-format-gaf\"\u003e\u003ccode\u003eGAF\u003c/code\u003e\u003c/a\u003e\n(graphical alignment format) is a strict superset of\n\u003ca href=\"https://github.com/lh3/miniasm/blob/master/PAF.md\"\u003e\u003ccode\u003ePAF\u003c/code\u003e\u003c/a\u003e (pairwise alignment\nformat) by storing graph node labels in the \u003ccode\u003etarget name\u003c/code\u003e slot of \u003ccode\u003ePAF\u003c/code\u003e, and can\nrefer to an \u003ccode\u003erGFA\u003c/code\u003e (reference genome graph)! Looking forward to the graph genome\nworld.\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eAlgorithms that actually call structural variants face many challenges, but\nunderstanding how the reads are encoded in SAM format, and seeing what they look\nlike in the genome browser is a useful first step to gaining a better\nunderstanding.\u003c/p\u003e\n\u003cp\u003eIn summary, some of the signatures of SVs may include:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAberrant insert size (\u003ccode\u003eTLEN\u003c/code\u003e) detection (longer for deletion, shorter for\ninsertion)\u003c/li\u003e\n\u003cli\u003eAberrant pair orientation (pairs are not pointing at each other)\u003c/li\u003e\n\u003cli\u003eSplit-read detection (\u003ccode\u003eSA\u003c/code\u003e tag)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eCIGAR\u003c/code\u003e string processing (\u003ccode\u003eD\u003c/code\u003e operator for deletions, \u003ccode\u003eI\u003c/code\u003e operator for\ninsertions)\u003c/li\u003e\n\u003cli\u003eOver-abundance of clipping (\u003ccode\u003eS\u003c/code\u003e or \u003ccode\u003eH\u003c/code\u003e operators in \u003ccode\u003eCIGAR\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003eDepth of coverage changes for CNVs\u003c/li\u003e\n\u003cli\u003eAligning \u003cem\u003ede novo\u003c/em\u003e assembly vs a reference genome\n(\u003ca href=\"https://twitter.com/lh3lh3/status/1362921612690010118/photo/1\"\u003ehttps://twitter.com/lh3lh3/status/1362921612690010118/photo/1\u003c/a\u003e) which can\noutput \u003ccode\u003eSAM\u003c/code\u003e, but it can also output\n\u003ca href=\"https://github.com/lh3/miniasm/blob/master/PAF.md\"\u003e\u003ccode\u003ePAF\u003c/code\u003e\u003c/a\u003e format (which can\nbe loaded in JBrowse 2 in the synteny views). Techniques of detecting SVs on\nPAF will be fundamentally pretty similar to the techniques listed above but\nmay look a bit different (see \u003ccode\u003ecs\u003c/code\u003e tag in \u003ccode\u003ePAF\u003c/code\u003e for example, it is a modified\n\u003ccode\u003eCIGAR\u003c/code\u003e-like string)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIf you have any ideas I should include here, let me know!\u003c/p\u003e\n\u003ch3 id=\"appendix-a-interpreting-pair-orientation\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#appendix-a-interpreting-pair-orientation\"\u003e\u003ca href=\"#appendix-a-interpreting-pair-orientation\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAppendix A: Interpreting pair orientation\u003c/h3\u003e\n\u003cp\u003eThis may be unnecessarily low level code for this article, but it could be\nhelpful utility to help determine the pair orientation from a single\nSAM/BAM/CRAM record.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// @param flags - flags from a single read\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// @param ref - the string of the reference sequence, just used to determine if it matches rnext\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// @param rnext - the string of the RNEXT, just used to determine if it matches ref\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// @param tlen - the TLEN field from SAM\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// @return e.g. F1R2 normal paired end orientation\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egetPairOrientation\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eflags\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003enumber\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eref\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ernext\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etlen\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003enumber\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// this read is not unmapped \u0026#x26;\u0026#x26;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// this read's mate is also not unmapped \u0026#x26;\u0026#x26;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// this read's mate is on the same reference genome\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eflags\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e4\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eflags\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e8\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eref\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ernext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003es1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eflags\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e16\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eF\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003es2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eflags\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e32\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eF\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eo1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eo2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// if first in pair\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eflags\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e64\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eo1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eo2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// else if second in pair\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    else if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eflags\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e128\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eo1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eo2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etmp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e []\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etlen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etmp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003es1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etmp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eo1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etmp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003es2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etmp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eo2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    } else {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etmp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003es1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etmp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eo1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etmp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003es2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etmp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eo2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etmp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e''\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003enull\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen this can be broken down further by orientation type\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePaired end reads are \"fr\"\u003c/li\u003e\n\u003cli\u003eMate pair reads are \"rf\"\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eSo you can interpret e.g. F1R2 in relation to being a paired end read (fr) or\nmate pair (rf) below and with this link\n\u003ca href=\"https://software.broadinstitute.org/software/igv/interpreting_pair_orientations\"\u003ehttps://software.broadinstitute.org/software/igv/interpreting_pair_orientations\u003c/a\u003e\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efr\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eF1R2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eLR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eF2R1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eLR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eF1F2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eLL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eF2F1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eLL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eR1R2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eRR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eR2R1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eRR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eR1F2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eRL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eR2F1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eRL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003erf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eR1F2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eLR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eR2F1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eLR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eR1R2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eLL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eR2R1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eLL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eF1F2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eRR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eF2F1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eRR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eF1R2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eRL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eF2R1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eRL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"appendix-b---cigar-parsing\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#appendix-b---cigar-parsing\"\u003e\u003ca href=\"#appendix-b---cigar-parsing\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAppendix B - \u003ccode\u003eCIGAR\u003c/code\u003e parsing\u003c/h3\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// @param cigar: CIGAR string in text form\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// @returns an array of elements like ['30','M', '2','I', '50','M', '40','D']\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// which you can consume in a loop two elements at a time\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eparseCigar\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecigar\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecigar\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esplit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e/([\u003c/span\u003e\u003cspan style=\"color: #5FB3A1\"\u003eMIDNSHPX=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e])/\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen parse the returned array two at a time\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// this function does nothing, but is informative for how to interpret a\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// CIGAR string\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// @param cigar - CIGAR string from record\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// @param readSeq -  the SEQ from record\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// @param refSeq -  the reference sequence underlying the read\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einterpretCigar\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecigar\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ereadSeq\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003erefSeq\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eparseCigar\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecigar\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eqpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// query position, position on the read\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// target position, position on the reference sequence\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// opts will be an array like this ['30','M', '2','I', '50','M', '40','D']\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// which we parse two elements at a time\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  for (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elength\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elength\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eoperator\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// do things. refer to the CIGAR chart in SAMv1.pdf for which operators\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// \"consume reference\" to see whether to increment\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eM\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e||\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// matches consume query and reference\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003erefMatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003erefSeq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eslice\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ereadMatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ereadSeq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eslice\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eqpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eqpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      for (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e++\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003erefMatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!==\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ereadMatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e]) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// SNP at this position\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eqpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eI\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// insertions only consume query\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// sequence of the insertion from the read is\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003einsSeq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ereadSeq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eslice\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eqpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eqpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eqpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eD\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// deletions only consume reference\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// sequence of the deletion from the reference is\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edelSeq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003erefSeq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eslice\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etpad\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eN\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// skips only consume reference\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// skips are similar to deletions but are related to spliced alignments\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etpad\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eX\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// mismatch using the extended CIGAR format\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// could lookup the mismatch letter in a string containing the reference\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emismatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003erefSeq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eslice\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eqpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eH\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// does not consume query or reference\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// hardclip is just an indicator\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e===\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// softclip consumes query\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// below gets the entire soft clipped portion\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esoftClipStr\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ereadSeq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eslice\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eqpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eqpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eqpos\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNote for example, that to determine how long a record is on the reference\nsequence, you have to combine the records start position with the CIGAR string,\nbasically parsing the CIGAR string to add up tpos and return tpos\u003c/p\u003e\n\u003ch3 id=\"appendix-c---align-fastq-directly-to-cram\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#appendix-c---align-fastq-directly-to-cram\"\u003e\u003ca href=\"#appendix-c---align-fastq-directly-to-cram\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAppendix C - align \u003ccode\u003eFASTQ\u003c/code\u003e directly to \u003ccode\u003eCRAM\u003c/code\u003e\u003c/h3\u003e\n\u003cp\u003eThis example from the htslib documentation\n(\u003ca href=\"http://www.htslib.org/workflow/fastq.html\"\u003ehttp://www.htslib.org/workflow/fastq.html\u003c/a\u003e shows how you can stream directly\nfrom \u003ccode\u003eFASTQ\u003c/code\u003e to \u003ccode\u003eCRAM\u003c/code\u003e (and generate the index file .crai too)\u003c/p\u003e\n\u003cp\u003eIf you want, you can make this a little shell script, easy_align_shortreads.sh\u003c/p\u003e\n\u003cp\u003eeasy_align_shortreads.sh\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e#!/bin/bash\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eminimap2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e8\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-a\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-x\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esr\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003esamtools \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efixmate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-u\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-m\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003esamtools \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esort\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-u\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-@2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003esamtools \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emarkdup\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-@8\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--reference\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--write-index\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$4\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSimilar idea for longreads, except just a single fastq file is generally used\nfor longreads\u003c/p\u003e\n\u003cp\u003eeasy_align_longreads.sh\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e#!/bin/bash\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eminimap2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e8\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-a\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003esamtools \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efixmate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-u\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-m\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003esamtools \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esort\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-u\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-@2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003esamtools \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emarkdup\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-@8\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--reference\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--write-index\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen call\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ebash\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eeasy_align_shortreads.sh\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eref.fa\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ereads1.fq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ereads2.fq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eout.cram\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ebash\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eeasy_align_longreads.sh\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eref.fa\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ereads.fq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eout.cram\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e## output BAM instead\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ebash\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eeasy_align_shortreads.sh\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eref.fa\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ereads1.fq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ereads2.fq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eout.bam\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ebash\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eeasy_align_longreads.sh\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eref.fa\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ereads.fq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eout.bam\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis same concept works with other common aligners as well like bwa\u003c/p\u003e\n\u003cp\u003eBonus: CRAM to bigwig, for looking at CNV/coverage\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e#!/bin/bash\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# quickalign.sh ref.fa 1.fq 2.fq out.cram\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# produces out.cram and out.bw\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003esamtools\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efaidx\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eminimap2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e8\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-a\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-x\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esr\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003esamtools \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efixmate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-u\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-m\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003esamtools \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esort\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-u\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-@2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003esamtools \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emarkdup\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-@8\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--reference\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--write-index\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$4\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003emosdepth\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$4\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-f\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$4\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003egunzip\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$4\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e.per-base.bed.gz\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ebedGraphToBigWig\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$4\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e.per-base.bed\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$1\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e.fa.fai\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e$4\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e.bw\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCall as \"quickalign.sh ref.fa 1.fq 2.fq out.cram\" gives you out.cram,\nout.cram.crai, and out.cram.bw (coverage)\u003c/p\u003e\n\u003ch3 id=\"appendix-d---the-md-tag-and-finding-snps-in-reads\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#appendix-d---the-md-tag-and-finding-snps-in-reads\"\u003e\u003ca href=\"#appendix-d---the-md-tag-and-finding-snps-in-reads\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAppendix D - the \u003ccode\u003eMD\u003c/code\u003e tag and finding SNPs in reads\u003c/h3\u003e\n\u003cp\u003eThe \u003ccode\u003eMD\u003c/code\u003e tag helps tell you where the mismatches are without looking at the\nreference genome. This is useful because as I mentioned, \u003ccode\u003eCIGAR\u003c/code\u003e can say \u003ccode\u003e50M\u003c/code\u003e\n(50 matches) but some letters inside those 50 matches can be mismatches, it only\nsays there are no insertions/deletions in those 50 bases, but you have to\ndetermine where in those 50 bases where the mismatches are. The \u003ccode\u003eMD\u003c/code\u003e tag can\nhelp tell you where those are, but it is somewhat complicated to decode\n(\u003ca href=\"https://vincebuffalo.com/notes/2014/01/17/md-tags-in-bam-files.html\"\u003ehttps://vincebuffalo.com/notes/2014/01/17/md-tags-in-bam-files.html\u003c/a\u003e). You have\nto combine it with the \u003ccode\u003eCIGAR\u003c/code\u003e to get the position of the mismatches on the\nreference genome. If you have a reference genome to look at, you might just\ncompare all the bases within the 50M to the reference genome and look for\nmismatches yourself and forget about the \u003ccode\u003eMD\u003c/code\u003e tag\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003eMD\u003c/code\u003e tag is also not required to exist, but the command\n\u003ccode\u003esamtools calmd yourfile.bam --reference reference.fa\u003c/code\u003e can add \u003ccode\u003eMD\u003c/code\u003e tags to your\n\u003ccode\u003eBAM\u003c/code\u003e file. It is generally not useful for \u003ccode\u003eCRAM\u003c/code\u003e because \u003ccode\u003eCRAM\u003c/code\u003e actually does\nstore mismatches with the reference genome in it's compression format. Note that\nthere are also some oddities about \u003ccode\u003eMD\u003c/code\u003e tag representation leading to complaints\n(e.g. \u003ca href=\"https://github.com/samtools/hts-specs/issues/505\"\u003ehttps://github.com/samtools/hts-specs/issues/505\u003c/a\u003e) leading more credence to\n\"doing it yourself\" e.g. finding your own mismatches by comparing the read\nsequence with the reference, keeping track of where you are on the read and ref\nposition with the \u003ccode\u003eCIGAR\u003c/code\u003e string (a la Appendix B)\u003c/p\u003e"},{"title":"How to make your own npm package with typescript","date":"2021-12-31","slug":"2021-12-31-npm-package","html":"\u003cp\u003eThere is a lot of mystery around making your own \u003ccode\u003enpm\u003c/code\u003e package. Every package\nlikely does it a bit differently, and it can be tricky to get a setup you like.\nShould you use a \"starter kit\" or a boilerplate example? Or just roll your own?\nShould you use a bundler? How do you use typescript? Well, why don't we try\nstarting from scratch and seeing where we can get?\u003c/p\u003e\n\u003cp\u003eTLDR: here is a github repo with a template package\n\u003ca href=\"https://github.com/cmdcolin/npm-package-tutorial/\"\u003ehttps://github.com/cmdcolin/npm-package-tutorial/\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"introduction\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#introduction\"\u003e\u003ca href=\"#introduction\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eAn \u003ccode\u003enpm\u003c/code\u003e package can be very bare bones. In some sense, npmjs.com is just an\narbitrary file host, and you can upload pretty much anything you want to it.\u003c/p\u003e\n\u003cp\u003eThe magic is in the package.json file, which tells npm:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ewhat files are part of your package (by default, the whole folder with your\npackage.json is published, with the \"files\" field you can say what particular\nfolders or files are uploaded or you can use .npmignore to choose which files\nNOT to publish)\u003c/li\u003e\n\u003cli\u003ewhat to use as the \"entry point\" (e.g. the file that should be referenced when\nyou say \u003ccode\u003econst lib = require('mypackage')\u003c/code\u003e, this is governed by the \"main\"\nfield, \"module\" field which is bundler specific, and \"export maps\" which are\nnewer but tricky)\u003c/li\u003e\n\u003cli\u003ewhat pre- and post- processing steps should be done when the package is being\npublished (the various \"scripts\", where you can have \"clean\", \"build\", \"test\",\n\"lint\", \"prebuild\", etc)\u003c/li\u003e\n\u003cli\u003eand more!\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eLet's try an experiment...\u003c/p\u003e\n\u003ch1 id=\"part-1-the-most-basic-package-with-plain-js-code-in-commonjs-format\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#part-1-the-most-basic-package-with-plain-js-code-in-commonjs-format\"\u003e\u003ca href=\"#part-1-the-most-basic-package-with-plain-js-code-in-commonjs-format\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003ePart 1: the most basic package with plain JS code in commonjs format\u003c/h1\u003e\n\u003cp\u003eOpen up a terminal, and run\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003emkdir\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emypackage\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ecd\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emypackage\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003egit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# make mypackage version controlled\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or yarn init\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis init command outputs something like this, and we accept the defaults\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eThis\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eutility\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ewill\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ewalk\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eyou\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ethrough\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecreating\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epackage.json\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efile.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eIt\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eonly\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecovers\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ethe\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emost\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecommon\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eitems,\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eand\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etries\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eguess\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esensible\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edefaults.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eSee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ehelp\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e for definitive documentation on these fields\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eand\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexactly\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ewhat\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ethey\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edo.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eUse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epk\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eg\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eafterwards\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epackage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eand\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003esave\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eas\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edependency\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ein\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ethe\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epackage.json\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efile.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ePress\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e^C\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eat\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eany\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etime\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003equit.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003epackage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ename:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003emypackage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eversion:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (1.0.0)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003edescription:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eentry\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epoint:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eindex.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecommand:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003egit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003erepository:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ekeywords:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003elicense:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eISC\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eAbout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e/home/cdiesh/mypackage/package.json:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emypackage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eversion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1.0.0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edescription\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eindex.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003escripts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eecho \u003c/span\u003e\u003cspan style=\"color: #5FB3A1\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eError: no test specified\u003c/span\u003e\u003cspan style=\"color: #5FB3A1\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u0026#x26;\u0026#x26; exit 1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eauthor\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eColin\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elicense\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eISC\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen, you can create a file named \u003ccode\u003eindex.js\u003c/code\u003e (in your package.json it says\n\u003ccode\u003e\"main\": \"index.js\"\u003c/code\u003e to refer to this file, the entrypoint)\u003c/p\u003e\n\u003cp\u003eIn your \u003ccode\u003eindex.js\u003c/code\u003e file, generally, you would do things like export a function\nor functions. I will use commonjs exports here for maximum compatibility:\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003emodule\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eexports\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ehello\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003elog\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehello world\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"publishing-a-package\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#publishing-a-package\"\u003e\u003ca href=\"#publishing-a-package\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003ePublishing a package\u003c/h2\u003e\n\u003cp\u003eThis npm package, \u003ccode\u003emypackage\u003c/code\u003e can now be published to \u003ccode\u003enpm\u003c/code\u003e with a simple\ncommand.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epublish\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epublish\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis will prompt you for your npmjs.com username, password, email, and if\nneeded, 2FA token (highly recommended)\u003c/p\u003e\n\u003ch2 id=\"using-your-package-after-it-is-published\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#using-your-package-after-it-is-published\"\u003e\u003ca href=\"#using-your-package-after-it-is-published\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eUsing your package after it is published\u003c/h2\u003e\n\u003cp\u003eOnce it is published, you can use it in your create-react-app app or other npm\npackage.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emypackage\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emypackage\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen you can use\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ehello\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emypackage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ein any of your other codebases\u003c/p\u003e\n\u003ch2 id=\"summary-of-the-simplest-npm-package\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#summary-of-the-simplest-npm-package\"\u003e\u003ca href=\"#summary-of-the-simplest-npm-package\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eSummary of the simplest NPM package\u003c/h2\u003e\n\u003cp\u003eThis all seems pretty boring thus far but it tells us a couple things\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003epackages can be very very bare bones\u003c/li\u003e\n\u003cli\u003eno transpiler or bundler is needed for publishing an npm package\u003c/li\u003e\n\u003cli\u003eour package can consist of a single file and it is uploaded to npm, and the\n\"main\" field in package.json provides an entry point\u003c/li\u003e\n\u003cli\u003ethe filename index.js is not special, probably it is a hangover from the name\nindex.html. you can use whatever name you want\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1 id=\"part-2-adding-typescript\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#part-2-adding-typescript\"\u003e\u003ca href=\"#part-2-adding-typescript\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003ePart 2: Adding typescript\u003c/h1\u003e\n\u003cp\u003eLet's try adding typescript\u003c/p\u003e\n\u003cp\u003eTo do this, we will use the typescript compiler to compile a directory of files\nin our \"src\" directory and output the compiled files to a directory named \"dist\"\u003c/p\u003e\n\u003cp\u003eTo start, let's add typescript\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--save-dev\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etypescript\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-D\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etypescript\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOur package.json now will have \u003ccode\u003etypescript\u003c/code\u003e in it's \u003ccode\u003edevDependencies\u003c/code\u003e (this\nmeans that when someone installs your package, it they don't get typescript as a\ndependency, it is just a dependency for while you are developing the library\nlocally).\u003c/p\u003e\n\u003cp\u003eThen we need to create a tsconfig.json for typescript to use\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etsc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--init\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpx\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etsc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--init\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis will generate a \u003ccode\u003etsconfig.json\u003c/code\u003e file (needed by \u003ccode\u003etypescript\u003c/code\u003e) with a bunch\nof options, but I have stripped it down in my projects to look like this\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003einclude\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: [\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecompilerOptions\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etarget\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ees2018\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emoduleResolution\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enode\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// don't have to import actual filenames, can import extensionless files\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edeclaration\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// generate .d.ts files\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esourceMap\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// generate source map\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eoutDir\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edist\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// output compiled js, d.ts, and source map to dist folder\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003estrict\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eesModuleInterop\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, let's wrote a little typescript. We can now use \"ESM\" style code, we will\ncompile it to commonjs format.\u003c/p\u003e\n\u003cp\u003eutil.ts\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehello\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eindex.ts\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e./util\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esayMessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003elog\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd then we will add a \u003ccode\u003e\"build\"\u003c/code\u003e script to \u003ccode\u003epackage.json\u003c/code\u003e to compile the\nlibrary, and refer to the \u003ccode\u003e\"dist\"\u003c/code\u003e directory for the \u003ccode\u003e\"files\"\u003c/code\u003e and \u003ccode\u003e\"main\"\u003c/code\u003e\nfields in \u003ccode\u003epackage.json\u003c/code\u003e\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emypackage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eversion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1.0.0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edescription\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003esrc/index.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efiles\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: [\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edist\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e], \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// we publish both dist and src to get proper sourceMaps\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003escripts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etsc --module commonjs\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eauthor\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eColin\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elicense\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eISC\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edevDependencies\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etypescript\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^4.5.4\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe can now run\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003erun\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd this will run the \u003ccode\u003e\"build\"\u003c/code\u003e script we created, which in turn, just runs\n\u003ccode\u003etsc\u003c/code\u003e with no arguments.\u003c/p\u003e\n\u003cp\u003eYou can also add a \u003ccode\u003e\"prebuild\"\u003c/code\u003e script that clears out the old contents. In\nfact, npm scripts generalizes the naming system -- you can make scripts with\nwhatever name you want, e.g.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003escripts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epreparty\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eecho preparty\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eparty\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eecho party\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epostparty\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eecho postparty\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen running\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eparty\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003epreparty\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eparty\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003epostparty\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo make this useful, we will use \u003ccode\u003erimraf\u003c/code\u003e (a node package) to make a\ncross-platform removal of the \u003ccode\u003edist\u003c/code\u003e directory\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--save-dev\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003erimraf\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-D\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003erimraf\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand then update your package.json\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003escripts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eclean\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003erimraf dist\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eprebuild\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enpm run clean\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etsc --module commonjs\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edevDependencies\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003erimraf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^3.0.2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etypescript\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e^4.5.4\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe could make it say \"rm -rf dist\" instead of \"rimraf dist\" (e.g. run arbitrary\nshell commands), but rimraf allows it to be cross-platform\u003c/p\u003e\n\u003ch2 id=\"making-sure-you-create-a-fresh-build-before-you-publish\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#making-sure-you-create-a-fresh-build-before-you-publish\"\u003e\u003ca href=\"#making-sure-you-create-a-fresh-build-before-you-publish\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eMaking sure you create a fresh build before you publish\u003c/h2\u003e\n\u003cp\u003eWithout extra instructions, your \u003ccode\u003eyarn publish\u003c/code\u003e command would not create a fresh\nbuild and you could publish an older version that was lingering in the \u003ccode\u003edist\u003c/code\u003e\nfolder.\u003c/p\u003e\n\u003cp\u003eWe can use a \u003ccode\u003epreversion\u003c/code\u003e script that will automatically get invoked when you\nrun \u003ccode\u003eyarn publish\u003c/code\u003e to make sure you get a fresh build in the \u003ccode\u003edist\u003c/code\u003e folder\nbefore you publish\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003escripts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epreversion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enpm run build\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"making-sure-you-push-your-tag-to-github-after-publish\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#making-sure-you-push-your-tag-to-github-after-publish\"\u003e\u003ca href=\"#making-sure-you-push-your-tag-to-github-after-publish\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eMaking sure you push your tag to github after publish\u003c/h2\u003e\n\u003cp\u003eWhen you run \u003ccode\u003eyarn publish\u003c/code\u003e, npm will automatically create a commit with the\nversion name and a git tag, it \u003cem\u003ewill not\u003c/em\u003e automatically push tag to your\nrepository.\u003c/p\u003e\n\u003cp\u003eAdd a \u003ccode\u003epostversion\u003c/code\u003e script that pushes the tag to your repo after your publish\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003escripts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epostversion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003egit push --follow-tags\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"incremental-builds\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#incremental-builds\"\u003e\u003ca href=\"#incremental-builds\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eIncremental builds\u003c/h2\u003e\n\u003cp\u003eWe can use this to do incremental/watch builds\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003erun\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--watch\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--watch\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"adding-testing-with-ts-jest\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#adding-testing-with-ts-jest\"\u003e\u003ca href=\"#adding-testing-with-ts-jest\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAdding testing with ts-jest\u003c/h2\u003e\n\u003cp\u003eYou can use ts-jest to test your code. This involves installing jest,\ntypescript, ts-jest, @types/jest, and then initializing a jest.config.json\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-D\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ejest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etypescript\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--dev\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ejest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etypescript\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-D\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ets-jest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e@types/jest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--dev\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ets-jest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e@types/jest\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpx\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ets-jest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003econfig:init\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ets-jest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003econfig:init\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe can then create a test\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003etest/util.spec.ts\u003c/code\u003e\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e../src/util\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eexpected message returned\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eexpect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etoBe\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehello\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen we can then create a script in the package.json that says \u003ccode\u003e\"test\": \"jest\"\u003c/code\u003e,\nand then we can say\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003enpm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003erun\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eyarn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etest\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou can also create an alternative system where you use \u003ccode\u003ebabel-eslint\u003c/code\u003e and\nvarious babel strategies to test your code, but if you are using \u003ccode\u003etypescript\u003c/code\u003e,\n\u003ccode\u003ets-jest\u003c/code\u003e and \u003ccode\u003etypescript\u003c/code\u003e works great.\u003c/p\u003e\n\u003ch2 id=\"add-a-gitignore\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#add-a-gitignore\"\u003e\u003ca href=\"#add-a-gitignore\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAdd a .gitignore\u003c/h2\u003e\n\u003cp\u003eCreate a .gitignore with just a line that references this \u003ccode\u003edist\u003c/code\u003e folder and\n\u003ccode\u003enode_modules\u003c/code\u003e folder\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003edist\nnode_modules\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"the-future-of-esm-modules\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#the-future-of-esm-modules\"\u003e\u003ca href=\"#the-future-of-esm-modules\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eThe future of ESM modules\u003c/h2\u003e\n\u003cp\u003eThere is a shift happening where modules are changing to be pure ESM rather than\nkeeping commonjs equivalents\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c\"\u003ehttps://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThere are many challenges here, but one shortcut that I have used is to actually\ngo \"halfway to ESM\" and just publish a \"dual\" package: one \"main\" field in the\npackage.json referring to a commonjs file, and one \"module\" field with an ESM\nstyle build for bundlers. I do it like this:\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efiles\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: [\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edist\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eesm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003escripts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e     \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eclean\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003erimraf dist esm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eprebuild\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enpm run clean\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild:cjs\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etsc --module commonjs --ourDir dist\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild:esm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etsc --target es2018 --outDir esm\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enpm run build:esm \u0026#x26;\u0026#x26; npm run build:cjs\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edist/index.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emodule\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eesm/index.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe \"module\" field is understood by bundlers like webpack and you can do\nslightly less polyfilling/babeling on it (hence the different \u003ccode\u003e--target\u003c/code\u003e\nattributes)\u003c/p\u003e\n\u003cp\u003eThis is not \"pure ESM\" with the \"type\":\"module\" in package.json, but it does\nhelp to have less \"babelification\" (which in our case is done by tsc) of your\nsource code.\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eThis tutorial shows you how you can create a basic package that you can publish\nto \u003ccode\u003enpm\u003c/code\u003e. This little boilerplate includes these features:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMakes clean build when running \u003ccode\u003eyarn build\u003c/code\u003e or \u003ccode\u003eyarn publish\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003ePushes to github after publish\u003c/li\u003e\n\u003cli\u003eUses \u003ccode\u003ets-jest\u003c/code\u003e for testing\u003c/li\u003e\n\u003cli\u003eUses esm modules\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYou also have full control, and understand the decisions we took to get to this\npoint. This package does not use any bundling (rollup or webpack or otherwise).\nIt just uses \u003ccode\u003etsc\u003c/code\u003e is used to compile the files to the \u003ccode\u003edist\u003c/code\u003e folder, and the\ndist folder is published to \u003ccode\u003enpm\u003c/code\u003e!\u003c/p\u003e\n\u003cp\u003eIf you need your package to be usable by consumers that don't themselves use\nbundlers, consider looking into \u003ccode\u003e\u0026#x3C;script type=\"module\"\u003e\u003c/code\u003e for importing ESM\nmodules in the browser, or you can bundle your library using rollup or webpack\nand output e.g. a UMD bundle\u003c/p\u003e\n\u003ch2 id=\"final-product\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#final-product\"\u003e\u003ca href=\"#final-product\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFinal product\u003c/h2\u003e\n\u003cp\u003eSee \u003ca href=\"https://github.com/cmdcolin/npm-package-tutorial/\"\u003ehttps://github.com/cmdcolin/npm-package-tutorial/\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"footnote-1\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1\"\u003e\u003ca href=\"#footnote-1\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1\u003c/h2\u003e\n\u003cp\u003eSee my follow up rant\n\u003ca href=\"https://cmdcolin.github.io/posts/2022-05-27-youmaynotneedabundler\"\u003ehttps://cmdcolin.github.io/posts/2022-05-27-youmaynotneedabundler\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"footnote-2\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2\"\u003e\u003ca href=\"#footnote-2\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 2\u003c/h2\u003e\n\u003cp\u003eThis is a setup that works for me, but there are many ways to publish a package\nso take it with a grain of salt!\u003c/p\u003e"},{"title":"My next.js static blog setup","date":"2021-12-26","slug":"2021-12-26-nextjs","html":"\u003cp\u003eTLDR src here \u003ca href=\"https://github.com/cmdcolin/cmdcolin.github.io\"\u003ehttps://github.com/cmdcolin/cmdcolin.github.io\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eMy personal homepage originally used statocles, a perl-based static site\ngenerator (\u003ca href=\"http://preaction.me/statocles/\"\u003ehttp://preaction.me/statocles/\u003c/a\u003e). I didn't really blog using it, just\na homepage for myself plus some links to my tumblr blog. But, if I linked people\nto the tumblr blog directly, it would give people terrible popup ads and\ntrackers. So, I switched to github pages+next.js this year. I considered a\nnumber of alternative static site systems, but next.js seemed to hit some nice\ngoals\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eFlexible\u003c/li\u003e\n\u003cli\u003eReact-based (as opposed to template-based like jekyll, eleventy, etc.)\u003c/li\u003e\n\u003cli\u003eMarkdown driven, and can use MDX (edit 2022: I removed MDX, I disliked the\ncomplicated that it brought. Now all posts are plain markdown, parsed with\n\u003ccode\u003eremark-gfm\u003c/code\u003e for github flavored markdown, and all pages are \u003ccode\u003etsx\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003eRSS feed (bonus)\u003c/li\u003e\n\u003cli\u003eActive community\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eOther systems almost worked and were attempted but aborted\u003c/p\u003e\n\u003ch3 id=\"first-and-second-iterations\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#first-and-second-iterations\"\u003e\u003ca href=\"#first-and-second-iterations\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFirst and second iterations\u003c/h3\u003e\n\u003cp\u003eThe first iteration of my next.js blog\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eI put every blog post in the \"pages\" folder. This worked ok but I had to\nmanually edit the index.mdx file to have long lists of stuff like this\n\u003ccode\u003e![link to new blogpost](manually_inserted_link_here)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe second iteration, I wanted to automatically generate a list of recent\nblogposts from files on disk\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eI used the next.js \"blog-template-typescript\" example folder from their\n\u003ca href=\"https://github.com/vercel/next.js/tree/canary/examples/blog-starter-typescript\"\u003emonorepo\u003c/a\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe new blog posts are generated from markdown files in the \u003ccode\u003e_posts\u003c/code\u003e folder,\nand get rendered by the file \u003ccode\u003epages/posts/[slug].tsx\u003c/code\u003e (yes, the filename\nincludes square brackets).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003egetAllPosts in\u003cbr\u003e\n\u003ca href=\"https://github.com/cmdcolin/cmdcolin.github.io/blob/master/lib/api.ts\"\u003e\u003ccode\u003elib/api.ts\u003c/code\u003e\u003c/a\u003e\ngets a listing of the files in _posts folder, which I can call from the\n\u003ccode\u003egetStaticProps\u003c/code\u003e method on next.js pages\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"stripping-off-unnecessary-stuff-from-blog-starter-typescript\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#stripping-off-unnecessary-stuff-from-blog-starter-typescript\"\u003e\u003ca href=\"#stripping-off-unnecessary-stuff-from-blog-starter-typescript\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStripping off unnecessary stuff from blog-starter-typescript\u003c/h3\u003e\n\u003cp\u003eThe \u003ccode\u003eblog-starter-typescript\u003c/code\u003e template has many tiny components, I removed some\nof them to make it easier for me to orient myself\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/vercel/next.js/tree/canary/examples/blog-starter/components\"\u003etheirs\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/cmdcolin/cmdcolin.github.io/tree/master/components\"\u003emine\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"removing-tailwind-css\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#removing-tailwind-css\"\u003e\u003ca href=\"#removing-tailwind-css\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eRemoving tailwind CSS\u003c/h3\u003e\n\u003cp\u003eThe \u003ccode\u003eblog-starter-typescript\u003c/code\u003e template uses tailwind CSS and uses \"modern web\ndesign\" (aka: gigantic \"tiles\" instead of links, images that are way too large,\netc \u003ca href=\"https://next-blog-starter.vercel.app/\"\u003ehttps://next-blog-starter.vercel.app/\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eI started making a more basic design. I tried to roll with the tailwind CSS for\na bit, but ended up removing it entirely.\u003c/p\u003e\n\u003cp\u003eTailwind CSS is sort of like a CSS-in-JS system, except every CSS attribute is\nencoded in a CSS classname. For example, here are some tailwind CSS snippets\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003eclassName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003econtainer mx-auto px-5\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efooter\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003eclassName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ebg-accent-1 border-t border-accent-2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efooter\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003eclassName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emax-w-1xl mx-auto\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003eclassName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emin-h-screen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003eclassName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehover:underline\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eh1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003eclassName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etext-2xl md:text-2xl lg:text-2xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eh1\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThey claim this is better than using external CSS (see comparison here\n\u003ca href=\"https://tailwindcss.com/docs/utility-first\"\u003ehttps://tailwindcss.com/docs/utility-first\u003c/a\u003e) but it is yet another language to\nlearn, and kind of tricky.\u003c/p\u003e\n\u003cp\u003eBut, the reason I gave up with tailwind is actually because tailwind CSS resets\na lot of HTML styles so things like \u003ccode\u003e\u0026#x3C;h1\u003e\u003c/code\u003e, \u003ccode\u003e\u0026#x3C;h2\u003e\u003c/code\u003e, \u003ccode\u003e\u0026#x3C;ul\u003e\u003c/code\u003e, \u003ccode\u003e\u0026#x3C;li\u003e\u003c/code\u003e, \u003ccode\u003e\u0026#x3C;a\u003e\u003c/code\u003e have\nno styling at all. This is done by \u003ccode\u003etailwind preflight\u003c/code\u003e\n\u003ca href=\"https://tailwindcss.com/docs/preflight\"\u003ehttps://tailwindcss.com/docs/preflight\u003c/a\u003e (which you can disable, but it is enabled\nby default)\u003c/p\u003e\n\u003cp\u003eStackoverflow has some ways to help restore styling and keep preflight, but it\nstill struck me as odd. Examples\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://stackoverflow.com/a/68853223/2129219\"\u003eExample: you have to manually restore underlines on \u003ccode\u003e\u0026#x3C;a\u003e\u003c/code\u003e elements if using tailwind XSS\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://stackoverflow.com/questions/69264976/cant-display-markdown-on-nextjs\"\u003eAnother example: \"It looks like you're using TailwindCSS, the default styles for elements are reset, that's why the h1 text will look like any other text.\"\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://raw.githubusercontent.com/vercel/next.js/canary/examples/blog-starter-typescript/components/markdown-styles.module.css\"\u003eAnother example \u003ccode\u003eblog-template-typescript\u003c/code\u003e uses this file to try to style the markdown using some general styles\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTo me it was surprising the extend that tailwind goes to unstyle the default\nbrowser styles, removing \"idiomatic HTML\" styles, so I removed tailwind for now.\nPerhaps I'll return to it another time\u003c/p\u003e\n\u003ch2 id=\"using-mdx-for-blogposts-in-nextjs\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#using-mdx-for-blogposts-in-nextjs\"\u003e\u003ca href=\"#using-mdx-for-blogposts-in-nextjs\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eUsing MDX for blogposts in next.js\u003c/h2\u003e\n\u003cp\u003e(UPDATE 2022) I no longer use MDX in my blog, my blogposts are all plain\nmarkdown and pages tsx, but leave this here for reference\u003c/p\u003e\n\u003cp\u003eIn the template from next.js team, the \u003ccode\u003eblog-template-typescript\u003c/code\u003e, it uses a\nfairly simple \u003ccode\u003elib/markdownToHtml.ts\u003c/code\u003e function right in the\n\u003ccode\u003epages/posts/[slug].tsx\u003c/code\u003e file (the markdown is statically pre-rendered in the\ntrue static blog sense, using the getStaticProps function). This is,\nunfortunately, over-simplified for the MDX case, because MDX properly needs to\nhydrate the components using react on the client side also\u003c/p\u003e\n\u003cp\u003eTo fix, the module \u003ca href=\"https://github.com/hashicorp/next-mdx-remote\"\u003ehttps://github.com/hashicorp/next-mdx-remote\u003c/a\u003e offers a way to\nload actual MDX files.\u003c/p\u003e\n\u003ch2 id=\"adding-syntax-highlighting-the-nextjs-code-snippets\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#adding-syntax-highlighting-the-nextjs-code-snippets\"\u003e\u003ca href=\"#adding-syntax-highlighting-the-nextjs-code-snippets\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAdding syntax highlighting the next.js code snippets\u003c/h2\u003e\n\u003cp\u003e(UPDATE 2022) I changed to using plain remark with\n\u003ca href=\"https://github.com/wooorm/starry-night\"\u003ehttps://github.com/wooorm/starry-night\u003c/a\u003e (UPDATE 2022 v2) I changed from\nstarry-night to rehype-highlight. starry-night did not have good typescript/tsx\nsupport\u003c/p\u003e\n\u003cp\u003eThere are a couple results from google about how to add syntax highlighting to\nnext.js but I still found it difficult.\u003c/p\u003e\n\u003cp\u003eMy method ended up a bit different where I manually included the prism JS and\nCSS from a CDN essentially and it worked\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/cmdcolin/cmdcolin.github.io/blob/aa080193f45cb3e3d11ca1ead2bbd5eb2ae09633/styles/index.css#L14-L15\"\u003ehttps://github.com/cmdcolin/cmdcolin.github.io/blob/aa080193f45cb3e3d11ca1ead2bbd5eb2ae09633/styles/index.css#L14-L15\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/cmdcolin/cmdcolin.github.io/blob/aa080193f45cb3e3d11ca1ead2bbd5eb2ae09633/pages/_document.tsx#L12-L17\"\u003ehttps://github.com/cmdcolin/cmdcolin.github.io/blob/aa080193f45cb3e3d11ca1ead2bbd5eb2ae09633/pages/_document.tsx#L12-L17\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eOther methods e.g. adding react-prism in next.config.js (like\n\u003ca href=\"https://github.com/mikeesto/next-mdx-prism-example\"\u003ehttps://github.com/mikeesto/next-mdx-prism-example\u003c/a\u003e does) I think clashed with\nMDXRemote perhaps, or maybe I was tussling with tailwind CSS too much to make a\nclear thought out of it, but syntax blocks on my blogposts should now be\nproperly highlighted\u003c/p\u003e\n\u003ch2 id=\"rss-feed\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#rss-feed\"\u003e\u003ca href=\"#rss-feed\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eRSS feed\u003c/h2\u003e\n\u003cp\u003eI also followed this great guide to add a RSS file for next.js\n\u003ca href=\"https://ashleemboyer.com/how-i-added-an-rss-feed-to-my-nextjs-site\"\u003ehttps://ashleemboyer.com/how-i-added-an-rss-feed-to-my-nextjs-site\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eLink here, for your feed readers \u003ca href=\"https://cmdcolin.github.io/rss.xml\"\u003ehttps://cmdcolin.github.io/rss.xml\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eNot many people may use RSS much anymore, but I do use it (via feedly), and I\nlove music blogs that keep posting on blogspot year after year, and the\noccasional programming post is nice too\u003c/p\u003e"},{"title":"A spooky error when you have a string bigger than 512MB in Chrome","date":"2021-10-30","slug":"2021-10-30-spooky","html":"\u003cp\u003eNow gather round for a spooky story\u003c/p\u003e\n\u003cp\u003eLate one night... in the haunted office/castle the midnight candles were burning\nbright and we entered data for a user file....\u003c/p\u003e\n\u003cp\u003e(hindenbugs cackling in the background, dusty technical books line the dark\nshelves)\u003c/p\u003e\n\u003cp\u003eA simple 52MB gzipped datafile that we want to process in the browser. We unzip\nit, decode it, and ... we see an error!!! \u003cstrong\u003eLIGHTNING CRACKS\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/pumpkin-dark.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eBut... our code is so simple (we of course abide by the religion of writing\n\"simple code\" you know)...what could be happening?\u003c/p\u003e\n\u003cp\u003eThe code looks like this\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ebuf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eunzip\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efile\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estr\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eTextDecoder\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e().\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edecode\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ebuf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe trace it back and run a \u003ccode\u003econsole.log(str)\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eIt looks empty. We try running \u003ccode\u003econsole.log(str.length)\u003c/code\u003e ... it prints out 0\u003c/p\u003e\n\u003cp\u003eBut if we look at \u003ccode\u003econsole.log(buffer.length)\u003c/code\u003e we get 546,483,710 bytes...\u003c/p\u003e\n\u003cp\u003eWhat could be happening?\u003c/p\u003e\n\u003cp\u003eWe see in the \u003ccode\u003eTextDecoder\u003c/code\u003e documentation that it has a note called \"fatal\". We\ntry\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ebuf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eunzip\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efile\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estr\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eTextDecoder\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eutf8\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, {\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efatal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edecode\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ebuf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis doesn't change the results though\u003c/p\u003e\n\u003cp\u003eThen it dawns on us while the lightning hits and the thunderclap booms and the\nwind blows through the rattly windows\u003c/p\u003e\n\u003cp\u003eWe have hit...the maximum string length in Chrome\u003c/p\u003e\n\u003cp\u003eBWAHAHAHAHA\u003c/p\u003e\n\u003cp\u003eThe maximum string length!!! Nooooooo\u003c/p\u003e\n\u003cp\u003eIt is 512MB on the dot... 536,870,888 bytes. We test this to be sure\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e536_870_888\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ebuf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eUint8Array\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003efor (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e++\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ebuf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003echarCodeAt\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estr\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eTextDecoder\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e().\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edecode\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ebuf\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003elog\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estr\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elength\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis is correct, outputs 536,870,888\u003c/p\u003e\n\u003cp\u003eWith anything, even one byte more, it fails and outputs 0\u003c/p\u003e\n\u003cp\u003ehappy halloween!!\u003c/p\u003e\n\u003cp\u003epumpkin photo source:\n\u003ca href=\"http://mountainbikerak.blogspot.com/2010/11/google-chrome-pumpkin.html\"\u003ehttp://mountainbikerak.blogspot.com/2010/11/google-chrome-pumpkin.html\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003echrome 95 tested\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003enodejs 15 - at 512MB+1 bytes it prints an error message\n\u003ccode\u003eError: Cannot create a string longer than 0x1fffffe8 characters\u003c/code\u003e for\nsignificantly greater than 512MB e.g. 600MB it actually prints a different\nerror\n\u003ccode\u003eTypeError [ERR_ENCODING_INVALID_ENCODED_DATA]: The encoded data was not valid for encoding utf-8\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003efirefox 93 - goes up to ~1GB but then gives Exception\n\u003ccode\u003e{ name: \"NS_ERROR_OUT_OF_MEMORY\", message: \"\", result: 2147942414 }\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003emidori 6 (safari-alike/webkit) - goes up to ~2GB fine! will have to test more\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e"},{"title":"Jest parallelization, globals, mocks, and squawkless tests","date":"2021-10-05","slug":"2021-10-05-jest","html":"\u003cp\u003eI found that there is a little bit of confusion and misunderstanding around how\nthings like parallelization work in jest, which sometimes leads to additional\nhacking around problems that may not exist or speculating incorrectly about test\nfailure. This is also of course a point of concern when you have code that for\nsome reason or another uses global variables. Here are a short summary of things\nthat may cause confusion.\u003c/p\u003e\n\u003ch2 id=\"tests-in-a-single-file-are-not-run-in-parallel\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#tests-in-a-single-file-are-not-run-in-parallel\"\u003e\u003ca href=\"#tests-in-a-single-file-are-not-run-in-parallel\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eTests in a single file are NOT run in parallel\u003c/h2\u003e\n\u003cp\u003eSimple example, the global variable r is included in the test condition, but it\nis accurately run in all cases because the tests are not run in parallel.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003er\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ems\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ePromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresolve\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetTimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresolve\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ems\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edescribe\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etests\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003et1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eexpect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003er\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etoBe\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003er\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e++\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003et2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eexpect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003er\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etoBe\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003er\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e++\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003et3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eexpect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003er\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etoBe\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003er\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e++\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis test will take 3 seconds, and will accurately count the global variable. If\nit was in parallel, it may only take 1 second, and would inaccurately count the\nglobal variable due to race conditions\u003c/p\u003e\n\u003ch2 id=\"tests-in-different-files-are-run-in-parallel\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#tests-in-different-files-are-run-in-parallel\"\u003e\u003ca href=\"#tests-in-different-files-are-run-in-parallel\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eTests in different files ARE run in parallel\u003c/h2\u003e\n\u003cp\u003eLet's take another example where we use a global variable, and then two\ndifferent tests use the global variable.\u003c/p\u003e\n\u003cp\u003efile_using_some_globals.js\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyGlobal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edoStuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyGlobal\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e++\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyGlobal\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresetMyGlobal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyGlobal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ems\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ePromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresolve\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetTimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresolve\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ems\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etest_global_vars1.test.js\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edoStuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etimeout\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e./dostuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efile1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edoStuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eexpect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edoStuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etoEqual\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etest_global_vars2.test.js\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimport \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edoStuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etimeout\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e./dostuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efile1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eexpect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edoStuff\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etoEqual\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis test completes in less than 2 seconds, and these tests are run in parallel.\nThey use different instances of the global state, and therefore have no worries\nwith colliding their state.\u003c/p\u003e\n\u003ch2 id=\"does-a-mock-from-one-test-affect-another-test\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#does-a-mock-from-one-test-affect-another-test\"\u003e\u003ca href=\"#does-a-mock-from-one-test-affect-another-test\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eDoes a mock from one test affect another test?\u003c/h2\u003e\n\u003cp\u003eWhile seeking the fabled \"squawk-less\" test, it is often useful to mock console\nso that tests that produce an expected error don't actually print an error\nmessage. However, if not done carefully, you will remove errors across tests\u003c/p\u003e\n\u003cp\u003eSo, could a mock from one test affect another test? If it's in the same file,\nyes!\u003c/p\u003e\n\u003cp\u003emock_console.test.js\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etest1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ejest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ewow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eexpect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etoHaveBeenCalled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etest2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// this console.error will not appear because test1 mocked away console.error\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// without restoring it\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHelp I can't see!\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo properly mock these, you should restore the console mock at the end of your\nfunction\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etest1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eorig\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ejest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eI should not see this!\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eexpect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etoHaveBeenCalled\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eorig\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etest2\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsoleMock\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ejest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003espyOn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emockImplementation\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eI should not see this!\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsoleMock\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emockRestore\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etest3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eI should see this error!\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"add-on-achieve-squawkless-tests\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#add-on-achieve-squawkless-tests\"\u003e\u003ca href=\"#add-on-achieve-squawkless-tests\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAdd-on: Achieve squawkless tests!\u003c/h2\u003e\n\u003cp\u003eYour test output should just be a big list of PASS statements, not interleaved\nwith console.error outputs from when you are testing error conditions of your\ncode\u003c/p\u003e\n\u003cp\u003e\"Squawkless tests\" is a term I made up, but it means that if you have code under\ntest that prints some errors to the console, then mock the console.error\nfunction, as in the previous section. Don't stand for having a bunch of verbose\nerrors in your CI logs! However, I also suggest only mocking out console.error\nfor tests that are \u003cstrong\u003eexpected\u003c/strong\u003e to have errors, lest you paper over unexpected\nerrors.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/squawkless_tests.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure: a nice clean test suite without a bunch of crazy console.error outputs\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eGetting better at testing requires exercise, and understanding the basics of\nyour tools can help! Hopefully this helps you achieve a better understanding and\nwrite cleaner jest tests.\u003c/p\u003e"},{"title":"Decrease your idle CPU usage when developing typescript apps with this one weird environment variable","date":"2021-09-05","slug":"2021-09-05-typescript","html":"\u003cp\u003eTL;DR:\u003c/p\u003e\n\u003cp\u003eadd this to your bashrc\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eTSC_WATCHFILE\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eUseFsEventsWithFallbackDynamicPolling\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBy default, the typescript watcher configuration e.g. tsc --watch or whatever is\nrun internally to a create-react-app typescript app (I see it in the process\nmanager as fork-ts-checker-webpack-plugin cpu usage) can have high idling (doing\nnothing...) CPU usage\u003c/p\u003e\n\u003cp\u003eThis is because the default configuration polls for file changes (constantly\nasks the computer if there are changes every 250ms or so). There is an\nalternative configuration for this to change it to a file watcher so it receives\nfile system notifications on file change. There is discussion here on this.\u003c/p\u003e\n\u003cp\u003eThe main summary is that a env variable set to\nTSC_WATCHFILE=UseFsEventsWithFallbackDynamicPolling allows this\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/microsoft/TypeScript/issues/31048\"\u003ehttps://github.com/microsoft/TypeScript/issues/31048\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe issue thread shows that it can go from roughly ~7% idle CPU usage to 0.2%.\nThis corresponds with what I see too after applying this! Detailed docs for\ntypescript discuss some of the reasoning being not making this the default\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/microsoft/TypeScript-Handbook/blob/master/pages/Configuring%20Watch.md#background\"\u003ehttps://github.com/microsoft/TypeScript-Handbook/blob/master/pages/Configuring%20Watch.md#background\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eIt claims that some OS specific behaviors of file watching could be harmful to\nmaking it the default. For example, that (maybe?) on linux, it may use a large\nnumber of file watchers which can exceed notify handles (this is a setting I\ncommonly have to increase in linux, guide here\n\u003ca href=\"https://dev.to/rubiin/ubuntu-increase-inotify-watcher-file-watch-limit-kf4\"\u003ehttps://dev.to/rubiin/ubuntu-increase-inotify-watcher-file-watch-limit-kf4\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003ePS: if you have a package.json of a \u003ccode\u003ecreate-react-app --template typescript\u003c/code\u003e or\nsomething like this then you can edit the package.json to apply this\nautomatically\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-\"start\": \"react-scripts start\"\n+\"start\": \"cross-env TSC_WATCHFILE=UseFsEventsWithFallbackDynamicPolling react-scripts start\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ePhew. I can already feel my laptop running cooler...or at least I can sleep more\nsoundly knowing that my readers adopt this and save some CPU cycles for planet\nearth...and hopefully don't run into any of the caveats\u003c/p\u003e\n\u003cp\u003eEdit: It may be worth it to note, the 'UseFsEvents' part of this uses the\nnode.js fs.watch API and the polling based API is based on fs.watchFile\u003c/p\u003e\n\u003cp\u003eFun table of how the watchers are implemented on different OSs\n[\u003ca href=\"https://github.com/microsoft/TypeScript/issues/31048#issuecomment-495483957\"\u003e1\u003c/a\u003e]\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eOn Linux systems, this uses inotify(7).\nOn BSD systems, this uses kqueue(2).\nOn macOS, this uses kqueue(2) for files and FSEvents for directories.\nOn SunOS systems (including Solaris and SmartOS), this uses event ports.\nOn Windows systems, this feature depends on ReadDirectoryChangesW.\nOn Aix systems, this feature depends on AHAFS, which must be enabled.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd in general, these should all respond more or less the same, but there are\nsmall corner cases that are discussed\n\u003ca href=\"https://nodejs.org/docs/latest/api/fs.html#fs_availability\"\u003ehttps://nodejs.org/docs/latest/api/fs.html#fs_availability\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eDisclaimer: it may be worth reading the reasons that typescript does not have\nthis enabled by default before pushing this into your dev environment and all\nyour teammates, but as far as I could tell, it seems ok!\u003c/p\u003e"},{"title":"An amazing error message if you put more than 2^24 items in a JS Map object","date":"2021-08-15","slug":"2021-08-15-map-limit","html":"\u003cp\u003eOne of the fun things about working with big data is that you can often hit\nweird limits with a system.\u003c/p\u003e\n\u003cp\u003eI was personally trying to load every 'common' single nucleotide polymorphism\nfor the human genome into memory (dbSNP), of which there are over 37 million\nentries (there are many more uncommon ones) for the purposes of making a custom\nsearch index for them [1].\u003c/p\u003e\n\u003cp\u003eTurns out, you may run into some hard limits. Note that these are all V8-isms\nand may not apply to all browsers or engines (I was using node.js for this)\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyObject\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eMap\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003efor (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x3C;=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e50_000_000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e++\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyObject\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eset\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e100000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e==\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003elog\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis will crash after adding approx 16.7M elements and say\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e0\n100000\n200000\n...\n16400000\n16500000\n16600000\n16700000\n\nUncaught RangeError: Value undefined out of range for undefined options\nproperty undefined\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThat is a very weird error message. It says \"undefined\" three times! Much better\nthan your usual \u003ccode\u003eTypeError: Can’t find property ‘lol’ of undefined\u003c/code\u003e. See\n\u003ca href=\"https://bugs.chromium.org/p/v8/issues/detail?id=11852\"\u003ehttps://bugs.chromium.org/p/v8/issues/detail?id=11852\u003c/a\u003e for a bug filed to help\nimprove the error message perhaps.\u003c/p\u003e\n\u003cp\u003eNow, also interestingly enough, if you use an Object instead of a Map\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyObject\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003efor (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x3C;=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e50_000_000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e++\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyObject\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emyobj_’+i]=i\u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eif\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e100000\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e==\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e console.log(i) \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen it will print...\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e0\n100000\n200000\n...\n8000000\n8100000\n8200000\n8300000\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd it will actually just hang there...frozen...no error message though! And it\nis failing at ~8.3M elements. Weird right? This is roughly half the amount of\nelements as the 16.7M case\u003c/p\u003e\n\u003cp\u003eTurns out there is a precise hard limit for the Map case\u003c/p\u003e\n\u003cp\u003eFor the Map: 2^24=16,777,216\u003c/p\u003e\n\u003cp\u003eFor the Object it is around 2^23=8,388,608 HOWEVER, I can actually add more than\nthis, e.g. I can add 8,388,609 or 8,388,610 or even more, but the operations\nstart taking forever to run, e.g. 8,388,999 was taking many minutes\u003c/p\u003e\n\u003cp\u003eVery weird stuff! If you expected me to dig into this and explain it in deep\ntechnical detail, well, you’d be wrong. However, this helpful post on\nstackoverflow by a V8 js engine developer clarifies the Map case!!\n\u003ca href=\"https://stackoverflow.com/questions/54452896/maximum-number-of-entries-in-node-js-map\"\u003ehttps://stackoverflow.com/questions/54452896/maximum-number-of-entries-in-node-js-map\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eV8 developer here. I can confirm that 2^24 is the maximum number of entries in\na Map. That’s not a bug, it’s just the implementation-defined limit.\n\nThe limit is determined by:\n\nThe FixedArray backing store of the Map has a maximum size of 1GB (independent\nof the overall heap size limit) On a 64-bit system that means 1GB / 8B = 2^30 /\n2^3 = 2^27 ~= 134M maximum elements per FixedArray A Map needs 3 elements per\nentry (key, value, next bucket link), and has a maximum load factor of 50% (to\navoid the slowdown caused by many bucket collisions), and its capacity must be\na power of 2. 2^27 / (3 * 2) rounded down to the next power of 2 is 2^24, which\nis the limit you observe.  FWIW, there are limits to everything: besides the\nmaximum heap size, there’s a maximum String length, a maximum Array length, a\nmaximum ArrayBuffer length, a maximum BigInt size, a maximum stack size, etc.\nAny one of those limits is potentially debatable, and sometimes it makes sense\nto raise them, but the limits as such will remain. Off the top of my head I\ndon’t know what it would take to bump this particular limit by, say, a factor\nof two – and I also don’t know whether a factor of two would be enough to\nsatisfy your expectations.\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eGreat details there. It would also be good to know what the behavior is for the\nObject, which has those 100% CPU stalls after ~8.3M, but not the same error\nmessage...\u003c/p\u003e\n\u003cp\u003eAnother fun note: if I modify the Object code to use only “integer IDs” the code\nactually works fine, does not hit any errors, and is “blazingly fast” as the\nkids call it\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyObject\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003efor (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x3C;=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e50_000_000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e++\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyObject\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e100000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e==\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003elog\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI presume that this code works because it detects that I’m using it like an\narray and it decides to transform how it is working internally and not use a\nhash-map-style data structure, so does not hit a limit. There is a slightly\nhigher limit though, e.g. 1 billion elements gives “Uncaught RangeError: Invalid\narray length”\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyObject\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003efor (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x3C;=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1_000_000_000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e++\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emyObject\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e100000\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e==\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003elog\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ei\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis has been another episode of ....the twilight zone (other episodes\ncatalogued here) \u003ca href=\"https://github.com/cmdcolin/technical_oddities/\"\u003ehttps://github.com/cmdcolin/technical_oddities/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e[1] The final product of this adventure was this, to create a search index for a\nlarge number of elements \u003ca href=\"https://github.com/GMOD/ixixx-js\"\u003ehttps://github.com/GMOD/ixixx-js\u003c/a\u003e\u003c/p\u003e"},{"title":"Do you understand your NPM dependencies?","date":"2021-07-27","slug":"2021-07-27-npm-dependencies","html":"\u003cp\u003eYou are writing a library...or you are writing an app and you want to publish\nsome of the components of it as a library...\u003c/p\u003e\n\u003cp\u003eHere are some questions in the form of comments\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eDid you realize that your yarn.lock will be ignored for anyone who installs\nyour libraries?\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDid you realize this means that your perfectly running test suite with your\nyarn.lock could be a failing case for consumers of your library unless you\ndon’t use semver strings like ^1.0.0 and just hardcode it to 1.0.0?\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDid you realize the default of ^1.0.0 automatically gets minor version bumps\nwhich are often fairly substantial changes, e.g. even breaking possibly?\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDid you know that larger libraries like @material-ui/core don’t like to bump\ntheir major version all the time for example so large changes are often made\nto the minor version?\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDid you know if you run \u003ccode\u003eyarn upgrade\u003c/code\u003e, it may update what is in your\nyarn.lock file but will not update what is in your package.json?\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDid you realize that this means that if you depend on the results of running\n\u003ccode\u003eyarn upgrade\u003c/code\u003e e.g. it gave you a bugfix, you could be shipping buggy code to\nconsumers of your library?\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eJust something to be aware of! You can always ride the dragon and accept these\nminor breakages from semver bumps, but it can introduce some issues for your\nconsumers\u003c/p\u003e\n\u003cp\u003eRandom fun thing: Adding a yarn package can even downgrade some other packages.\nFor example if you have ^6.0.0 in your package.json, you yarn upgrade it so in\nthe lockfile it says 6.1.0 but then later install another library that requires\na hard 6.0.1, yarn will decide to downgrade you to 6.0.1 (it will not have a\nduplicate entry in yarn.lock, just that the 6.1.0 in the yarn.lock will\ndowngrade to 6.0.1)\u003c/p\u003e"},{"title":"Making a HTTPS accessible S3 powered static site with CloudFront+route 53","date":"2020-12-26","slug":"2020-12-26-pt2","html":"\u003cp\u003eThis is not a very authoritative post because I stumbled though this but I think\nI got it working now on my website :)\u003c/p\u003e\n\u003ch2 id=\"setup-your-s3-bucket\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#setup-your-s3-bucket\"\u003e\u003ca href=\"#setup-your-s3-bucket\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eSetup your S3 bucket\u003c/h2\u003e\n\u003cp\u003eFirst setup your S3 bucket, your bucket must be named yourdomain.com e.g. named\nafter your domain\u003c/p\u003e\n\u003cp\u003eThen if you have a create-react-app setup I add a script in package.json that\nruns\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003escripts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epredeploy\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enpm run build\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edeploy\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eaws sync --delete build s3://yourdomain.com\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen we can run \"yarn deploy\" and it will automatically upload our\ncreate-react-app website to our S3 static site bucket.\u003c/p\u003e\n\u003cp\u003eThen make sure your bucket has public permissions enabled\n\u003ca href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-2\"\u003ehttps://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-2\u003c/a\u003e.\nThen make sure your bucket has \"static site hosting\" enabled too\u003c/p\u003e\n\u003ch2 id=\"setup-route-53-and-make-your-ns-entries-in-domainsgooglecom\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#setup-route-53-and-make-your-ns-entries-in-domainsgooglecom\"\u003e\u003ca href=\"#setup-route-53-and-make-your-ns-entries-in-domainsgooglecom\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eSetup route 53, and make your NS entries in domains.google.com\u003c/h2\u003e\n\u003cp\u003eI bought a domain with domains.google.com\u003c/p\u003e\n\u003cp\u003eGoogle then emailed me to validate my ownership\u003c/p\u003e\n\u003cp\u003eThen I went to aws.amazon.com route 53 and I created a hosted zone\u003c/p\u003e\n\u003cp\u003eThis generated 4 name server entries and I added those to the domains.google.com\nsite\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/638618421776515072_0.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eScreenshot shows copying the NS values from route 53 to the name servers area of\ndomains.google.com\u003c/p\u003e\n\u003ch2 id=\"setup-your-amazon-certificate-for-making-ssl-work-on-cloudfront\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#setup-your-amazon-certificate-for-making-ssl-work-on-cloudfront\"\u003e\u003ca href=\"#setup-your-amazon-certificate-for-making-ssl-work-on-cloudfront\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eSetup your Amazon certificate for making SSL work on CloudFront\u003c/h2\u003e\n\u003cp\u003eTo properly setup However, this does not work so you need to go to Amazon\nCertificates-\u003eProvision certificates\u003c/p\u003e\n\u003cp\u003eWe request the certificate for\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://www.yourdomain.com\"\u003ewww.yourdomain.com\u003c/a\u003e yourdomain.com\u003c/p\u003e\n\u003cp\u003eThen it generates some codes for a CNAME value for each of those two entries,\nand has a button to autoimport those CNAME values to route53\u003c/p\u003e\n\u003cp\u003eThen it will say \"Pending validation\"...I waited like an hour and then it\nchanged to \"Success\".\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/638618421776515072_1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eScreenshot shows the now successful Amazon Certificate. After you get this, you\ncan proceed to finishing your cloudfront\u003c/p\u003e\n\u003ch2 id=\"create-a-cloudfront-distribution-and-add-alternative-cname-entries-for-your-domain\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#create-a-cloudfront-distribution-and-add-alternative-cname-entries-for-your-domain\"\u003e\u003ca href=\"#create-a-cloudfront-distribution-and-add-alternative-cname-entries-for-your-domain\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eCreate a CloudFront distribution and add \"Alternative CNAME\" entries for your domain\u003c/h2\u003e\n\u003cp\u003eThen we can update our CloudFront distribution and add these to the \"Alternative\nCNAME\" input box\u003c/p\u003e\n\u003cp\u003eyourdomain.com \u003ca href=\"http://www.yourdomain.com\"\u003ewww.yourdomain.com\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eNote also that I first generated my certificate in us-east-2 but the \"Import\ncertificate form\" in cloudfront said I had to create it in us-east-1\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/638618421776515072_2.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch2 id=\"add-a-default-object-indexhtml-to-the-cloudfront-setting\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#add-a-default-object-indexhtml-to-the-cloudfront-setting\"\u003e\u003ca href=\"#add-a-default-object-indexhtml-to-the-cloudfront-setting\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAdd a default object index.html to the CloudFront setting\u003c/h2\u003e\n\u003cp\u003eMake your CloudFront \"default object\" is index.html\u003c/p\u003e\n\u003cp\u003eYou have to manually type this in :)\u003c/p\u003e\n\u003ch2 id=\"add-the-cloudfront-distribution-to-your-route-53\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#add-the-cloudfront-distribution-to-your-route-53\"\u003e\u003ca href=\"#add-the-cloudfront-distribution-to-your-route-53\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eAdd the CloudFront distribution to your Route 53\u003c/h2\u003e\n\u003cp\u003eAdd a Route 53 \"A\" record that points to the CloudFront domain name e.g.\nd897d897d87d98dd.cloudfront.net\u003c/p\u003e\n\u003ch2 id=\"summary-of-steps-needed\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#summary-of-steps-needed\"\u003e\u003ca href=\"#summary-of-steps-needed\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eSummary of steps needed\u003c/h2\u003e\n\u003cp\u003eThe general hindsight 20/20 procedure is\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eUpload your static content to an S3 bucket called yoursite.com (must be your\ndomain name)\u003c/li\u003e\n\u003cli\u003eMake your S3 bucket have the \"static website\" setting on in the properties\nmenu and add a permissions policy that supports getObject e.g.\n\u003ca href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-2\"\u003ehttps://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-2\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eCreate a CloudFront distribution for your website\u003c/li\u003e\n\u003cli\u003eMake the CloudFront default object index.html\u003c/li\u003e\n\u003cli\u003eCreate your domain with domains.google.com or similar\u003c/li\u003e\n\u003cli\u003ePoint the google domain's name server to Route 53 NS list from AWS\u003c/li\u003e\n\u003cli\u003eAdd Route 53 A records that point to the CloudFront domain name e.g.\nd897d897d87d98dd.cloudfront.net\u003c/li\u003e\n\u003cli\u003eCreate Amazon issued certificate for yourdomain.com, which can auto-import a\nvalidation CNAME to your Route 53\u003c/li\u003e\n\u003cli\u003eMake your CloudFront domain support your Alternative CNAME's e.g.\nyourdomain.com which requires importing (e.g. selecting from a list that\nthey auto-populate) your Amazon-issued-certificate\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"troubleshooting-and-notes\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#troubleshooting-and-notes\"\u003e\u003ca href=\"#troubleshooting-and-notes\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eTroubleshooting and notes\u003c/h2\u003e\n\u003cp\u003eProblem: Your website gives 403 CloudFlare error Solution: You have to get the\nAlternateive CNAME configuration setup (pre-step involves the certificate\nrequest and validation)\u003c/p\u003e\n\u003cp\u003eProblem: Your website gives an object not found error Solution: Set the\nCloudFront \"default object\" to index.html\u003c/p\u003e\n\u003ch2 id=\"random-comment\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#random-comment\"\u003e\u003ca href=\"#random-comment\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eRandom comment\u003c/h2\u003e\n\u003cp\u003eThis is one of those processes (creating the cloudfront/route 53) that probably\ncould have done with the aws-sam CLI and it would have possibly been easier, it\nis quite fiddly doing all these steps in the web interface\u003c/p\u003e"},{"title":"Making a serverless website for photo and video upload pt. 2","date":"2020-12-26","slug":"2020-12-26","html":"\u003cp\u003eThis post follows onhttps://cmdcolin.github.io/2020-12-24.html\u003c/p\u003e\n\u003cp\u003eIt is possible I zoomed ahead too fast to make this a continuous tutorial, but\noverall I just wanted to post an update\u003c/p\u003e\n\u003cp\u003eIn pt. 1 I learned how to use the \u003ccode\u003eaws-sam\u003c/code\u003e CLI tool. This was a great insight\nfor me about automating deployments. I can now simply run \u003ccode\u003esam deploy\u003c/code\u003e and it\nwill create new dynamodb tables, lambda functions, etc.\u003c/p\u003e\n\u003cp\u003eAfter writing pt 1. I converted the existing vue-js app that was in the aws\ntutorial and converted it to react. Then I extended the app to allow\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePosting comments on photos\u003c/li\u003e\n\u003cli\u003eUploading multiple files\u003c/li\u003e\n\u003cli\u003eUploading videos etc.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIt will be hard to summarize all the changes since now the app has taken off a\nlittle bit but it looks like this:\u003c/p\u003e\n\u003cp\u003eRepo structure\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./frontend\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./frontend/src/App.tsx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./lambdas/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./lambdas/postFile\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./lambdas/getFiles\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./lambdas/postComment\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e./lambdas/getComments\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere is a detailed code for uploading the file. We upload one file at a time,\nbut the client code post to the lambda endpoint individually for each file\u003c/p\u003e\n\u003cp\u003eThis generates a pre-signed URL to allow the client-side JS (not the lambda\nitself) to directly upload to S3, and also posts a row in the S3 to the filename\nthat will. It is very similar code in to\n\u003ca href=\"https://cmdcolin.github.io/2020-12-24.html\"\u003ehttps://cmdcolin.github.io/2020-12-24.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e./lambdas/postFile/app.js\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003euse strict\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eAWS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003erequire\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eaws-sdk\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emultipart\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003erequire\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e./multipart\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAWS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eupdate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eregion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eAWS_REGION\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003es3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAWS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eS3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// Change this value to adjust the signed URL's expiration\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eURL_EXPIRATION_SECONDS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e300\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// Main Lambda entry point\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003eexports\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eevent\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetUploadURL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eevent\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e { AWS_REGION: \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eregion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e } \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eenv\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edynamodb\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAWS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eDynamoDB\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eapiVersion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2012-08-10\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e region\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003euploadPic\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etimestamp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efilename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003euser\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eparams\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eItem\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etimestamp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eN\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etimestamp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efilename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efilename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003euser\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003euser\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eTableName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efiles\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edynamodb\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eputItem\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eparams\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egetUploadURL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eevent\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003etry\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edata\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emultipart\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eparse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eevent\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e { \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efilename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003euser\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e } \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edata\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etimestamp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eDate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003enow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eKey\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etimestamp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efilename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// Get signed URL from S3\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003es3Params\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eBucket\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eUploadBucket\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      Key\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eExpires\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eURL_EXPIRATION_SECONDS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eContentType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// This ACL makes the uploaded object publicly readable. You must also\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// uncomment the extra permission for the Lambda function in the SAM\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// template.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eACL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epublic-read\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003euploadURL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003es3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetSignedUrlPromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eputObject\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003es3Params\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euploadPic\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      timestamp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efilename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eKey\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      message\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      user\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      date\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      contentType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eJSON\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003estringify\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      uploadURL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      Key\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  } \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e500\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebody\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e JSON\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003estringify\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e./lambdas/getFiles/app.js\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// eslint-disable-next-line import/no-unresolved\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eAWS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003erequire\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eaws-sdk\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e { AWS_REGION: \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eregion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e } \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eenv\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edocClient\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAWS\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eDynamoDB\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eDocumentClient\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egetItems\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eparams\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eTableName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efiles\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edocClient\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003escan\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eparams\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003epromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003eexports\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eevent\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003etry\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresult\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetItems\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e200\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebody\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e JSON\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003estringify\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresult\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  } \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e400\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebody\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e JSON\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003estringify\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e./frontend/src/App.tsx (excerpt)\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emyfetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eparams\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003estring\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eany\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003efetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eparams\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  if (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eok\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ethrow\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHTTP \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estatus\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estatusText\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ejson\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eUploadDialog\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopen\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eonClose\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  open\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eboolean\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eonClose\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003evoid\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eimages\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetImages\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eFileList\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eloading\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetLoading\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003efalse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etotal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetTotal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecompleted\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetCompleted\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003euser\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetUser\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e''\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esetMessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseState\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e''\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eclasses\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003euseStyles\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ehandleClose\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e () \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetLoading\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003efalse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetImages\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetCompleted\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetTotal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetMessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e''\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eonClose\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDialog\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eonClose\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{handleClose} \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eopen\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{open}\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDialogTitle\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003eupload a file (supports picture or video)\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDialogTitle\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDialogContent\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elabel\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003ehtmlFor\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003euser\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003ename (optional) \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elabel\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003einput\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{user}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eonChange\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{event \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetUser\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eevent\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etarget\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eid\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003euser\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ebr\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e /\u003e \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elabel\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003ehtmlFor\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003euser\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003emessage (optional) \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elabel\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003einput\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{message}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eonChange\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{event \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetMessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eevent\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etarget\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eid\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ebr\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003einput\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003emultiple\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efile\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eonChange\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e files \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etarget\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efiles\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003eif\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efiles \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e files\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elength\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e              \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetImages\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efiles\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        /\u003e {error \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eclassName\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{classes\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror}\u003e{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eerror\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e loading \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eUploading...\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecompleted\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e/\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etotal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e completed \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eh2\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003eUploaded \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eh2\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003enull\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e} \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDialogActions\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eButton\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003estyle\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etextTransform\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enone\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eonClick\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e              \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003etry\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003eif\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eimages\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetLoading\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetCompleted\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetTotal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eimages\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elength\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ePromise\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                    Array\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eimages\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e image \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                      \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e data \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eFormData\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                      data\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eappend\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emessage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e message\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                      data\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eappend\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003euser\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e user\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                      data\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eappend\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eDate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e().\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003etoLocaleString\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                      data\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eappend\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efilename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e image\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                      data\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003eappend\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e image\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                      \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e res \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emyfetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eAPI_ENDPOINT \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e/postFile\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emethod\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ePOST\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebody\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edata\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003emyfetch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eres\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003euploadURL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emethod\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ePUT\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                        \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebody\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eimage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                      \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetCompleted\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ecompleted \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e completed \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetTimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(()\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                    \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003ehandleClose\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e500\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e              \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D0679D\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e                \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003esetError\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e              \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003ecolor\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eprimary\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            upload\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eButton\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eButton\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eonClick\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{handleClose}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003ecolor\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eprimary\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003estyle\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etextTransform\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enone\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e            cancel\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eButton\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDialogActions\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDialogContent\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDialog\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etemplate.yaml for AWS\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAWSTemplateFormatVersion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: 2010-09-09\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eTransform\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAWS::Serverless-2016-10-31\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDescription\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eS3 Uploader\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eResources\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efilesDynamoDBTable\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAWS::DynamoDB::Table\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eProperties\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAttributeDefinitions\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        - \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAttributeName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etimestamp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAttributeType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eN\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eKeySchema\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        - \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAttributeName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etimestamp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eKeyType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHASH\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eProvisionedThroughput\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eReadCapacityUnits\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eWriteCapacityUnits\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eTableName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efiles\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# HTTP API\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eMyApi\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAWS::Serverless::HttpApi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eProperties\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# CORS configuration - this is open for development only and should be restricted in prod.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# See https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-property-httpapi-httpapicorsconfiguration.html\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eCorsConfiguration\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAllowMethods\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eGET\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ePOST\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eDELETE\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eOPTIONS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAllowHeaders\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          - \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAllowOrigins\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          - \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eUploadRequestFunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAWS::Serverless::Function\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eProperties\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eCodeUri\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003elambdas/postFile/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHandler\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eapp.handler\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eRuntime\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enodejs12.x\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eTimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e3\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eMemorySize\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e128\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eEnvironment\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eVariables\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eUploadBucket\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!Ref\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eS3UploadBucket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ePolicies\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAmazonDynamoDBFullAccess\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        - \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eS3WritePolicy\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eBucketName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!Ref\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eS3UploadBucket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        - \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eStatement\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e            - \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eEffect\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAllow\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e              \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eResource\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!Sub\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003earn:aws:s3:::${S3UploadBucket}/\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e              \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e                - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003es3:putObjectAcl\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eEvents\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eUploadAssetAPI\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eHttpApi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eProperties\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ePath\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e/postFile\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eMethod\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epost\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eApiId\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!Ref\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eMyApi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eFileReadFunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAWS::Serverless::Function\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eProperties\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eCodeUri\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003elambdas/getFiles/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHandler\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eapp.handler\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eRuntime\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enodejs12.x\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eTimeout\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e3\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eMemorySize\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e128\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ePolicies\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAmazonDynamoDBFullAccess\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eEvents\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eUploadAssetAPI\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eHttpApi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eProperties\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ePath\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e/getFiles\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eMethod\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eget\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eApiId\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!Ref\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eMyApi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e## S3 bucket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eS3UploadBucket\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAWS::S3::Bucket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eProperties\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eCorsConfiguration\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eCorsRules\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e          - \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAllowedHeaders\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e              - \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAllowedMethods\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e              - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eGET\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e              - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ePUT\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e              - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eHEAD\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAllowedOrigins\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e              - \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e## Take a note of the outputs for deploying the workflow templates in this sample application\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eOutputs\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eAPIendpoint\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDescription\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eHTTP API endpoint URL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eValue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!Sub\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://${MyApi}.execute-api.${AWS::Region}.amazonaws.com\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eS3UploadBucketName\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDescription\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eS3 bucket for application uploads\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eValue\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e!Ref\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eS3UploadBucket\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo display all the pictures I use a switch from video or img tag based on\ncontentType.startsWith('video'). I also use the \"figcaption\" HTML tag to have a\nlittle caption on the pics/videos\u003c/p\u003e\n\u003cp\u003e./frontend/src/App.tsx\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eMedia\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efile\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003estyle\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eonClick\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003echildren\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  file\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eFile\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eonClick\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eFunction\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  style\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eReact\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eCSSProperties\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  children\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eReact\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eReactNode\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e { \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efilename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e } \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efile\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eBUCKET\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e/\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003efilename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efigure\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003estyle\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edisplay\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003einline-block\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epicture\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        {contentType\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003estartsWith\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003evideo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e?\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003evideo\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003estyle\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{style} \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{src} \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003econtrols\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eonClick\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{onClick \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eas\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eany\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e} /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eimg\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003estyle\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{style} \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{src} \u003c/span\u003e\u003cspan style=\"color: #91B4D5; font-style: italic\"\u003eonClick\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e{onClick \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eas\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCDC0\"\u003eany\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e} /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epicture\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efigcaption\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e{children}\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efigcaption\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efigure\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow the really fun part: if you get an image of a picture frame like\n\u003ca href=\"https://www.amazon.com/Paintings-Frames-Antique-Shatterproof-Osafs2-Gld-A3/dp/B06XNQ8W9T\"\u003ehttps://www.amazon.com/Paintings-Frames-Antique-Shatterproof-Osafs2-Gld-A3/dp/B06XNQ8W9T\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eYou can make it a border for any image or video using border-image CSS\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003estyle\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eborder\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e30px solid\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eborderImage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eurl(borders/\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e${\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eborder\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e) 30 round\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e`\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/media/638602799897329664_0.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch2 id=\"summary\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#summary\"\u003e\u003ca href=\"#summary\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eSummary\u003c/h2\u003e\n\u003cp\u003eThe template.yaml automatically deploys the lambdas for postFile/getFile and the\nfiles table in dynamoDB\u003c/p\u003e\n\u003cp\u003eThe React app uses postFile for each file in an \u003ccode\u003e\u0026#x3C;input type=\"file\"/\u003e\u003c/code\u003e, the code\nuses React hooks and functional components but is hopefully not too complex\u003c/p\u003e\n\u003cp\u003eI also added commenting on photos. The code is not shown here but you can look\nin the source code for details\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/638602799897329664_1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eOverall this has been a good experience learning to develop this app and\nlearning to automate the cloud deployment is really good for ensuring\nreliability and fast iteration.\u003c/p\u003e\n\u003cp\u003eAlso quick note on serverless CLI vs aws-sam. I had tried a serverless CLI\ntutorial from another user but it didn't click with me, while the aws-sam\ntutorial from\n\u003ca href=\"https://searchvoidstar.tumblr.com/post/638408397901987840/making-a-serverless-website-for-photo-upload-pt-1\"\u003ehttps://searchvoidstar.tumblr.com/post/638408397901987840/making-a-serverless-website-for-photo-upload-pt-1\u003c/a\u003e\nwas a great kick start for me. I am sure the serverless CLI is great too and it\nensures a bit less vendor lock in, but then is also a little bit removed from\nthe native aws config schemas. Probably fine though\u003c/p\u003e\n\u003ch2 id=\"source-code\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#source-code\"\u003e\u003ca href=\"#source-code\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eSource code\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/cmdcolin/aws_photo_gallery/\"\u003ehttps://github.com/cmdcolin/aws_photo_gallery/\u003c/a\u003e\u003c/p\u003e"},{"title":"Making a serverless website for photo upload pt. 1","date":"2020-12-24","slug":"2020-12-24","html":"\u003cp\u003eI set out to make a serverless website for photo uploads. Our dearly departed\ndixie dog needed a place to have photo uploads.\u003c/p\u003e\n\u003cp\u003eI didn't want to get charged dollars per month for a running ec2 instance, so I\nwanted something that was lightweight e.g. serverless, and easy\u003c/p\u003e\n\u003cp\u003eI decided to follow this tutorial\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://aws.amazon.com/blogs/compute/uploading-to-amazon-s3-directly-from-a-web-or-mobile-application/\"\u003ehttps://aws.amazon.com/blogs/compute/uploading-to-amazon-s3-directly-from-a-web-or-mobile-application/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI really liked the command line deployment (aws-sam) because fiddling around\nwith the AWS web based control panel is ridiculously complicated\u003c/p\u003e\n\u003cp\u003eFor example I also tried following this tutorial which uses the web based UI\n(\u003ca href=\"https://www.youtube.com/watch?v=mw_-0iCVpUc\"\u003ehttps://www.youtube.com/watch?v=mw_-0iCVpUc\u003c/a\u003e) and it just did not work for\nme....I couldn't stay focused (blame ADHD or just my CLI obsession?) and certain\nthings like \"Execution role\" that they say to modify are not there in the web UI\nanymore, so I just gave up (I did try though!)\u003c/p\u003e\n\u003cp\u003eTo install aws-sam I used homebrew\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ebrew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etap\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eaws/tap\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ebrew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eaws-sam-cli\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ebrew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eaws-sam-cli\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# I had to run the install command twice ref https://github.com/aws/aws-sam-cli/issues/2320#issuecomment-721414971\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003egit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eclone\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ehttps://github.com/aws-samples/amazon-s3-presigned-urls-aws-sam\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ecd\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eamazon-s3-presigned-urls-aws-sam\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003esam\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edeploy\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--guided\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# proceeds with a guided installation, I used all defaults except I\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# made \"UploadRequestFunction may not have authorization definedIs\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eIs\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ethis\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eokay?\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e [y/N]: \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ey\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/media/638408397901987840_0.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eThey then in the tutorial describe trying to use postman to test\u003c/p\u003e\n\u003cp\u003eI test with \u003ccode\u003ecurl\u003c/code\u003e instead\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ecurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://fjgbqj5436.execute-api.us-east-2.amazonaws.com/uploads\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003euploadURL\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://sam-app-s3uploadbucket-1653634.s3.us-east-2.amazonaws.com/112162.jpg?Content-Type=image%2Fjpeg\u0026#x26;X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026#x26;X-Amz-Credential=xxx\u0026#x26;X-Amz-Date=20201224T174804Z\u0026#x26;X-Amz-Expires=300\u0026#x26;X-Amz-Security-Token=yyy\u0026#x26;X-Amz-SignedHeaders=host\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eKey\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e112162.jpg\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe premise of this is you make a request, and then the response from the API is\na pre-signed URL that then allows you to upload directly to S3. You can use\n\u003ccode\u003ecurl \u0026#x3C;url\u003e --upload-file yourfile.jpg\u003c/code\u003e. This automatically does a PUT request\nto the s3 bucket (yes, this is talking directly to s3 now, not the lambda! the\nlambda is just for generating the \"pre-signed URL\" to let you upload). Careful\nto copy it exactly as is\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003ecurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://sam-app-s3uploadbucket-1653634.s3.us-east-2.amazonaws.com/112162.jpg?Content-Type=image%2Fjpeg\u0026#x26;X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026#x26;X-Amz-Credential=xxx\u0026#x26;X-Amz-Date=20201224T174804Z\u0026#x26;X-Amz-Expires=300\u0026#x26;X-Amz-Security-Token=yyy\u0026#x26;X-Amz-SignedHeaders=host\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--upload-file\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etest.jpg\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere is no response, but I can then check the s3 console and see the file\nupload is successful (all files are renamed)\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/638408397901987840_1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure shows that the file upload is successful :)\u003c/p\u003e\n\u003cp\u003eThen we can edit the file frontend/index.html from the repo we cloned to contain\nthe lambda with the /uploads/ suffix\u003c/p\u003e\n\u003cp\u003eThen we manually upload this file to another s3 bucket or test it locally\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003eaws\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003es3\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecp\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eindex.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003es3://mybucket/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# then ...visit that in the browser\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAt this point the files are getting uploaded but not publicly accessible. To\nmake them publicly accessible we uncomment the ACL: 'public-read' in the\ngetSignedURL/app.js folder in the github repo\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/638408397901987840_3.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure showing the public-read uncommented\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/638408397901987840_4.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure showing the lines that need uncommenting in template.yaml in the root of\nthe github repo that allows putObject in s3 with the public-read ACL\u003c/p\u003e\n\u003cp\u003eRe-run \u003ccode\u003esam deploy --guided\u003c/code\u003e, same thing as at the start\u003c/p\u003e\n\u003cp\u003eNow the objects are publicly accessible!\u003c/p\u003e"},{"title":"Challenges I have faced learning React","date":"2020-07-04","slug":"2020-07-04","html":"\u003cp\u003eI faced many challenges when learning React which I had to learn starting a new\njob that I started in 2018. I wanted to go over my learning experience, and I\ntried to review commit logs to get an accurate timeline, instead of relying\nsolely on my memory of the timeline.\u003c/p\u003e\n\u003cp\u003eTLDR: If I were to take away anything from this\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\"pairing\" (not strictly pair programming, just meeting with other people at\nstructured times during the week) was useful especially as a remote worker. My\ncoworkers may not have truly known how many misunderstandings I had, but it\nstill helped me feel less aliented.\u003c/li\u003e\n\u003cli\u003ereading the book \"Learning React\" was very helpful, it helped provide some\nmental structure that reading blog posts on the internet could not.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAlso stay patient, stay thankful, and try to focus while you learn\u003c/p\u003e\n\u003ch2 id=\"introduction-to-me\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#introduction-to-me\"\u003e\u003ca href=\"#introduction-to-me\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eIntroduction to me\u003c/h2\u003e\n\u003cp\u003eI am maybe what you'd call a front-end engineer. I have done web development for\nabout 7 years now. I worked on a variety of front end and back end projects,\nincluding with Ruby on Rails, PHP, Perl CGI, Java servlets, and jquery/dojo\nclient side JS. I am pretty steeped in the \"jquery spaghetti\" / mutable DOM\neverywhere era of things in my work on the frontend.\u003c/p\u003e\n\u003ch2 id=\"my-new-job\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#my-new-job\"\u003e\u003ca href=\"#my-new-job\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eMy new job!\u003c/h2\u003e\n\u003cp\u003eWhen I got a call about a new job in 2018, I was really happy and started in\nJune 2018. They decided they are going to do \"the big rewrite\" and are going to\nuse React. I start out as a remote worker. I fly into Berkeley for a single day\nto sign HR paperwork!\u003c/p\u003e\n\u003cp\u003eSoon, my coworker starts building the new React app prototype. He keeps asking\nme what state management library should we use, but I had no idea about React\nstill, much less what state management even is, and basically just was like \"I\ndunno!\". I had no way to form an opinion.\u003c/p\u003e\n\u003cp\u003eI was also working on some stuff unrelated to the rewrite as the rest of the\nteam started prototyping in React, and I remained pretty out of the loop. We\nwould have weekly meetings but I just wouldn't really understand the goings-on.\nI saw PropTypes, and mobx-state-tree model types, and class-based React\ncomponents, but nothing sunk in.\u003c/p\u003e\n\u003cp\u003eSidenote: I had actually tried out React in 2016 and was very confused at that\ntime too, I had a bad taste in my mouth about React entirely! See Footnote 1.\u003c/p\u003e\n\u003ch2 id=\"i-am-flounderingnot-understanding-whats-going-on-with-the-rewrite\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#i-am-flounderingnot-understanding-whats-going-on-with-the-rewrite\"\u003e\u003ca href=\"#i-am-flounderingnot-understanding-whats-going-on-with-the-rewrite\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eI am floundering...not understanding what's going on with the rewrite\u003c/h2\u003e\n\u003cp\u003eIt's December 2018, I go home for Christmas and I have an honest talk with my\nparents and tell them \"I don't get what is happening in the new codebase, I'm\nhonestly unhappy, and it just does all this 'React' stuff\" but I can't explain\nReact to them I just say the code is automatically reacting to other things.\u003c/p\u003e\n\u003cp\u003eMy parents say \"well if you are unhappy, you might have to leave your job!\".\nThey were not cheering for me to leave, but they understood that this wasn't\nreally sustainable. At this point, it really hit me that I do like this job and\nI decided to try to focus on work.\u003c/p\u003e\n\u003ch2 id=\"i-try-and-make-an-honest-attempt-to-get-involved-in-the-project\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#i-try-and-make-an-honest-attempt-to-get-involved-in-the-project\"\u003e\u003ca href=\"#i-try-and-make-an-honest-attempt-to-get-involved-in-the-project\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eI try and make an honest attempt to get involved in the project\u003c/h2\u003e\n\u003cp\u003eOn January 10th 2019, I make my first commit to the rewrite by doing some\nmonkey-see monkey-do type coding. I copy a bunch of files and just put them in\nthe right place, tweak some lines, and start to figure out how to make things\nrun. By the end of January 2019 I get my first code change merged.\u003c/p\u003e\n\u003cp\u003eI also suggested that we start doing \u003cstrong\u003epair-programming sessions\u003c/strong\u003e. Once I\nstarted doing this, meeting weekly with my coworkers, it made a huge difference\nfor me in learning how to code. The things we discussed in these sessions often\nstill went way over my head due to how my coworkers presented stuff or how much\nthey assumed I understood. Nevertheless, these were extremely helpful for me to\nhelp get caught up.\u003c/p\u003e\n\u003ch2 id=\"reading-learning-react\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#reading-learning-react\"\u003e\u003ca href=\"#reading-learning-react\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eReading \"Learning React\"\u003c/h2\u003e\n\u003cp\u003eIn March 2019, I got the book \"Learning React\" (O'Reilly2017\n\u003ca href=\"https://www.oreilly.com/library/view/learning-react/9781491954614/\"\u003ehttps://www.oreilly.com/library/view/learning-react/9781491954614/\u003c/a\u003e) for my\nkindle. Reading this book was a big help I felt, and provided a needed \"brain\nreset\" for me. The book worked well for me, I read it each night on my kindle.\nThe book was good at showing how things like ES6 syntax like destructuring,\narrow functions, etc help fit into the React ecosystem (I was still steeped in\nES5). Also, with the book, I could focus, not have distractions, etc. My eyes\nwould just glaze over every time I clicked on internet tutorials. I did not try\nto live code any of the examples of \"Learning React\", I just read it as is\nbefore bed.\u003c/p\u003e\n\u003ch2 id=\"applying-lessons-to-work-is-still-a-slow-going-process\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#applying-lessons-to-work-is-still-a-slow-going-process\"\u003e\u003ca href=\"#applying-lessons-to-work-is-still-a-slow-going-process\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eApplying lessons to work is still a slow going process\u003c/h2\u003e\n\u003cp\u003eSo anyways, work goes on, and I'm learning, but our codebase still feels pretty\ncomplicated and alien. React is one thing, but mobx is another. I tried\ndownloading the mobx-state-tree book but it goes over my head\n(\u003ca href=\"https://subscription.packtpub.com/book/web-development/9781789344837/8/ch08lvl1sec47/an-opinionated-mobx-with-mobx-state-tree\"\u003ehttps://subscription.packtpub.com/book/web-development/9781789344837/8/ch08lvl1sec47/an-opinionated-mobx-with-mobx-state-tree\u003c/a\u003e)\nand the way mobx is glued to React via mobx-react doesn't really click. I\nremember asking my coworkers why my component was not updating and they\neventually find out it's because I keep not using the observer() wrapper around\nmy components, which is obvious when you understand the system but it stumped me\nas a learner.\u003c/p\u003e\n\u003ch2 id=\"trying-out-typescript\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#trying-out-typescript\"\u003e\u003ca href=\"#trying-out-typescript\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eTrying out Typescript\u003c/h2\u003e\n\u003cp\u003eIn April 2019, I start to experiment with Typescript and release a Typescript\nversion of some data parsing code. I start by explicitly specifying a lot of\ntypes but I eventually start getting into the zen of \"type inference\".\u003c/p\u003e\n\u003ch2 id=\"using-react-hooks\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#using-react-hooks\"\u003e\u003ca href=\"#using-react-hooks\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eUsing React hooks\u003c/h2\u003e\n\u003cp\u003eIn May 2019, I try out my first React hook, a useState. It worked well. I\ncouldn't really figure out why I would use it instead of using mobx for state\nmanagement we used elsewhere, but the example was that it was a click-and-drag\nand it made sense to keep that click-and-drag mouse position state local to the\ncomponent rather than the \"app\".\u003c/p\u003e\n\u003cp\u003eThe book \"Learning React\" also helped me to understand hooks but only\nindirectly. The book had examples of pure function components, but was written\npre-hooks. With hooks added in React 16.8, it took a little brain exercising,\nbut I understood how hooks can be applied to function components.\u003c/p\u003e\n\u003ch2 id=\"using-react-testing-library\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#using-react-testing-library\"\u003e\u003ca href=\"#using-react-testing-library\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eUsing \u003ccode\u003ereact-testing-library\u003c/code\u003e\u003c/h2\u003e\n\u003cp\u003eIn June 2019, I was tasked with creating \"integration test\" level tests for our\napp. We had none before this. I had used \u003ccode\u003ereact-testing-library\u003c/code\u003e for some\ncomponents before this, but the integration level test I used\n\u003ccode\u003ereact-testing-library\u003c/code\u003e to render the entire \"app level\" component. I was happy\nto pioneer this and try this out, and I think this has worked out well.\u003c/p\u003e\n\u003cp\u003eSome caveats: I got very caught up with trying to do canvas tests initially. I\nreally wanted to use \u003ccode\u003ejest-mock-canvas\u003c/code\u003e but we were using \u003ccode\u003eOffscreenCanvas\u003c/code\u003e via\na pretty complicated string of things, so I don't make progress here, and I also\ngot confused about the relationship between \u003ccode\u003enode-canvas\u003c/code\u003e and \u003ccode\u003ejest-mock-canvas\u003c/code\u003e\n(they are basically totally different approaches). Later on, I find using\n\u003ccode\u003ejest-image-snapshot\u003c/code\u003e of the canvas contents works nice (ref\n\u003ca href=\"https://stackoverflow.com/questions/33269093/how-to-add-canvas-support-to-my-tests-in-jest\"\u003ehttps://stackoverflow.com/questions/33269093/how-to-add-canvas-support-to-my-tests-in-jest\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eOther random note: when building out the integration tests, we got a lot of \"act\nwarnings\" which were confusing. These were fixed in React 16.9 (released August\n2019), but we had to ignore them while we developed on 16.8 and the warnings\nbasically just confused me a lot and made it feel like I was battling a very\ncomplex system rather than a nice simple one.\u003c/p\u003e\n\u003ch2 id=\"conclusions\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusions\"\u003e\u003ca href=\"#conclusions\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusions\u003c/h2\u003e\n\u003cp\u003eOverall, I just wanted to write up my whole experience. It felt really difficult\nfor me to make these changes. I also went through a breakup during this time,\nhad a bad living situation, etc. so things were a struggle. If anyone else has\nhad struggles learning React, tell your story, and let me know. I'd like to also\nthank everyone who helped me along the way. I feel like a much better coder now,\nyet, I should always keep growing. The feeling of uncomfortableness could be a\ngrowing experience.\u003c/p\u003e\n\u003ch2 id=\"footnote-1\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1\"\u003e\u003ca href=\"#footnote-1\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1\u003c/h2\u003e\n\u003cp\u003eI also had tried using React in 2016... but it was unsuccessful, but maybe for\ninteresting reasons?\u003c/p\u003e\n\u003cp\u003eI was tasked with making a normal form with text input elements, and I wanted to\ncode and wanted to try using React. I tried importing React via a CDN and gave\nit a shot, and it seemed simple enough, but I kept getting really confused about\nhow to even read and initialize the value of a textbox for example properly.\nTLDR: I was not aware of what a \u003cem\u003econtrolled component\u003c/em\u003e was.\u003c/p\u003e\n\u003cp\u003eThe idea of controlled components (not a word in my vocabulary at the time) was\nquite unintuitive and instead, I kept googling weird things like \"two way data\nbinding react\" and variants of this. I had never used Angular but I heard of\ntwo-way data binding from Angular, and I just felt like it was what I needed. I\neven posted about my frustrations about this on the React subreddit and was\ndownvoted. Felt bad. I was just really confused. I abandoned the project in\nReact and just used our normal jqueryish thing.\u003c/p\u003e\n\u003ch2 id=\"footnote-2\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2\"\u003e\u003ca href=\"#footnote-2\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 2\u003c/h2\u003e\n\u003cp\u003eWhy did I have such a poor grasp on React? I can't exactly say. I feel like I\nwas a competent developer, but I had some severe mental barriers to\nunderstanding the way React worked. I wish someone would have just told me\nsomething like \"React is basically like functions that can return HTML\". EDIT: I\nwrote\n\u003ca href=\"https://cmdcolin.github.io/posts/2022-11-20-the-react-tutorial-i-wish-i-had\"\u003ehttps://cmdcolin.github.io/posts/2022-11-20-the-react-tutorial-i-wish-i-had\u003c/a\u003e to\ntry to explain some of the basics that I feel like could have been helpful for\nme\u003c/p\u003e\n\u003ch2 id=\"footnote-3\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-3\"\u003e\u003ca href=\"#footnote-3\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 3\u003c/h2\u003e\n\u003cp\u003eI am not sure if I would recommend Learning React to all learners. I think it\nhelped me, but there may be other options that work better for you. Look around\nand find what what looks right. EDIT: the new beta.reactjs.org might be useful,\nbut again, the book is what really helped me as it was less ADHD-inducing than\nthe web\u003c/p\u003e"},{"title":"Misconceptions your team might have during The Big Rewrite","date":"2020-06-03","slug":"2020-06-03","html":"\u003cp\u003eDisclaimer: I enjoy the project I am working on and this is still a work in\nprogress. I just had to rant about the stuff I go through in my job here, but it\ndoes not reflect the opinions of my emplorer, and my personal opinion is despite\nthese troubles we are coming along nicely\u003c/p\u003e\n\u003cp\u003eI joined a team that was doing the big rewrite in 2018. I was involved in the\nproject before then and knew it's ins and outs, and frankly think it's still a\ngreat system. In order to break it's \"limitations\" a grand v2 gets started. I\nthink my team has been good. My tech lead is really good at architecture. Where\nI really resist kind of \"writing new architecture that is not already there\", he\ncan pull up entirely new concepts and abstractions that are all pretty good.\nMyself, I don't much enjoy writing \"new architecture\" if there is something\nalready there that I can use, and I'll try to refer to the existence of an\nexisting thing instead of creating new exotic stuff.\u003c/p\u003e\n\u003cp\u003eNow, what happened during the big rewrite so far. 4 people on the team, 2 years\nin\u003c/p\u003e\n\u003cp\u003ePersistent confusion about sources of slowness in our app\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eit's only slow because devtools is open (maybe it is! but this is definitely a\nred herring. the code should work with devtools open. reason that's been\nstated: devtools adds a \"bunch of instrumentation to the promises that slows\nit down\"...stated without any evidence during a 3 hour long planning call...)\n\u003cul\u003e\n\u003cli\u003eit's only slow because we're using a development build of react, try a\nproduction build (the production build makes some stuff faster, but it is\nNOT going to save your butt if you are constantly rerending all your\ncomponents unnecessarily every millisecond during user scroll, which is\nsomething we suffered from, and it creeps back in if you are not careful\nbecause you can't write tests against this so often one day I'll be looking\nat my devtools and suddenly things are rendering twice per frame (signature\nof calling an unnecessary setState), tons of unnecessary components\nrendering in every frame (signature of componentShouldUpdate/bad functional\nreact memoizing, etc))\u003c/li\u003e\n\u003cli\u003eit's slow because we are hogging the main thread all the time, our killer\nnew feature in v2 is an intense webworker framework. now main thread\ncontention is a concern, but really our app needs to just be performant all\naround, webworkers just offloads that cpu spinning to another core. what we\nhave done in v2 is we went whole hog and made our code rely on\nOffscreenCanvas which 0 browsers support. also, our webworker bundles\n(worker-loader webpack build) are huge webpack things that pretty much\ncontain all the code that is on the main thread so it's just massive. that\nmakes it slow at loading time, and makes it harder to think about our worker\nthreads in a lighter-weight way, and the worker concept is now very deeply\nentrenched in a lot of the code (all code has to think of things in terms of\nrpc calls)\u003c/li\u003e\n\u003cli\u003eit's slow because there are processes that haven't been aborted spinning in\nthe background, so we must build out an intensive AbortController thing that\ntouches the entirety of all our code including sending abort signals across\nthe RPC boundary in hopes that a locked up webworker will respond to this\n(note: our first version of the software had zero aborting, did not from my\nperspective suffer. arguments with the team have gotten accusatory where I\njust claim that there is no evidence that the aborting is helping us,\npointing to the fact that our old code works fine, and that if our new code\nsuffers without aborting, that means something else is wrong. I have not\nreally been given a proper response for this, and so the curse of passing\nAbortSignals onto every function via an extra function parameter drags on\u003c/li\u003e\n\u003cli\u003eit's slow because we are not multithreading..., so we put two views of the\nsame data into different webworkers (but now each webworker separately\ndownloads the same data, which leads to more resource spent, more network\nIO, more slowness)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003econfusion about what our old users needs are\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003etracks not having per-track scroll (problem: leads to many scrolls\nwithin-scrolls, still unresolved problem)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe name indexing was always a big problem (yes it is slow but is it really\nTHE critical problem we face? likely not: bioinformatics people run a data\npipeline, it takes a couple days, so what). use elasticsearch if it sucks so\nbad\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eour users are \"stupid\" so they need to have every single thing GUI editable\n(interesting endeavor, but our design for this has been difficult, and has not\nyet delivered on simplifying the system for users)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eour users \"do not like modal popups\" so we design everything into a tiny\nsidedrawer that barely can contain the relevant data that they want to see\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ehaving interest in catering to obscure or not very clear \"user stories\" like\ndisplaying the same exact region twice on the screen at once saying \"someone\nwill want to do this\", but causing a ton of extra logical weirdness from this\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003enot catering to emerging areas of user needs such as breaking our large app\ninto components that can be re-used, and instead just going full hog on a\nlarge monolith project and treating our monolith as a giant hammer that will\nsolve everyones problems, when in reality, our users are also programmers that\ncould benefit from using smaller componentized versions of our code\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003econfusion about \"what our competitors have\". sometimes my team one day was\nlike \"alright we just do that and then we have everything product X has?\" and\nI just had to be clear and be like, no! the competitor has a really pretty\nintricate complex system that we could never hope to replicate. but does that\nmatter? probably not, but even still, we likely don't have even 20% of the\nfull set of functions of a competitor. luckily we have our own strengths that\nmake us compelling besides that 20%\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003emaking it so our product requires a server side component to run, where our\nfirst version was much more amenable to running as a static site\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eetc...\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ebut what does all this imply?\u003c/p\u003e\n\u003cp\u003ethere are persistent confusion about what the challenges we face are, what the\narchitectural needs are, what our user stores are, what our new v2 design goals\nare, and more. It's really crazy\u003c/p\u003e"},{"title":"Behind the release - the story of the bugs and features in JBrowse 1.16.0","date":"2018-12-17","slug":"2018-12-17","html":"\u003cp\u003eEvery once in awhile, you might see that your favorite program, JBrowse, has a\nnew release. There are a ton of little snippets in the release notes, you might\nas well just go ahead and upgrade, but what went into all those little fixes?\nGoing to the blog post has links to the github issues,\n\u003ca href=\"http://jbrowse.org/blog/2018/12/13/jbrowse-1-16-0.html\"\u003ehttp://jbrowse.org/blog/2018/12/13/jbrowse-1-16-0.html\u003c/a\u003e but I felt like maybe I'd\nadd a little more context for some of them:\u003c/p\u003e\n\u003cp\u003ePS This is sort of motivated by @zcbenz blog on Electron\n(\u003ca href=\"https://twitter.com/zcbenz\"\u003ehttps://twitter.com/zcbenz\u003c/a\u003e \u003ca href=\"http://cheng.guru/\"\u003ehttp://cheng.guru/\u003c/a\u003e) which tells the software in\nterms of actual commit messages and such.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eThe \u003ccode\u003ewebpack\u003c/code\u003e build doing a production build by default. This seems pretty\nstraightforward, but was also difficult because I use WSL and the UglifyJs\nplugin had trouble on WSL using the parallel: 4 option to use multiple\nprocessors. This was really annoying and resulted in the webpack build just\nhanging for no reason and only careful google-fu really uncovered other people\nhaving this issue. I removed the parallelism as the speed gain wasn't even\nreally justifiable \u003ca href=\"https://github.com/gmod/jbrowse/pull/1223\"\u003ehttps://github.com/gmod/jbrowse/pull/1223\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe incorporation of the \u003ccode\u003e@gmod/bam\u003c/code\u003e module. This was an almost 2 months\nprocess after my first module, \u003ccode\u003e@gmod/indexedfasta\u003c/code\u003e. It required really\ngetting down to the binary level for BAM and was pretty tough. The module has\nalready itself had 12 releases\n\u003ca href=\"https://github.com/GMOD/bam-js/blob/master/CHANGELOG.md\"\u003ehere\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAdded support for indexing arbitrary fields from GFF3Tabix files. This was\nfairly straightforward but required making design decisions about this.\nPreviously flatfile-to-json.pl files would have a command line flag to index\narbitrary fields. Since gff3tabix files are specified via config, I allowed\nspecifying arbitrary fields via config.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAdded ability to render non-coding transcript types to the default Gene glyph.\nThis one was a nice feature and enables you to see non-coding types, but\nrequired some weird design decisions because I could not override the\n\u003ccode\u003ebox-\u003estyle-\u003ecolor\u003c/code\u003e from a higher level type simply using the \u003ccode\u003e_defaultConfig\u003c/code\u003e\nfunction, so I needed to override the \u003ccode\u003egetStyle\u003c/code\u003e callback that was passed down\nto the lower levels, so that it was able to use the default lower level style\nand also our non-coding transcript style. See this part of the code for\ndetails\n\u003ca href=\"https://github.com/GMOD/jbrowse/commit/ec638ea1cc62c8727#diff-a14e88322d8f4e8e940f995417277878R22\"\u003ehttps://github.com/GMOD/jbrowse/commit/ec638ea1cc62c8727#diff-a14e88322d8f4e8e940f995417277878R22\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAdded \u003ccode\u003ehideImproperPairs\u003c/code\u003e filter. This was fairly straightforward but it is\none of these bugs that went unnoticed for years...the \u003ccode\u003ehideMissingMatepairs\u003c/code\u003e\nflag would hide things didn't have the sam 0x02 flag for \"read mapped in\nproper pair\", but reads with this flag could still be paired. Doing the 1.16\nrelease that focused on paired reads helped focus on this issue and now\nhideMissingMatepairs filters on \"mate unmapped\" and \u003ccode\u003ehideImproperPairs\u003c/code\u003e is the\n\"read mapped in proper pair\"\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAdded \u003ccode\u003euseTS\u003c/code\u003e flag. This one is fairly straightforward, it is similar to\n\u003ccode\u003euseXS\u003c/code\u003e which colors reads based on their alignment in canonical splice site\norientations. I figured I could just copy the \u003ccode\u003euseXS\u003c/code\u003e to the \u003ccode\u003euseTS\u003c/code\u003e since I\nfigured they are the same, but I went ahead and manually generated RNA-seq\nalignments with minimap2 and found that the useTS is actually flipped the\nopposite of \u003ccode\u003euseXS\u003c/code\u003e, so it was valuable to get actual test data here.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFixed issue where some \u003ccode\u003egenerate-names\u003c/code\u003e setups would fail to index features.\nThis was a bad bug that was brought to light by a user. I was kind of mind\nboggled when I saw it. In JBrowse 1.13-JBrowse 1.15 a change was introduced to\nname indexing with a memory leak. In JBrowse 1.15 that was removed. But, there\nwas another change where refseqs could return empty name records, because they\nwere handled separately. But if the initial fill up of the name buffer of\n50000 was exceeded by the reference sequence, then there would be empty name\nrecords after this point and cause the name indexing to stop. Therefore this\nbug would only happen when the reference sequence indexing buffer exceeded\n50000 items which could happen even when there are less than 50000 refseqs due\nto autocompletions\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFixed issue with getting feature density from BAM files via the index stats\nestimation. This involved parsing the \"dummy bin\" from index files, and I\nfound it was failing on certain 1000 genomes files. I actually don't really\nknow what the story behind this was, but our tabix code was better at parsing\nthe dummy bins than my bam code, and it was the same concept, so I took a note\nfrom their codebase to use it in bam-js code. Commit here\n\u003ca href=\"https://github.com/GMOD/bam-js/commit/d5796dfc8750378ac8b875615ae0a7e81371af76\"\u003ehttps://github.com/GMOD/bam-js/commit/d5796dfc8750378ac8b875615ae0a7e81371af76\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFixed issue with some GFF3Tabix tracks having some inconsistent layout of\nfeatures. This is a persistently annoying fact in tabix files where we cannot\nreally get a unique ID of a feature based on it's file offset. Therefore this\ntakes the full crc32 of a line as it's unique ID.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFixed CRAM store not renaming reference sequences in the same way as other\nstores. This one was interesting because rbuels made a fix but it caused\nfeatures from one chromosome to show up on the wrong ones, so chr1 reads where\nshowing up on chrMT. This happened because it was falling back to the refseq\nindex if it chrMT wasn't in the embedded \"sam header\" in the CRAM file, but it\nshould only fallback to refseq index if there is not any embedded \"sam header\"\nin the CRAM file.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFixed bug where older browsers e.g. IE11 were not being properly supported via\nbabel. This was a absolutely terrible bug that I found over thanksgiving\nbreak. It was a regression from 1.15 branch of JBrowse. Previous versions from\n1.13 when webpack was up until 1.15 used \u003ccode\u003e@babel/env\u003c/code\u003e. It was changed to\nbabel-preset-2015 but it was not being run correctly. Then I found that even\nif I did get it running correctly, it was unable to properly babel-ify the\nlru-cache module because it used something called\n\u003ccode\u003eObject.defineProperty('length', ...)\u003c/code\u003e to change how the length property was\ninterpreted which was illegal in IE11. The 'util.promisify' NPM module also\ndid this in some contexts. I found that I could use the quick-lru module and\nthe es6-promisify module instead of lru-cache and util.promisify as a\nworkaround. Then I had to update all \u003ccode\u003e@gmod/tabix\u003c/code\u003e, \u003ccode\u003e@gmod/vcf\u003c/code\u003e,\n\u003ccode\u003e@gmod/bgzf-filehandle\u003c/code\u003e, \u003ccode\u003e@gmod/indexedfasta\u003c/code\u003e, \u003ccode\u003e@gmod/tribble-index\u003c/code\u003e,\n\u003ccode\u003e@gmod/bam\u003c/code\u003e, and JBrowse proper to use these modules instead, and make the\nbabel chain, which typically does not parse node_modules, to build these\nmodules specifically (I didn't want to setup babel toolchains for every single\none of these modules, just one in the jbrowse main codebase...). This was\nreally a lot of work to support IE11 but now that works so ...ya\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFixed bug where some files were not being fetched properly when changing\nrefseqs. This was actually fixed when I changed out lru-cache for quick-lru\nand fixed a bug where the cache size was set to 0 due to a erroneous comment\nthat said \u003ccode\u003e50*1024 // 50MB\u003c/code\u003e...of course it should have said\n\u003ccode\u003e50*1024*1024 // 50MB\u003c/code\u003e \u003ca href=\"https://github.com/GMOD/jbrowse/commit/2025dc0aa0091b70\"\u003ehttps://github.com/GMOD/jbrowse/commit/2025dc0aa0091b70\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFixed issue where JBrowse would load the wrong area of the refseq on startup\nresulting in bad layouts and excessive data fetches. This was actually a\nheinous bug where jbrowse upon loading would just navigateTo the start of the\nreference sequence automatically and then to wherever was specified by the\nuser. This resulted in track data to start downloading immediately from the\nstart of the chromosome and resulted in for example 350 kilobases of reference\nsequence from all tracks to start downloading, which when I was implementing\nview as pairs, was causing me to download over 100MB routinely. This was\nterrible, and after fixing I only download about 10MB over even large regions\nfor most BAM files. Additionally, this bug was causing the track heights to be\ncalculated incorrectly because the track heights would actually be calculated\nbased on distorted canvas bitmaps. \u003ca href=\"https://github.com/gmod/jbrowse/issues/1187\"\u003ehttps://github.com/gmod/jbrowse/issues/1187\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eJBrowse Desktop was not fetching remote files. This was a weird issue where\nremote file requests were considered a CORS requests to any external remote.\nThis was solved by changing the usage of the fetch API in JBrowse for\nnode-fetch which does not obey CORS. Note that electron-fetch was also\nconsidered, which uses Chromiums network stack instead of node's, but that had\nspecific assumptions about the context in which it was called.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFixed issue where some parts of a CRAM file would not be displayed in JBrowse\ndue to a CRAM index parsing issue. This was based on a sort of binary search\nthat was implemented in JBrowse where the elements of the lists were\nnon-overlapping regions, and the query was a region, and the output should be\na list of the non-overlapping regions that overlap the query. Most algorithms\nfor binary search don't really tell you how to do searches on ranges so needed\nto roll up my sleeves and write a little custom code. An interval tree could\nhave been used but this is too heavy-weight for non-overlapping regions from\nthe index \u003ca href=\"https://github.com/GMOD/cram-js/pull/10\"\u003ehttps://github.com/GMOD/cram-js/pull/10\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFixed an issue where BAM features were not lazily evaluating their tags. When\na function \u003ccode\u003efeature.get('blahblah')\u003c/code\u003e is called on a BAM feature, it checks to\nsee if it's part of a default list of things that are parsed like feature\nstart, end, id, but if not, it has to parse all the BAM tags to see if it is a\ntag. Since they are called \"lazy features\" the tag processing is deferred\nuntil it is absolutely needed. As it turned out, the incorporation of CRAM in\n1.15 was calling a function to try to get the CRAM's version of CIGAR/MD on\nthe BAM features unnecessarily invoking the tag parsing on every feature up\nfront and therefore making the feature not really lazy anymore. This restored\nthe \"laziness\" aspect of BAM.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFixed issue where CRAM layout and mouseover would be glitchy due to ID\ncollisions on features. In the 1.15 releases, CRAM was introduced, and we\nthought that the concept of taking CRC32 of the entire feature data days were\nover because there is the concept of a \"unique ID\" on the features. However,\nthis ID was only unique within the slices, so around the slice boundaries\nthere were a lot of bad feature layouts and mouseovers would fail because they\nwould map to multiple features, etc. I found a way to unique-ify this by\ngiving it the sliceHeader file offset. \u003ca href=\"https://github.com/GMOD/cram-js/pull/10\"\u003ehttps://github.com/GMOD/cram-js/pull/10\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eWe also had behind the scenes work by igv.js team member jrobinso who helped\non the CRAM codebase to incorporate a feature where for lossy read names, so\nthat a read and it's mate pair would consistently be assigned the same read\nname based on the unique ID mentioned above. There was also a rare issue where\nsometimes the mate pair's orientation was incorrectly reported based on the\nCRAM flags, but the embedded BAM flags correctly reported it.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFinally the paired reads feature. This was a feature that I really wanted to\nget right. It started when garrett and rbuels were going to san diego for the\nCIVIC hackathon, and we talked about doing something that matched a \"variant\nreview system\" that they had done for the IGV codebase, which involved\ndetailed inspection of reads. I thought it would probably be feasible for\njbrowse to do this, but I thought essentially at some point that enhancing\njbrowse's read visualizations with paired reads would be a big win. I had\nthought about this at the JBrowse hackathon also and my discussions then were\nthat this was very hard. Overall, I invented a compromise that I thought was\nreasonable which was that there can be a \"maxInsertSize\" for the pileup view\nbeyond which the pairing wouldn't be resolved. This allowed (a) a significant\nreduction in data fetches because I implemented a \"read redispatcher\" that\nwould actually literally resolve the read pairs in the separate chunks and (b)\na cleaner view because the layout wouldn't be polluted by very long read\ninserts all the time and also, for example, if you scrolled to the right, and\nsuddenly a read was paired to the left side of your view, it would result in a\nbad layout (but with max insert size, the window of all reads within\nmaxinsertsize are always resolved so this does not happen) and finally ( c)\nthe paired arc view was incorporated which does not use read redispatching and\nwhich can do very long reads. All of these things took time to think through\nand resolve, but it is now I think a pretty solid system and I look forward to\nuser feedback!\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e"},{"title":"Problems that I experienced with the HPCC","date":"2017-04-21","slug":"2017-04-21","html":"\u003cp\u003eMany of these issues may be due to me being stubborn with a weird build system.\nNonetheless, they were baffling, and I had very little interest in debugging\nthese issues. I just wanted to get my science done after all!\u003c/p\u003e\n\u003ch1 id=\"module-load-completely-barfs-with-incomprehensible-error\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#module-load-completely-barfs-with-incomprehensible-error\"\u003e\u003ca href=\"#module-load-completely-barfs-with-incomprehensible-error\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eModule load completely barfs with incomprehensible error\u003c/h1\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emodule\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003espider\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebedtools\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eUsing\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esystem\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003espider\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecache\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efile\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e/opt/software/lmod/bin/lua:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e/opt/software/lmod/4.1.4icer5/libexec/Spider.lua:\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e662\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eattempt\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eperform\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003earithmetic\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eon\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enil\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003evalue\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003estack\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etraceback:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e/opt/software/lmod/4.1.4icer5/libexec/Spider.lua:662:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ein\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eLevel1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e/opt/software/lmod/4.1.4icer5/libexec/Spider.lua:640:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ein\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003espiderSearch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e/opt/software/lmod/4.1.4icer5/libexec/lmod:967:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ein\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ecmd\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e/opt/software/lmod/4.1.4icer5/libexec/lmod:1195:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ein\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e/opt/software/lmod/4.1.4icer5/libexec/lmod:1222:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ein\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003echunk\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        [C]\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e?\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch1 id=\"linuxbrew-is-terribly-confused-by-things-that-depend-on-gcc\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#linuxbrew-is-terribly-confused-by-things-that-depend-on-gcc\"\u003e\u003ca href=\"#linuxbrew-is-terribly-confused-by-things-that-depend-on-gcc\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eLinuxbrew is terribly confused by things that depend on gcc\u003c/h1\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003ebrew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ehello\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e==\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eInstalling\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edependencies\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ehello:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eglibc,\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003exz,\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egmp,\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003empfr,\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003elibmpc,\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eisl,\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egcc\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e==\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eInstalling\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ehello\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edependency:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eglibc\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eError:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eglibc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecannot\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebe\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuilt\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ewith\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eany\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eavailable\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecompilers.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eInstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eClang\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eor\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebrew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003egcc\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUsing module load Clang does not fix problem \u003e_\u0026#x3C;\u003c/p\u003e\n\u003ch1 id=\"compiling-things-manually-on-software-machine-does-not-work-on-interactive-machine\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#compiling-things-manually-on-software-machine-does-not-work-on-interactive-machine\"\u003e\u003ca href=\"#compiling-things-manually-on-software-machine-does-not-work-on-interactive-machine\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eCompiling things manually on software machine does not work on interactive machine\u003c/h1\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emummer\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eIllegal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstruction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003ecore\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edumped\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# Many modules have a secret dependency on loading other modules\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emodule\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eload\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eLASTZ\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eLmod\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eWarning:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eDid\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enot\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efind:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eLASTZ\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eTry:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emodule spider LASTZ\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emodule\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eload\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eGNU\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emodule\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eload\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eLASTZ\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003elastz\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eYou\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emust\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003especify\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etarget\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efile\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elastz--\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eLocal\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eAlignment\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eSearch\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eTool,\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eblastZ-like\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eversion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e1.03.02\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ereleased\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e20110719\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e...\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eEtc etc.\u003c/p\u003e"},{"title":"How I learned to hate ORM (especially for data import scripts)","date":"2017-03-12","slug":"2017-03-12","html":"\u003cp\u003eWhen I was tasked with making a new application for our websites, I was given\nseveral CSV files with some expectation that these files could basically be just\nloaded into a database and jumped into production really quickly. If you are\nusing R and Shiny to make a data visualization dashboard, especially if it is\nread only, this can actually be a reality for you: load those CSVs and just\npretend you're a full featured database. I had to actually create some read\nwrite functionality though. This was sort of experimental for me and I'm not\nthat well versed in databases, but I wanted to share my experience\u003c/p\u003e\n\u003cp\u003eWhen I started, I chose grails/groovy/hibernate/GORM as a platform to use. This\nquickly turned into pain when I tried to make a data importer using grails also.\u003c/p\u003e\n\u003cp\u003eEach CSV row from the source file would have to be turned into many different\nrows in the database because it represented multiple relationships, example:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/158300473458_0.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eInitially I made my data importer in grails, and was hardcoding column names\nknowing full well this was really inflexible. At the same time I was also trying\nto \"iterate\" on my database schema, and I'd want to re-import my data to test it\nout, but it was really really slow. I tried many different approaches to try to\nspeed this up such as cleanUpGorm, StatelessSessions, and other tricks, but it\nwould take 10-20 minutes for imports on a 100KB input file.\u003c/p\u003e\n\u003cp\u003eWhat I basically realised is that for bulk data import\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eUsing the ORM is really painful for bulk import.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eIf you can pre-process your data so that it is already in the format the\ndatabase expects, then you can use the CSV COPY command which is very fast\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eIf you can then abandon the ORM mentality and even ignore it as a convenience\nfactor, then you can embrace my database system itself\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eOverall, after all this work, it just seemed like ORM treats the database as a\ndanger and something to be heavily abstracted over, but I actually found joy in\nlearning how to treat my database as a first class citizen. Soon I started\ngaining appreciation of\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eusing plain SQL queries\u003c/li\u003e\n\u003cli\u003elearning about full text search in postgres with ts_query\u003c/li\u003e\n\u003cli\u003elearning about triggers to make a \"last updated\" field get updated\nautomatically\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI am pretty happy this way, and although I miss some things like criteria\nqueries which are very powerful, I am happy that I can interact with my database\nas a friend\u003c/p\u003e\n\u003cp\u003eAt the very least, due to the fact that I now pre-process the data before\ndatabase loading, I can now import large amounts of data super fast with the CSV\nCOPY command\u003c/p\u003e"},{"title":"Plotting a coordinate on the screen","date":"2017-02-16","slug":"2017-02-16","html":"\u003cp\u003eI always end up having to remember the math for plotting a coordinate on the\nscreen, for example an HTML5 canvas and end up stitching it together manually\u003c/p\u003e\n\u003cp\u003eIf you step through the math it becomes very simple though\u003c/p\u003e\n\u003cp\u003eSay you have a coordinate range of 1000 to 2000 that you want to plot in a HTML5\ncanvas of size 100px\u003c/p\u003e\n\u003cp\u003eLet's do a quick example and then generalize. Let's say you want to plot the\nvalue 1500, and put it into screen coordinates, so you take that and subtract\nthe minimum of the range\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e1500-1000\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSecond, you know your point is going to be halfway in the range, and in general,\nto get this position, you divide now by the size of the interval you are\nplotting in, e.g. 2000-1000\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e(1500-1000)/(2000-1000) = 0.5\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe get 0.5 as expected. Then you multiply this proportion times the width of box\nyou are rendering in, e.g. 100 pixels wide, and get that you put your pixel at\nposition 50px\u003c/p\u003e\n\u003cp\u003eTo summarize, the general formula for plotting a point x in a range (x1,x2) on a\nscreen of width w is\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ew*(x -  x1) / (x2 - x1)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOf course same thing applies for y\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eh*(y - y1) / (y2 - y1)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis does not take into account small possible adjustments for closed vs open\nranges, which could be important to avoid subpixel rendering on a canvas, but\nthat can be a further exercise\u003c/p\u003e"},{"title":"Creating a JBrowse plugin","date":"2016-11-10","slug":"2016-11-10","html":"\u003cp\u003eI have been very impressed with peoples creativity and willingness to dig into\nall the details of JBrowse to customize it's features. One great way to do this\nin a modular way is to create a \"JBrowse plugin\". This concept sounds hard but\nyou can set up a simple couple of files and refresh your browser and it will\n\"just work\"!\u003c/p\u003e\n\u003ch2 id=\"introduction-to-the-plugin-mindset\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#introduction-to-the-plugin-mindset\"\u003e\u003ca href=\"#introduction-to-the-plugin-mindset\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eIntroduction to the plugin mindset\u003c/h2\u003e\n\u003cp\u003eIn a plugin, you can define new things like custom track types, custom adaptors\nto new file types, new track selectors, or something really different. A key\ninsight about the custom types of tracks and things though is that you can put\nthe name of your new custom class in the jbrowse config file which will then\nfind the code in your plugin and run it. Plugins can do other things, but the\nability to just swap out track types or other components in the config file is a\ngreat benefit.\u003c/p\u003e\n\u003ch2 id=\"a-scenario\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#a-scenario\"\u003e\u003ca href=\"#a-scenario\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eA scenario\u003c/h2\u003e\n\u003cp\u003eOne example that was talked about on the mailing list might involve adding new\nmenu items for a given track. We might consider a plugin that defines a custom\ntrack type to add that functionality.\u003c/p\u003e\n\u003cp\u003eBasically, we can use object- oriented principles to \"inherit\" from some\nexisting track type like CanvasFeatures and then extend its functionality by\noverriding the functions.\u003c/p\u003e\n\u003cp\u003eIf you are not familiar with object-oriented javascript, dojo makes it pretty\neasy (but, especially get a background on this if you need to, see footnotes\nbelow).\u003c/p\u003e\n\u003cp\u003eWe can inherit a new track type by using the \"define\" function to include the\ndependencies needed in a file, and they are listed in an array at the top of\nyour file.\u003c/p\u003e\n\u003cp\u003eThen the \"declare\" function creates a new class. The first argument to declare\nis the is your parent class, like CanvasFeatures, and we type \"return declare\"\nbecause we are returning our new track class from the module.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edefine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e([\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edojo/_base/declare\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eJBrowse/View/Track/CanvasFeatures\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e], \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edeclare\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eCanvasFeatures\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edeclare\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eCanvasFeatures\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e_trackMenuOptions\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e()\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003evar\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7; font-style: italic\"\u003ethis\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003einherited\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #ADD7FF; font-style: italic\"\u003earguments\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e//call the parent classes function\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003epush\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// add an extra menu item to the array returned from parent class function\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003elabel\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eCustom item\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edijit/CheckedMenuItem\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eonClick\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eevent\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003elog\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eClicked\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eiconClass\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edijitIconPackage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eopts\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCode listing 1. an example custom track type, MyTrack.js, that adds an extra\ntrack menu item\u003c/p\u003e\n\u003ch2 id=\"now-how-do-we-make-this-a-plugin\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#now-how-do-we-make-this-a-plugin\"\u003e\u003ca href=\"#now-how-do-we-make-this-a-plugin\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eNow how do we make this a plugin?\u003c/h2\u003e\n\u003cp\u003eIn the above section, we created a new track subclass with a custom menu option.\nHow do we use this track? We want to turn it into part of afine the boilerplate\ncode from the\n\u003ca href=\"http://gmod.org/wiki/JBrowse_Configuration_Guide#Writing_JBrowse_Plugins\"\u003eWriting plugins\u003c/a\u003e\nguide.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edefine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e([\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edojo/_base/declare\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eJBrowse/Plugin\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e], \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edeclare\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eJBrowsePlugin\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003edeclare\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eJBrowsePlugin\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e// this line says our plugin's main.js derives from the \"JBrowse/Plugin\" base class\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003econstructor\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eargs\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e//don't necessarily have to do any initializing here, but you\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e//can get a handle to various jbrowse components if any initialization\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e//is needed from the args.browser variable\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCode listing 2. Our plugin's main.js\u003c/p\u003e\n\u003cp\u003eAfter this, we create the plugin directory structure\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003ejbrowse/plugins/MyPlugin\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003ejbrowse/plugins/MyPlugin/js\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003ejbrowse/plugins/MyPlugin/js/main.js\u003c/p\u003e\n\u003cp\u003ejbrowse/plugins/MyPlugin/js/MyTrack.js\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/blockquote\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThen we can add our new plugin to a config file like \u003ccode\u003ejbrowse_conf.json\u003c/code\u003e as\n\u003ccode\u003e\"plugins\": [\"MyPlugin\"]\u003c/code\u003e and then make a track in \u003ccode\u003etrackList.json\u003c/code\u003e have\n\u003ccode\u003e\"type\": \"MyPlugin/MyTrack\"\u003c/code\u003e instead of for example \u003ccode\u003e\"type\": \"CanvasFeatures\"\u003c/code\u003e.\nThat will tell jbrowse to load the \u003ccode\u003eMyTrack\u003c/code\u003e class from your plugin instead of\nthe normal \u003ccode\u003eCanvasFeatures\u003c/code\u003e class.\u003c/p\u003e\n\u003cp\u003eThat's about it!\u003c/p\u003e\n\u003cp\u003eNote that the \u003ccode\u003ebin/new-plugin.pl\u003c/code\u003e script can automatically initialize some of\nthis directory structure too. Try running \u003ccode\u003ebin/new-plugin.pl MyPlugin\u003c/code\u003e and see\nwhat happens.\u003c/p\u003e\n\u003ch3 id=\"footnotes\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnotes\"\u003e\u003ca href=\"#footnotes\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnotes:\u003c/h3\u003e\n\u003cp\u003eIt is important to understand the module format (AMD) which is what the \"define\"\nfunction is about and the dojo way of defining classes using the \"declare\"\nfunction. Together, this allows the dojo to create object-oriented programs that\nare modular in javascript. See\n\u003ca href=\"http://dojotoolkit.org/reference-guide/1.10/dojo/_base/declare.html\"\u003ehttp://dojotoolkit.org/reference-guide/1.10/dojo/_base/declare.html\u003c/a\u003e and\n\u003ca href=\"http://dojotoolkit.org/documentation/tutorials/1.9/modules/\"\u003ehttp://dojotoolkit.org/documentation/tutorials/1.9/modules/\u003c/a\u003e (understanding this\nhelps you understand the \"preamble\" for declaring a jbrowse plugin)\u003c/p\u003e"},{"title":"Installing clamav on OSX","date":"2016-06-20","slug":"2016-06-20","html":"\u003cp\u003eIt is a common trope that OSX doesn't need anti-virus because everyone targets\nwindows. That is maybe comforting to some but I think it's pretty naive. It\nwould be better to have a system on your machine to tell you about viruses,\ntrojan horses, malware, or spying. I have decided to employ a free open source\nscanner called clamAV \u003ca href=\"https://www.clamav.net/\"\u003ehttps://www.clamav.net/\u003c/a\u003e. I don't really know if it has any\ngood features for Mac scanning but thought it could be fun to install\u003c/p\u003e\n\u003cp\u003eClamAV is the top choice for linux based OSs being free and open source (GPL)\nvirus scanner.\u003c/p\u003e\n\u003cp\u003eTo install we can use homebrew\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebrew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eclamav\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen there is s config file to setup. This is located in\n/usr/local/etc/clamav/freshclam.conf\u003c/p\u003e\n\u003cp\u003eTo setup, edit this file and delete the line that says \"Example\" and then\nuncheck the desired settings. I would chose to enable logging to\n/var/log/clamav.log and also database directories in /var/lib/clamav\u003c/p\u003e\n\u003cp\u003eThen run the \"freshclam\" program\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003efreshclam\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis will download the virus scanner database (main) and daily scanning updates\u003c/p\u003e\n\u003cp\u003eThen you can run clamscan on a given directory (recursively, only print infected\nfiles)\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eclamscan\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-ri\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e~/\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOr add this to a cronjob\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecrontab\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e@hourly\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eclamscan\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-ri\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e~/\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003email\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-v\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-s\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eclamscan results\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eyour.email@gmail.com\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e/dev/null\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e2\u003e\u0026#x26;1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e"},{"title":"Querying InterMine databases using R","date":"2016-06-17","slug":"2016-06-17","html":"\u003cp\u003eIn the past, I had found some ways to do simple queries on InterMine web\nservices using basic HTTP commands with R (see\n\u003ca href=\"https://gist.github.com/cmdcolin/4758167bdd89e6c9c055\"\u003ehttps://gist.github.com/cmdcolin/4758167bdd89e6c9c055\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eHowever, the InterMineR (\u003ca href=\"https://github.com/intermine/intermineR\"\u003ehttps://github.com/intermine/intermineR\u003c/a\u003e) package\nautomates some of these features and makes it easier to load the data in R.\u003c/p\u003e\n\u003ch2 id=\"installation\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#installation\"\u003e\u003ca href=\"#installation\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eInstallation\u003c/h2\u003e\n\u003cp\u003eOne way to install InterMineR is to install from github with hadley/devtools\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003einstall.packages(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edevtools\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003edevtools\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003einstall_github\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehadley/devtools\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003edevtools\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003einstall_github\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eintermine/intermineR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"usage\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#usage\"\u003e\u003ca href=\"#usage\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eUsage\u003c/h2\u003e\n\u003cp\u003eBasic usage includes loading the \"intermine URL\" using the initInterMine\nfunction. Then various functions can be called on this result.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003elibrary(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eInterMineR\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003emine\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003einitInterMine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttp://bovinegenome.org/bovinemine/\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetVersion\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e#18, intermine API version\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetRelease\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e#1.0, our data release version\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetTemplates\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# lists all templates on interminer\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"run-a-template-query\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#run-a-template-query\"\u003e\u003ca href=\"#run-a-template-query\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eRun a template query\u003c/h2\u003e\n\u003cp\u003eFrom the getTemplates function, if you see a template query that you want to\nrun, you can use the getTemplateQuery function with it's name, and run it with\nthe runQuery function\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetTemplateQuery\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eTQ_protein_to_gene\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# see what template looks like\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003etemplate\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003egetTemplateQuery\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eTQ_protein_to_gene\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# save template\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003erunQuery\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003etemplate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# run the template query with default params, receive data.frame\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis method is good, but some improvement could be added to change default\nparameters in the template query, etc.\u003c/p\u003e\n\u003ch2 id=\"run-query-xml\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#run-query-xml\"\u003e\u003ca href=\"#run-query-xml\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eRun query XML\u003c/h2\u003e\n\u003cp\u003eAnother option for running queries is to use the query XML that you can download\nfrom the InterMine query result pages.\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# get all Ensembl genes on chr28 from bovinemine\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003equery\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e\u0026#x3C;query model=\"genomic\" view=\"Gene.primaryIdentifier\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eGene.secondaryIdentifier Gene.symbol Gene.name Gene.source\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eGene.organism.shortName Gene.chromosome.primaryIdentifier\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003esortOrder=\"Gene.primaryIdentifier ASC\" \u003e\u0026#x3C;constraint\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003epath=\"Gene.organism.shortName\" op=\"=\" value=\"B. taurus\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003e/\u003e\u0026#x3C;constraint path=\"Gene.chromosome.primaryIdentifier\" op=\"=\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003evalue=\"GK000028.2\" /\u003e\u0026#x3C;/query\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresults\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003erunQuery\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003equery\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003ehead(\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eresults\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eThe InterMineR package has a couple of nice features for getting InterMine data\nwith a couple of functions for looking at templates. For many use cases, copying\nthe Query XML from a InterMine webpage and pasting that into the runQuery\nfunction is sufficient and produces a data frame that can be analyzed.\u003c/p\u003e\n\u003cp\u003ePS it is not easy to post XML on tumblr after editing the post in markdown mode.\nYou have to add the lt and gt shortcuts and even after that it gets filtered?!\u003c/p\u003e"},{"title":"How to make your resume.json or resume-cli look great","date":"2016-04-23","slug":"2016-04-23","html":"\u003cp\u003eThere are a ton of themes for resume-cli that are not immediately obvious to\nfind\u003c/p\u003e\n\u003cp\u003eTo see all the great themes on the command line, check out\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003ecurl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ehttp://themes.jsonresume.org/themes.json\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e|jq\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e.\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI tried a bunch of them\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4679\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emodern-freeland\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4680\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emodern-freelance\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4682\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emodern-with-projects-section\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4683\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edangerflat\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4684\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003estriking\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4685\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecrisp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4686\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esemantic-ui\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4687\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ematerial\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4688\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emodern-extended\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4689\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epaper\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4690\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esmart\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e4691\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eresume\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003esite/resume/index.html\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eflat\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNote: resume.json is setup to use HTML themes, so even though it has a PDF\noutput option, it is inherently converting HTML first and then to PDF. The PDF\nconversion is done by a automated cloud service, which currently can fail\nsometimes. It is probably better to just choose HTML and convert to PDF if you\nneed to. See \u003ca href=\"https://github.com/jsonresume/resume-cli/issues/94\"\u003ehttps://github.com/jsonresume/resume-cli/issues/94\u003c/a\u003e\u003c/p\u003e"},{"title":"Creating a testing framework for JBrowse plugins","date":"2016-04-19","slug":"2016-04-19","html":"\u003cp\u003eTesting client side apps requires a couple of tedious steps: Organizing the git\nclone, the dependencies, wrangling up a web server, the test framework, etc.\u003c/p\u003e\n\u003cp\u003eWhen testing a plugin for jbrowse, the dependency tree is interesting because\nthe plugin \"depends\" on JBrowse to run, but we will use travis-CI and bower\ninside the git repo for our plugin to accomplish this.\u003c/p\u003e\n\u003cp\u003eIn this scenario, we will\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eUse bower to install jasmine and JBrowse (our platform that we write the\nplugin for)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eUse nginx to launch a webserver on travis-CI\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eUse the phantomjs run-jasmine.js script to check jasmine test results\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eWithout further ado\u003c/p\u003e\n\u003cp\u003eHere is the .travis.yml\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003esudo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efalse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eaddons\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eapt\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epackages\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enginx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003ecache\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eapt\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etrue\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edirectories\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e$HOME/.cache/bower\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003ebefore_install\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enpm install -g jshint bower\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebower install\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003ebefore_script\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecat test/travis.conf | envsubst \u003e test/travis-envsubst.conf\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enginx -c `pwd`/test/travis-envsubst.conf\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ephantomjs test/run-jasmine.js http://localhost:9000/test/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ejshint js\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRefer to\n\u003ca href=\"http://searchvoidstar.tumblr.com/post/141858047213/running-nginx-on-containerised-travis-ci-pt-2\"\u003ehttp://searchvoidstar.tumblr.com/post/141858047213/running-nginx-on-containerised-travis-ci-pt-2\u003c/a\u003e\nfor details on the nginx setup\u003c/p\u003e\n\u003cp\u003eHere is the bower.json\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003esashimiplot\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ehomepage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ehttps://github.com/cmdcolin/sashimiplot\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edescription\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eSashimi track type for jbrowse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejs/main.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003ekeywords\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: [\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ebioinformatics\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejbrowse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003elicense\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eMIT\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003eignore\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e**/.*\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003enode_modules\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ebower_components\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etests\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edevDependencies\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ejasmine-core\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejasmine#^2.4.1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ejbrowse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003egit://github.com/GMOD/jbrowse.git#master\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe key thing here is that it installs jasmine and JBrowse. I set .bowerrc to\ninstall both jasmine and JBrowse to the \"test\" directory\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003edirectory\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWith this setup, bower will make a \"flat dependency tree\" in the test directory,\nso it will look like this\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003els\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003etest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eFileSaver\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003edbind\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003edgrid\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003edijit\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003edojo\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003edojox\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e*index.html*\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003ejDataView\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003ejasmine-core\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003ejbrowse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003ejson-schema\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003ejszlib\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elazyload\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eput-selector\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e*run-jasmine.js*\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e*spec*\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e*travis.conf*\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eutil\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003exstyle\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere the asterisks indicate things that are part of our app, other's are\nautomatically installed by bower (jbrowse, jasmine-core, the dojo dependencies,\nand other things)\u003c/p\u003e\n\u003cp\u003eThen we can create the jasmine test/index.html to be something like this\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;!\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eDOCTYPE\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003ehtml\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003ePUBLIC\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e\"-//W3C//DTD HTML 4.01 Transitional//EN\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e\"http://www.w3.org/TR/html4/loose.dtd\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003emeta\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003eJasmine Spec Runner\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elink\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003erel\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003estylesheet\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003ehref\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejasmine-core/lib/jasmine-core/jasmine.css\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejasmine-core/lib/jasmine-core/jasmine.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejasmine-core/lib/jasmine-core/boot.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etext/javascript\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edojo/dojo.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003edata-dojo-config\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003easync: 1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etext/javascript\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #E4F0FBD0\"\u003erequire\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebaseUrl\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003epackages\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e[\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edojo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edijit\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edojox\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejszlib\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elazyload\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003elocation\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elazyload\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003elazyload\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edgrid\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003exstyle\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eput-selector\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eFileSaver\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejDataView\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003elocation\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejDataView/src\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejdataview\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eJBrowse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003elocation\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ejbrowse/src/JBrowse\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eSashimiPlot\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e,\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003elocation\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e../js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #ADD7FF\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e})\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003etext/javascript\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003esrc\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003espec/SashimiPlot.spec.js\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003eid\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003esandbox\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5FB3A1; font-style: italic\"\u003estyle\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eoverflow:hidden; height:1px;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #E4F0FB\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe \"packages\" in the require statement puts all these packages in the right\n\"namespace\" for the AMD includes, and the \"specs\" are defined like\n\u003ccode\u003e\u0026#x3C;script type=\"text/javascript\" src=\"spec/Projection.spec.js\"\u003e\u0026#x3C;/script\u003e\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eFinally, run-jasmine.js is used to check the results of the jasmine tests (it is\nrun via phantomjs in the travis-CI script). It is a special version for the most\nrecent version of jasmine (2.4)\n\u003ca href=\"https://gist.github.com/vmeln/b6cbb319d9a0efc816be\"\u003ehttps://gist.github.com/vmeln/b6cbb319d9a0efc816be\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eFor an example of the project using this, see\n\u003ca href=\"https://github.com/cmdcolin/sashimiplot\"\u003ehttps://github.com/cmdcolin/sashimiplot\u003c/a\u003e\u003c/p\u003e"},{"title":"Creating a docker image","date":"2016-04-17","slug":"2016-04-17","html":"\u003cp\u003eExample\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003ebrew\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edocker\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eboot2docker\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edocker-machine\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003edocker-machine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e--driver\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003evirtualbox\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edefault\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003edocker-machine\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eenv\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edefault\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# will output some variables\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eeval\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e\"$(\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003edocker-machine\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eenv\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003edefault\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\"\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# use those variables\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #767C9DB0; font-style: italic\"\u003e# make dockerfile\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003edocker\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-t\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enameof-yourimage\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e.\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e"},{"title":"Basic command line productivity tricks and learning experiences","date":"2016-04-06","slug":"2016-04-06","html":"\u003cul\u003e\n\u003cli\u003edd deletes line in vim\u003c/li\u003e\n\u003cli\u003eCtrl+d scrolls down in vim\u003c/li\u003e\n\u003cli\u003eLearn to love your package manager. Homebrew, NPM, gem, cpanm, gvm/sdkman,\netc. these all do amazing things\u003c/li\u003e\n\u003cli\u003eOnce you learn bash, try zsh and oh-my-zsh, they have things like\ncase-insensitive tab completion\u003c/li\u003e\n\u003cli\u003eDon't make scripts that hardcode paths, make reusable command line scripts.\nUse bash as your \"REPL\", not R.\u003c/li\u003e\n\u003cli\u003egit log -p helps analyze your log files in full details (make sure\nautocoloring is turned on in your terminal)\u003c/li\u003e\n\u003cli\u003eThere are keys to jump forward and backwards on the command line text editor,\nlearn them...don't scroll one char at a time\u003c/li\u003e\n\u003cli\u003eLearn how \"PATH\" works. Generally it is just a set of directories connected by\n\":\" separators. You can add things to the path by saying \"export\nPATH=$PATH:/new/directory/to/add\" and you can add this to ~/.bashrc for\nexample\u003c/li\u003e\n\u003cli\u003eWhen your install process for a command line tool seems like nonsense, try\nhomebrew instead. barring that, learn PATH, and how to run \"make install\",\netc. Most of your headbashing from installing programs is 90% can be explained\nby not understanding how the developer is intending it to be used, 10% of the\ntool's install process being wrong\u003c/li\u003e\n\u003cli\u003eGet a static analyzer and basic tests going on your codebase and run it on\ntravis-ci. Getting started with travis-ci is kind of a learning curve, but it\nis worth it\u003c/li\u003e\n\u003cli\u003eUse cpanm instead of cpan for package management\u003c/li\u003e\n\u003cli\u003eVocabulary learning curve: catalina is the same thing as tomcat. CATALINA_HOME\nis the same thing as the tomcat folder\u003c/li\u003e\n\u003cli\u003ealias ll=\"ls -l\", because I type \"ll\" hundreds of times a day.\u003c/li\u003e\n\u003cli\u003eFor irc productivity, run irssi on a server in a \"screen\" e.g. \"screen irssi\"\nand then you can come back to conversations later by just logging into the\nserver with ssh\u003c/li\u003e\n\u003cli\u003eEdit ~/.ssh/config to include your hostnames so you don't have to type out\nlong ssh commands\n\u003ca href=\"http://nerderati.com/2011/03/17/simplify-your-life-with-an-ssh-config-file/\"\u003ehttp://nerderati.com/2011/03/17/simplify-your-life-with-an-ssh-config-file/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eUse spaces instead of tabs in your source code (\u003e:( yes I think this is the\none true way)\u003c/li\u003e\n\u003cli\u003eTry out nodejs and browserify in your spare time to make a \"npm\" based app in\nthe browser. it's fun.\u003c/li\u003e\n\u003cli\u003eSimilarly, try making a simple \"api\" endpoint on the server side with\nexpress.js or similar. can get started very quickly.\u003c/li\u003e\n\u003cli\u003eLearn how to get a mindset of writing tests. You can write tests proactively\n(i.e. Test driven development), but you can also write them \"reactively\" too\n(i.e. if have a bug that you fix, you can make a test to make sure this\ndoesn't happen anymore)\u003c/li\u003e\n\u003cli\u003eSimilar to above, tests in this sense are more \"sanity checks\" than they are\nformal proofs. Take \"assert\" logic and \"debugging\" code out of main codebase\nand put them in tests\u003c/li\u003e\n\u003cli\u003eMinimize comments in your code, and also don't comment out code and leave it\npresent. Find a way to delete it and move on!\u003c/li\u003e\n\u003cli\u003eWhen you have a bunch of .orig files after doing a git merge, just use git\nclean -f to get rid of them. Similarly, to get rid of everythng, including\nthings in your gitignore file (i.e. a super clean) use git clean -fdx. It has\na --exclude argument too\u003c/li\u003e\n\u003c/ul\u003e"},{"title":"Running nginx on containerised travis-CI pt 2","date":"2016-03-28","slug":"2016-03-28","html":"\u003cp\u003eThere are several guides out there about how to setup nginx on travis-CI but I\nstill found it to be a challenge, especially finding a modern one that works\nwith the containerized builds. I was frustrated that things like\n\u003ccode\u003eSimpleHTTPServer\u003c/code\u003e from python and http-server from npm did not have fully\nenough features to run our app either (a complex \"static-site generator\" type\nthing you might say), and I was also too lazy to setup \"sauce labs\" (which I\nhave not used, but presume has some better ability to run functional/browser\ntests).\u003c/p\u003e\n\u003cp\u003eEssentially, the problem with running nginx under the containerized build is\nthat it \"likes to be sudo\", with many logfiles by default going to different\nplaces that only sudo has access to.\u003c/p\u003e\n\u003cp\u003eThis link is probably the most similar to the technique I use here, but it is\nnow gone (?) and must be accessed through the internet archive!\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://web.archive.org/web/20150919050719/http://www.doublesignal.com/running-nginx-on-containerised-travis-ci\"\u003ehttp://www.doublesignal.com/running-nginx-on-containerised-travis-ci\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eMy technique is very similar, however I use an extra trick to set the file root\nto the current directory (instead of /tmp/nowhere as in the link) by using\n\"envsubst\" to replace variables in the nginx config file.\u003c/p\u003e\n\u003cp\u003eWithout further ado, the .travis.yml can look like this\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003esudo\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003efalse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eaddons\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eapt\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003epackages\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enginx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003einstall\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ecat tests/travis.conf | envsubst \u003e tests/travis-envsubst.conf\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enginx -c `pwd`/tests/travis-envsubst.conf\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003escript\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003ewget http://localhost:9000/yourfiles\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen your nginx config file can look like this\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e    worker_processes 10;\n    pid /tmp/nginx.pid;\n\n    error_log /tmp/error.log;\n\n    events {\n        worker_connections 768;\n    }\n\n    http {\n        client_body_temp_path /tmp/nginx_client_body;\n        fastcgi_temp_path     /tmp/nginx_fastcgi_temp;\n        proxy_temp_path       /tmp/nginx_proxy_temp;\n        scgi_temp_path        /tmp/nginx_scgi_temp;\n        uwsgi_temp_path       /tmp/nginx_uwsgi_temp;\n\n        server {\n            listen 9000 default_server;\n\n            server_name localhost;\n            location / {\n                root $TRAVIS_BUILD_DIR;\n                index  index.html index.htm;\n            }\n            error_log /tmp/error.log;\n            access_log /tmp/access.log;\n        }\n    }\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen, when travis-CI is run, it uses envsubst to replace \u003ccode\u003e$TRAVIS_BUILD_DIR\u003c/code\u003e in\nthe \u003ccode\u003etests/travis.conf\u003c/code\u003e file, and then boots up nginx\u003c/p\u003e"},{"title":"On over-reproducibility","date":"2016-03-05","slug":"2016-03-05","html":"\u003cp\u003eRecently, some posts were made by \u003ca href=\"https://twitter.com/arjunrajlab\"\u003ehttps://twitter.com/arjunrajlab\u003c/a\u003e about how\nperhaps we are aiming at \"over-reproducibility\". I think this is interesting,\nand would generally agree that not everyone needs to achieve total automation of\ntheir whole pipeline, but I think the post does a lot of \"blaming your tools\"\nand disparaging good development practices with regards to version control and\nfigure generation.\u003c/p\u003e\n\u003cp\u003eI think that the complaint that version control and automated figures are not\nfor everyone is probably true, but it is overgeneralizing a different problem.\nFor example, students are not \"trained\" to work with Git, and they are not\n\"trained\" to do software engineering. In fact, even computer science students\nare not generally \"trained\" to do any of those things (computer science !=\nsoftware engineering). But that doesn't mean that your lab needs to forego using\nall those tools. Software development can be incredibly complex and\nsophisticated, but it's important to make sure things are \"done right\"!\nHigh-quality and easy-to-reproduce software is really about process, and\nengineering. But that is also why there is no one-true-way for reproducibility.\nMaybe Arjun doesn't have a reproducible workflow right now, but what about 5\nyears down the road, where he suddenly has a great framework for such things?\nThis happens all the time in software development (for example, how long ago was\nit that \"push to deploy\" did not exist? how often would you just edit your files\nlive on your site? now that is seen as bad practice!), but that said, processes\nfor software quality can evolve pretty organically, so even though some best\npractices exist, people can grow their own quality environment.\u003c/p\u003e\n\u003cp\u003eEven if we agree that software development+version control=good, there are still\na lot of complaints about it in the blogpost. For example, the complaint that\ngit is too hard is pretty silly, and the xkcd comic about calling over graph\ntheorist doesn't really help. As a software developer at work, I think that\nversion control simply helps define a disciplined way of working. Version\ncontrol makes you analyze your progress, summarize it as a commit message,\nformat the code properly, make sure it passes tests, and then talk to your\ncollaborators about accepting it. Dropbox might accomplish some of those things,\nbut I would really doubt that it is covering that full scope. Arjun seems to\nagree with using version control for some of his labs software development, so\nagain, there is a spectrum of needs being met. Nevertheless, there are some\nweird comments about whether commit messages are like a \"lab notebook\", but\nhint: they are not, write documentation for your project or keep a separate\njournal or blog or wiki. Commit messages in my opinion should be about one line,\nand the changes should be very self explanatory. But another big argument in the\nblogpost is whether version control works for something like paper writing, and\nI believe that this underscores something else: that paper writing is really a\npretty messy procedure.\u003c/p\u003e\n\u003cp\u003eI think that perhaps the \"google docs\" mode of writing is probably pretty ok for\nmany things, but it still needs a gatekeeper to incorporate the comments from\ncoauthors and reviewers into the document in an organized way. In my experience\nas a \"gatekeeper\" with writing my senior thesis, I organized my paper using\nknitr, and I automated figures being generated by R wherever possible, and then\nI would convert the paper to .docx to share with my advisors. Then I would take\ntheir comments on the .docx and incorporate it back into my paper. This could be\nseen as burdensome (\"why not just use google docs\"), but I felt that it was a\ngood way to incorporate review into a reproducible workflow.\u003c/p\u003e\n\u003cp\u003eNow, my pipeline precludes your PI from having to learn git to make a pull\nrequest on your paper. That's a good thing... and we still have reproducibility.\nBut what about the figures themselves? I said I had knitr for reproducible\nfigures, but what about everyone else? I think figures have high value, and so\npeople might want to have more reproducibility invested in them. In the blog\npost, it was claimed that making \"complex\" pub-quality figures was difficult\n(i.e. the plea for Adobe Illustrator), but look at the annotation functions from\nggplot2, and multifaceted images. I found these annotation functions to be very\neasy to pick up. There is also the on-going debate about ggplot2 vs base\ngraphics on the simplystatistics blog, which covers making publication quality\nfigures, and last I checked, I think the ggplot2′ers were winning. I don't know\nhow it works in high profile journals like Nature, because it looks like they\njust re-do all the figures to make them have some consistent style, but that\ndoesn't mean your original figure should be irreproducible.\u003c/p\u003e\n\u003cp\u003eThe debate about reproducible figures is pretty tangible too in things like\nmicroscopy images. Simply look at the large amount of discussion from pubpeer\nabout image fraud and possible duplications. The pubpeer community obviously has\nsome pretty sophisticated tools for hunting out possibly manipulated microscopy\nimages. These types of things also lead to investigations, and you can see in\nthe high-profile retraction case over STAP cells that it looks like the\ninvestigating committee were simply asking how some figures were made, and upon\nfinding that lab members don't know, a paper was retracted. The RetractionWatch\nblog covers these investigations\n\u003ca href=\"http://retractionwatch.com/2016/02/26/stap-stem-cell-researcher-obokata-loses-another-paper/\"\u003ehttp://retractionwatch.com/2016/02/26/stap-stem-cell-researcher-obokata-loses-another-paper/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eYou can't depend on other people to back your figure up, so you need to take\nresponsibility for making sure your papers and your work are reproducible (and,\nthere is a spectrum for reproducibility, but I believe that version control is a\ngreat example of highly disciplined work). I also think that just having folders\non some hard drive is not a good way to do things either. There is a saying in\nsoftware development that is \"if it's not in version control, it doesn't exist\".\nThat's not to say that version control is for everything, big data obviously has\ntrouble with being stored in git. But that shouldn't block you from creating\nreproducible analyses.\u003c/p\u003e\n\u003cp\u003eAnother example from the over-reproducibility blogpost says that if you have\n\"analysis1\" and \"analysis2\", then version control advocates would tell you to\ndelete analysis1 and just remember that it is in your history. I think that this\nis just a different issue. If you actually care about both analyses, just make\nthem separate repositories, with basic README.md files explaining each them, and\nstop worrying about it. Having one repository containing too many miscellaneous\nscripts is actually an anti-pattern. Stop making repositories called\n\"bioinfo-scripts\" that just contain a mish-mash of analysis scripts! Make your\nwork purpose driven and do tasks. Also, this is an argument against REPL tools:\nyour R REPL history is not a reproducible script. Make your code into a script\nthat generates well defined outputs. Windows users: you might not understand\nthis because the command line on windows is crippled, but you have to make\nthings run on the command line.\u003c/p\u003e\n\u003cp\u003eNow I wish I could say that I live by my words, but having been involved in\ncoauthoring several papers, I will just have to admit that it is really a messy\nprocedure despite my best intentions as an editor and coauthor. I wish things\nwould be better!\u003c/p\u003e\n\u003cp\u003eOn over-reproducibility: there is no such thing! There are pretty good arguments\nto really automate most of a process, especially if it is done repeatedly, to\nremove human errors, because meat-machines genuinely do things wrong all the\ntime.\u003c/p\u003e\n\u003cp\u003eAnd, as my parents would say around the dinner table: \"you can always have more,\nbut you can never have less\"...so, you're not going to get to a point of\nover-reproducibility. We shouldn't cargo cult it as the only way to do science\nbut it's not a bad thing to have.\u003c/p\u003e"},{"title":"Cheating in your computer science class by copying from stackoverflow","date":"2015-12-17","slug":"2015-12-17","html":"\u003cp\u003eI would like to tell a story about how I provided some personal tutoring help\nfor a friend in a computer science class, and talk about a nagging feeling that\nreally felt wrong for me.\u003c/p\u003e\n\u003cp\u003eSo, a long time ago, in a land far far away, a friend took an intermediate class\non C++. I was first updated on his progress when he emailed me to get some help\nwith some compiler errors. I was happy to help the young padawan. Here was the\nerror:\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e         \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003etest.cpp:42:43:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eerror:\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enon-ASCII\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003echaracters\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eare\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003enot\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eallowed\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eoutside\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eof\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eliterals\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e                \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eand\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eidentifiers\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e              for (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003estartScan\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e; \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003estartScan\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003esize\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e−\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e); \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003estartScan++\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #A6ACCD\"\u003e                                                    \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e^~\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, what does this say to you? For me, it was actually very clear what the\nerror meant. It simply meant that this code was taken from somewhere, and copied\nand pasted into the compiler. I know that because if they had typed it themself,\nthey definitely would not get this error, because it is the error that implies\nsomething was automatically converted to a unicode dash, mostly something done\nduring copying and pasting. At this point, I just kind of laughed, and helped\nhim fix that. I showed how the compiler is actually pretty smart and can help\nfix these errors and then I said \"l8r dude\".\u003c/p\u003e\n\u003cp\u003eThe next week, I had another skype meeting with him, and this time I wanted to\nhelp a little more. It was pretty clear when we started that he was using code\nthat was copied and pasted again. I said, \"uh, ok,....I'm not sure we need that\nnow, but let's just keep going\", and then I sat down and started helping. I\nwanted to help get all the details of the program working, so I helped guide the\nsolution. Each time we needed to test the program, it required repeating some\ninput lines via \u003ccode\u003ecin \u003e\u003e\u003c/code\u003e, which is really annoying (obviously, you should test\nyour code with unit tests, but universities don't teach that, a rant for another\nday). Anyways, it took awhile, because coding really does just take time, but in\nthe end he finally got it fixed and I said great job, and he turned it in!\u003c/p\u003e\n\u003cp\u003eNow, on my friends last assignment, I got another call for help, and when we\nstarted skype, I found yet again that he had copied code from somewhere, which\nincluded a C++ class and a main function for doing binary trees. I just simply\nsaid \"dude, delete that, we don't need it\" and so he deleted it, but I think\nmaybe he had worked on this copied code for awhile, and maybe felt it was kind\nof his, so was apprehensive. I insisted though. Then we walked through the\nassignment again, very slowly. I spent probably 2-3 hours helping him out that\nnight. During those hours, I saw him continually making many programming\nmistakes such as just not knowing how to declare variable or a function\nproperly, or just not knowing what to do next. This was kind of frustrating!!!\nBut I wanted to absolutely teach him how to make it right! I was patient though,\nand I wanted to teach a fun lesson, so I showed how you can do some \"unit tests\"\nwhich avoids having to constantly re-enter your data via \u003ccode\u003ecin \u003e\u003e \u003c/code\u003e....\u003c/p\u003e\n\u003cp\u003eNow, the padawan completed his C++ class, and then we all were happy ever\nafter....but a disturbance in the force was sensed...\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"http://zelcs.com/wp-content/uploads/2013/02/stackoverflow-logo-dumpster.jpg\" alt=\"image\"\u003e\nImage from \u003ca href=\"http://zelcs.com/this-is-why-stackoverflow-sucks/\"\u003ehttp://zelcs.com/this-is-why-stackoverflow-sucks/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI was reminded about all this due to seeing that\n\u003ca href=\"http://meta.stackexchange.com/questions/271080/the-mit-license-clarity-on-using-code-on-stack-overflow-and-on-the-stack-excha\"\u003eStackOverflow is now changing their \"license\" over all the little snippets of code\u003c/a\u003e\nthat are posted on their site. It just makes me reflect on literally HOW OFTEN\nPEOPLE JUST COPY AND PASTE FROM THERE. They might understand what they are\ndoing, or they seriously might not!!! I think it is a real problem that people\nsometimes do not understand, but I cannot deny that it can be helpful too.\u003c/p\u003e\n\u003cp\u003eIf I reflect on education in general, I recall when I took a University level\nphysics class... it was really hard! We had to enter our validated solutions for\nthe math problems into a computerized website homework portal, and that involved\nbeing 100% correct about things. Now, what if there was just a physicsoverflow,\nwhere they not only had Q\u0026#x26;A, but they had \"programs\" that gave you all the right\nanswers to your homework problems that you could just copy and paste and use as\nsolutions to your homework? This isn't even in the realm of asking for \"homework\nhelp\" anymore, this is just pure cheating if you can copy your answers from\nsomewhere. It is disappointing though because this is what people are doing in\ncomputer science!! These students are missing out on basic understanding of\ncode. !!thisIsNotOk();\u003c/p\u003e\n\u003cp\u003eNow, at least when I was being a tutor for my friend, I felt like my advice\nhelped my friend learn some things, not just give answers. But what if I was not\nthere? I guess there is a certain \"impersonal quality\" that makes asking\nGoogle/StackOverflow for answers less like conventional \"cheating\", but that is\nstill wrong. I think it would be good if more expert knowledge was available for\nall people, and not just copy and paste snippets. As a start, I thought that\n\u003ca href=\"http://cacm.acm.org/magazines/2015/10/192385-life-after-moocs/fulltext\"\u003ethis post by Philip Compeau and Pavel Pevzner\u003c/a\u003e\n(who teach a Bioinformatics Algorithms MOOC on Coursera) was very interesting,\nand I really liked their quote:\u003c/p\u003e\n\u003cp\u003e\"Online education should move toward replicating the experience of receiving\none-on-one tutoring.\"\u003c/p\u003e\n\u003cp\u003eThat sounds great, but how can this be achieved? And how can it be done right? I\nthink it really requires the student to \"learn how to learn\"\u003c/p\u003e\n\u003cp\u003eIf I think back to a long time ago, I remember being in 4th or 5th grade and I\ndid a book report on World War 1, and I went to the library. I remember\ndesperately flipping through pages of a 100 page book to try to find some\nsnippets of information to support some basic idea that I wanted to talk about.\nMaybe I wanted to know something specific, but the problem was that I wasn't\nREALLY READING THE BOOK! I probably could have had a better understanding of the\ntopic if I had just read it, or even a part of it, and asked for help, but\ninstead I just picked and chose snippets from the book to \"sound smart\". I am\nvery guilty of this type of error in many instances throughout my school career,\nso I am no saint! I even have a phrase to describe this style of learning...I\ncall it \"predatory learning\" and it is probably the worst kind of learning\nstyle. Predatory learners often pick and choose from scraps of info, but they\nnever get a full meal!\u003c/p\u003e"},{"title":"Killing postgres the hard way","date":"2015-10-22","slug":"2015-10-22","html":"\u003cp\u003eSo today, I finally decided to do something about a query that we saw had been\nrunning for 25 DAYS on our server\u003c/p\u003e\n\u003cp\u003eNote: If you find this post and you need to follow the hard way, backup your\ndata first if possible.\u003c/p\u003e\n\u003cp\u003eFirst I could obviously see the culprit: each postgresql query runs it's own\nprocess so I could see in \"htop\" that there was this process that had been\nrunning for 600 hours, or about 25 days\u003c/p\u003e\n\u003cp\u003eNext, I opened a psql console and ran this query:\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #5DE4C7\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e datname,procpid,current_query \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e pg_stat_activity \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e datname\u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003edatabase_name\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003eORDER BY\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e procpid ;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis returns which actual queries are being run on the database at any given\ntime. I could easily see the one problematic query being run, which was a badly\nconstructed intermine template query that resulted in a weird \"recursion\"\nessentially.\u003c/p\u003e\n\u003cp\u003eI wanted to try just terminating this query itself, so I ran this\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eSELECT pg_cancel_backend(29033);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eEach time I ran it, it would say it returned one result but it did nothing.\u003c/p\u003e\n\u003cp\u003eI also read that you can try to nicely \"kill\" it from the command line (no kill\n-9) so I ran\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e kill \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e29033\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis also did not work!\u003c/p\u003e\n\u003cp\u003eI thought perhaps all these problems were because tomcat was still active, so we\nshut down tomcat, and retried killing the specific query, but to no avail\u003c/p\u003e\n\u003cp\u003eAt this point, I just wanted to restart the whole database server. Kind of a\nrisky move... but I am sort of a risky kind of guy...(that is not a good thing\nwith databases). If you are doing this, make backups! I didn't. Luckily I\nsuffered no data loss but what follows is kind of intense.\u003c/p\u003e\n\u003cp\u003eSo first, I try and stop the database service\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e service postgresql-\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e9.1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e stop\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUnfortunately, this \u003ccode\u003e[FAILED]\u003c/code\u003e ! And of course, even though it failed, the\ndatabase is now unusable. No logging into it anymore, we have to go with the\nhard way now...\u003c/p\u003e\n\u003cp\u003eLooking at /etc/init.d/postgres-9.1 told me that the service stop command was\neffectively using something like this:\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e pg_ctl -D /db/postgres/data -m fast stop\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfter some reading, I learned that you can try using a slightly different flag\nto restart it\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e pg_ctl -D /db/postgres/data -m immediate  stop\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI ran this and to my horror/surprise, it actually worked! At this point I\ndecided to start postgresql back up again!\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e service postgresql-\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e9.1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e start\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe service start quickly returned a SUCCESS, which was great, but then I tried\nto start a psql console and the console froze on me! I could not even ctrl+c it!\u003c/p\u003e\n\u003cp\u003eI got really worried at this point and I looked at the process manager, and saw\nthat there was one postmaster process running but it was not clear what it was\ndoing. I actually tried to shutdown the server again in a panic mode but at this\npoint it said\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e /usr/pgsql-\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e9.1\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e/bin/pg_ctl stop -D /db/postgres/data/ -m immediate\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e waiting for server to shut\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e down...............................................................\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e failed\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt was probably good that it didn't shut down, because I would quickly find out\nthat it was in recovery mode. I looked at the postgresql logs and I saw this,\nreproduced here for full detail (from before the shutdown to the restart)\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e WARNING:  pgstat wait timeout\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e WARNING:  pgstat wait timeout\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e WARNING:  pgstat wait timeout\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e WARNING:  pgstat wait timeout\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e WARNING:  pgstat wait timeout\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e WARNING:  pgstat wait timeout\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e WARNING:  pgstat wait timeout\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e WARNING:  pgstat wait timeout\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e ERROR:  canceling statement due to user request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e STATEMENT:  CREATE TABLE precomp_90519 AS SELECT DISTINCT a1_.id AS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a1_id, a2_.id AS a2_id, a3_.id AS a3_id, a4_.id AS a4_id,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a5_.id AS a5_id, a6_.id AS a6_id, a12_.id AS a12_id, a10_.id AS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a10_id, a1_.id AS a13_, a1_.primaryIdentifier AS a14_,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a1_.secondaryIdentifier AS a15_, a2_.type AS a16_, a3_.name AS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a17_, a4_.primaryIdentifier AS a18_, a5_.primaryIdentifier AS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a19_, a6_.shortName AS a20_, a12_.identifier AS a21_, a10_.code\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e AS a22_ FROM Gene AS a1_, Homologue AS a2_, Organism AS a3_, Gene\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e AS a4_, Gene AS a5_, Organism AS a6_, GOAnnotation AS a7_,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e GOEvidence AS a8_, OntologyTerm AS a9_, GOEvidenceCode AS a10_,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e OntologyAnnotation AS a11_, OntologyTerm AS a12_, GeneGoAnnotation\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e AS indirect0, EvidenceGOAnnotation AS indirect1 WHERE a1_.id =\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a2_.geneId AND a1_.organismId = a3_.id AND a2_.geneId = a4_.id\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e AND a2_.homologueId = a5_.id AND a5_.organismId = a6_.id AND\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a1_.id = indirect0.Gene AND indirect0.GoAnnotation = a7_.id AND\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a7_.id = indirect1.GOAnnotation AND indirect1.Evidence = a8_.id AND\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a7_.ontologyTermId = a9_.id AND a8_.codeId = a10_.id AND a9_.id =\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a11_.ontologyTermId AND a11_.ontologyTermId = a12_.id ORDER BY\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a1_.primaryIdentifier, a1_.secondaryIdentifier, a2_.type,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a3_.name, a4_.primaryIdentifier, a5_.primaryIdentifier,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a6_.shortName, a12_.identifier, a10_.code, a1_.id, a2_.id,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a3_.id, a4_.id, a5_.id, a6_.id, a12_.id, a10_.id\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  could not send data to client: Broken pipe\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e STATEMENT:  CREATE TABLE precomp_90519 AS SELECT DISTINCT a1_.id AS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a1_id, a2_.id AS a2_id, a3_.id AS a3_id, a4_.id AS a4_id,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a5_.id AS a5_id, a6_.id AS a6_id, a12_.id AS a12_id, a10_.id AS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a10_id, a1_.id AS a13_, a1_.primaryIdentifier AS a14_,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a1_.secondaryIdentifier AS a15_, a2_.type AS a16_, a3_.name AS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a17_, a4_.primaryIdentifier AS a18_, a5_.primaryIdentifier AS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a19_, a6_.shortName AS a20_, a12_.identifier AS a21_, a10_.code\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e AS a22_ FROM Gene AS a1_, Homologue AS a2_, Organism AS a3_, Gene\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e AS a4_, Gene AS a5_, Organism AS a6_, GOAnnotation AS a7_,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e GOEvidence AS a8_, OntologyTerm AS a9_, GOEvidenceCode AS a10_,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e OntologyAnnotation AS a11_, OntologyTerm AS a12_, GeneGoAnnotation\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e AS indirect0, EvidenceGOAnnotation AS indirect1 WHERE a1_.id =\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a2_.geneId AND a1_.organismId = a3_.id AND a2_.geneId = a4_.id\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e AND a2_.homologueId = a5_.id AND a5_.organismId = a6_.id AND\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a1_.id = indirect0.Gene AND indirect0.GoAnnotation = a7_.id AND\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a7_.id = indirect1.GOAnnotation AND indirect1.Evidence = a8_.id AND\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a7_.ontologyTermId = a9_.id AND a8_.codeId = a10_.id AND a9_.id =\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a11_.ontologyTermId AND a11_.ontologyTermId = a12_.id ORDER BY\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a1_.primaryIdentifier, a1_.secondaryIdentifier, a2_.type,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a3_.name, a4_.primaryIdentifier, a5_.primaryIdentifier,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a6_.shortName, a12_.identifier, a10_.code, a1_.id, a2_.id,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e a3_.id, a4_.id, a5_.id, a6_.id, a12_.id, a10_.id\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  unexpected EOF on client connection\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  unexpected EOF on client connection\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  unexpected EOF on client connection\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  unexpected EOF on client connection\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  received fast shutdown request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  aborting any active transactions\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  autovacuum launcher shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e FATAL:  the database system is shutting down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  received immediate shutdown request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e WARNING:  terminating connection because of crash of another server\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e process\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e DETAIL:  The postmaster has commanded this server process to roll back\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e the current transaction and exit, because another server process\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e exited abnormally and possibly corrupted shared memory.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e HINT:  In a moment you should be able to reconnect to the database and\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e repeat your command.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  received fast shutdown request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  database system was interrupted; \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elast\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eknown\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eup\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eat\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2015\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e10\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e22\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e15\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e47\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e43\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e CDT\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  received immediate shutdown request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  database system was interrupted; \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003elast\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eknown\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eup\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003eat\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e2015\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e10\u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e22\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e15\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e47\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #5DE4C7\"\u003e43\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e CDT\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  database system was not properly shut down; \u003c/span\u003e\u003cspan style=\"color: #91B4D5\"\u003eautomatic\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e \u003c/span\u003e\u003cspan style=\"color: #ADD7FF\"\u003erecovery\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e in progress\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  record with zero length at BBD/1CC2F0C0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e ...\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou can see all the weird activity that was done here\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003efirst the attempt to \"canceling statement due to user request\" did not work\u003c/li\u003e\n\u003cli\u003ethen the database stop using -m fast\u003c/li\u003e\n\u003cli\u003ethen the database stop using -m immediate\u003c/li\u003e\n\u003cli\u003ethe restart (with the HINT, should be ready soon)\u003c/li\u003e\n\u003cli\u003ethe panic mode where i tried to shut it again anyways\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eDuring the recovery period, I was still very concerned about the database was\ndoing, so I used \"strace\" to look at the main postmaster process.\u003c/p\u003e\n\u003cp\u003eI was pleasantly surprised to see that the postmaster process was just cleaning\nup files in /db/postgres/data/base/pgsql_tmp/, I could see the file system\n\"unlink\" command with successful status codes.\u003c/p\u003e\n\u003cp\u003eThere were about 150 large files in /db/postgres/data/base/pgsql_tmp/, and I\nwaited about an hour for them to be deleted, and after that, the postgresql log\nfile said it was ready, and indeed, it was perfect :)\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color: #1b1e28\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  redo is not required\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  database system is ready to accept connections\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #91B4D5\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #A6ACCD\"\u003e LOG:  autovacuum launcher started\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhat a relief!\u003c/p\u003e\n\u003cp\u003eI hope this might help any wayward stragglers to see how the postgresql restart\nprocess works. Sometimes things don't shut down cleanly, but I think it is still\ngood to know some alternative steps to kill -9\u003c/p\u003e"},{"title":"Tomcat memory debugging","date":"2015-10-15","slug":"2015-10-15","html":"\u003cp\u003eIn my previous posts, I speculated about the issues that were causing server lag\nand CPU usage spiking with tomcat:\n\u003ca href=\"https://cmdcolin.github.io/posts/2015-09-16\"\u003ehttps://cmdcolin.github.io/posts/2015-09-16\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eUnfortunately, I was completely wrong in my speculations, but we increased\ntomcat memory limits so that the entire Lucene search index could fit in memory,\nwhich was able to fix the spiky CPU problems.\u003c/p\u003e\n\u003cp\u003eLuckily, fixing the memory issues had very good implications for our webapp:\u003c/p\u003e\n\u003cp\u003eI have a cron job uses a simple curl command to grab different pages on the\nwebsite, and then it logs the time taken to a output file. I charted these\noutput times, before and after we increased the memory limits of tomcat, and it\nturned out that the response time of the webapp was dramatically improved by\nthis change.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/131229569383_0.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure 1. The webapp response time was extremely variable before the redeploy on\nOct 2nd where we increased tomcat's memory allocation, which thereafter\ndramatically improved the response time.\u003c/p\u003e\n\u003cp\u003eClearly, the webapp response time was being severely compromised by the memory\nissues.\u003c/p\u003e\n\u003cp\u003eIn response to all of these issues, I also added GC logging to the tomcat\nconfiguration so that I can see if the GC is correlated with these webapp\nresponse time. Figure 2 shows how high GC activity is correlated with longer\nwebapp response times, but note that this figure was made after the other memory\nallocation problems were fixed, so it is still much better than the problems we\nhad in the past.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/131229569383_1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure 2. After increasing the memory, you can see webapp response time is much\nbetter, except if the GC activity becomes very high, and then this increases the\nresponse time.\u003c/p\u003e\n\u003cp\u003eEdit: Bonus screenshot, seemingly each friday we get a majoy activity burst that\ntriggers GC activity!\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/131229569383_2.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure 3. Crazy Java GC activity on a friday night, but the app seems to recover\nfrom it\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eIncreasing the memory allocation to java and tomcat allows the entire system to\nperform much better. If you can afford to get more memory to allocate to tomcat,\nthen it's probably a good idea.\u003c/p\u003e\n\u003cp\u003eAlso, tracking your webapp response times will help you see if your changes are\nhaving a good effect. I made this a script for graphing log outputs here\n\u003ca href=\"https://github.com/cmdcolin/loggraph\"\u003ehttps://github.com/cmdcolin/loggraph\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003ePS:\u003c/p\u003e\n\u003cp\u003eIf your tomcat is running as the tomcat user, then it can be difficult to debug\nthe memory problems simply with the \"get heap dump\" from jvisualvm, because the\npermissions will be wrong. To fix this, try using a privileged user to run the\njmap command:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003erunuser -l tomcat -c \"/usr/java/latest/bin/jmap-dump:format=b,file=/db/tomcat/tomcat.dump 25543\"\n\u003c/code\u003e\u003c/pre\u003e"},{"title":"Fixing spiky CPU issues and unresponsiveness with Tomcat","date":"2015-09-16","slug":"2015-09-16","html":"\u003cp\u003eOnce upon a time, our server was lagging after light usage of the applications,\nand the CPU usage would start spiking and rapidly cycle from many CPU cores\n(e.g. 2000% CPU usage) back to 0% CPU for no apparent reason.\u003c/p\u003e\n\u003cp\u003eAfter some debugging (\u003ca href=\"https://cmdcolin.github.io/posts/2015-10-15\"\u003ehttps://cmdcolin.github.io/posts/2015-10-15\u003c/a\u003e) I found it\nwas related to memory issues and garbage collection, but it was confusing\nbecause it wasn't strictly showing up as GC usage in JVisualVm (the GC usage,\nblue spikes on the left in fig 1, are small, but the orange spikes are large,\neven though the memory issues are the problem)\u003c/p\u003e\n\u003cp\u003eHere is what it looked like during spiking (obviously, pushing the memory limits\nhere, a linked in article suggests having 6GB of \"newgen\" memory, so on top of\nthe old gen, tomcat needs a bunch more for the newgen to make things happy.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/129241954103_0.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eHere is what it looks like when it is not spiking\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/129241954103_1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eSee this follow up post for a little more info\n\u003ca href=\"https://cmdcolin.github.io/posts/2015-10-15\"\u003ehttps://cmdcolin.github.io/posts/2015-10-15\u003c/a\u003e\u003c/p\u003e"},{"title":"Weekend project - graphing tumblr reblogs using cytoscape.js","date":"2015-08-30","slug":"2015-08-30","html":"\u003cp\u003eIn the past, I made an app that used RStudio's Shiny platform to plot network\ngraphs with RGraphviz. This worked, and gave some nice results, but when I found\nout about cytoscape.js, I really wanted to try that out.\u003c/p\u003e\n\u003cp\u003eThe app is designed to plot tumblr reblogs, so it has a tree structure, but\nsimply plotting things as a tree is not very space efficient (as in, the\nvisualization takes up too much space). Therefore, using different types of\nlayouts can really help.\u003c/p\u003e\n\u003cp\u003eIn my first app with graphviz \u003ca href=\"https://colindiesh.shinyapps.io/tumblrgraph\"\u003ehttps://colindiesh.shinyapps.io/tumblrgraph\u003c/a\u003e, there\nare several built-in graph layouts including \"neato\" \"twopi\", \"circo\", and \"dot\"\u003c/p\u003e\n\u003cp\u003eI made all of these available for users to try in the Shiny app. The names of\nthe layouts don't lend much to their behavior, but they are built-in functions\nin Graphviz. There are both \"tree\" and \"force-directed\" style graph views. As I\nmentioned, the \"tree\" style view make a lot of sense for the tumblr reblogs, but\nthe force directed graphs are also a lot more compact, so offering both styles\nis useful.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"../../media/128000908903_0.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure 1. My default example graph from graphviz using the twopi layout.\u003c/p\u003e\n\u003cp\u003eI wanted to replicate all the features that I had in the Graphviz app in\nCytoscape.js. Here is the breakdown of the basic components that needed\nreplicating:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eBuild the \"graph\" representation of reblogs in memory\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAdd user forms and configurability\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAdd color for distance from root using a breadth first search\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDraw the graph\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eAs I went along, I was happy to learn that the concepts mapped very easily to\njavascript and cytoscape.js. The implementations are a little different, but it\nworked out very nicely.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"../../media/128000908903_1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure 2. Same data plotted in Cytoscape.js with the springy layout.\u003c/p\u003e\n\u003cp\u003eIn the new app, we enabled several different layouts similar to the Graphviz app\ntoo. In cytoscape.js, the layouts that are offered include \"arbor\", \"springy\",\n\"cola\", \"cose\", and \"dagre\". I like \"cola\" because it really looks like bubbles\nmoving around in a soda. Others are worth experimenting with too.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"../../media/128000908903_2.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure 3. A Cytoscape.js springy layout for a larger tumblr reblog graph\u003c/p\u003e\n\u003cp\u003eThe new cytoscape.js app also has a nice animation feature. The old graphviz app\noffered animation too (using Yihui's animation library for R) but the new\nversion can automatically encode HTML5 video on the client side from individual\npicture frames in the browser using\n\u003ca href=\"https://github.com/antimatter15/whammy\"\u003e\"Whammy\"\u003c/a\u003e! This quite impressive!\u003c/p\u003e\n\u003cp\u003eSo to animate the graph, what is done is\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eAdd nodes/edges and layout the graph (the simulation time is configurable,\nbecause allowing the user to interact with the graph while the simulation is\nrunning is useful)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eOnce layout is complete, the user can save the graph as an animation, which\nfirst hides all nodes by adding visibility: hidden to the CSS.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThen the nodes are re-shown one-by-one, preserving the layout, and a frame is\nsaved by the renderer at each step (takes a snapshot of the canvas).\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThis strategy for the animation is actually better than the original graphviz\nversion that I had because the layout is only done once, which is time saving\nand it is also more consistent (the layout changes a lot if you re run it on\ndifferent sets of nodes).\u003c/p\u003e\n\u003cp\u003eCheck out the app here \u003ca href=\"http://cmdcolin.github.io/tumblrgraph2/\"\u003ehttp://cmdcolin.github.io/tumblrgraph2/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eFuture goals:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTest out super large graphs (I have tested up to about 500 reblogs but after\nthis, around 1000 reblogs, it slows down a lot and produces bad layouts. Needs\nfixing)\u003c/li\u003e\n\u003cli\u003eTest out ability to place importance on certain nodes by increasing node size\nbased on it's degree\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eCheck out an example of the HTML5 video here\u003c/p\u003e"},{"title":"Creating high-resolution screenshots (of jbrowse) with phantomJS","date":"2015-03-02","slug":"2015-03-02","html":"\u003cp\u003eGenerating screenshots that are of high quality can be a great benefit for\nthings like science publications. PhantomJS is great for automating this in a\nreproducible way. While many HTML pages can be rendered in high resolution\nwithout modification, HTML5 canvas apps need special considerations (see this\n\u003ca href=\"http://searchvoidstar.tumblr.com/post/86542847038/high-dpi-rendering-on-html5-canvas-some-problems\"\u003eprevious post on the topic\u003c/a\u003e).\u003c/p\u003e\n\u003cp\u003eOne of the key things that we noticed when we developed the high resolution\ncanvas rendering (see above link) is that the \"devicePixelRatio\" can increase\nbased on the browser's zoom level, and it can also take fractional values. This\nwas a difficult problem, to make rendering 100% consistent under all\ndevicePixelRatio values, so we created a config parameter called\nhighResolutionMode to accept arbitrary resolutions.\u003c/p\u003e\n\u003cp\u003eLater, we learned about PhantomJS and how it can be used for creating\nscreenshots, it was clear that our design for the settings arbitrary scaling\nfactors for the HTML5 canvas was very helpful, as we can set\nhighResolutionMode=4 along with the phantomJS variable page.zoomFactor=4, which\nmatches the resolutions and creates high-res canvas screenshots.\u003c/p\u003e\n\u003cp\u003eOne of the reasons that this is important is that it doesn't look like PhantomJS\nallows \"devicePixelRatio\" to be emulated, so the page.zoomFactor doesn't\nnecessarily set the devicePixelRatio to a higher number, so being able to set\nthe the arbitrary high resolution canvas scalings ourselves is a good solution.\nReference: issue open Jan 2013 \u003ca href=\"https://github.com/ariya/phantomjs/issues/10964\"\u003ehttps://github.com/ariya/phantomjs/issues/10964\u003c/a\u003e\nand we are now in Aug 2015\u003c/p\u003e\n\u003cp\u003eHere are some examples of the rendering process.\u003c/p\u003e\n\u003ch2 id=\"examples\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#examples\"\u003e\u003ca href=\"#examples\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eExamples\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eRendering screenshots to PNG\u003c/p\u003e\n\u003cp\u003ephantomjs rasterize.js\n\"\u003ca href=\"http://localhost/jbrowse/?data=sample_data/json/volvox\u0026#x26;tracklist=0\"\u003ehttp://localhost/jbrowse/?data=sample_data/json/volvox\u0026#x26;tracklist=0\u003c/a\u003e\"\noutput.png \"3800px*1600px\" 2\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://i.imgur.com/ABLo6WJ.png\"\u003e\u003cimg src=\"http://i.imgur.com/ABLo6WJ.png\" alt=\"\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eFigure 1. A basic image output from phantomJS. It uses a zoomFactor=2 on the\ncommand line to match highResolutionMode=2 in the config file. `\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eRendering screenshots to PDF. In JBrowse, this requires PhantomJS 2.0. Also\nsee footnote.\u003c/p\u003e\n\u003cp\u003ephantomjs rasterize.js\n\"\u003ca href=\"http://localhost/jbrowse/?data=sample_data/json/volvox\u0026#x26;tracklist=0\"\u003ehttp://localhost/jbrowse/?data=sample_data/json/volvox\u0026#x26;tracklist=0\u003c/a\u003e\"\noutput.pdf \"16in*8in\"\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.dropbox.com/s/7pceo4o406dys8s/output.pdf?dl=0\"\u003eDropbox PDF 906kb\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eFigure 2. Outputted PDF from phantomJS. This still requires setting the\nconfiguration such as highResolutionMode=2 too\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eIn the future, we want to consider adding highResolutionMode to be specified via\nthe URL so that it doesn't need to be changed manually, although, setting\nhighResolutionMode=2 by default is not a bad strategy.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eFootnote\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eI used the following patch for rasterize.js to help \"fill out\" the page space in\nPDF renderings (otherwise, it is a square page, not super pretty for a\nwidescreen app). I guess rasterize.js is really just a template and not meant to\nbe super multi-purposed, so this custom modification helps for our case.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\n        diff --git a/examples/rasterize.js b/examples/rasterize.js\n        index b0e0f67..3b0b6e4 100644\n        --- a/examples/rasterize.js\n        +++ b/examples/rasterize.js\n        _@@ -14,6 +14,7 @@ if (system.args.length \u0026#x3C; 3 || system.args.length \u003e 5) {\n            page.viewportSize = { width: 600, height: 600 };\n            if (system.args.length \u003e 3 \u0026#x26;\u0026#x26; system.args[2].substr(-4) === \".pdf\") {\n                size = system.args[3].split('_');\n\n        +       page.viewportSize.width *= parseInt(size[0])/parseInt(size[1]);\n                page.paperSize = size.length === 2 ? { width: size[0], height: size[1], margin: '0px' }\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eReference\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://gmod.org/wiki/JBrowse_Configuration_Guide#Rendering_high_resolution_screenshots_using_PhantomJS\"\u003ehttps://gmod.org/wiki/JBrowse_Configuration_Guide#Rendering_high_resolution_screenshots_using_PhantomJS\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eComparison\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/112494997473_0.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eBig improvement on font rendering\u003c/p\u003e"},{"title":"Post graduation survey","date":"2015-02-01","slug":"2015-02-01","html":"\u003cp\u003eI recently received some post-graduation survey results from my class of 2013\nabout salaries, job satisfaction, and other things. I thought I'd try to\nvisualize the data using R and ggplot2 as an exercise.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://i.imgur.com/5rVnQHC.png\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/109823235838_0.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure 1. The fancy ggplot2 graph of salaries with standard deviation bars\ncomparing salaries of BS/MS grads (red) with BS grads (blue).\u003c/p\u003e\n\u003cp\u003eAs a CS grad, I suppose I'm happy to see that we have the a highest average\nsalary right out of the gate. CS also has a high standard deviation which I\nthought was interesting. Perhaps CS majors work in a myriad of fields that\ndemand computational skills where other engineering majors may be more focused\non certain types of fields, giving less deviation.\u003c/p\u003e\n\u003cp\u003eIn the process of making this graph, I was looking for how to do the\nside-by-side bar charts in ggplot and ended up supplying a \"correction\" to a\nanswer on crossvalidated, a stackexchange site. The correction entailed how the\nsyntax for using reshape2 vs reshape has changed slightly, so hopefully that\nhelps other people searching for the same issue.\u003c/p\u003e\n\u003cp\u003eHere is the code for processing\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-R\"\u003e library(xlsx)\n library(ggplot2)\n library(reshape2)\n\n salaries=read.xlsx(\"workbook.xlsx\",1)\n df=melt(salaries,measure.vars = c(\"BS.MS.annual.salary\",\n \"BS.annual.salary\"))\n #awkward step to merge standard deviations\n df[df$variable==\"BS.MS.annual.salary\",\"stdev\"]=df[df$variable==\"BS.MS.annual.salary\",\"stdev.1\"]\n ggplot(df, aes(NA., value, fill=variable)) +\n      geom_bar(position=\"dodge\",stat=\"identity\") +\n      geom_errorbar(aes(ymin=value-stdev, ymax=value+stdev),\n position=position_dodge(width=0.9)) +\n      ggtitle(\"Salary for 2013 class of Engineering (2014 survey)\") +\n      xlab(\"Major\") +\n      ylab(\"Salary w/ stddev\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTable pictured\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/109823235838_1.png\" alt=\"\"\u003e\u003c/p\u003e"},{"title":"High DPI rendering on HTML5 canvas - some problems and solutions","date":"2014-05-22","slug":"2014-05-22","html":"\u003cp\u003eRecently our code has been moving towards the use of HTML5 canvas, as it has\nmany benefits. I felt that if we were going to keep this going towards canvas,\nthe rendering needed to match the quality of regular HTML based tracks.\nUnfortunately, the HTML5 canvas by default looks very \"fuzzy\" on a high\nresolution display (Figure 1).\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/86542847038_0.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eFigure 1.\u003c/em\u003e An example of really bad font rendering before and after enabling\nhigh resolution on the HTML5 canvas.\u003c/p\u003e\n\u003ch2 id=\"background\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#background\"\u003e\u003ca href=\"#background\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eBackground\u003c/h2\u003e\n\u003cp\u003eMajor credit goes to the tutorial at\n\u003ca href=\"http://www.html5rocks.com/en/tutorials/canvas/hidpi/\"\u003ehttp://www.html5rocks.com/en/tutorials/canvas/hidpi/\u003c/a\u003e for pioneering this! The\nhtml5rocks tutorial, written in 2010 it still remains relevant. The major thing\nit introduces is these browser variables called devicePixelRatio and\nbackingStoreRatio that can be used to adjust your canvas drawing. In my\ninterpretation, these two variables have the following purpose:\u003c/p\u003e\n\u003cp\u003e\u003cem\u003edevicePixelRatio\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eOn high DPI displays, screen pixels are actually abstracted away from the\nphysical pixels, so, when you create some HTML element with width 100, height\n100, that element actually takes up a larger number of pixels than 100x100. The\nactual ratio of the pixels that it takes up is 100\u003cem\u003edevicePixelRatio x\n100\u003c/em\u003edevicePixelRatio. On a high DPI platform like Retina, the devicePixelRatio\nis normally 2 at 100% zoom.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003ebackingStoreRatio\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eThe backing store ratio doesn't seem to change as much from platform to\nplatform, but my interpretation of this value is that it essentially gives the\nsize of the memory buffer for the canvas. On my platform, the backingStoreRatio\nis \"1\". I think this value had more historical use, but it may not really be\nused anymore (update aug 7th, 2015 deprecated?\n\u003ca href=\"http://stackoverflow.com/questions/24332639/why-context2d-backingstorepixelratio-deprecated\"\u003ehttp://stackoverflow.com/questions/24332639/why-context2d-backingstorepixelratio-deprecated\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eSo, what are the consequences of the backing store ratio and the device pixel\nratio? If the backing store ratio equals the device pixel ratio, then no scaling\ntakes place, but what we often see is that they are not equal, so the image is\nup-scaled from the backing store to the screen, and then it is stretched and\nblurred.\u003c/p\u003e\n\u003ch2 id=\"so-how-do-you-enable-the-high-dpi-mode\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#so-how-do-you-enable-the-high-dpi-mode\"\u003e\u003ca href=\"#so-how-do-you-enable-the-high-dpi-mode\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eSo, how do you enable the high DPI mode?\u003c/h2\u003e\n\u003cp\u003eThe solution to properly scale your HTML5 canvas content involves a couple of\nsteps that are described in the tutorial here\n\u003ca href=\"http://www.html5rocks.com/en/tutorials/canvas/hidpi/\"\u003ehttp://www.html5rocks.com/en/tutorials/canvas/hidpi/\u003c/a\u003e, but here is the essence:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eUse the canvas.scale method, which tells the canvas's drawing area to become\nbigger, but keeps drawing operations consistent.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe scaling factor for the canvas.scale method is\ndevicePixelRatio/backingStoreRatio. This will be 2 for instance on a Retina\nscreen at a typical 100% zoom level. The zoom level is relevant which will be\ndiscussed later in this post...\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMultiply the width and height attributes of the canvas by\ndevicePixelRatio/backingStoreRatio, so that the \"canvas object\" is as big as\nthe scaled size.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eHere's the tricky part: set the CSS width and height attributes to be the\nUNSCALED size that you want.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eNote: you can also set CSS width:100% or something and then the canvas will be\nsized appropriately. Normally though, what you will have is something like\n\u003ccode\u003e\u0026#x3C;canvas width=640 height=480 style=\"width:320px;height:240px\"\u003e\u003c/code\u003e so you can see\nthat the canvas size is larger than what the CSS actually resizes it to be.\u003c/p\u003e\n\u003ch2 id=\"issues-browser-zoom-and-fractional-devicepixelratios\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#issues-browser-zoom-and-fractional-devicepixelratios\"\u003e\u003ca href=\"#issues-browser-zoom-and-fractional-devicepixelratios\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eIssues: Browser zoom and fractional devicePixelRatios\u003c/h2\u003e\n\u003cp\u003eWhen I first started this project, the benefit of this high resolution rendering\nseemed limited to the fancy people who had Retina or other High DPI screens.\nHowever, what I didn't even realize is that the devicePixelRatio value changes\ndepending on browser zoom settings, so even people with a regular screen can\nhave improved rendering of the HTML5 canvas. (Update: we even saw that if you\nhave customized canvas renderings, then you an generate good screenshots of the\ncanvas with PhantomJS too. See\n\u003ca href=\"http://searchvoidstar.tumblr.com/post/112494997473/creating-high-resolution-screenshots-of-jbrowse\"\u003emy other more recent article\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eThe issue with these zoom settings though is that when you change the zoom\nlevel, especially on chrome and firefox browsers, the devicePixelRatio can end\nup being a fractional value e.g. 2.223277 which can result in sub-pixel\nrendering problems.\u003c/p\u003e\n\u003cp\u003eRemember that when we scaled the canvas, it also scales the drawing functions to\nbe consistent, so that essentially if you draw a 1 pixel width line on a scaled\ncanvas, it might draw a 2.223277 pixel width line. Hence, we can get fuzzy\nrendering issues.\u003c/p\u003e\n\u003cp\u003eThis issue is very noticeable if you draw many 1px wide lines right next to each\nother. In this case, there will be noticeable gaps between the lines due to the\nimperfect rendering (see green box below).\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/86542847038_1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eFigure 2.\u003c/em\u003e Examples of 1px wide lines rendered next to each other when there is\nfractional devicePixelRatio.\u003c/p\u003e\n\u003cp\u003eBottom Green box: 1px wide lines drawn 1px apart. (note: bad rendering! tiny\ngaps) Middle Blue box: 1px wide line rendered every 2 px (intentional gaps for\ndemonstration). Top Red box: 1.3px wide lines (a fudge factor is used to make\neliminate the tiny gaps).\u003c/p\u003e\n\u003ch2 id=\"my-solution-the-red-box----add-a-fudge-factor\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#my-solution-the-red-box----add-a-fudge-factor\"\u003e\u003ca href=\"#my-solution-the-red-box----add-a-fudge-factor\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eMy solution: The Red Box -- add a fudge factor\u003c/h2\u003e\n\u003cp\u003eAs you can see in the above figure, my solution to the sub-pixel rendering is to\nadd a \"fudge factor\" to the line width to make it render lines that are 1.3px\nwide instead of 1px wide when the devicePixelRatio is not a whole number, which\neffectively eliminates any gaps due to the sub-pixel rendering problem.\u003c/p\u003e\n\u003cp\u003eI heuristically determined the value 1.3px to be sufficient, as testing values\nlike 1.1px, 1.2px and even 1.25px were too small. I'd love to see a proof of\ndetermining this value empirically, or even better, something that isn't this\nbig of a hack, but for now that's what I have.\u003c/p\u003e\n\u003cp\u003eYou can see the effect of the fudge factor (red box) vs the bad rendering (green\nbox) in Figure 2. You can also try this out yourself here\n\u003ca href=\"http://jsfiddle.net/4xe4d/\"\u003ehttp://jsfiddle.net/4xe4d/\u003c/a\u003e, just zoom your browser and then refresh (zooming and\nnot refreshing doesn't modify device pixel ratio) to test out different values\nof devicePixelRatio.\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eIn conclusion...we now have high resolution rendering on canvas! The solution\nfor drawing lots of lines right next to each other is sort of suboptimal, so the\nquestion continues...what shall be done in this case?\u003c/p\u003e\n\u003cp\u003eMaybe someone could implement some sort of library that replaces the\ncanvas.scale method to do better layout and obtain more pixel perfect rendering.\nAlternatively, you could force the scaling factor to always round to a whole\nnumber. This is actually not a bad solution, because the canvas is already being\nresized, and then you can control your rendering better.\u003c/p\u003e\n\u003cp\u003eThanks for reading\u003c/p\u003e"}]},"__N_SSG":true},"page":"/archive","query":{},"buildId":"ytiNZVI_Rh2R2rVLudOS-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>