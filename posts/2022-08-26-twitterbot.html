<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Making a twitter bot in the year 2022 with node.js</title><meta name="next-head-count" content="3"/><link rel="shortcut icon" href="favicon.ico"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><meta name="description" content="Blogging for the future"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js" integrity="sha512-hpZ5pDCF2bRCweL5WoA0/N1elet1KYL5mx3LP555Eg/0ZguaHawxNvEjF6O3rufAChs16HVNhEc6blF/rZoowQ==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="preload" href="/_next/static/css/9d066bf523979bbf.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9d066bf523979bbf.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8b306f51a35d80a9.js" defer=""></script><script src="/_next/static/chunks/framework-c0d8f0fd2eea5ac1.js" defer=""></script><script src="/_next/static/chunks/main-4ce9603599af9a95.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d9139de5c3de3b6b.js" defer=""></script><script src="/_next/static/chunks/996-3d2a4318c0ac6f1a.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-a48b13f8f13172f9.js" defer=""></script><script src="/_next/static/AY7vAmAKG-pC-jWc64xzi/_buildManifest.js" defer=""></script><script src="/_next/static/AY7vAmAKG-pC-jWc64xzi/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><main><div><div style="margin-bottom:100px"><a href="/">Misc scribbles</a></div><article><div><h1>Making a twitter bot in the year 2022 with node.js</h1><h4>2022-08-26</h4></div><p>Recently, we made the logistic map fractal visualizer app, but, how do we keep
USER ENGAGEMENT METRICS up? Gotta make a twitter bot to post fractals, that&#x27;s
how!</p>
<p>I found it somewhat tricky to get this working, because there is a lot of odd lingo out there</p>
<p>Example questions</p>
<ul>
<li>Twitter API v1 vs v2 (you can use both, as you&#x27;ll see below)</li>
<li>Twitter API SDK (doesn&#x27;t have good example for posting tweets AFAIK, so not used below)</li>
<li>How to use OAuth</li>
<li>Wtf is OAuth</li>
<li>How to bang head against wall quietly</li>
</ul>
<p>And ya know what, I still don&#x27;t know all the answers to those questions. OAuth
still confuses me. But, if you follow these steps, you can make a bot:</p>
<h3>Step 1</h3>
<p>Get your keys. I forget the exact procedure for this but go to
https://developer.twitter.com and sign up, register an &quot;app&quot; with them, and
poke around for awhile.</p>
<p>After sometime, you should get a screen that looks like this</p>
<p><img src="https://github.com/cmdcolin/twitter_fractal_bot/blob/master/img/devpanel.png?raw=true" alt=""/></p>
<h3>Step 2</h3>
<p>Create a .env file with your keys, corresponding to the box1 and box2 from the above screenshot</p>
<pre><code>API_KEY=&quot;xxxxxxxxxxxxxxxxxxxxxxxxx&quot;
API_SECRET=&quot;yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy&quot;
ACCESS_TOKEN=&quot;aaaaaaaaaaaaaaaaaaa-aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;
ACCESS_TOKEN_SECRET=&quot;bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb&quot;
</code></pre>
<h3>Step 3</h3>
<p>Make a script like this</p>
<pre><code>mkdir mybot
cd mybot
yarn init
yarn add node-fetch formdata-node oauth dotenv
</code></pre>
<p>Create an src/bot.ts with something like this</p>
<pre><code class="language-typescript">import fs from &quot;fs&quot;;
import * as dotenv from &quot;dotenv&quot;;
import OAuth from &quot;oauth&quot;;
import fetch, { RequestInit } from &quot;node-fetch&quot;;

dotenv.config(); // loads the .env file into variables like process.ENV.VARIABLE

async function mfetch(url: string, params: RequestInit) {
  const response = await fetch(url, params);

  if (!response.ok) {
    const text = await response.text();
    throw new Error(`HTTP ${response.status} ${text}`);
  }
  return response.json() as Promise&lt;Record&lt;string, unknown&gt;&gt;;
}

function getAuth(oauth: OAuth.OAuth, url: string) {
  return oauth.authHeader(
    url,
    process.env.ACCESS_TOKEN as string,
    process.env.ACCESS_TOKEN_SECRET as string,
    &quot;post&quot;
  );
}

(async () =&gt; {
  try {
    const client = new OAuth.OAuth(
      &quot;https://api.twitter.com/oauth/request_token&quot;,
      &quot;https://api.twitter.com/oauth/access_token&quot;,
      process.env.API_KEY as string,
      process.env.API_SECRET as string,
      &quot;1.0A&quot;,
      null,
      &quot;HMAC-SHA1&quot;
    );

    const tweetEndpoint = &quot;https://api.twitter.com/2/tweets&quot;;
    const clientName = &quot;v3CreateTweetJS&quot;;

    const result = await mfetch(tweetEndpoint, {
      headers: {
        Authorization: getAuth(client, tweetEndpoint),
        &quot;user-agent&quot;: clientName,
        &quot;content-type&quot;: &quot;application/json&quot;,
        accept: &quot;application/json&quot;,
      },
      body: JSON.stringify({
        text: `hello world!`,
      }),
      method: &quot;post&quot;,
    });

    console.log(result);
  } catch (e) {
    console.error(e);
  }
})();
</code></pre>
<h2>Step 4</h2>
<p>Post a picture</p>
<pre><code class="language-typescript">import fs from &quot;fs&quot;;
import * as dotenv from &quot;dotenv&quot;;
import OAuth from &quot;oauth&quot;;
import fetch, { RequestInit } from &quot;node-fetch&quot;;
import { FormData, File } from &quot;formdata-node&quot;;

dotenv.config(); // loads the .env file into variables like process.ENV.VARIABLE

async function mfetch(url: string, params: RequestInit) {
  const response = await fetch(url, params);

  if (!response.ok) {
    const text = await response.text();
    throw new Error(`HTTP ${response.status} ${text}`);
  }
  return response.json() as Promise&lt;Record&lt;string, unknown&gt;&gt;;
}

function getAuth(oauth: OAuth.OAuth, url: string) {
  return oauth.authHeader(
    url,
    process.env.ACCESS_TOKEN as string,
    process.env.ACCESS_TOKEN_SECRET as string,
    &quot;post&quot;
  );
}

const form = new FormData();
form.set(
  &quot;media&quot;,
  new File([fs.readFileSync(&quot;coolpicture.png&quot;)], &quot;coolpicture.png&quot;)
);
(async () =&gt; {
  try {
    const client = new OAuth.OAuth(
      &quot;https://api.twitter.com/oauth/request_token&quot;,
      &quot;https://api.twitter.com/oauth/access_token&quot;,
      process.env.API_KEY as string,
      process.env.API_SECRET as string,
      &quot;1.0A&quot;,
      null,
      &quot;HMAC-SHA1&quot;
    );

    const picEndpoint = &quot;https://upload.twitter.com/1.1/media/upload.json&quot;;
    const tweetEndpoint = &quot;https://api.twitter.com/2/tweets&quot;;
    const clientName = &quot;v3CreateTweetJS&quot;;

    // Step 1: Upload picture to the &quot;media&quot; endpoint of the twitter API, this
    // is technically using &quot;v1&quot; of the twitter API
    const r = await mfetch(picEndpoint, {
      headers: {
        Authorization: getAuth(client, picEndpoint),
        &quot;user-agent&quot;: clientName,
      },
      method: &quot;POST&quot;,
      //@ts-ignore
      body: form,
    });

    // Step 2: Post the tweet to the &quot;tweet&quot; endpoint of the twitter API, this is
    // technically using &quot;v2&quot; of the twitter API, and referencing the
    // &quot;media_id_string&quot; variable we got from the first request we made
    const result = await mfetch(tweetEndpoint, {
      headers: {
        Authorization: getAuth(client, tweetEndpoint),
        &quot;user-agent&quot;: clientName,
        &quot;content-type&quot;: &quot;application/json&quot;,
        accept: &quot;application/json&quot;,
      },
      body: JSON.stringify({
        media: { media_ids: [r.media_id_string] },
        text: `Hello world with picture`,
      }),
      method: &quot;post&quot;,
    });

    console.log(result);
  } catch (e) {
    console.error(e);
  }
})();
</code></pre>
<h2>Step 6</h2>
<p>Create a package.json that can build these typescript files</p>
<pre><code>{
  &quot;dependencies&quot;: {
    &quot;canvas&quot;: &quot;^2.9.3&quot;,
    &quot;dotenv&quot;: &quot;^16.0.1&quot;,
    &quot;formdata-node&quot;: &quot;^4.4.1&quot;,
    &quot;node-fetch&quot;: &quot;^3.2.10&quot;,
    &quot;oauth&quot;: &quot;^0.10.0&quot;,
    &quot;typescript&quot;: &quot;^4.7.4&quot;
  },
  &quot;license&quot;: &quot;MIT&quot;,
  &quot;type&quot;: &quot;module&quot;,
  &quot;devDependencies&quot;: {
    &quot;@types/node&quot;: &quot;^18.7.9&quot;,
    &quot;@types/oauth&quot;: &quot;^0.9.1&quot;
  },
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;tsc&quot;,
    &quot;prepost&quot;: &quot;yarn build&quot;,
    &quot;post&quot;: &quot;node dist/bot.js&quot;
  }
}

</code></pre>
<p>And tsconfig.json file</p>
<pre><code>{
  &quot;include&quot;: [&quot;src&quot;],
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;esnext&quot;,
    &quot;outDir&quot;: &quot;dist&quot;,
    &quot;types&quot;: [&quot;node&quot;],
    &quot;lib&quot;: [&quot;dom&quot;, &quot;esnext&quot;],
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;declaration&quot;: true,
    &quot;sourceMap&quot;: true,
    &quot;strict&quot;: true,
    &quot;noImplicitReturns&quot;: true,
    &quot;noFallthroughCasesInSwitch&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;allowJs&quot;: true
  }
}
</code></pre>
<p>This compiles the <code>src</code> folder and outputs js files to the <code>dist</code> directory,
and we can run the <code>dist/bot.js</code> file with node to post the file</p>
<h2>Step 5</h2>
<p>Add a github action!</p>
<p>Create a file with the path <code>.github/workflows/post.yml</code> in your repo, which
runs <code>dist/bot.js</code></p>
<p>This uses the github cron/scheduled workflow
<a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule">https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule</a></p>
<p>This posts at 6:30pm daily, near when this post was written (see <a href="crontab.guru">https://crontab.guru/</a> for more info)</p>
<pre><code>on:
  schedule:
    - cron: &#x27;30 18 * * *&#x27;

jobs:
  test:
    name: Post tweet
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js 14.x
        uses: actions/setup-node@v2
        with:
          node-version: &#x27;14&#x27;
      - name: Install deps (with cache)
        uses: bahmutov/npm-install@v1
      - name: Post tweet
        run: yarn post

</code></pre>
<h2>Conclusion</h2>
<p>See https://github.com/cmdcolin/twitter_fractal_bot for working example</p><div style="margin-top:200px"></div></article></div></main></div><footer style="margin-top:100px"><a href="/">Home</a> <a href="/archive">Blog archive</a> <a href="https://github.com/cmdcolin/">Github</a> <a href="https://twitter.com/cmdcolin">Twitter</a> <a href="/projects">Projects</a> <a href="/photos">Photos</a> <a href="/rss.xml">RSS</a><a href="/about">About</a> </footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Making a twitter bot in the year 2022 with node.js","date":"2022-08-26","slug":"2022-08-26-twitterbot","mdxSource":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    ul: \"ul\",\n    li: \"li\",\n    h3: \"h3\",\n    img: \"img\",\n    pre: \"pre\",\n    code: \"code\",\n    h2: \"h2\",\n    a: \"a\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"Recently, we made the logistic map fractal visualizer app, but, how do we keep\\nUSER ENGAGEMENT METRICS up? Gotta make a twitter bot to post fractals, that's\\nhow!\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"I found it somewhat tricky to get this working, because there is a lot of odd lingo out there\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Example questions\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Twitter API v1 vs v2 (you can use both, as you'll see below)\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Twitter API SDK (doesn't have good example for posting tweets AFAIK, so not used below)\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"How to use OAuth\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Wtf is OAuth\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"How to bang head against wall quietly\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"And ya know what, I still don't know all the answers to those questions. OAuth\\nstill confuses me. But, if you follow these steps, you can make a bot:\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Step 1\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Get your keys. I forget the exact procedure for this but go to\\nhttps://developer.twitter.com and sign up, register an \\\"app\\\" with them, and\\npoke around for awhile.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"After sometime, you should get a screen that looks like this\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://github.com/cmdcolin/twitter_fractal_bot/blob/master/img/devpanel.png?raw=true\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Step 2\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Create a .env file with your keys, corresponding to the box1 and box2 from the above screenshot\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"API_KEY=\\\"xxxxxxxxxxxxxxxxxxxxxxxxx\\\"\\nAPI_SECRET=\\\"yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy\\\"\\nACCESS_TOKEN=\\\"aaaaaaaaaaaaaaaaaaa-aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\\\"\\nACCESS_TOKEN_SECRET=\\\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\\\"\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Step 3\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Make a script like this\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"mkdir mybot\\ncd mybot\\nyarn init\\nyarn add node-fetch formdata-node oauth dotenv\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Create an src/bot.ts with something like this\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"import fs from \\\"fs\\\";\\nimport * as dotenv from \\\"dotenv\\\";\\nimport OAuth from \\\"oauth\\\";\\nimport fetch, { RequestInit } from \\\"node-fetch\\\";\\n\\ndotenv.config(); // loads the .env file into variables like process.ENV.VARIABLE\\n\\nasync function mfetch(url: string, params: RequestInit) {\\n  const response = await fetch(url, params);\\n\\n  if (!response.ok) {\\n    const text = await response.text();\\n    throw new Error(`HTTP ${response.status} ${text}`);\\n  }\\n  return response.json() as Promise\u003cRecord\u003cstring, unknown\u003e\u003e;\\n}\\n\\nfunction getAuth(oauth: OAuth.OAuth, url: string) {\\n  return oauth.authHeader(\\n    url,\\n    process.env.ACCESS_TOKEN as string,\\n    process.env.ACCESS_TOKEN_SECRET as string,\\n    \\\"post\\\"\\n  );\\n}\\n\\n(async () =\u003e {\\n  try {\\n    const client = new OAuth.OAuth(\\n      \\\"https://api.twitter.com/oauth/request_token\\\",\\n      \\\"https://api.twitter.com/oauth/access_token\\\",\\n      process.env.API_KEY as string,\\n      process.env.API_SECRET as string,\\n      \\\"1.0A\\\",\\n      null,\\n      \\\"HMAC-SHA1\\\"\\n    );\\n\\n    const tweetEndpoint = \\\"https://api.twitter.com/2/tweets\\\";\\n    const clientName = \\\"v3CreateTweetJS\\\";\\n\\n    const result = await mfetch(tweetEndpoint, {\\n      headers: {\\n        Authorization: getAuth(client, tweetEndpoint),\\n        \\\"user-agent\\\": clientName,\\n        \\\"content-type\\\": \\\"application/json\\\",\\n        accept: \\\"application/json\\\",\\n      },\\n      body: JSON.stringify({\\n        text: `hello world!`,\\n      }),\\n      method: \\\"post\\\",\\n    });\\n\\n    console.log(result);\\n  } catch (e) {\\n    console.error(e);\\n  }\\n})();\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Step 4\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Post a picture\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"import fs from \\\"fs\\\";\\nimport * as dotenv from \\\"dotenv\\\";\\nimport OAuth from \\\"oauth\\\";\\nimport fetch, { RequestInit } from \\\"node-fetch\\\";\\nimport { FormData, File } from \\\"formdata-node\\\";\\n\\ndotenv.config(); // loads the .env file into variables like process.ENV.VARIABLE\\n\\nasync function mfetch(url: string, params: RequestInit) {\\n  const response = await fetch(url, params);\\n\\n  if (!response.ok) {\\n    const text = await response.text();\\n    throw new Error(`HTTP ${response.status} ${text}`);\\n  }\\n  return response.json() as Promise\u003cRecord\u003cstring, unknown\u003e\u003e;\\n}\\n\\nfunction getAuth(oauth: OAuth.OAuth, url: string) {\\n  return oauth.authHeader(\\n    url,\\n    process.env.ACCESS_TOKEN as string,\\n    process.env.ACCESS_TOKEN_SECRET as string,\\n    \\\"post\\\"\\n  );\\n}\\n\\nconst form = new FormData();\\nform.set(\\n  \\\"media\\\",\\n  new File([fs.readFileSync(\\\"coolpicture.png\\\")], \\\"coolpicture.png\\\")\\n);\\n(async () =\u003e {\\n  try {\\n    const client = new OAuth.OAuth(\\n      \\\"https://api.twitter.com/oauth/request_token\\\",\\n      \\\"https://api.twitter.com/oauth/access_token\\\",\\n      process.env.API_KEY as string,\\n      process.env.API_SECRET as string,\\n      \\\"1.0A\\\",\\n      null,\\n      \\\"HMAC-SHA1\\\"\\n    );\\n\\n    const picEndpoint = \\\"https://upload.twitter.com/1.1/media/upload.json\\\";\\n    const tweetEndpoint = \\\"https://api.twitter.com/2/tweets\\\";\\n    const clientName = \\\"v3CreateTweetJS\\\";\\n\\n    // Step 1: Upload picture to the \\\"media\\\" endpoint of the twitter API, this\\n    // is technically using \\\"v1\\\" of the twitter API\\n    const r = await mfetch(picEndpoint, {\\n      headers: {\\n        Authorization: getAuth(client, picEndpoint),\\n        \\\"user-agent\\\": clientName,\\n      },\\n      method: \\\"POST\\\",\\n      //@ts-ignore\\n      body: form,\\n    });\\n\\n    // Step 2: Post the tweet to the \\\"tweet\\\" endpoint of the twitter API, this is\\n    // technically using \\\"v2\\\" of the twitter API, and referencing the\\n    // \\\"media_id_string\\\" variable we got from the first request we made\\n    const result = await mfetch(tweetEndpoint, {\\n      headers: {\\n        Authorization: getAuth(client, tweetEndpoint),\\n        \\\"user-agent\\\": clientName,\\n        \\\"content-type\\\": \\\"application/json\\\",\\n        accept: \\\"application/json\\\",\\n      },\\n      body: JSON.stringify({\\n        media: { media_ids: [r.media_id_string] },\\n        text: `Hello world with picture`,\\n      }),\\n      method: \\\"post\\\",\\n    });\\n\\n    console.log(result);\\n  } catch (e) {\\n    console.error(e);\\n  }\\n})();\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Step 6\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Create a package.json that can build these typescript files\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"{\\n  \\\"dependencies\\\": {\\n    \\\"canvas\\\": \\\"^2.9.3\\\",\\n    \\\"dotenv\\\": \\\"^16.0.1\\\",\\n    \\\"formdata-node\\\": \\\"^4.4.1\\\",\\n    \\\"node-fetch\\\": \\\"^3.2.10\\\",\\n    \\\"oauth\\\": \\\"^0.10.0\\\",\\n    \\\"typescript\\\": \\\"^4.7.4\\\"\\n  },\\n  \\\"license\\\": \\\"MIT\\\",\\n  \\\"type\\\": \\\"module\\\",\\n  \\\"devDependencies\\\": {\\n    \\\"@types/node\\\": \\\"^18.7.9\\\",\\n    \\\"@types/oauth\\\": \\\"^0.9.1\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"build\\\": \\\"tsc\\\",\\n    \\\"prepost\\\": \\\"yarn build\\\",\\n    \\\"post\\\": \\\"node dist/bot.js\\\"\\n  }\\n}\\n\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"And tsconfig.json file\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"{\\n  \\\"include\\\": [\\\"src\\\"],\\n  \\\"compilerOptions\\\": {\\n    \\\"target\\\": \\\"esnext\\\",\\n    \\\"outDir\\\": \\\"dist\\\",\\n    \\\"types\\\": [\\\"node\\\"],\\n    \\\"lib\\\": [\\\"dom\\\", \\\"esnext\\\"],\\n    \\\"moduleResolution\\\": \\\"node\\\",\\n    \\\"declaration\\\": true,\\n    \\\"sourceMap\\\": true,\\n    \\\"strict\\\": true,\\n    \\\"noImplicitReturns\\\": true,\\n    \\\"noFallthroughCasesInSwitch\\\": true,\\n    \\\"esModuleInterop\\\": true,\\n    \\\"allowJs\\\": true\\n  }\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"This compiles the \", _jsx(_components.code, {\n        children: \"src\"\n      }), \" folder and outputs js files to the \", _jsx(_components.code, {\n        children: \"dist\"\n      }), \" directory,\\nand we can run the \", _jsx(_components.code, {\n        children: \"dist/bot.js\"\n      }), \" file with node to post the file\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Step 5\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Add a github action!\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Create a file with the path \", _jsx(_components.code, {\n        children: \".github/workflows/post.yml\"\n      }), \" in your repo, which\\nruns \", _jsx(_components.code, {\n        children: \"dist/bot.js\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"This uses the github cron/scheduled workflow\\n\", _jsx(_components.a, {\n        href: \"https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule\",\n        children: \"https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"This posts at 6:30pm daily, near when this post was written (see \", _jsx(_components.a, {\n        href: \"crontab.guru\",\n        children: \"https://crontab.guru/\"\n      }), \" for more info)\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"on:\\n  schedule:\\n    - cron: '30 18 * * *'\\n\\njobs:\\n  test:\\n    name: Post tweet\\n    runs-on: ubuntu-latest\\n    steps:\\n      - uses: actions/checkout@v2\\n      - name: Use Node.js 14.x\\n        uses: actions/setup-node@v2\\n        with:\\n          node-version: '14'\\n      - name: Install deps (with cache)\\n        uses: bahmutov/npm-install@v1\\n      - name: Post tweet\\n        run: yarn post\\n\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Conclusion\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"See https://github.com/cmdcolin/twitter_fractal_bot for working example\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2022-08-26-twitterbot"},"buildId":"AY7vAmAKG-pC-jWc64xzi","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>