<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/d19cfa26cd1ef694.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-7b15b647f74e5256.js"/><script src="/_next/static/chunks/fd9d1056-a3cb5f355ce7bbbb.js" async=""></script><script src="/_next/static/chunks/582-f8601f899e9022e1.js" async=""></script><script src="/_next/static/chunks/main-app-cd804b1a70ba284d.js" async=""></script><script src="/_next/static/chunks/231-e83b3341411c9548.js" async=""></script><script src="/_next/static/chunks/app/page-963abe75e6aad650.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bid%5D/page-eab76b8f11630cf7.js" async=""></script><title>Be careful when you rename an optional &quot;prop&quot; in typescript</title><meta name="description" content="A blog"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body><div class="mb-8"><a href="/">Misc scribbles</a></div><div class="lg:w-1/2"><div><h1>Be careful when you rename an optional &quot;prop&quot; in typescript</h1><h4>2024-09-18</h4></div><div><h2 id="scenario"><a aria-hidden="true" tabindex="-1" href="#scenario"><a href="#scenario" style="margin-right: 10px">#</a></a>Scenario</h2>
<p>The "doStuff" team at your company created a function for you to use</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="typescript" data-theme="one-dark-pro"><code data-language="typescript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> doStuff</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75;font-style:italic">x</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">y</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">z</span><span style="color:#ABB2BF"> }: { </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">number</span><span style="color:#ABB2BF">; </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">number</span><span style="color:#ABB2BF">; </span><span style="color:#E06C75">z</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">number</span><span style="color:#ABB2BF"> }) {</span></span>
<span data-line=""><span style="color:#E5C07B">  console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">z</span><span style="color:#ABB2BF"> })</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<p>and then you diligently call it in your code like this</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="typescript" data-theme="one-dark-pro"><code data-language="typescript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> obj</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">z</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> }</span></span>
<span data-line=""><span style="color:#61AFEF">doStuff</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">obj</span><span style="color:#ABB2BF">)</span></span></code></pre></figure>
<p>all fine and good</p>
<h2 id="later-on-the-optional-prop-is-renamed"><a aria-hidden="true" tabindex="-1" href="#later-on-the-optional-prop-is-renamed"><a href="#later-on-the-optional-prop-is-renamed" style="margin-right: 10px">#</a></a>Later on, the optional "prop" is renamed</h2>
<p>The <code>doStuff</code> team says, well, it's not really a true "z coordinate"....it's
more of a "z-index" so they change the function definition to be</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="typescript" data-theme="one-dark-pro"><code data-language="typescript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> doStuff</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75;font-style:italic">x</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">y</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">zIndex</span><span style="color:#ABB2BF"> }: { </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">number</span><span style="color:#ABB2BF">; </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">number</span><span style="color:#ABB2BF">; </span><span style="color:#E06C75">zIndex</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">number</span><span style="color:#ABB2BF"> }) {</span></span>
<span data-line=""><span style="color:#E5C07B">  console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">zIndex</span><span style="color:#ABB2BF"> })</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<h2 id="now-you-might-have-a-bug"><a aria-hidden="true" tabindex="-1" href="#now-you-might-have-a-bug"><a href="#now-you-might-have-a-bug" style="margin-right: 10px">#</a></a>Now you might have a bug</h2>
<p>Since <code>zIndex</code> is optional, typescript will not warn you about <code>zIndex</code> not
being supplied by your existing code. Typescript is also not bothered that you
have this "rider" variable <code>z</code> that "does nothing" in this case.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="typescript" data-theme="one-dark-pro"><code data-language="typescript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> obj</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">z</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> }</span></span>
<span data-line=""><span style="color:#61AFEF">doStuff</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">obj</span><span style="color:#ABB2BF">) </span><span style="color:#7F848E;font-style:italic">// no typescript error, z is no longer used, zIndex is optional, and you don't get the behavior you want</span></span></code></pre></figure>
<h2 id="but-wait-why-didnt-typescript-catch-it"><a aria-hidden="true" tabindex="-1" href="#but-wait-why-didnt-typescript-catch-it"><a href="#but-wait-why-didnt-typescript-catch-it" style="margin-right: 10px">#</a></a>But wait, why didn't typescript catch it?</h2>
<p>Here is the funny thing:</p>
<ul>
<li>
<p>Typescript DOES NOT catch this issue when you pass it via this separately
created "obj" variable.</p>
</li>
<li>
<p>Typescript DOES(!!!) catch this issue when you pass it directly to the
function (as an "object literal")</p>
</li>
</ul>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="typescript" data-theme="one-dark-pro"><code data-language="typescript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#61AFEF">doStuff</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">z</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> }) </span><span style="color:#7F848E;font-style:italic">// ERROR!</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// Object literal may only specify known properties, and 'z' does not exist in type '{ x: number; y: number; zIndex?: number | undefined; }'.</span></span></code></pre></figure>
<p>Demo playground</p>
<p><a href="https://www.typescriptlang.org/play/?#code/FAMwrgdgxgLglgewgAgCYIMozCEAKAb2QA8AaZAT3IC9kBfALmSOKYjAFsAjAUwCcA3JTadeg5NQD8I7v3oBKZsGTIoSAM4IANjwB0WhAHNCJclQkLgdYKEixEKdFhwgATCbKUaASQioexPRMLDJiQhSh-ELUvv7E0sjssnwKSipqEJo6+kYeZj5+AZbWNsBO2LiErACMpBGupNQMAMx08qUA9B1oCDzqqgCGMFAAFshwMGWYFW5VDLX1jS1tNl09fRAA5DCDw2MTwBnqOwhcAFYAvAQ1dQwNTa1Tzrjup2ftpUA">https://www.typescriptlang.org/play/?#code/FAMwrgdgxgLglgewgAgCYIMozCEAKAb2QA8AaZAT3IC9kBfALmSOKYjAFsAjAUwCcA3JTadeg5NQD8I7v3oBKZsGTIoSAM4IANjwB0WhAHNCJclQkLgdYKEixEKdFhwgATCbKUaASQioexPRMLDJiQhSh-ELUvv7E0sjssnwKSipqEJo6+kYeZj5+AZbWNsBO2LiErACMpBGupNQMAMx08qUA9B1oCDzqqgCGMFAAFshwMGWYFW5VDLX1jS1tNl09fRAA5DCDw2MTwBnqOwhcAFYAvAQ1dQwNTa1Tzrjup2ftpUA</a></p>
<h2 id="footnote"><a aria-hidden="true" tabindex="-1" href="#footnote"><a href="#footnote" style="margin-right: 10px">#</a></a>Footnote</h2>
<p>I am certainly not the only person to come across this "topic/issue", and people
often come across it in different contexts.</p>
<p>My particular take away is to "be careful when you rename optional props". Of
course, changing any API comes with risks, but this one particularly :)</p>
<h2 id="more-resources"><a aria-hidden="true" tabindex="-1" href="#more-resources"><a href="#more-resources" style="margin-right: 10px">#</a></a>More resources</h2>
<p>Typescript Deep Dive - "Freshness"</p>
<p><a href="https://basarat.gitbook.io/typescript/type-system/freshness">https://basarat.gitbook.io/typescript/type-system/freshness</a></p>
<h2 id="follow-up"><a aria-hidden="true" tabindex="-1" href="#follow-up"><a href="#follow-up" style="margin-right: 10px">#</a></a>Follow up</h2>
<p>This post was given lots of downvotes in /r/typescript and sarcasm that "no duh,
breaking changes are breaking".</p>
<p>However, some helpful comments were made also. Read on
<a href="https://www.reddit.com/r/typescript/comments/1fk1rqe/be_careful_when_you_rename_an_optional_prop_in/">https://www.reddit.com/r/typescript/comments/1fk1rqe/be_careful_when_you_rename_an_optional_prop_in/</a></p>
<p>I think maybe people are distracted that I posited this as the "doStuff team" vs
"you", but keep in mind this could just be your left brain vs right brain in an
actively developed codebase</p></div><div class="mt-5"></div></div><footer class="mt-16"><a class="m-2" href="/">Home</a><a class="m-2" href="/archive">Blog archive</a><a class="m-2" href="https://github.com/cmdcolin/">Github</a><a class="m-2" href="/projects">Projects</a><a class="m-2" href="/photos">Photos</a><a class="m-2" href="/books">Books</a><a class="m-2" href="/about">About</a></footer><script src="/_next/static/chunks/webpack-7b15b647f74e5256.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/d19cfa26cd1ef694.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[5751,[],\"\"]\n5:I[9275,[],\"\"]\n7:I[1343,[],\"\"]\n8:I[231,[\"231\",\"static/chunks/231-e83b3341411c9548.js\",\"931\",\"static/chunks/app/page-963abe75e6aad650.js\"],\"\"]\na:I[6130,[],\"\"]\n6:[\"id\",\"2024-09-18-renamingoptional\",\"d\"]\nb:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"Smw1zfhfEZvVcSZlavRpz\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"posts\",\"2024-09-18-renamingoptional\"],\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"2024-09-18-renamingoptional\",\"d\"],{\"children\":[\"__PAGE__?{\\\"id\\\":\\\"2024-09-18-renamingoptional\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"2024-09-18-renamingoptional\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L3\",\"$L4\",null],null],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$6\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d19cfa26cd1ef694.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[\"$\",\"$L8\",null,{\"href\":\"/\",\"children\":\"Misc scribbles\"}]}],[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}],[\"$\",\"footer\",null,{\"className\":\"mt-16\",\"children\":[[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/\",\"children\":\"Home\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/archive\",\"children\":\"Blog archive\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"https://github.com/cmdcolin/\",\"children\":\"Github\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/projects\",\"children\":\"Projects\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/photos\",\"children\":\"Photos\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/books\",\"children\":\"Books\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/about\",\"children\":\"About\"}]]}]]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L9\"],\"globalErrorComponent\":\"$a\",\"missingSlots\":\"$Wb\"}]\n"])</script><script>self.__next_f.push([1,"d:I[1458,[\"722\",\"static/chunks/app/posts/%5Bid%5D/page-eab76b8f11630cf7.js\"],\"default\"]\nc:T29ba,"])</script><script>self.__next_f.push([1,"\u003ch2 id=\"scenario\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#scenario\"\u003e\u003ca href=\"#scenario\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eScenario\u003c/h2\u003e\n\u003cp\u003eThe \"doStuff\" team at your company created a function for you to use\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"typescript\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"typescript\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e doStuff\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003ey\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003ez\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }: { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003enumber\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e; \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ey\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003enumber\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e; \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ez\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003enumber\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e  console\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003elog\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ey\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ez\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003eand then you diligently call it in your code like this\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"typescript\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"typescript\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e obj\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ey\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ez\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e3\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003edoStuff\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eobj\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003eall fine and good\u003c/p\u003e\n\u003ch2 id=\"later-on-the-optional-prop-is-renamed\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#later-on-the-optional-prop-is-renamed\"\u003e\u003ca href=\"#later-on-the-optional-prop-is-renamed\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eLater on, the optional \"prop\" is renamed\u003c/h2\u003e\n\u003cp\u003eThe \u003ccode\u003edoStuff\u003c/code\u003e team says, well, it's not really a true \"z coordinate\"....it's\nmore of a \"z-index\" so they change the function definition to be\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"typescript\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"typescript\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e doStuff\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003ey\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003ezIndex\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }: { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003enumber\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e; \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ey\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003enumber\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e; \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ezIndex\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003enumber\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e  console\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003elog\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ey\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ezIndex\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003ch2 id=\"now-you-might-have-a-bug\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#now-you-might-have-a-bug\"\u003e\u003ca href=\"#now-you-might-have-a-bug\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eNow you might have a bug\u003c/h2\u003e\n\u003cp\u003eSince \u003ccode\u003ezIndex\u003c/code\u003e is optional, typescript will not warn you about \u003ccode\u003ezIndex\u003c/code\u003e not\nbeing supplied by your existing code. Typescript is also not bothered that you\nhave this \"rider\" variable \u003ccode\u003ez\u003c/code\u003e that \"does nothing\" in this case.\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"typescript\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"typescript\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e obj\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ey\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ez\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e3\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003edoStuff\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eobj\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// no typescript error, z is no longer used, zIndex is optional, and you don't get the behavior you want\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003ch2 id=\"but-wait-why-didnt-typescript-catch-it\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#but-wait-why-didnt-typescript-catch-it\"\u003e\u003ca href=\"#but-wait-why-didnt-typescript-catch-it\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eBut wait, why didn't typescript catch it?\u003c/h2\u003e\n\u003cp\u003eHere is the funny thing:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eTypescript DOES NOT catch this issue when you pass it via this separately\ncreated \"obj\" variable.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTypescript DOES(!!!) catch this issue when you pass it directly to the\nfunction (as an \"object literal\")\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"typescript\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"typescript\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003edoStuff\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ey\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ez\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e3\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }) \u003c/span\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// ERROR!\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// Object literal may only specify known properties, and 'z' does not exist in type '{ x: number; y: number; zIndex?: number | undefined; }'.\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003eDemo playground\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.typescriptlang.org/play/?#code/FAMwrgdgxgLglgewgAgCYIMozCEAKAb2QA8AaZAT3IC9kBfALmSOKYjAFsAjAUwCcA3JTadeg5NQD8I7v3oBKZsGTIoSAM4IANjwB0WhAHNCJclQkLgdYKEixEKdFhwgATCbKUaASQioexPRMLDJiQhSh-ELUvv7E0sjssnwKSipqEJo6+kYeZj5+AZbWNsBO2LiErACMpBGupNQMAMx08qUA9B1oCDzqqgCGMFAAFshwMGWYFW5VDLX1jS1tNl09fRAA5DCDw2MTwBnqOwhcAFYAvAQ1dQwNTa1Tzrjup2ftpUA\"\u003ehttps://www.typescriptlang.org/play/?#code/FAMwrgdgxgLglgewgAgCYIMozCEAKAb2QA8AaZAT3IC9kBfALmSOKYjAFsAjAUwCcA3JTadeg5NQD8I7v3oBKZsGTIoSAM4IANjwB0WhAHNCJclQkLgdYKEixEKdFhwgATCbKUaASQioexPRMLDJiQhSh-ELUvv7E0sjssnwKSipqEJo6+kYeZj5+AZbWNsBO2LiErACMpBGupNQMAMx08qUA9B1oCDzqqgCGMFAAFshwMGWYFW5VDLX1jS1tNl09fRAA5DCDw2MTwBnqOwhcAFYAvAQ1dQwNTa1Tzrjup2ftpUA\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"footnote\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote\"\u003e\u003ca href=\"#footnote\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote\u003c/h2\u003e\n\u003cp\u003eI am certainly not the only person to come across this \"topic/issue\", and people\noften come across it in different contexts.\u003c/p\u003e\n\u003cp\u003eMy particular take away is to \"be careful when you rename optional props\". Of\ncourse, changing any API comes with risks, but this one particularly :)\u003c/p\u003e\n\u003ch2 id=\"more-resources\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#more-resources\"\u003e\u003ca href=\"#more-resources\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eMore resources\u003c/h2\u003e\n\u003cp\u003eTypescript Deep Dive - \"Freshness\"\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://basarat.gitbook.io/typescript/type-system/freshness\"\u003ehttps://basarat.gitbook.io/typescript/type-system/freshness\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"follow-up\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#follow-up\"\u003e\u003ca href=\"#follow-up\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFollow up\u003c/h2\u003e\n\u003cp\u003eThis post was given lots of downvotes in /r/typescript and sarcasm that \"no duh,\nbreaking changes are breaking\".\u003c/p\u003e\n\u003cp\u003eHowever, some helpful comments were made also. Read on\n\u003ca href=\"https://www.reddit.com/r/typescript/comments/1fk1rqe/be_careful_when_you_rename_an_optional_prop_in/\"\u003ehttps://www.reddit.com/r/typescript/comments/1fk1rqe/be_careful_when_you_rename_an_optional_prop_in/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI think maybe people are distracted that I posited this as the \"doStuff team\" vs\n\"you\", but keep in mind this could just be your left brain vs right brain in an\nactively developed codebase\u003c/p\u003e"])</script><script>self.__next_f.push([1,"4:[\"$\",\"div\",null,{\"className\":\"lg:w-1/2\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h1\",null,{\"children\":\"Be careful when you rename an optional \\\"prop\\\" in typescript\"}],[\"$\",\"h4\",null,{\"children\":\"2024-09-18\"}]]}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$c\"}}],[\"$\",\"$Ld\",null,{}]]}]\n9:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Be careful when you rename an optional \\\"prop\\\" in typescript\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"A blog\"}]]\n3:null\n"])</script></body></html>