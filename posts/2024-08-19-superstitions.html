<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/d19cfa26cd1ef694.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-7b15b647f74e5256.js"/><script src="/_next/static/chunks/fd9d1056-a3cb5f355ce7bbbb.js" async=""></script><script src="/_next/static/chunks/582-f9ccb69edeb4b970.js" async=""></script><script src="/_next/static/chunks/main-app-cd804b1a70ba284d.js" async=""></script><script src="/_next/static/chunks/231-142f89de81886a79.js" async=""></script><script src="/_next/static/chunks/app/page-963abe75e6aad650.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bid%5D/page-eab76b8f11630cf7.js" async=""></script><title>Exorcise the superstitions out of your codebase with @typescript-eslint/no-unnecessary-condition and noUncheckedIndexedAccess</title><meta name="description" content="A blog"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body><div class="mb-8"><a href="/">Misc scribbles</a></div><div class="lg:w-1/2"><div><h1>Exorcise the superstitions out of your codebase with @typescript-eslint/no-unnecessary-condition and noUncheckedIndexedAccess</h1><h4>2024-08-19</h4></div><div><p>As we are headed into late summer, we get a nice chill day or two that reminds
us that fall is here, which of course reminds us of halloween, and then of all
the superstition that we hold about the bugs lurking in our codebases. Why does
the code say if(variable!==undefined) here when typescript tells us that it this
would never happen? Well, what would happen if we just...deleted that?</p>
<p>Some possible scenarios</p>
<ol>
<li>Code explodes</li>
<li>Code works</li>
<li>Code kind of works but blows up at a later time when you least expect it</li>
</ol>
<p>Is there a way we could purge these "superstitious lines" from our codebase?</p>
<p>There might be. Two things that can help</p>
<ol>
<li>The @typescript-eslint/no-unnecessary-condition lint rule
<a href="https://typescript-eslint.io/rules/no-unnecessary-condition/">https://typescript-eslint.io/rules/no-unnecessary-condition/</a></li>
</ol>
<p>This rule is very good at tracking down these "unnecessary" conditions. But
there is a tricky situation where unexpected undefineds often come up, and that
is in accessing a property on an object.</p>
<p>Typescript will tell us that accessing a property of a Record&#x3C;string,string> is
a string, but it could be undefined if the property was not in the object. This
is where noUncheckedIndexedAccess comes in: it makes you more carefully address
this scenario.</p>
<p>I have written previously about this rule and how it's a bit of a burden to
enable <a href="https://cmdcolin.github.io/posts/2023-09-27-areyousure">https://cmdcolin.github.io/posts/2023-09-27-areyousure</a></p>
<p>But, given that it is a powerful force for</p></div><div class="mt-5"></div></div><footer class="mt-16"><a class="m-2" href="/">Home</a><a class="m-2" href="/archive">Blog archive</a><a class="m-2" href="https://github.com/cmdcolin/">Github</a><a class="m-2" href="/projects">Projects</a><a class="m-2" href="/photos">Photos</a><a class="m-2" href="/books">Books</a><a class="m-2" href="/about">About</a></footer><script src="/_next/static/chunks/webpack-7b15b647f74e5256.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/d19cfa26cd1ef694.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[5751,[],\"\"]\n5:I[9275,[],\"\"]\n7:I[1343,[],\"\"]\n8:I[231,[\"231\",\"static/chunks/231-142f89de81886a79.js\",\"931\",\"static/chunks/app/page-963abe75e6aad650.js\"],\"\"]\na:I[6130,[],\"\"]\n6:[\"id\",\"2024-08-19-superstitions\",\"d\"]\nb:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d19cfa26cd1ef694.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"buildId\":\"K20rFW2hkljAk_WX3uOqI\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/2024-08-19-superstitions\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"2024-08-19-superstitions\",\"d\"],{\"children\":[\"__PAGE__?{\\\"id\\\":\\\"2024-08-19-superstitions\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"2024-08-19-superstitions\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L3\",\"$L4\"],null],null]},[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$6\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[\"$\",\"$L8\",null,{\"href\":\"/\",\"children\":\"Misc scribbles\"}]}],[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}],[\"$\",\"footer\",null,{\"className\":\"mt-16\",\"children\":[[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/\",\"children\":\"Home\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/archive\",\"children\":\"Blog archive\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"https://github.com/cmdcolin/\",\"children\":\"Github\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/projects\",\"children\":\"Projects\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/photos\",\"children\":\"Photos\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/books\",\"children\":\"Books\"}],[\"$\",\"$L8\",null,{\"className\":\"m-2\",\"href\":\"/about\",\"children\":\"About\"}]]}]]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L9\"],\"globalErrorComponent\":\"$a\",\"missingSlots\":\"$Wb\"}]]\n"])</script><script>self.__next_f.push([1,"d:I[1458,[\"722\",\"static/chunks/app/posts/%5Bid%5D/page-eab76b8f11630cf7.js\"],\"default\"]\nc:T66c,\u003cp\u003eAs we are headed into late summer, we get a nice chill day or two that reminds\nus that fall is here, which of course reminds us of halloween, and then of all\nthe superstition that we hold about the bugs lurking in our codebases. Why does\nthe code say if(variable!==undefined) here when typescript tells us that it this\nwould never happen? Well, what would happen if we just...deleted that?\u003c/p\u003e\n\u003cp\u003eSome possible scenarios\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eCode explodes\u003c/li\u003e\n\u003cli\u003eCode works\u003c/li\u003e\n\u003cli\u003eCode kind of works but blows up at a later time when you least expect it\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eIs there a way we could purge these \"superstitious lines\" from our codebase?\u003c/p\u003e\n\u003cp\u003eThere might be. Two things that can help\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eThe @typescript-eslint/no-unnecessary-condition lint rule\n\u003ca href=\"https://typescript-eslint.io/rules/no-unnecessary-condition/\"\u003ehttps://typescript-eslint.io/rules/no-unnecessary-condition/\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThis rule is very good at tracking down these \"unnecessary\" conditions. But\nthere is a tricky situation where unexpected undefineds often come up, and that\nis in accessing a property on an object.\u003c/p\u003e\n\u003cp\u003eTypescript will tell us that accessing a property of a Record\u0026#x3C;string,string\u003e is\na string, but it could be undefined if the property was not in the object. This\nis where noUncheckedIndexedAccess comes in: it makes you more carefully address\nthis scenario.\u003c/p\u003e\n\u003cp\u003eI have written previously about this rule and how it's a bit of a burden to\nenable \u003ca href=\"https://cmdcolin.github.io/posts/2023-09-27-areyousure\"\u003ehttps://cmdcolin.github.io/posts/2023-09-27-areyousure\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eBut, given that it is a powerful force for\u003c/p\u003e4:[\"$\",\"div\",null,{\"className\":\"lg:w-1/2\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h1\",null,{\"children\":\"Exorcise the superstitions out of your codebase with @typescript-eslint/no-unnecessary-condition and noUncheckedIndexedAccess\"}],[\"$\",\"h4\",null,{\"children\":\"2024-08-19\"}]]}],[\"$\",\"div\",null,{\"danger"])</script><script>self.__next_f.push([1,"ouslySetInnerHTML\":{\"__html\":\"$c\"}}],[\"$\",\"$Ld\",null,{}]]}]\n9:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Exorcise the superstitions out of your codebase with @typescript-eslint/no-unnecessary-condition and noUncheckedIndexedAccess\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"A blog\"}]]\n3:null\n"])</script></body></html>