<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/cc26266985a3f391.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-2a268661fcd08b6d.js"/><script src="/_next/static/chunks/4bd1b696-7bed151428114f76.js" async=""></script><script src="/_next/static/chunks/517-89a7d161767c2947.js" async=""></script><script src="/_next/static/chunks/main-app-e726294d98178033.js" async=""></script><script src="/_next/static/chunks/173-c4204d8a61969f1d.js" async=""></script><script src="/_next/static/chunks/app/page-57a57e19ddd8ea21.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bid%5D/page-b9bbbdca7d2d84ad.js" async=""></script><title>Making a serverless website for photo and video upload pt. 2</title><meta name="description" content="A blog"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div class="mb-8"><a href="/">Misc scribbles</a></div><div class="lg:w-1/2 m-auto"><div><h1>Making a serverless website for photo and video upload pt. 2</h1><h4>2020-12-26</h4></div><div><p>This post follows onhttps://cmdcolin.github.io/2020-12-24.html</p>
<p>It is possible I zoomed ahead too fast to make this a continuous tutorial, but
overall I just wanted to post an update</p>
<p>In pt. 1 I learned how to use the <code>aws-sam</code> CLI tool. This was a great insight
for me about automating deployments. I can now simply run <code>sam deploy</code> and it
will create new dynamodb tables, lambda functions, etc.</p>
<p>After writing pt 1. I converted the existing vue-js app that was in the aws
tutorial and converted it to react. Then I extended the app to allow</p>
<ul>
<li>Posting comments on photos</li>
<li>Uploading multiple files</li>
<li>Uploading videos etc.</li>
</ul>
<p>It will be hard to summarize all the changes since now the app has taken off a
little bit but it looks like this:</p>
<p>Repo structure</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="sh" data-theme="one-dark-pro"><code data-language="sh" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#61AFEF">./frontend</span></span>
<span data-line=""><span style="color:#61AFEF">./frontend/src/App.tsx</span></span>
<span data-line=""><span style="color:#61AFEF">./lambdas/</span></span>
<span data-line=""><span style="color:#61AFEF">./lambdas/postFile</span></span>
<span data-line=""><span style="color:#61AFEF">./lambdas/getFiles</span></span>
<span data-line=""><span style="color:#61AFEF">./lambdas/postComment</span></span>
<span data-line=""><span style="color:#61AFEF">./lambdas/getComments</span></span></code></pre></figure>
<p>Here is a detailed code for uploading the file. We upload one file at a time,
but the client code post to the lambda endpoint individually for each file</p>
<p>This generates a pre-signed URL to allow the client-side JS (not the lambda
itself) to directly upload to S3, and also posts a row in the S3 to the filename
that will. It is very similar code in to
<a href="https://cmdcolin.github.io/2020-12-24.html">https://cmdcolin.github.io/2020-12-24.html</a></p>
<p>./lambdas/postFile/app.js</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="js" data-theme="one-dark-pro"><code data-language="js" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#98C379">'use strict'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> AWS</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> require</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'aws-sdk'</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> multipart</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> require</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'./multipart'</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#E5C07B">AWS</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">config</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">update</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">region</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">process</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">env</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">AWS_REGION</span><span style="color:#ABB2BF"> })</span></span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> s3</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> new</span><span style="color:#E5C07B"> AWS</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">S3</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// Change this value to adjust the signed URL's expiration</span></span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> URL_EXPIRATION_SECONDS</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 300</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// Main Lambda entry point</span></span>
<span data-line=""><span style="color:#E5C07B">exports</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">handler</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> async</span><span style="color:#E06C75;font-style:italic"> event</span><span style="color:#C678DD"> =></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> getUploadURL</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">event</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">AWS_REGION</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">region</span><span style="color:#ABB2BF"> } </span><span style="color:#56B6C2">=</span><span style="color:#E5C07B"> process</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">env</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> dynamodb</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> new</span><span style="color:#E5C07B"> AWS</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">DynamoDB</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">apiVersion</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'2012-08-10'</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">region</span><span style="color:#ABB2BF"> })</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">async</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> uploadPic</span><span style="color:#ABB2BF">({</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  timestamp</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  filename</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  message</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  user</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  date</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  contentType</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">}) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> params</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">    Item</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#E06C75">      timestamp</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#E06C75">        N</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E06C75">timestamp</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">      },</span></span>
<span data-line=""><span style="color:#E06C75">      filename</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#E06C75">        S</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">filename</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">      },</span></span>
<span data-line=""><span style="color:#E06C75">      message</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#E06C75">        S</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">message</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">      },</span></span>
<span data-line=""><span style="color:#E06C75">      user</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#E06C75">        S</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">user</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">      },</span></span>
<span data-line=""><span style="color:#E06C75">      date</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#E06C75">        S</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">date</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">      },</span></span>
<span data-line=""><span style="color:#E06C75">      contentType</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#E06C75">        S</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">contentType</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">      },</span></span>
<span data-line=""><span style="color:#ABB2BF">    },</span></span>
<span data-line=""><span style="color:#E06C75">    TableName</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'files'</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> dynamodb</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">putItem</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">params</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">promise</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#61AFEF"> getUploadURL</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> async</span><span style="color:#C678DD"> function</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">event</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">  try</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> data</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> multipart</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">parse</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">event</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">    const</span><span style="color:#ABB2BF"> { </span><span style="color:#E5C07B">filename</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">contentType</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">user</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">message</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">date</span><span style="color:#ABB2BF"> } </span><span style="color:#56B6C2">=</span><span style="color:#E06C75"> data</span></span>
<span data-line=""><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> timestamp</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> +</span><span style="color:#E5C07B">Date</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">now</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> Key</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> `</span><span style="color:#C678DD">${</span><span style="color:#E06C75">timestamp</span><span style="color:#C678DD">}</span><span style="color:#98C379">-</span><span style="color:#C678DD">${</span><span style="color:#E06C75">filename</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#7F848E;font-style:italic"> // Get signed URL from S3</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> s3Params</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">      Bucket</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">process</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">env</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">UploadBucket</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      Key</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      Expires</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">URL_EXPIRATION_SECONDS</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      ContentType</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">contentType</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">      // This ACL makes the uploaded object publicly readable. You must also</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">      // uncomment the extra permission for the Lambda function in the SAM</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">      // template.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#E06C75">      ACL</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'public-read'</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> uploadURL</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#E5C07B"> s3</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getSignedUrlPromise</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'putObject'</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">s3Params</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">    await</span><span style="color:#61AFEF"> uploadPic</span><span style="color:#ABB2BF">({</span></span>
<span data-line=""><span style="color:#E06C75">      timestamp</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      filename</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">Key</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      message</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      user</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      date</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      contentType</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">    })</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">    return</span><span style="color:#E5C07B"> JSON</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">stringify</span><span style="color:#ABB2BF">({</span></span>
<span data-line=""><span style="color:#E06C75">      uploadURL</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      Key</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">    })</span></span>
<span data-line=""><span style="color:#ABB2BF">  } </span><span style="color:#C678DD">catch</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> response</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">      statusCode</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">500</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      body</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">JSON</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">stringify</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">message</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E06C75">e</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF"> }),</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""><span style="color:#C678DD">    return</span><span style="color:#E06C75"> response</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<p>./lambdas/getFiles/app.js</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="js" data-theme="one-dark-pro"><code data-language="js" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#7F848E;font-style:italic">// eslint-disable-next-line import/no-unresolved</span></span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> AWS</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> require</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'aws-sdk'</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">AWS_REGION</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">region</span><span style="color:#ABB2BF"> } </span><span style="color:#56B6C2">=</span><span style="color:#E5C07B"> process</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">env</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> docClient</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> new</span><span style="color:#E5C07B"> AWS</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">DynamoDB</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">DocumentClient</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#61AFEF"> getItems</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> function</span><span style="color:#ABB2BF"> () {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> params</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">    TableName</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'files'</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> docClient</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">scan</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">params</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">promise</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#E5C07B">exports</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">handler</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> async</span><span style="color:#E06C75;font-style:italic"> event</span><span style="color:#C678DD"> =></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">  try</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> result</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> getItems</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#C678DD">    return</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">      statusCode</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">200</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      body</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">JSON</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">stringify</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">result</span><span style="color:#ABB2BF">),</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""><span style="color:#ABB2BF">  } </span><span style="color:#C678DD">catch</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">    return</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">      statusCode</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">400</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">      body</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">JSON</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">stringify</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">message</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E06C75">e</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF"> }),</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<p>./frontend/src/App.tsx (excerpt)</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="tsx" data-theme="one-dark-pro"><code data-language="tsx" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">async</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> myfetch</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">params</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">opts</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">any</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> response</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> fetch</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">params</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">opts</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">ok</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">    throw</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> Error</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">`HTTP </span><span style="color:#C678DD">${</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">status</span><span style="color:#C678DD">}</span><span style="color:#C678DD"> ${</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">statusText</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> UploadDialog</span><span style="color:#ABB2BF">({</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  open</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  onClose</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">}: {</span></span>
<span data-line=""><span style="color:#E06C75">  open</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">boolean</span></span>
<span data-line=""><span style="color:#61AFEF">  onClose</span><span style="color:#ABB2BF">: () </span><span style="color:#C678DD">=></span><span style="color:#E5C07B"> void</span></span>
<span data-line=""><span style="color:#ABB2BF">}) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">images</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setImages</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E5C07B">FileList</span><span style="color:#ABB2BF">>()</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">error</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setError</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E5C07B">Error</span><span style="color:#ABB2BF">>()</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">loading</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setLoading</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">false</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">total</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setTotal</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">completed</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setCompleted</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">user</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setUser</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">''</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">message</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setMessage</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">''</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> classes</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> useStyles</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#61AFEF"> handleClose</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#61AFEF">    setError</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">undefined</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#61AFEF">    setLoading</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">false</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#61AFEF">    setImages</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">undefined</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#61AFEF">    setCompleted</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#61AFEF">    setTotal</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#61AFEF">    setMessage</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">''</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#61AFEF">    onClose</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;</span><span style="color:#E5C07B">Dialog</span><span style="color:#D19A66;font-style:italic"> onClose</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">handleClose</span><span style="color:#C678DD">}</span><span style="color:#D19A66;font-style:italic"> open</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">open</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E5C07B">DialogTitle</span><span style="color:#ABB2BF">>upload a file (supports picture or video)&#x3C;/</span><span style="color:#E5C07B">DialogTitle</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E5C07B">DialogContent</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">label</span><span style="color:#D19A66;font-style:italic"> htmlFor</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"user"</span><span style="color:#ABB2BF">>name (optional) &#x3C;/</span><span style="color:#E06C75">label</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">input</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">          type</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"text"</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">          value</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">user</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">          onChange</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75;font-style:italic">event</span><span style="color:#C678DD"> =></span><span style="color:#61AFEF"> setUser</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">event</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">target</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">          id</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"user"</span></span>
<span data-line=""><span style="color:#ABB2BF">        /></span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">br</span><span style="color:#ABB2BF"> /> &#x3C;</span><span style="color:#E06C75">label</span><span style="color:#D19A66;font-style:italic"> htmlFor</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"user"</span><span style="color:#ABB2BF">>message (optional) &#x3C;/</span><span style="color:#E06C75">label</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">input</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">          type</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"text"</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">          value</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">message</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">          onChange</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75;font-style:italic">event</span><span style="color:#C678DD"> =></span><span style="color:#61AFEF"> setMessage</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">event</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">target</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">          id</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"message"</span></span>
<span data-line=""><span style="color:#ABB2BF">        /></span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">br</span><span style="color:#ABB2BF"> /></span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">input</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">          multiple</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">          type</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"file"</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">          onChange</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75;font-style:italic">e</span><span style="color:#C678DD"> =></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">            let</span><span style="color:#E06C75"> files</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> e</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">target</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">files</span></span>
<span data-line=""><span style="color:#C678DD">            if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">files</span><span style="color:#56B6C2"> &#x26;&#x26;</span><span style="color:#E5C07B"> files</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">length</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#61AFEF">              setImages</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">files</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">            }</span></span>
<span data-line=""><span style="color:#ABB2BF">          }</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">        /> </span><span style="color:#C678DD">{</span><span style="color:#E06C75">error</span><span style="color:#C678DD"> ?</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">          &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#D19A66;font-style:italic"> className</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E5C07B">classes</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">error</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">></span><span style="color:#C678DD">{</span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E06C75">error</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">        ) </span><span style="color:#C678DD">:</span><span style="color:#E06C75"> loading</span><span style="color:#C678DD"> ?</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#98C379">          `Uploading...</span><span style="color:#C678DD">${</span><span style="color:#E06C75">completed</span><span style="color:#C678DD">}</span><span style="color:#98C379">/</span><span style="color:#C678DD">${</span><span style="color:#E06C75">total</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span></span>
<span data-line=""><span style="color:#ABB2BF">        ) </span><span style="color:#C678DD">:</span><span style="color:#E06C75"> completed</span><span style="color:#C678DD"> ?</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">          &#x3C;</span><span style="color:#E06C75">h2</span><span style="color:#ABB2BF">>Uploaded &#x3C;/</span><span style="color:#E06C75">h2</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">        ) </span><span style="color:#C678DD">:</span><span style="color:#D19A66"> null</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> &#x3C;</span><span style="color:#E5C07B">DialogActions</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">          &#x3C;</span><span style="color:#E5C07B">Button</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">            style</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#ABB2BF">{ </span><span style="color:#E06C75">textTransform</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'none'</span><span style="color:#ABB2BF"> }</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">            onClick</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{async</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">              try</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">                if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">images</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#61AFEF">                  setLoading</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#61AFEF">                  setError</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">undefined</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#61AFEF">                  setCompleted</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#61AFEF">                  setTotal</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">images</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">length</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">                  await</span><span style="color:#E5C07B"> Promise</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">all</span><span style="color:#ABB2BF">(</span></span>
<span data-line=""><span style="color:#E5C07B">                    Array</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">from</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">images</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#C678DD">async</span><span style="color:#E06C75;font-style:italic"> image</span><span style="color:#C678DD"> =></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">                      const</span><span style="color:#E5C07B"> data</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> FormData</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#E5C07B">                      data</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'message'</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">message</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#E5C07B">                      data</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'user'</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">user</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#E5C07B">                      data</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'date'</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">new</span><span style="color:#61AFEF"> Date</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">toLocaleString</span><span style="color:#ABB2BF">())</span></span>
<span data-line=""><span style="color:#E5C07B">                      data</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'filename'</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">image</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#E5C07B">                      data</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'contentType'</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">image</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">type</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">                      const</span><span style="color:#E5C07B"> res</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> myfetch</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">API_ENDPOINT</span><span style="color:#56B6C2"> +</span><span style="color:#98C379"> '/postFile'</span><span style="color:#ABB2BF">, {</span></span>
<span data-line=""><span style="color:#E06C75">                        method</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'POST'</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">                        body</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">                      })</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">                      await</span><span style="color:#61AFEF"> myfetch</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">res</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">uploadURL</span><span style="color:#ABB2BF">, {</span></span>
<span data-line=""><span style="color:#E06C75">                        method</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'PUT'</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">                        body</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">image</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">                      })</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#61AFEF">                      setCompleted</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">completed</span><span style="color:#C678DD"> =></span><span style="color:#E06C75"> completed</span><span style="color:#56B6C2"> +</span><span style="color:#D19A66"> 1</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">                    }),</span></span>
<span data-line=""><span style="color:#ABB2BF">                  )</span></span>
<span data-line=""><span style="color:#61AFEF">                  setTimeout</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#61AFEF">                    handleClose</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">                  }, </span><span style="color:#D19A66">500</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">                }</span></span>
<span data-line=""><span style="color:#ABB2BF">              } </span><span style="color:#C678DD">catch</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#61AFEF">                setError</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">              }</span></span>
<span data-line=""><span style="color:#ABB2BF">            }</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">            color</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"primary"</span></span>
<span data-line=""><span style="color:#ABB2BF">          ></span></span>
<span data-line=""><span style="color:#ABB2BF">            upload</span></span>
<span data-line=""><span style="color:#ABB2BF">          &#x3C;/</span><span style="color:#E5C07B">Button</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">          &#x3C;</span><span style="color:#E5C07B">Button</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">            onClick</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">handleClose</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">            color</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"primary"</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">            style</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#ABB2BF">{ </span><span style="color:#E06C75">textTransform</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'none'</span><span style="color:#ABB2BF"> }</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">          ></span></span>
<span data-line=""><span style="color:#ABB2BF">            cancel</span></span>
<span data-line=""><span style="color:#ABB2BF">          &#x3C;/</span><span style="color:#E5C07B">Button</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;/</span><span style="color:#E5C07B">DialogActions</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;/</span><span style="color:#E5C07B">DialogContent</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;/</span><span style="color:#E5C07B">Dialog</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">  )</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<p>template.yaml for AWS</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="yaml" data-theme="one-dark-pro"><code data-language="yaml" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#E06C75">AWSTemplateFormatVersion</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">2010-09-09</span></span>
<span data-line=""><span style="color:#E06C75">Transform</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">AWS::Serverless-2016-10-31</span></span>
<span data-line=""><span style="color:#E06C75">Description</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">S3 Uploader</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#E06C75">Resources</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">  filesDynamoDBTable</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">    Type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">AWS::DynamoDB::Table</span></span>
<span data-line=""><span style="color:#E06C75">    Properties</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">      AttributeDefinitions</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">        - </span><span style="color:#E06C75">AttributeName</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'timestamp'</span></span>
<span data-line=""><span style="color:#E06C75">          AttributeType</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'N'</span></span>
<span data-line=""><span style="color:#E06C75">      KeySchema</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">        - </span><span style="color:#E06C75">AttributeName</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'timestamp'</span></span>
<span data-line=""><span style="color:#E06C75">          KeyType</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'HASH'</span></span>
<span data-line=""><span style="color:#E06C75">      ProvisionedThroughput</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">        ReadCapacityUnits</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'5'</span></span>
<span data-line=""><span style="color:#E06C75">        WriteCapacityUnits</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'5'</span></span>
<span data-line=""><span style="color:#E06C75">      TableName</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'files'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">  # HTTP API</span></span>
<span data-line=""><span style="color:#E06C75">  MyApi</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">    Type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">AWS::Serverless::HttpApi</span></span>
<span data-line=""><span style="color:#E06C75">    Properties</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">      # CORS configuration - this is open for development only and should be restricted in prod.</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">      # See https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-property-httpapi-httpapicorsconfiguration.html</span></span>
<span data-line=""><span style="color:#E06C75">      CorsConfiguration</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">        AllowMethods</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">          - </span><span style="color:#98C379">GET</span></span>
<span data-line=""><span style="color:#ABB2BF">          - </span><span style="color:#98C379">POST</span></span>
<span data-line=""><span style="color:#ABB2BF">          - </span><span style="color:#98C379">DELETE</span></span>
<span data-line=""><span style="color:#ABB2BF">          - </span><span style="color:#98C379">OPTIONS</span></span>
<span data-line=""><span style="color:#E06C75">        AllowHeaders</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">          - </span><span style="color:#98C379">'*'</span></span>
<span data-line=""><span style="color:#E06C75">        AllowOrigins</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">          - </span><span style="color:#98C379">'*'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#E06C75">  UploadRequestFunction</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">    Type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">AWS::Serverless::Function</span></span>
<span data-line=""><span style="color:#E06C75">    Properties</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">      CodeUri</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">lambdas/postFile/</span></span>
<span data-line=""><span style="color:#E06C75">      Handler</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">app.handler</span></span>
<span data-line=""><span style="color:#E06C75">      Runtime</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">nodejs12.x</span></span>
<span data-line=""><span style="color:#E06C75">      Timeout</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span></span>
<span data-line=""><span style="color:#E06C75">      MemorySize</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">128</span></span>
<span data-line=""><span style="color:#E06C75">      Environment</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">        Variables</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">          UploadBucket</span><span style="color:#ABB2BF">: </span><span style="color:#C678DD">!Ref</span><span style="color:#98C379"> S3UploadBucket</span></span>
<span data-line=""><span style="color:#E06C75">      Policies</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">        - </span><span style="color:#98C379">AmazonDynamoDBFullAccess</span></span>
<span data-line=""><span style="color:#ABB2BF">        - </span><span style="color:#E06C75">S3WritePolicy</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">            BucketName</span><span style="color:#ABB2BF">: </span><span style="color:#C678DD">!Ref</span><span style="color:#98C379"> S3UploadBucket</span></span>
<span data-line=""><span style="color:#ABB2BF">        - </span><span style="color:#E06C75">Statement</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">            - </span><span style="color:#E06C75">Effect</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">Allow</span></span>
<span data-line=""><span style="color:#E06C75">              Resource</span><span style="color:#ABB2BF">: </span><span style="color:#C678DD">!Sub</span><span style="color:#98C379"> 'arn:aws:s3:::${S3UploadBucket}/'</span></span>
<span data-line=""><span style="color:#E06C75">              Action</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                - </span><span style="color:#98C379">s3:putObjectAcl</span></span>
<span data-line=""><span style="color:#E06C75">      Events</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">        UploadAssetAPI</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">          Type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">HttpApi</span></span>
<span data-line=""><span style="color:#E06C75">          Properties</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">            Path</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">/postFile</span></span>
<span data-line=""><span style="color:#E06C75">            Method</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">post</span></span>
<span data-line=""><span style="color:#E06C75">            ApiId</span><span style="color:#ABB2BF">: </span><span style="color:#C678DD">!Ref</span><span style="color:#98C379"> MyApi</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#E06C75">  FileReadFunction</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">    Type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">AWS::Serverless::Function</span></span>
<span data-line=""><span style="color:#E06C75">    Properties</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">      CodeUri</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">lambdas/getFiles/</span></span>
<span data-line=""><span style="color:#E06C75">      Handler</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">app.handler</span></span>
<span data-line=""><span style="color:#E06C75">      Runtime</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">nodejs12.x</span></span>
<span data-line=""><span style="color:#E06C75">      Timeout</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span></span>
<span data-line=""><span style="color:#E06C75">      MemorySize</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">128</span></span>
<span data-line=""><span style="color:#E06C75">      Policies</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">        - </span><span style="color:#98C379">AmazonDynamoDBFullAccess</span></span>
<span data-line=""><span style="color:#E06C75">      Events</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">        UploadAssetAPI</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">          Type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">HttpApi</span></span>
<span data-line=""><span style="color:#E06C75">          Properties</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">            Path</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">/getFiles</span></span>
<span data-line=""><span style="color:#E06C75">            Method</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">get</span></span>
<span data-line=""><span style="color:#E06C75">            ApiId</span><span style="color:#ABB2BF">: </span><span style="color:#C678DD">!Ref</span><span style="color:#98C379"> MyApi</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">  ## S3 bucket</span></span>
<span data-line=""><span style="color:#E06C75">  S3UploadBucket</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">    Type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">AWS::S3::Bucket</span></span>
<span data-line=""><span style="color:#E06C75">    Properties</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">      CorsConfiguration</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">        CorsRules</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">          - </span><span style="color:#E06C75">AllowedHeaders</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">              - </span><span style="color:#98C379">'*'</span></span>
<span data-line=""><span style="color:#E06C75">            AllowedMethods</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">              - </span><span style="color:#98C379">GET</span></span>
<span data-line=""><span style="color:#ABB2BF">              - </span><span style="color:#98C379">PUT</span></span>
<span data-line=""><span style="color:#ABB2BF">              - </span><span style="color:#98C379">HEAD</span></span>
<span data-line=""><span style="color:#E06C75">            AllowedOrigins</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">              - </span><span style="color:#98C379">'*'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">## Take a note of the outputs for deploying the workflow templates in this sample application</span></span>
<span data-line=""><span style="color:#E06C75">Outputs</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">  APIendpoint</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">    Description</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'HTTP API endpoint URL'</span></span>
<span data-line=""><span style="color:#E06C75">    Value</span><span style="color:#ABB2BF">: </span><span style="color:#C678DD">!Sub</span><span style="color:#98C379"> 'https://${MyApi}.execute-api.${AWS::Region}.amazonaws.com'</span></span>
<span data-line=""><span style="color:#E06C75">  S3UploadBucketName</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#E06C75">    Description</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'S3 bucket for application uploads'</span></span>
<span data-line=""><span style="color:#E06C75">    Value</span><span style="color:#ABB2BF">: </span><span style="color:#C678DD">!Ref</span><span style="color:#98C379"> 'S3UploadBucket'</span></span></code></pre></figure>
<p>To display all the pictures I use a switch from video or img tag based on
contentType.startsWith('video'). I also use the "figcaption" HTML tag to have a
little caption on the pics/videos</p>
<p>./frontend/src/App.tsx</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="tsx" data-theme="one-dark-pro"><code data-language="tsx" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> Media</span><span style="color:#ABB2BF">({</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  file</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  style</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  onClick</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75;font-style:italic">  children</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">}: {</span></span>
<span data-line=""><span style="color:#E06C75">  file</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">File</span></span>
<span data-line=""><span style="color:#61AFEF">  onClick</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">Function</span></span>
<span data-line=""><span style="color:#E06C75">  style</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">React</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">CSSProperties</span></span>
<span data-line=""><span style="color:#E06C75">  children</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">React</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">ReactNode</span></span>
<span data-line=""><span style="color:#ABB2BF">}) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> { </span><span style="color:#E5C07B">filename</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">contentType</span><span style="color:#ABB2BF"> } </span><span style="color:#56B6C2">=</span><span style="color:#E06C75"> file</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> src</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> `</span><span style="color:#C678DD">${</span><span style="color:#E5C07B">BUCKET</span><span style="color:#C678DD">}</span><span style="color:#98C379">/</span><span style="color:#C678DD">${</span><span style="color:#E06C75">filename</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;</span><span style="color:#E06C75">figure</span><span style="color:#D19A66;font-style:italic"> style</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#ABB2BF">{ </span><span style="color:#E06C75">display</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'inline-block'</span><span style="color:#ABB2BF"> }</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">picture</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#C678DD">        {</span><span style="color:#E5C07B">contentType</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">startsWith</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'video'</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">?</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">          &#x3C;</span><span style="color:#E06C75">video</span><span style="color:#D19A66;font-style:italic"> style</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">style</span><span style="color:#C678DD">}</span><span style="color:#D19A66;font-style:italic"> src</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">src</span><span style="color:#C678DD">}</span><span style="color:#D19A66;font-style:italic"> controls</span><span style="color:#D19A66;font-style:italic"> onClick</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">onClick</span><span style="color:#C678DD"> as</span><span style="color:#E5C07B"> any</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /></span></span>
<span data-line=""><span style="color:#ABB2BF">        ) </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">          &#x3C;</span><span style="color:#E06C75">img</span><span style="color:#D19A66;font-style:italic"> style</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">style</span><span style="color:#C678DD">}</span><span style="color:#D19A66;font-style:italic"> src</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">src</span><span style="color:#C678DD">}</span><span style="color:#D19A66;font-style:italic"> onClick</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">onClick</span><span style="color:#C678DD"> as</span><span style="color:#E5C07B"> any</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /></span></span>
<span data-line=""><span style="color:#ABB2BF">        )</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;/</span><span style="color:#E06C75">picture</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">figcaption</span><span style="color:#ABB2BF">></span><span style="color:#C678DD">{</span><span style="color:#E06C75">children</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">figcaption</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;/</span><span style="color:#E06C75">figure</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">  )</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<p>Now the really fun part: if you get an image of a picture frame like
<a href="https://www.amazon.com/Paintings-Frames-Antique-Shatterproof-Osafs2-Gld-A3/dp/B06XNQ8W9T">https://www.amazon.com/Paintings-Frames-Antique-Shatterproof-Osafs2-Gld-A3/dp/B06XNQ8W9T</a></p>
<p>You can make it a border for any image or video using border-image CSS</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="js" data-theme="one-dark-pro"><code data-language="js" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#E06C75">style</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">  border</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'30px solid'</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">  borderImage</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">`url(borders/</span><span style="color:#C678DD">${</span><span style="color:#E06C75">border</span><span style="color:#C678DD">}</span><span style="color:#98C379">) 30 round`</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<p><img src="/media/638602799897329664_0.png" alt=""></p>
<h2 id="summary"><a aria-hidden="true" tabindex="-1" href="#summary"><a href="#summary" style="margin-right: 10px">#</a></a>Summary</h2>
<p>The template.yaml automatically deploys the lambdas for postFile/getFile and the
files table in dynamoDB</p>
<p>The React app uses postFile for each file in an <code>&#x3C;input type="file"/></code>, the code
uses React hooks and functional components but is hopefully not too complex</p>
<p>I also added commenting on photos. The code is not shown here but you can look
in the source code for details</p>
<p><img src="/media/638602799897329664_1.png" alt=""></p>
<p>Overall this has been a good experience learning to develop this app and
learning to automate the cloud deployment is really good for ensuring
reliability and fast iteration.</p>
<p>Also quick note on serverless CLI vs aws-sam. I had tried a serverless CLI
tutorial from another user but it didn't click with me, while the aws-sam
tutorial from
<a href="https://searchvoidstar.tumblr.com/post/638408397901987840/making-a-serverless-website-for-photo-upload-pt-1">https://searchvoidstar.tumblr.com/post/638408397901987840/making-a-serverless-website-for-photo-upload-pt-1</a>
was a great kick start for me. I am sure the serverless CLI is great too and it
ensures a bit less vendor lock in, but then is also a little bit removed from
the native aws config schemas. Probably fine though</p>
<h2 id="source-code"><a aria-hidden="true" tabindex="-1" href="#source-code"><a href="#source-code" style="margin-right: 10px">#</a></a>Source code</h2>
<p><a href="https://github.com/cmdcolin/aws_photo_gallery/">https://github.com/cmdcolin/aws_photo_gallery/</a></p></div><div class="mt-5"></div></div><footer class="mt-16"><a class="m-2" href="/">Home</a><a class="m-2" href="/archive">Blog archive</a><a class="m-2" href="https://github.com/cmdcolin/">Github</a><a class="m-2" href="/projects">Projects</a><a class="m-2" href="/photos">Photos</a><a class="m-2" href="/books">Books</a><a class="m-2" href="/about">About</a><a class="m-2" href="/rss.xml">RSS</a></footer><script src="/_next/static/chunks/webpack-2a268661fcd08b6d.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[8173,[\"173\",\"static/chunks/173-c4204d8a61969f1d.js\",\"974\",\"static/chunks/app/page-57a57e19ddd8ea21.js\"],\"\"]\n3:I[5244,[],\"\"]\n4:I[3866,[],\"\"]\n6:I[6213,[],\"OutletBoundary\"]\n8:I[6213,[],\"MetadataBoundary\"]\na:I[6213,[],\"ViewportBoundary\"]\nc:I[4835,[],\"\"]\n:HL[\"/_next/static/css/cc26266985a3f391.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"MJZQonshyZIDPNhPwnJJ9\",\"p\":\"\",\"c\":[\"\",\"posts\",\"2020-12-26\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"2020-12-26\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/cc26266985a3f391.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[\"$\",\"$L2\",null,{\"href\":\"/\",\"children\":\"Misc scribbles\"}]}],[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"footer\",null,{\"className\":\"mt-16\",\"children\":[[\"$\",\"$L2\",null,{\"className\":\"m-2\",\"href\":\"/\",\"children\":\"Home\"}],[\"$\",\"$L2\",null,{\"className\":\"m-2\",\"href\":\"/archive\",\"children\":\"Blog archive\"}],[\"$\",\"$L2\",null,{\"className\":\"m-2\",\"href\":\"https://github.com/cmdcolin/\",\"children\":\"Github\"}],[\"$\",\"$L2\",null,{\"className\":\"m-2\",\"href\":\"/projects\",\"children\":\"Projects\"}],[\"$\",\"$L2\",null,{\"className\":\"m-2\",\"href\":\"/photos\",\"children\":\"Photos\"}],[\"$\",\"$L2\",null,{\"className\":\"m-2\",\"href\":\"/books\",\"children\":\"Books\"}],[\"$\",\"$L2\",null,{\"className\":\"m-2\",\"href\":\"/about\",\"children\":\"About\"}],[\"$\",\"$L2\",null,{\"className\":\"m-2\",\"href\":\"/rss.xml\",\"children\":\"RSS\"}]]}]]}]}]]}],{\"children\":[\"posts\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"id\",\"2020-12-26\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":\"$L7\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"DdE2DLpFY3DItFc3N26bl\",{\"children\":[[\"$\",\"$L8\",null,{\"children\":\"$L9\"}],[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$c\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"e:I[7928,[\"880\",\"static/chunks/app/posts/%5Bid%5D/page-b9bbbdca7d2d84ad.js\"],\"default\"]\nd:T12d8f,"])</script><script>self.__next_f.push([1,"\u003cp\u003eThis post follows onhttps://cmdcolin.github.io/2020-12-24.html\u003c/p\u003e\n\u003cp\u003eIt is possible I zoomed ahead too fast to make this a continuous tutorial, but\noverall I just wanted to post an update\u003c/p\u003e\n\u003cp\u003eIn pt. 1 I learned how to use the \u003ccode\u003eaws-sam\u003c/code\u003e CLI tool. This was a great insight\nfor me about automating deployments. I can now simply run \u003ccode\u003esam deploy\u003c/code\u003e and it\nwill create new dynamodb tables, lambda functions, etc.\u003c/p\u003e\n\u003cp\u003eAfter writing pt 1. I converted the existing vue-js app that was in the aws\ntutorial and converted it to react. Then I extended the app to allow\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePosting comments on photos\u003c/li\u003e\n\u003cli\u003eUploading multiple files\u003c/li\u003e\n\u003cli\u003eUploading videos etc.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIt will be hard to summarize all the changes since now the app has taken off a\nlittle bit but it looks like this:\u003c/p\u003e\n\u003cp\u003eRepo structure\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"sh\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"sh\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e./frontend\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e./frontend/src/App.tsx\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e./lambdas/\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e./lambdas/postFile\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e./lambdas/getFiles\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e./lambdas/postComment\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e./lambdas/getComments\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003eHere is a detailed code for uploading the file. We upload one file at a time,\nbut the client code post to the lambda endpoint individually for each file\u003c/p\u003e\n\u003cp\u003eThis generates a pre-signed URL to allow the client-side JS (not the lambda\nitself) to directly upload to S3, and also posts a row in the S3 to the filename\nthat will. It is very similar code in to\n\u003ca href=\"https://cmdcolin.github.io/2020-12-24.html\"\u003ehttps://cmdcolin.github.io/2020-12-24.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e./lambdas/postFile/app.js\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"js\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"js\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#98C379\"\u003e'use strict'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e AWS\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e require\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'aws-sdk'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e multipart\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e require\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'./multipart'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003eAWS\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003econfig\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eupdate\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eregion\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eenv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eAWS_REGION\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e s3\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e AWS\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eS3\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// Change this value to adjust the signed URL's expiration\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e URL_EXPIRATION_SECONDS\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e 300\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// Main Lambda entry point\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003eexports\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e async\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e event\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getUploadURL\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eAWS_REGION\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eregion\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e process\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eenv\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e dynamodb\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e AWS\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eDynamoDB\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eapiVersion\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'2012-08-10'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eregion\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003easync\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e uploadPic\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  timestamp\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  filename\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  message\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  user\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  date\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  contentType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e params\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Item\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      timestamp\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        N\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003etimestamp\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      filename\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        S\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003efilename\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      message\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        S\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003emessage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      user\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        S\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003euser\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      date\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        S\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edate\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      contentType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        S\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    TableName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'files'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e dynamodb\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eputItem\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eparams\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003epromise\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getUploadURL\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e async\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  try\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e data\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e multipart\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eparse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003efilename\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003euser\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003emessage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003edate\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e data\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e timestamp\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eDate\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003enow\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e Key\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e `\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003etimestamp\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003efilename\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e // Get signed URL from S3\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e s3Params\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Bucket\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eenv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eUploadBucket\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Key\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Expires\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eURL_EXPIRATION_SECONDS\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      ContentType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e      // This ACL makes the uploaded object publicly readable. You must also\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e      // uncomment the extra permission for the Lambda function in the SAM\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e      // template.\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      ACL\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'public-read'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e uploadURL\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e s3\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003egetSignedUrlPromise\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'putObject'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003es3Params\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e uploadPic\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      timestamp\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      filename\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eKey\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      message\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      user\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      date\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      contentType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e JSON\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003estringify\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      uploadURL\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Key\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      statusCode\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e500\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      body\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eJSON\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003estringify\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003emessage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e response\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003e./lambdas/getFiles/app.js\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"js\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"js\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// eslint-disable-next-line import/no-unresolved\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e AWS\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e require\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'aws-sdk'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eAWS_REGION\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eregion\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e process\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eenv\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e docClient\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e AWS\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eDynamoDB\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eDocumentClient\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getItems\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e () {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e params\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    TableName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'files'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e docClient\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003escan\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eparams\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003epromise\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003eexports\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e async\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e event\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  try\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e result\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getItems\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      statusCode\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e200\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      body\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eJSON\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003estringify\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      statusCode\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e400\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      body\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eJSON\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003estringify\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003emessage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003e./frontend/src/App.tsx (excerpt)\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"tsx\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"tsx\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003easync\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e myfetch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eparams\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eopts\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eany\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e fetch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eparams\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eopts\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eok\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    throw\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e Error\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`HTTP \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003estatus\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ${\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003estatusText\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ejson\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e UploadDialog\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  open\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  onClose\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  open\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eboolean\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e  onClose\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: () \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e void\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eimages\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetImages\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eFileList\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetError\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eError\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eloading\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetLoading\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003efalse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etotal\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetTotal\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ecompleted\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetCompleted\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003euser\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetUser\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e''\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003emessage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetMessage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e''\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e classes\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useStyles\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e handleClose\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e () \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e    setError\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e    setLoading\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003efalse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e    setImages\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e    setCompleted\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e    setTotal\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e    setMessage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e''\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e    onClose\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eDialog\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e onClose\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ehandleClose\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e open\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eopen\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eDialogTitle\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003eupload a file (supports picture or video)\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eDialogTitle\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eDialogContent\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003elabel\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e htmlFor\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"user\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003ename (optional) \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003elabel\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003einput\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e          type\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"text\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e          value\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003euser\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e          onChange\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e setUser\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etarget\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e          id\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"user\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ebr\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e /\u003e \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003elabel\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e htmlFor\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"user\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003emessage (optional) \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003elabel\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003einput\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e          type\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"text\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e          value\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003emessage\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e          onChange\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e setMessage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etarget\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e          id\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"message\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ebr\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003einput\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e          multiple\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e          type\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"file\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e          onChange\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e            let\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e files\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etarget\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003efiles\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e            if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003efiles\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e \u0026#x26;\u0026#x26;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e files\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e              setImages\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003efiles\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          }\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        /\u003e \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e className\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eclasses\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        ) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e loading\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#98C379\"\u003e          `Uploading...\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ecompleted\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003etotal\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        ) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e completed\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eh2\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003eUploaded \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eh2\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        ) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e null\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eDialogActions\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eButton\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e            style\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e{ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003etextTransform\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'none'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e            onClick\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{async\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e () \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e              try\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e                if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eimages\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e                  setLoading\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e                  setError\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e                  setCompleted\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e                  setTotal\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eimages\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e                  await\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e Promise\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eall\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e                    Array\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eimages\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003easync\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e image\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e                      const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e data\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e FormData\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e                      data\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eappend\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'message'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003emessage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e                      data\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eappend\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'user'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003euser\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e                      data\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eappend\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'date'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e Date\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003etoLocaleString\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e                      data\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eappend\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'filename'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eimage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e                      data\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eappend\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'contentType'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eimage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e                      const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e myfetch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eAPI_ENDPOINT\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e '/postFile'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e                        method\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'POST'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e                        body\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e                      })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e                      await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e myfetch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003euploadURL\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e                        method\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'PUT'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e                        body\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eimage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e                      })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e                      setCompleted\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003ecompleted\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e completed\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e 1\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e                    }),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e                  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e                  setTimeout\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(() \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e                    handleClose\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e                  }, \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e500\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e                }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e              } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e                setError\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e              }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e            }\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e            color\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"primary\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          \u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e            upload\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eButton\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eButton\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e            onClick\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ehandleClose\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e            color\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"primary\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e            style\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e{ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003etextTransform\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'none'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          \u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e            cancel\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eButton\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eDialogActions\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eDialogContent\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eDialog\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003etemplate.yaml for AWS\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"yaml\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"yaml\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003eAWSTemplateFormatVersion\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e2010-09-09\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003eTransform\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eAWS::Serverless-2016-10-31\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003eDescription\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eS3 Uploader\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003eResources\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  filesDynamoDBTable\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Type\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eAWS::DynamoDB::Table\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Properties\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      AttributeDefinitions\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        - \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eAttributeName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'timestamp'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e          AttributeType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'N'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      KeySchema\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        - \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eAttributeName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'timestamp'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e          KeyType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'HASH'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      ProvisionedThroughput\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        ReadCapacityUnits\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'5'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        WriteCapacityUnits\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'5'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      TableName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'files'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e  # HTTP API\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  MyApi\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Type\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eAWS::Serverless::HttpApi\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Properties\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e      # CORS configuration - this is open for development only and should be restricted in prod.\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e      # See https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-property-httpapi-httpapicorsconfiguration.html\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      CorsConfiguration\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        AllowMethods\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eGET\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003ePOST\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eDELETE\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eOPTIONS\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        AllowHeaders\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'*'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        AllowOrigins\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'*'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  UploadRequestFunction\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Type\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eAWS::Serverless::Function\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Properties\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      CodeUri\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003elambdas/postFile/\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Handler\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eapp.handler\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Runtime\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003enodejs12.x\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Timeout\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e3\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      MemorySize\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e128\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Environment\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        Variables\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e          UploadBucket\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e!Ref\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e S3UploadBucket\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Policies\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eAmazonDynamoDBFullAccess\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        - \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eS3WritePolicy\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e            BucketName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e!Ref\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e S3UploadBucket\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        - \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eStatement\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e            - \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eEffect\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eAllow\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e              Resource\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e!Sub\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'arn:aws:s3:::${S3UploadBucket}/'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e              Action\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e                - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003es3:putObjectAcl\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Events\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        UploadAssetAPI\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e          Type\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eHttpApi\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e          Properties\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e            Path\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e/postFile\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e            Method\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003epost\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e            ApiId\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e!Ref\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e MyApi\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  FileReadFunction\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Type\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eAWS::Serverless::Function\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Properties\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      CodeUri\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003elambdas/getFiles/\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Handler\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eapp.handler\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Runtime\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003enodejs12.x\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Timeout\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e3\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      MemorySize\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e128\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Policies\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eAmazonDynamoDBFullAccess\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      Events\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        UploadAssetAPI\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e          Type\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eHttpApi\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e          Properties\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e            Path\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e/getFiles\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e            Method\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eget\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e            ApiId\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e!Ref\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e MyApi\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e  ## S3 bucket\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  S3UploadBucket\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Type\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eAWS::S3::Bucket\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Properties\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      CorsConfiguration\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        CorsRules\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          - \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eAllowedHeaders\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e              - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'*'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e            AllowedMethods\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e              - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eGET\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e              - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003ePUT\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e              - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eHEAD\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e            AllowedOrigins\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e              - \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'*'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e## Take a note of the outputs for deploying the workflow templates in this sample application\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003eOutputs\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  APIendpoint\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Description\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'HTTP API endpoint URL'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Value\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e!Sub\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'https://${MyApi}.execute-api.${AWS::Region}.amazonaws.com'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  S3UploadBucketName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Description\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'S3 bucket for application uploads'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    Value\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e!Ref\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'S3UploadBucket'\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003eTo display all the pictures I use a switch from video or img tag based on\ncontentType.startsWith('video'). I also use the \"figcaption\" HTML tag to have a\nlittle caption on the pics/videos\u003c/p\u003e\n\u003cp\u003e./frontend/src/App.tsx\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"tsx\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"tsx\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e Media\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  file\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  style\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  onClick\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003e  children\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  file\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eFile\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e  onClick\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eFunction\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  style\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eReact\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eCSSProperties\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  children\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eReact\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eReactNode\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003efilename\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e file\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e src\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e `\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eBUCKET\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003efilename\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003efigure\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e style\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e{ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edisplay\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'inline-block'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epicture\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e        {\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003estartsWith\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'video'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003evideo\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e style\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003estyle\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e src\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003esrc\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e controls\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e onClick\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eonClick\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e as\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e any\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        ) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eimg\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e style\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003estyle\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e src\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003esrc\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e onClick\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eonClick\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e as\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e any\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        )\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epicture\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003efigcaption\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003echildren\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003efigcaption\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003efigure\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003eNow the really fun part: if you get an image of a picture frame like\n\u003ca href=\"https://www.amazon.com/Paintings-Frames-Antique-Shatterproof-Osafs2-Gld-A3/dp/B06XNQ8W9T\"\u003ehttps://www.amazon.com/Paintings-Frames-Antique-Shatterproof-Osafs2-Gld-A3/dp/B06XNQ8W9T\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eYou can make it a border for any image or video using border-image CSS\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"js\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"js\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003estyle\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  border\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'30px solid'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  borderImage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`url(borders/\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eborder\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e) 30 round`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003e\u003cimg src=\"/media/638602799897329664_0.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch2 id=\"summary\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#summary\"\u003e\u003ca href=\"#summary\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eSummary\u003c/h2\u003e\n\u003cp\u003eThe template.yaml automatically deploys the lambdas for postFile/getFile and the\nfiles table in dynamoDB\u003c/p\u003e\n\u003cp\u003eThe React app uses postFile for each file in an \u003ccode\u003e\u0026#x3C;input type=\"file\"/\u003e\u003c/code\u003e, the code\nuses React hooks and functional components but is hopefully not too complex\u003c/p\u003e\n\u003cp\u003eI also added commenting on photos. The code is not shown here but you can look\nin the source code for details\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/638602799897329664_1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eOverall this has been a good experience learning to develop this app and\nlearning to automate the cloud deployment is really good for ensuring\nreliability and fast iteration.\u003c/p\u003e\n\u003cp\u003eAlso quick note on serverless CLI vs aws-sam. I had tried a serverless CLI\ntutorial from another user but it didn't click with me, while the aws-sam\ntutorial from\n\u003ca href=\"https://searchvoidstar.tumblr.com/post/638408397901987840/making-a-serverless-website-for-photo-upload-pt-1\"\u003ehttps://searchvoidstar.tumblr.com/post/638408397901987840/making-a-serverless-website-for-photo-upload-pt-1\u003c/a\u003e\nwas a great kick start for me. I am sure the serverless CLI is great too and it\nensures a bit less vendor lock in, but then is also a little bit removed from\nthe native aws config schemas. Probably fine though\u003c/p\u003e\n\u003ch2 id=\"source-code\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#source-code\"\u003e\u003ca href=\"#source-code\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eSource code\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/cmdcolin/aws_photo_gallery/\"\u003ehttps://github.com/cmdcolin/aws_photo_gallery/\u003c/a\u003e\u003c/p\u003e"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"lg:w-1/2 m-auto\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h1\",null,{\"children\":\"Making a serverless website for photo and video upload pt. 2\"}],[\"$\",\"h4\",null,{\"children\":\"2020-12-26\"}]]}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$d\"}}],[\"$\",\"$Le\",null,{}]]}]\n9:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Making a serverless website for photo and video upload pt. 2\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"A blog\"}]]\n7:null\n"])</script></body></html>