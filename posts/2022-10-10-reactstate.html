<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/d19cfa26cd1ef694.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-2a268661fcd08b6d.js"/><script src="/_next/static/chunks/4bd1b696-90b1a119ba8e0400.js" async=""></script><script src="/_next/static/chunks/517-78a7224b7e5fe89f.js" async=""></script><script src="/_next/static/chunks/main-app-a57f1d75b9d3d24e.js" async=""></script><script src="/_next/static/chunks/839-781fb1f9fbb32020.js" async=""></script><script src="/_next/static/chunks/app/page-b8224092ad435855.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bid%5D/page-6ba20b6c7bd62b9f.js" async=""></script><title>Handling component state with React...you gotta reset it sometimes</title><meta name="description" content="A blog"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div class="mb-8"><a href="/">Misc scribbles</a></div><div class="lg:w-1/2"><div><h1>Handling component state with React...you gotta reset it sometimes</h1><h4>2022-10-10</h4></div><div><p>If you make a React component that has, say, a prop for a item id, and an async
action in a <code>useEffect</code> to fetch data for that item from an API, then you
probably also have a <code>useState</code> to set data after you get results back from your
API (or an error occurs). But, the interesting thing to me is</p>
<p><strong>you have to remember to reset that state, including error state, when your
props change</strong></p>
<p>It seems obvious, but I just wanted to write some working examples here</p>
<h2 id="part-1-having-component-state-for-api-response-or-error"><a aria-hidden="true" tabindex="-1" href="#part-1-having-component-state-for-api-response-or-error"><a href="#part-1-having-component-state-for-api-response-or-error" style="margin-right: 10px">#</a></a>Part 1: Having component state for API response or error</h2>
<p>Working codesandbox</p>
<p><a href="https://codesandbox.io/s/practical-rubin-l2d5el?file=/src/App.tsx:0-2003">https://codesandbox.io/s/practical-rubin-l2d5el?file=/src/App.tsx:0-2003</a></p>
<p>In the below example, we will handle fetching from the Pokemon API, and use a
<code>useState</code> to handle the returned data or a returned error. The important thing
to highlight is: when you go to refetch a new item from the API, you likely need
to clear the state of what was previously there (unless you want to display
stale results)</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="tsx" data-theme="one-dark-pro"><code data-language="tsx" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">useState</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">useEffect</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> 'react'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">interface</span><span style="color:#E5C07B"> PokemonType</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">  type</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#E06C75">    name</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""><span style="color:#C678DD">interface</span><span style="color:#E5C07B"> PokemonInfo</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">  name</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span></span>
<span data-line=""><span style="color:#E06C75">  types</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">PokemonType</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// util fetch function to throw if !response.ok, I use this util often</span></span>
<span data-line=""><span style="color:#C678DD">async</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> myfetch</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">url</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">opts</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">RequestInit</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> response</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> fetch</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">url</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">opts</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">ok</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">    throw</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> Error</span><span style="color:#ABB2BF">(</span></span>
<span data-line=""><span style="color:#98C379">      `Error fetching </span><span style="color:#C678DD">${</span><span style="color:#E06C75">url</span><span style="color:#C678DD">}</span><span style="color:#98C379">: HTTP </span><span style="color:#C678DD">${</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">status</span><span style="color:#C678DD">}</span><span style="color:#C678DD"> ${</span><span style="color:#C678DD">await</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">text</span><span style="color:#ABB2BF">()</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">    )</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> ErrorMessage</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75;font-style:italic">error</span><span style="color:#ABB2BF"> }: { </span><span style="color:#E06C75">error</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">unknown</span><span style="color:#ABB2BF"> }) {</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#D19A66;font-style:italic"> style</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#ABB2BF">{ </span><span style="color:#E06C75">background</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'red'</span><span style="color:#ABB2BF"> }</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">></span><span style="color:#C678DD">{</span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E06C75">error</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> PokemonCard</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75;font-style:italic">pokemonName</span><span style="color:#ABB2BF"> }: { </span><span style="color:#E06C75">pokemonName</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> }) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">error</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setError</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E5C07B">unknown</span><span style="color:#ABB2BF">>()</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">pokemonInfo</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setPokemonInfo</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E5C07B">PokemonInfo</span><span style="color:#ABB2BF">>()</span></span>
<span data-line=""><span style="color:#61AFEF">  useEffect</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">    let</span><span style="color:#E06C75"> cancelled</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> false</span></span>
<span data-line=""><span style="color:#ABB2BF">    ;(</span><span style="color:#C678DD">async</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">      try</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">        // important: reset the error and item state of the component!</span></span>
<span data-line=""><span style="color:#61AFEF">        setError</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">undefined</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#61AFEF">        setPokemonInfo</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">undefined</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">        const</span><span style="color:#E5C07B"> data</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> myfetch</span><span style="color:#ABB2BF">(</span></span>
<span data-line=""><span style="color:#98C379">          `https://pokeapi.co/api/v2/pokemon/</span><span style="color:#C678DD">${</span><span style="color:#E06C75">pokemonName</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">        )</span></span>
<span data-line=""><span style="color:#C678DD">        if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E06C75">cancelled</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#61AFEF">          setPokemonInfo</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">        }</span></span>
<span data-line=""><span style="color:#ABB2BF">      } </span><span style="color:#C678DD">catch</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#E5C07B">        console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">error</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">        if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E06C75">cancelled</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#61AFEF">          setError</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">        }</span></span>
<span data-line=""><span style="color:#ABB2BF">      }</span></span>
<span data-line=""><span style="color:#ABB2BF">    })()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">    return</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">      cancelled</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> true</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""><span style="color:#ABB2BF">  }, [</span><span style="color:#E06C75">pokemonName</span><span style="color:#ABB2BF">])</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#C678DD">      {</span><span style="color:#E06C75">error</span><span style="color:#C678DD"> ?</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E5C07B">ErrorMessage</span><span style="color:#D19A66;font-style:italic"> error</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">error</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /></span></span>
<span data-line=""><span style="color:#ABB2BF">      ) </span><span style="color:#C678DD">:</span><span style="color:#E06C75"> pokemonInfo</span><span style="color:#C678DD"> ?</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#C678DD">          {</span><span style="color:#E5C07B">pokemonInfo</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">name</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> is of type</span><span style="color:#C678DD">{</span><span style="color:#98C379">' '</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#C678DD">          {</span><span style="color:#E5C07B">pokemonInfo</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">types</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">t</span><span style="color:#C678DD"> =></span><span style="color:#E5C07B"> t</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">type</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">join</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">', '</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      ) </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">>Loading...&#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      )</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">  )</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">export</span><span style="color:#C678DD"> default</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> App</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">value</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setValue</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'oddish'</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#D19A66;font-style:italic"> className</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"App"</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">label</span><span style="color:#D19A66;font-style:italic"> htmlFor</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"pokemon_name"</span><span style="color:#ABB2BF">>Pokemon name&#x3C;/</span><span style="color:#E06C75">label</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">input</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">        id</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"pokemon_name"</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">        type</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"text"</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">        value</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">value</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">        onChange</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75;font-style:italic">e</span><span style="color:#C678DD"> =></span><span style="color:#61AFEF"> setValue</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">e</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">target</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">      /></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E5C07B">PokemonCard</span><span style="color:#D19A66;font-style:italic"> pokemonName</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">value</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /></span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">  )</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<h2 id="part-2-a-custom-hook"><a aria-hidden="true" tabindex="-1" href="#part-2-a-custom-hook"><a href="#part-2-a-custom-hook" style="margin-right: 10px">#</a></a>Part 2: A custom hook?</h2>
<p>Can we make a hook to make this easier? I don't often make custom hooks, but you
can try to "encapsulate" some of the multiple-related hooks (the useStates for
error, pokemonInfo, and useEffect) into a single hook. This does not drastically
affect our approach, but in the below example, we can call
<code>usePokemonInfo(pokemonName)</code> and error handling and fetching is handled for us</p>
<p>Working codesandbox</p>
<p><a href="https://codesandbox.io/s/fragrant-wind-008pfn?file=/src/App.tsx:0-2234">https://codesandbox.io/s/fragrant-wind-008pfn?file=/src/App.tsx:0-2234</a></p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="tsx" data-theme="one-dark-pro"><code data-language="tsx" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">useState</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">useEffect</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> 'react'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">interface</span><span style="color:#E5C07B"> PokemonType</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">  type</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#E06C75">    name</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""><span style="color:#C678DD">interface</span><span style="color:#E5C07B"> PokemonInfo</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">  name</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span></span>
<span data-line=""><span style="color:#E06C75">  types</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">PokemonType</span><span style="color:#ABB2BF">[]</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// util fetch function to throw if !response.ok, I use this util often</span></span>
<span data-line=""><span style="color:#C678DD">async</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> myfetch</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">url</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">opts</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">RequestInit</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> response</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> fetch</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">url</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">opts</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">ok</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">    throw</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> Error</span><span style="color:#ABB2BF">(</span></span>
<span data-line=""><span style="color:#98C379">      `Error fetching </span><span style="color:#C678DD">${</span><span style="color:#E06C75">url</span><span style="color:#C678DD">}</span><span style="color:#98C379">: HTTP </span><span style="color:#C678DD">${</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">status</span><span style="color:#C678DD">}</span><span style="color:#C678DD"> ${</span><span style="color:#C678DD">await</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">text</span><span style="color:#ABB2BF">()</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">    )</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> usePokemonInfo</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">pokemonName</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">error</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setError</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E5C07B">unknown</span><span style="color:#ABB2BF">>()</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">pokemonInfo</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setItemInfo</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E5C07B">PokemonInfo</span><span style="color:#ABB2BF">>()</span></span>
<span data-line=""><span style="color:#61AFEF">  useEffect</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">    let</span><span style="color:#E06C75"> cancelled</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> false</span></span>
<span data-line=""><span style="color:#ABB2BF">    ;(</span><span style="color:#C678DD">async</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">      try</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#61AFEF">        setItemInfo</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">undefined</span><span style="color:#ABB2BF">) </span><span style="color:#7F848E;font-style:italic">// &#x3C;-- important to reset the state of the app</span></span>
<span data-line=""><span style="color:#61AFEF">        setError</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">undefined</span><span style="color:#ABB2BF">) </span><span style="color:#7F848E;font-style:italic">// &#x3C;-- important to reset the state of the app</span></span>
<span data-line=""><span style="color:#C678DD">        const</span><span style="color:#E5C07B"> data</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> myfetch</span><span style="color:#ABB2BF">(</span></span>
<span data-line=""><span style="color:#98C379">          `https://pokeapi.co/api/v2/pokemon/</span><span style="color:#C678DD">${</span><span style="color:#E06C75">pokemonName</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">        )</span></span>
<span data-line=""><span style="color:#C678DD">        if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E06C75">cancelled</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#61AFEF">          setItemInfo</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">        }</span></span>
<span data-line=""><span style="color:#ABB2BF">      } </span><span style="color:#C678DD">catch</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#E5C07B">        console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">error</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">        if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E06C75">cancelled</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#61AFEF">          setError</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">        }</span></span>
<span data-line=""><span style="color:#ABB2BF">      }</span></span>
<span data-line=""><span style="color:#ABB2BF">    })()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">    return</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">      cancelled</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> true</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""><span style="color:#ABB2BF">  }, [</span><span style="color:#E06C75">pokemonName</span><span style="color:#ABB2BF">])</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> [</span><span style="color:#E06C75">error</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">pokemonInfo</span><span style="color:#ABB2BF">] </span><span style="color:#C678DD">as</span><span style="color:#C678DD"> const</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> ErrorMessage</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75;font-style:italic">error</span><span style="color:#ABB2BF"> }: { </span><span style="color:#E06C75">error</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">unknown</span><span style="color:#ABB2BF"> }) {</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#D19A66;font-style:italic"> style</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#ABB2BF">{ </span><span style="color:#E06C75">background</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'red'</span><span style="color:#ABB2BF"> }</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">></span><span style="color:#C678DD">{</span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E06C75">error</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> PokemonCard</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75;font-style:italic">pokemonName</span><span style="color:#ABB2BF"> }: { </span><span style="color:#E06C75">pokemonName</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> }) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">error</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">pokemonInfo</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> usePokemonInfo</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">pokemonName</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#C678DD">      {</span><span style="color:#E06C75">error</span><span style="color:#C678DD"> ?</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E5C07B">ErrorMessage</span><span style="color:#D19A66;font-style:italic"> error</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">error</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /></span></span>
<span data-line=""><span style="color:#ABB2BF">      ) </span><span style="color:#C678DD">:</span><span style="color:#E06C75"> pokemonInfo</span><span style="color:#C678DD"> ?</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#C678DD">          {</span><span style="color:#E5C07B">pokemonInfo</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">name</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> is of type</span><span style="color:#C678DD">{</span><span style="color:#98C379">' '</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#C678DD">          {</span><span style="color:#E5C07B">pokemonInfo</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">types</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">t</span><span style="color:#C678DD"> =></span><span style="color:#E5C07B"> t</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">type</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">join</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">', '</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      ) </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">>Loading...&#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      )</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">  )</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">export</span><span style="color:#C678DD"> default</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> App</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">value</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setValue</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'oddish'</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#D19A66;font-style:italic"> className</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"App"</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">label</span><span style="color:#D19A66;font-style:italic"> htmlFor</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"pokemon_name"</span><span style="color:#ABB2BF">>Pokemon name&#x3C;/</span><span style="color:#E06C75">label</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">input</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">        id</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"pokemon_name"</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">        type</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"text"</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">        value</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">value</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#D19A66;font-style:italic">        onChange</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75;font-style:italic">e</span><span style="color:#C678DD"> =></span><span style="color:#61AFEF"> setValue</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">e</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">target</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">      /></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E5C07B">PokemonCard</span><span style="color:#D19A66;font-style:italic"> pokemonName</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">value</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /></span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">  )</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<h2 id="conclusion"><a aria-hidden="true" tabindex="-1" href="#conclusion"><a href="#conclusion" style="margin-right: 10px">#</a></a>Conclusion</h2>
<p>I think it's sometimes common to forget error handling in async JS code
(useEffect async or many other contexts, etc), and there aren't e.g. lint rules
to really help, leaving errors uncaught or handled poorly. If you don't manually
handle the error in the <code>useEffect</code>, your user probably will not see that an
error occurred.</p>
<p>In addition to this error handling rant, the other point of this article is you
need to reset your component state when props change, which in the code above,
are the calls to setError(undefined) and setPokemonInfo(undefined) before I
fetch a new Pokemon from the API.</p>
<h2 id="footnote-0---web-perf-pontificating"><a aria-hidden="true" tabindex="-1" href="#footnote-0---web-perf-pontificating"><a href="#footnote-0---web-perf-pontificating" style="margin-right: 10px">#</a></a>Footnote 0 - Web perf pontificating</h2>
<p>I think sometimes, this manner of fetching data inside a component can lead to
what some web-perf-experts refer to as waterfall. Can you get your state from
your parent? That might result in fewer individual requests made, but is also
quite a different architecture.</p>
<h2 id="footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error"><a aria-hidden="true" tabindex="-1" href="#footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error"><a href="#footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error" style="margin-right: 10px">#</a></a>Footnote 1 - ErrorBoundaries don't automatically save you from manually handling error</h2>
<p>You can also consider using an ErrorBoundary, but this does not automatically
catch errors that happen in e.g. a useEffect. If you want your ErrorBoundary to
handle your useEffect related error, then you can use something like this. This
assumes a <code>react-error-boundary</code> type ErrorBoundary.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="tsx" data-theme="one-dark-pro"><code data-language="tsx" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">ErrorBoundary</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> 'react-error-boundary'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> PokemonCard</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75;font-style:italic">pokemonName</span><span style="color:#ABB2BF"> }: { </span><span style="color:#E06C75">pokemonName</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> }) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">error</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">pokemonInfo</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> usePokemonInfo</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">pokemonName</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">error</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">    throw</span><span style="color:#E06C75"> error</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#C678DD">      {</span><span style="color:#E06C75">pokemonInfo</span><span style="color:#C678DD"> ?</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#C678DD">          {</span><span style="color:#E5C07B">pokemonInfo</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">name</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> is of type</span><span style="color:#C678DD">{</span><span style="color:#98C379">' '</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#C678DD">          {</span><span style="color:#E5C07B">pokemonInfo</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">types</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">t</span><span style="color:#C678DD"> =></span><span style="color:#E5C07B"> t</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">type</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">join</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">', '</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      ) </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">        &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">>Loading...&#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      )</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">  )</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">export</span><span style="color:#C678DD"> default</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> App</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">value</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setValue</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> useState</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'oddish'</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;</span><span style="color:#E5C07B">ErrorBoundary</span><span style="color:#D19A66;font-style:italic"> FallbackComponent</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75;font-style:italic">error</span><span style="color:#ABB2BF"> }) </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span><span style="color:#C678DD">{</span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E06C75">error</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E5C07B">PokemonCard</span><span style="color:#D19A66;font-style:italic"> pokemonName</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">value</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /></span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;/</span><span style="color:#E5C07B">ErrorBoundary</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">  )</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<p>Another trick, instead of throwing in the body of the component is throwing in
the callback form of the useState-setter. Then you wouldn't necessarily need to
have a separate useState for the error state, but you would then need an
ErrorBoundary or something to help display a nice error.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="tsx" data-theme="one-dark-pro"><code data-language="tsx" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#61AFEF">useEffect</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">  let</span><span style="color:#E06C75"> cancelled</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> false</span></span>
<span data-line=""><span style="color:#ABB2BF">  ;(</span><span style="color:#C678DD">async</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">    try</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">      // important: reset the error and item state of the component!</span></span>
<span data-line=""><span style="color:#61AFEF">      setPokemonInfo</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">undefined</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">      const</span><span style="color:#E5C07B"> data</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> myfetch</span><span style="color:#ABB2BF">(</span></span>
<span data-line=""><span style="color:#98C379">        `https://pokeapi.co/api/v2/pokemon/</span><span style="color:#C678DD">${</span><span style="color:#E06C75">pokemonName</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">      )</span></span>
<span data-line=""><span style="color:#C678DD">      if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E06C75">cancelled</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#61AFEF">        setPokemonInfo</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">      }</span></span>
<span data-line=""><span style="color:#ABB2BF">    } </span><span style="color:#C678DD">catch</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#E5C07B">      console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">error</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">e</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">      if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E06C75">cancelled</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#61AFEF">        setPokemonInfo</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">          throw</span><span style="color:#E06C75"> e</span></span>
<span data-line=""><span style="color:#ABB2BF">        })</span></span>
<span data-line=""><span style="color:#ABB2BF">      }</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""><span style="color:#ABB2BF">  })()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">    cancelled</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> true</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">}, [</span><span style="color:#E06C75">pokemonName</span><span style="color:#ABB2BF">])</span></span></code></pre></figure>
<h2 id="footnote-2-the-future-with-react-data-fetching"><a aria-hidden="true" tabindex="-1" href="#footnote-2-the-future-with-react-data-fetching"><a href="#footnote-2-the-future-with-react-data-fetching" style="margin-right: 10px">#</a></a>Footnote 2: The future with React data fetching</h2>
<p>See <a href="https://github.com/reactjs/rfcs/pull/229">https://github.com/reactjs/rfcs/pull/229</a></p>
<p>This was just announced so there is a lot to unpack there, I can update this
blog post if I come up with an analogous example using this RFC</p>
<h2 id="footnote-3-using-react-query-or-swr"><a aria-hidden="true" tabindex="-1" href="#footnote-3-using-react-query-or-swr"><a href="#footnote-3-using-react-query-or-swr" style="margin-right: 10px">#</a></a>Footnote 3: Using react-query or swr</h2>
<p>There are helper libraries that try to help</p>
<p>One helper library suggested was called <code>react-query</code>, so I made a demo using
<code>@tanstack/react-query</code> v4.</p>
<p><a href="https://codesandbox.io/s/hungry-framework-ctmhkz?file=/src/App.tsx">https://codesandbox.io/s/hungry-framework-ctmhkz?file=/src/App.tsx</a></p>
<p>Another is <code>swr</code>, here is a demo for that library</p>
<p><a href="https://codesandbox.io/s/condescending-poitras-fiwxym?file=/src/App.tsx">https://codesandbox.io/s/condescending-poitras-fiwxym?file=/src/App.tsx</a></p>
<p>These libraries definitely <strong>do</strong> a lot of things, so take on some more baggage
than the simple hooks described above, but may be helpful to you also.</p>
<h2 id="footnote-4-fetching-is-just-one-aspect-of-this-blogpost"><a aria-hidden="true" tabindex="-1" href="#footnote-4-fetching-is-just-one-aspect-of-this-blogpost"><a href="#footnote-4-fetching-is-just-one-aspect-of-this-blogpost" style="margin-right: 10px">#</a></a>Footnote 4: Fetching is just one aspect of this blogpost</h2>
<p>Really, the thing I wanted to make more clear in general was also how "sticky"
useState can be. I find other patterns in my codebase besides just fetching
where I have to "reset" the useState hook to a neutral state, sometimes related
to controlled components.</p>
<h2 id="footnote-5-you-can-also-use-the-key-prop-as-an-alternative-to-manually-resetting-state"><a aria-hidden="true" tabindex="-1" href="#footnote-5-you-can-also-use-the-key-prop-as-an-alternative-to-manually-resetting-state"><a href="#footnote-5-you-can-also-use-the-key-prop-as-an-alternative-to-manually-resetting-state" style="margin-right: 10px">#</a></a>Footnote 5: You can also use the "key" prop as an alternative to manually resetting state</h2>
<p>See <a href="https://codesandbox.io/s/cool-grass-9nb43y?file=/src/App.tsx">https://codesandbox.io/s/cool-grass-9nb43y?file=/src/App.tsx</a></p>
<p>I am not sure I recommend this as it basically forces the component to unmount,
which may be ok in some cases but I don't know all the ramifications. A quote
from <a href="https://kentcdodds.com/blog/understanding-reacts-key-prop">https://kentcdodds.com/blog/understanding-reacts-key-prop</a> explains</p>
<p>"This allows you to return the exact same element type, but force React to
unmount the previous instance, and mount a new one. This means that all state
that had existed in the component at the time is completely removed and the
component is "reinitialized" for all intents and purposes."</p>
<p>See also
<a href="https://react.dev/learn/you-might-not-need-an-effect#resetting-all-state-when-a-prop-changes">https://react.dev/learn/you-might-not-need-an-effect#resetting-all-state-when-a-prop-changes</a></p>
<h2 id="footnote-6-the-use-hook"><a aria-hidden="true" tabindex="-1" href="#footnote-6-the-use-hook"><a href="#footnote-6-the-use-hook" style="margin-right: 10px">#</a></a>Footnote 6: The <code>use</code> hook</h2>
<p>Might also be related <a href="https://blixtdev.com/all-about-reacts-new-use-hook/">https://blixtdev.com/all-about-reacts-new-use-hook/</a></p></div><div class="mt-5"></div></div><footer class="mt-16"><a class="m-2" href="/">Home</a><a class="m-2" href="/archive">Blog archive</a><a class="m-2" href="https://github.com/cmdcolin/">Github</a><a class="m-2" href="/projects">Projects</a><a class="m-2" href="/photos">Photos</a><a class="m-2" href="/books">Books</a><a class="m-2" href="/about">About</a><a class="m-2" href="/rss.xml">RSS</a></footer><script src="/_next/static/chunks/webpack-2a268661fcd08b6d.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"2:\"$Sreact.fragment\"\n3:I[4839,[\"839\",\"static/chunks/839-781fb1f9fbb32020.js\",\"974\",\"static/chunks/app/page-b8224092ad435855.js\"],\"\"]\n4:I[5244,[],\"\"]\n5:I[3866,[],\"\"]\n7:I[6213,[],\"OutletBoundary\"]\n9:I[6213,[],\"MetadataBoundary\"]\nb:I[6213,[],\"ViewportBoundary\"]\nd:I[4835,[],\"\"]\n1:HL[\"/_next/static/css/d19cfa26cd1ef694.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"A4cqhq3Xe4qrWWOSMPrC5\",\"p\":\"\",\"c\":[\"\",\"posts\",\"2022-10-10-reactstate\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"2022-10-10-reactstate\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$2\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d19cfa26cd1ef694.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[\"$\",\"$L3\",null,{\"href\":\"/\",\"children\":\"Misc scribbles\"}]}],[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}],[\"$\",\"footer\",null,{\"className\":\"mt-16\",\"children\":[[\"$\",\"$L3\",null,{\"className\":\"m-2\",\"href\":\"/\",\"children\":\"Home\"}],[\"$\",\"$L3\",null,{\"className\":\"m-2\",\"href\":\"/archive\",\"children\":\"Blog archive\"}],[\"$\",\"$L3\",null,{\"className\":\"m-2\",\"href\":\"https://github.com/cmdcolin/\",\"children\":\"Github\"}],[\"$\",\"$L3\",null,{\"className\":\"m-2\",\"href\":\"/projects\",\"children\":\"Projects\"}],[\"$\",\"$L3\",null,{\"className\":\"m-2\",\"href\":\"/photos\",\"children\":\"Photos\"}],[\"$\",\"$L3\",null,{\"className\":\"m-2\",\"href\":\"/books\",\"children\":\"Books\"}],[\"$\",\"$L3\",null,{\"className\":\"m-2\",\"href\":\"/about\",\"children\":\"About\"}],[\"$\",\"$L3\",null,{\"className\":\"m-2\",\"href\":\"/rss.xml\",\"children\":\"RSS\"}]]}]]}]}]]}],{\"children\":[\"posts\",[\"$\",\"$2\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[[\"id\",\"2022-10-10-reactstate\",\"d\"],[\"$\",\"$2\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$2\",\"c\",{\"children\":[\"$L6\",null,[\"$\",\"$L7\",null,{\"children\":\"$L8\"}]]}],{},null]},null]},null]},null],[\"$\",\"$2\",\"h\",{\"children\":[null,[\"$\",\"$2\",\"iVG7egrPW4ZEhFcmtmYzV\",{\"children\":[[\"$\",\"$L9\",null,{\"children\":\"$La\"}],[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}],null]}]]}]]],\"m\":\"$undefined\",\"G\":[\"$d\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"f:I[7928,[\"880\",\"static/chunks/app/posts/%5Bid%5D/page-6ba20b6c7bd62b9f.js\"],\"default\"]\ne:Te15b,"])</script><script>self.__next_f.push([1,"\u003cp\u003eIf you make a React component that has, say, a prop for a item id, and an async\naction in a \u003ccode\u003euseEffect\u003c/code\u003e to fetch data for that item from an API, then you\nprobably also have a \u003ccode\u003euseState\u003c/code\u003e to set data after you get results back from your\nAPI (or an error occurs). But, the interesting thing to me is\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eyou have to remember to reset that state, including error state, when your\nprops change\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eIt seems obvious, but I just wanted to write some working examples here\u003c/p\u003e\n\u003ch2 id=\"part-1-having-component-state-for-api-response-or-error\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#part-1-having-component-state-for-api-response-or-error\"\u003e\u003ca href=\"#part-1-having-component-state-for-api-response-or-error\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003ePart 1: Having component state for API response or error\u003c/h2\u003e\n\u003cp\u003eWorking codesandbox\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/practical-rubin-l2d5el?file=/src/App.tsx:0-2003\"\u003ehttps://codesandbox.io/s/practical-rubin-l2d5el?file=/src/App.tsx:0-2003\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eIn the below example, we will handle fetching from the Pokemon API, and use a\n\u003ccode\u003euseState\u003c/code\u003e to handle the returned data or a returned error. The important thing\nto highlight is: when you go to refetch a new item from the API, you likely need\nto clear the state of what was previously there (unless you want to display\nstale results)\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"tsx\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"tsx\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003euseState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003euseEffect\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'react'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003einterface\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e PokemonType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  type\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    name\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003einterface\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e PokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  name\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  types\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ePokemonType\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// util fetch function to throw if !response.ok, I use this util often\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003easync\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e myfetch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eurl\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eopts\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eRequestInit\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e fetch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eurl\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eopts\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eok\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    throw\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e Error\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#98C379\"\u003e      `Error fetching \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eurl\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e: HTTP \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003estatus\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ${\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003etext\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ejson\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e ErrorMessage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }: { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eunknown\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e style\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e{ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ebackground\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'red'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e PokemonCard\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }: { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetError\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eunknown\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetPokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ePokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e  useEffect\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(() \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    let\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e cancelled\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e false\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    ;(\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003easync\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e () \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e      try\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e        // important: reset the error and item state of the component!\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e        setError\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e        setPokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e        const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e data\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e myfetch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#98C379\"\u003e          `https://pokeapi.co/api/v2/pokemon/\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e          setPokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e        console\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e          setError\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    })()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e () \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      cancelled\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e true\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }, [\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e])\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e      {\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eErrorMessage\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      ) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e pokemonInfo\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e          {\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e is of type\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e' '\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e          {\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etypes\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003et\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e t\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e', '\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      ) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003eLoading...\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      )\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e default\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e App\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetValue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'oddish'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e className\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"App\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003elabel\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e htmlFor\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"pokemon_name\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003ePokemon name\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003elabel\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003einput\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e        id\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"pokemon_name\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e        type\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"text\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e        value\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e        onChange\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e setValue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etarget\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ePokemonCard\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e pokemonName\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003ch2 id=\"part-2-a-custom-hook\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#part-2-a-custom-hook\"\u003e\u003ca href=\"#part-2-a-custom-hook\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003ePart 2: A custom hook?\u003c/h2\u003e\n\u003cp\u003eCan we make a hook to make this easier? I don't often make custom hooks, but you\ncan try to \"encapsulate\" some of the multiple-related hooks (the useStates for\nerror, pokemonInfo, and useEffect) into a single hook. This does not drastically\naffect our approach, but in the below example, we can call\n\u003ccode\u003eusePokemonInfo(pokemonName)\u003c/code\u003e and error handling and fetching is handled for us\u003c/p\u003e\n\u003cp\u003eWorking codesandbox\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/fragrant-wind-008pfn?file=/src/App.tsx:0-2234\"\u003ehttps://codesandbox.io/s/fragrant-wind-008pfn?file=/src/App.tsx:0-2234\u003c/a\u003e\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"tsx\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"tsx\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003euseState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003euseEffect\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'react'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003einterface\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e PokemonType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  type\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    name\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003einterface\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e PokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  name\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  types\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ePokemonType\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e[]\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// util fetch function to throw if !response.ok, I use this util often\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003easync\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e myfetch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eurl\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eopts\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eRequestInit\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e fetch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eurl\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eopts\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eok\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    throw\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e Error\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#98C379\"\u003e      `Error fetching \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eurl\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e: HTTP \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003estatus\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ${\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003etext\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ejson\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e usePokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetError\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eunknown\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetItemInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ePokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e  useEffect\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(() \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    let\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e cancelled\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e false\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    ;(\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003easync\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e () \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e      try\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e        setItemInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// \u0026#x3C;-- important to reset the state of the app\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e        setError\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// \u0026#x3C;-- important to reset the state of the app\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e        const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e data\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e myfetch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#98C379\"\u003e          `https://pokeapi.co/api/v2/pokemon/\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e          setItemInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e        console\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e          setError\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    })()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e () \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      cancelled\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e true\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }, [\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e])\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003eas\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e const\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e ErrorMessage\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }: { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eunknown\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e style\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e{ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ebackground\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'red'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e PokemonCard\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }: { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e usePokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e      {\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eErrorMessage\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      ) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e pokemonInfo\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e          {\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e is of type\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e' '\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e          {\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etypes\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003et\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e t\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e', '\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      ) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003eLoading...\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      )\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e default\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e App\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetValue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'oddish'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e className\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"App\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003elabel\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e htmlFor\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"pokemon_name\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003ePokemon name\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003elabel\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003einput\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e        id\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"pokemon_name\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e        type\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"text\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e        value\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e        onChange\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e setValue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etarget\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ePokemonCard\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e pokemonName\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conclusion\"\u003e\u003ca href=\"#conclusion\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eI think it's sometimes common to forget error handling in async JS code\n(useEffect async or many other contexts, etc), and there aren't e.g. lint rules\nto really help, leaving errors uncaught or handled poorly. If you don't manually\nhandle the error in the \u003ccode\u003euseEffect\u003c/code\u003e, your user probably will not see that an\nerror occurred.\u003c/p\u003e\n\u003cp\u003eIn addition to this error handling rant, the other point of this article is you\nneed to reset your component state when props change, which in the code above,\nare the calls to setError(undefined) and setPokemonInfo(undefined) before I\nfetch a new Pokemon from the API.\u003c/p\u003e\n\u003ch2 id=\"footnote-0---web-perf-pontificating\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-0---web-perf-pontificating\"\u003e\u003ca href=\"#footnote-0---web-perf-pontificating\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 0 - Web perf pontificating\u003c/h2\u003e\n\u003cp\u003eI think sometimes, this manner of fetching data inside a component can lead to\nwhat some web-perf-experts refer to as waterfall. Can you get your state from\nyour parent? That might result in fewer individual requests made, but is also\nquite a different architecture.\u003c/p\u003e\n\u003ch2 id=\"footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error\"\u003e\u003ca href=\"#footnote-1---errorboundaries-dont-automatically-save-you-from-manually-handling-error\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1 - ErrorBoundaries don't automatically save you from manually handling error\u003c/h2\u003e\n\u003cp\u003eYou can also consider using an ErrorBoundary, but this does not automatically\ncatch errors that happen in e.g. a useEffect. If you want your ErrorBoundary to\nhandle your useEffect related error, then you can use something like this. This\nassumes a \u003ccode\u003ereact-error-boundary\u003c/code\u003e type ErrorBoundary.\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"tsx\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"tsx\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eErrorBoundary\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'react-error-boundary'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e PokemonCard\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }: { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e usePokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    throw\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e error\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e      {\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ?\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e          {\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e is of type\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e' '\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e          {\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etypes\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003et\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e t\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e', '\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      ) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003eLoading...\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      )\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e default\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e App\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003esetValue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e useState\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'oddish'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eErrorBoundary\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e FallbackComponent\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({ \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ePokemonCard\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e pokemonName\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eErrorBoundary\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003eAnother trick, instead of throwing in the body of the component is throwing in\nthe callback form of the useState-setter. Then you wouldn't necessarily need to\nhave a separate useState for the error state, but you would then need an\nErrorBoundary or something to help display a nice error.\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"tsx\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"tsx\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003euseEffect\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(() \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  let\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e cancelled\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e false\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  ;(\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003easync\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e () \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e    try\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e      // important: reset the error and item state of the component!\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e      setPokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003eundefined\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e      const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e data\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e myfetch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#98C379\"\u003e        `https://pokeapi.co/api/v2/pokemon/\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e      if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e        setPokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003ecatch\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e      console\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ee\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e      if\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ecancelled\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e        setPokemonInfo\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(() \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e          throw\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  })()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e () \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    cancelled\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e true\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}, [\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epokemonName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e])\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003ch2 id=\"footnote-2-the-future-with-react-data-fetching\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2-the-future-with-react-data-fetching\"\u003e\u003ca href=\"#footnote-2-the-future-with-react-data-fetching\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 2: The future with React data fetching\u003c/h2\u003e\n\u003cp\u003eSee \u003ca href=\"https://github.com/reactjs/rfcs/pull/229\"\u003ehttps://github.com/reactjs/rfcs/pull/229\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThis was just announced so there is a lot to unpack there, I can update this\nblog post if I come up with an analogous example using this RFC\u003c/p\u003e\n\u003ch2 id=\"footnote-3-using-react-query-or-swr\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-3-using-react-query-or-swr\"\u003e\u003ca href=\"#footnote-3-using-react-query-or-swr\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 3: Using react-query or swr\u003c/h2\u003e\n\u003cp\u003eThere are helper libraries that try to help\u003c/p\u003e\n\u003cp\u003eOne helper library suggested was called \u003ccode\u003ereact-query\u003c/code\u003e, so I made a demo using\n\u003ccode\u003e@tanstack/react-query\u003c/code\u003e v4.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/hungry-framework-ctmhkz?file=/src/App.tsx\"\u003ehttps://codesandbox.io/s/hungry-framework-ctmhkz?file=/src/App.tsx\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eAnother is \u003ccode\u003eswr\u003c/code\u003e, here is a demo for that library\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/condescending-poitras-fiwxym?file=/src/App.tsx\"\u003ehttps://codesandbox.io/s/condescending-poitras-fiwxym?file=/src/App.tsx\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThese libraries definitely \u003cstrong\u003edo\u003c/strong\u003e a lot of things, so take on some more baggage\nthan the simple hooks described above, but may be helpful to you also.\u003c/p\u003e\n\u003ch2 id=\"footnote-4-fetching-is-just-one-aspect-of-this-blogpost\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-4-fetching-is-just-one-aspect-of-this-blogpost\"\u003e\u003ca href=\"#footnote-4-fetching-is-just-one-aspect-of-this-blogpost\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 4: Fetching is just one aspect of this blogpost\u003c/h2\u003e\n\u003cp\u003eReally, the thing I wanted to make more clear in general was also how \"sticky\"\nuseState can be. I find other patterns in my codebase besides just fetching\nwhere I have to \"reset\" the useState hook to a neutral state, sometimes related\nto controlled components.\u003c/p\u003e\n\u003ch2 id=\"footnote-5-you-can-also-use-the-key-prop-as-an-alternative-to-manually-resetting-state\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-5-you-can-also-use-the-key-prop-as-an-alternative-to-manually-resetting-state\"\u003e\u003ca href=\"#footnote-5-you-can-also-use-the-key-prop-as-an-alternative-to-manually-resetting-state\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 5: You can also use the \"key\" prop as an alternative to manually resetting state\u003c/h2\u003e\n\u003cp\u003eSee \u003ca href=\"https://codesandbox.io/s/cool-grass-9nb43y?file=/src/App.tsx\"\u003ehttps://codesandbox.io/s/cool-grass-9nb43y?file=/src/App.tsx\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI am not sure I recommend this as it basically forces the component to unmount,\nwhich may be ok in some cases but I don't know all the ramifications. A quote\nfrom \u003ca href=\"https://kentcdodds.com/blog/understanding-reacts-key-prop\"\u003ehttps://kentcdodds.com/blog/understanding-reacts-key-prop\u003c/a\u003e explains\u003c/p\u003e\n\u003cp\u003e\"This allows you to return the exact same element type, but force React to\nunmount the previous instance, and mount a new one. This means that all state\nthat had existed in the component at the time is completely removed and the\ncomponent is \"reinitialized\" for all intents and purposes.\"\u003c/p\u003e\n\u003cp\u003eSee also\n\u003ca href=\"https://react.dev/learn/you-might-not-need-an-effect#resetting-all-state-when-a-prop-changes\"\u003ehttps://react.dev/learn/you-might-not-need-an-effect#resetting-all-state-when-a-prop-changes\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"footnote-6-the-use-hook\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-6-the-use-hook\"\u003e\u003ca href=\"#footnote-6-the-use-hook\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 6: The \u003ccode\u003euse\u003c/code\u003e hook\u003c/h2\u003e\n\u003cp\u003eMight also be related \u003ca href=\"https://blixtdev.com/all-about-reacts-new-use-hook/\"\u003ehttps://blixtdev.com/all-about-reacts-new-use-hook/\u003c/a\u003e\u003c/p\u003e"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"lg:w-1/2\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h1\",null,{\"children\":\"Handling component state with React...you gotta reset it sometimes\"}],[\"$\",\"h4\",null,{\"children\":\"2022-10-10\"}]]}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$e\"}}],[\"$\",\"$Lf\",null,{}]]}]\na:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Handling component state with React...you gotta reset it sometimes\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"A blog\"}]]\n8:null\n"])</script></body></html>