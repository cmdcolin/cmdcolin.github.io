0:[[["",{"children":["posts",{"children":[["id","2017-03-12","d"],{"children":["__PAGE__?{\"id\":\"2017-03-12\"}",{}]}]}]},"$undefined","$undefined",true],"$L1","$L2"]]
3:I{"id":"3619","name":"","chunks":["619:619-d3e80a47715091a2","931:app/page-59752a1737368847"],"async":false}
4:I{"id":"1300","name":"","chunks":["272:webpack-3224743bbfce757e","667:2443530c-7c83a1ec49cb3fce","961:961-0b7193e5f574b882"],"async":false}
5:I{"id":"6022","name":"","chunks":["272:webpack-3224743bbfce757e","667:2443530c-7c83a1ec49cb3fce","961:961-0b7193e5f574b882"],"async":false}
1:[["$","html",null,{"lang":"en","children":["$","body",null,{"children":[["$","div",null,{"style":{"marginBottom":100},"children":["$","$L3",null,{"href":"/","children":"Misc scribbles"}]}],["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L5",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L5",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children",["id","2017-03-12","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L5",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$L6","$@7"],"segment":"__PAGE__?{\"id\":\"2017-03-12\"}"}}],"segment":["id","2017-03-12","d"]}}],"segment":"posts"}}],["$","footer",null,{"style":{"marginTop":100},"children":[["$","$L3",null,{"href":"/","children":"Home"}]," ",["$","$L3",null,{"href":"/archive","children":"Blog archive"}]," ",["$","$L3",null,{"href":"https://github.com/cmdcolin/","children":"Github"}]," ",["$","$L3",null,{"href":"https://twitter.com/cmdcolin","children":"Twitter"}]," ",["$","$L3",null,{"href":"/projects","children":"Projects"}]," ",["$","$L3",null,{"href":"/photos","children":"Photos"}]," ",["$","$L3",null,{"href":"/about","children":"About"}]]}]]}]}],"$@8"]
2:[[["$","meta",null,{"charSet":"utf-8"}],["$","title",null,{"children":"How I learned to hate ORM (especially for data import scripts)"}],["$","meta",null,{"name":"description","content":"A blog"}],null,null,null,null,null,null,null,null,["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[["$","link",null,{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}]],[],null]]
9:I{"id":"3591","name":"","chunks":["722:app/posts/[id]/page-cb4a6e559310dd46"],"async":false}
7:[null,null,[]]
8:[null,null,[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/97dc5fe527f5d592.css","precedence":"next.js"}]]]
6:["$","article",null,{"children":[["$","div",null,{"children":[["$","h1",null,{"children":"How I learned to hate ORM (especially for data import scripts)"}],["$","h4",null,{"children":"2017-03-12"}]]}],["$","div",null,{"dangerouslySetInnerHTML":{"__html":"<p>When I was tasked with making a new application for our websites, I was given\nseveral CSV files with some expectation that these files could basically be just\nloaded into a database and jumped into production really quickly. If you are\nusing R and Shiny to make a data visualization dashboard, especially if it is\nread only, this can actually be a reality for you: load those CSVs and just\npretend you're a full featured database. I had to actually create some read\nwrite functionality though. This was sort of experimental for me and I'm not\nthat well versed in databases, but I wanted to share my experience</p>\n<p>When I started, I chose grails/groovy/hibernate/GORM as a platform to use. This\nquickly turned into pain when I tried to make a data importer using grails also.</p>\n<p>Each CSV row from the source file would have to be turned into many different\nrows in the database because it represented multiple relationships, example:</p>\n<p><img src=\"/media/158300473458_0.png\" alt=\"\"></p>\n<p>Initially I made my data importer in grails, and was hardcoding column names\nknowing full well this was really inflexible. At the same time I was also trying\nto \"iterate\" on my database schema, and I'd want to re-import my data to test it\nout, but it was really really slow. I tried many different approaches to try to\nspeed this up such as cleanUpGorm, StatelessSessions, and other tricks, but it\nwould take 10-20 minutes for imports on a 100KB input file.</p>\n<p>What I basically realised is that for bulk data import</p>\n<ol>\n<li>\n<p>Using the ORM is really painful for bulk import.</p>\n</li>\n<li>\n<p>If you can pre-process your data so that it is already in the format the\ndatabase expects, then you can use the CSV COPY command which is very fast</p>\n</li>\n<li>\n<p>If you can then abandon the ORM mentality and even ignore it as a convenience\nfactor, then you can embrace my database system itself</p>\n</li>\n</ol>\n<p>Overall, after all this work, it just seemed like ORM treats the database as a\ndanger and something to be heavily abstracted over, but I actually found joy in\nlearning how to treat my database as a first class citizen. Soon I started\ngaining appreciation of</p>\n<ul>\n<li>using plain SQL queries</li>\n<li>learning about full text search in postgres with ts_query</li>\n<li>learning about triggers to make a \"last updated\" field get updated\nautomatically</li>\n</ul>\n<p>I am pretty happy this way, and although I miss some things like criteria\nqueries which are very powerful, I am happy that I can interact with my database\nas a friend</p>\n<p>At the very least, due to the fact that I now pre-process the data before\ndatabase loading, I can now import large amounts of data super fast with the CSV\nCOPY command</p>"}}],["$","$L9",null,{}]]}]
