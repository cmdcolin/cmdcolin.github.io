<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Creating a testing framework for JBrowse plugins</title><meta name="next-head-count" content="3"/><link rel="shortcut icon" href="favicon.ico"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><meta name="description" content="Blogging for the future"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js" integrity="sha512-hpZ5pDCF2bRCweL5WoA0/N1elet1KYL5mx3LP555Eg/0ZguaHawxNvEjF6O3rufAChs16HVNhEc6blF/rZoowQ==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="preload" href="/_next/static/css/c32b3d2522b06381.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c32b3d2522b06381.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-1b2cde50635286d1.js" defer=""></script><script src="/_next/static/chunks/framework-c0d8f0fd2eea5ac1.js" defer=""></script><script src="/_next/static/chunks/main-b12cd062888056b2.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d9139de5c3de3b6b.js" defer=""></script><script src="/_next/static/chunks/996-3d2a4318c0ac6f1a.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-b6f09b4db8bfc341.js" defer=""></script><script src="/_next/static/ZX-mJrY2D6b7s-erSHNlC/_buildManifest.js" defer=""></script><script src="/_next/static/ZX-mJrY2D6b7s-erSHNlC/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><main><div><div style="margin-bottom:100px"><a href="/">Misc scribbles</a></div><article><div><h1>Creating a testing framework for JBrowse plugins</h1><h4>2016-04-19</h4></div><div><p>Testing client side apps requires a couple of tedious steps: Organizing
the git clone, the dependencies, wrangling up a web server, the test
framework, etc.</p>
<p>When testing a plugin for jbrowse, the dependency tree is interesting
because the plugin "depends" on JBrowse to run, but we will use
travis-CI and bower inside the git repo for our plugin to accomplish
this.</p>
<p>In this scenario, we will</p>
<ol>
<li>
<p>Use bower to install jasmine and JBrowse (our platform that we write
the plugin for)</p>
</li>
<li>
<p>Use nginx to launch a webserver on travis-CI</p>
</li>
<li>
<p>Use the phantomjs run-jasmine.js script to check jasmine test
results</p>
</li>
</ol>
<p>Without further ado</p>
<p>Here is the .travis.yml</p>
<div class="highlight highlight-yaml"><pre><span class="pl-ent">sudo</span>: <span class="pl-c1">false</span>
<span class="pl-ent">addons</span>:
  <span class="pl-ent">apt</span>:
    <span class="pl-ent">packages</span>:
      - <span class="pl-s">nginx</span>
<span class="pl-ent">cache</span>:
  <span class="pl-ent">apt</span>: <span class="pl-c1">true</span>
  <span class="pl-ent">directories</span>:
    - <span class="pl-s">$HOME/.cache/bower</span>
<span class="pl-ent">before_install</span>:
  - <span class="pl-s">npm install -g jshint bower</span>
<span class="pl-ent">install</span>:
  - <span class="pl-s">bower install</span>
<span class="pl-ent">before_script</span>:
  - <span class="pl-s">cat test/travis.conf | envsubst > test/travis-envsubst.conf</span>
  - <span class="pl-s">nginx -c `pwd`/test/travis-envsubst.conf</span>
<span class="pl-ent">script</span>:
  - <span class="pl-s">phantomjs test/run-jasmine.js http://localhost:9000/test/</span>
  - <span class="pl-s">jshint js</span>
</pre></div>
<p>Refer to
<a href="http://searchvoidstar.tumblr.com/post/141858047213/running-nginx-on-containerised-travis-ci-pt-2">http://searchvoidstar.tumblr.com/post/141858047213/running-nginx-on-containerised-travis-ci-pt-2</a>
for details on the nginx setup</p>
<p>Here is the bower.json</p>
<div class="highlight highlight-json"><pre>{
  <span class="pl-ent">"name"</span>: <span class="pl-s"><span class="pl-pds">"</span>sashimiplot<span class="pl-pds">"</span></span>,
  <span class="pl-ent">"homepage"</span>: <span class="pl-s"><span class="pl-pds">"</span>https://github.com/cmdcolin/sashimiplot<span class="pl-pds">"</span></span>,
  <span class="pl-ent">"description"</span>: <span class="pl-s"><span class="pl-pds">"</span>Sashimi track type for jbrowse<span class="pl-pds">"</span></span>,
  <span class="pl-ent">"main"</span>: <span class="pl-s"><span class="pl-pds">"</span>js/main.js<span class="pl-pds">"</span></span>,
  <span class="pl-ent">"keywords"</span>: [<span class="pl-s"><span class="pl-pds">"</span>bioinformatics<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>jbrowse<span class="pl-pds">"</span></span>],
  <span class="pl-ent">"license"</span>: <span class="pl-s"><span class="pl-pds">"</span>MIT<span class="pl-pds">"</span></span>,
  <span class="pl-ent">"ignore"</span>: [
    <span class="pl-s"><span class="pl-pds">"</span>**/.*<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>node_modules<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>bower_components<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>src<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>tests<span class="pl-pds">"</span></span>
  ],
  <span class="pl-ent">"devDependencies"</span>: {
    <span class="pl-ent">"jasmine-core"</span>: <span class="pl-s"><span class="pl-pds">"</span>jasmine#^2.4.1<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"jbrowse"</span>: <span class="pl-s"><span class="pl-pds">"</span>git://github.com/GMOD/jbrowse.git#master<span class="pl-pds">"</span></span>
  }
}
</pre></div>
<p>The key thing here is that it installs jasmine and JBrowse. I set
.bowerrc to install both jasmine and JBrowse to the "test" directory</p>
<div class="highlight highlight-json"><pre>{
  <span class="pl-ent">"directory"</span>: <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>
}
</pre></div>
<p>With this setup, bower will make a "flat dependency tree" in the test
directory, so it will look like this</p>
<div class="highlight highlight-shell"><pre>    $ ls -1 <span class="pl-c1">test</span>
    FileSaver
    dbind
    dgrid
    dijit
    dojo
    dojox
    <span class="pl-k">*</span>index.html<span class="pl-k">*</span>
    jDataView
    jasmine-core
    jbrowse
    json-schema
    jszlib
    lazyload
    put-selector
    <span class="pl-k">*</span>run-jasmine.js<span class="pl-k">*</span>
    <span class="pl-k">*</span>spec<span class="pl-k">*</span>
    <span class="pl-k">*</span>travis.conf<span class="pl-k">*</span>
    util
    xstyle
</pre></div>
<p>Here the asterisks indicate things that are part of our app, other's are
automatically installed by bower (jbrowse, jasmine-core, the dojo
dependencies, and other things)</p>
<p>Then we can create the jasmine test/index.html to be something like this</p>
<div class="highlight highlight-text-html-basic"><pre>&#x3C;!DOCTYPE html PUBLIC <span class="pl-s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="pl-s">"http://www.w3.org/TR/html4/loose.dtd"</span>>

&#x3C;<span class="pl-ent">meta</span> />
Jasmine Spec Runner

&#x3C;<span class="pl-ent">link</span> <span class="pl-e">rel</span>=<span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>jasmine-core/lib/jasmine-core/jasmine.css<span class="pl-pds">"</span></span> />
&#x3C;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>jasmine-core/lib/jasmine-core/jasmine.js<span class="pl-pds">"</span></span>>&#x3C;/<span class="pl-ent">script</span>>
&#x3C;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>jasmine-core/lib/jasmine-core/boot.js<span class="pl-pds">"</span></span>>&#x3C;/<span class="pl-ent">script</span>>
&#x3C;<span class="pl-ent">script</span>
  <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span>
  <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>dojo/dojo.js<span class="pl-pds">"</span></span>
  <span class="pl-e">data-dojo-config</span>=<span class="pl-s"><span class="pl-pds">"</span>async: 1<span class="pl-pds">"</span></span>
>&#x3C;/<span class="pl-ent">script</span>>
&#x3C;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span>>
  <span class="pl-c1">require</span>({
    baseUrl<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>.<span class="pl-pds">'</span></span>,
    packages<span class="pl-k">:</span> [
      <span class="pl-s"><span class="pl-pds">'</span>dojo<span class="pl-pds">'</span></span>,
      <span class="pl-s"><span class="pl-pds">'</span>dijit<span class="pl-pds">'</span></span>,
      <span class="pl-s"><span class="pl-pds">'</span>dojox<span class="pl-pds">'</span></span>,
      <span class="pl-s"><span class="pl-pds">'</span>jszlib<span class="pl-pds">'</span></span>,
      { name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>lazyload<span class="pl-pds">'</span></span>, location<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>lazyload<span class="pl-pds">'</span></span>, main<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>lazyload<span class="pl-pds">'</span></span> },
      <span class="pl-s"><span class="pl-pds">'</span>dgrid<span class="pl-pds">'</span></span>,
      <span class="pl-s"><span class="pl-pds">'</span>xstyle<span class="pl-pds">'</span></span>,
      <span class="pl-s"><span class="pl-pds">'</span>put-selector<span class="pl-pds">'</span></span>,
      <span class="pl-s"><span class="pl-pds">'</span>FileSaver<span class="pl-pds">'</span></span>,
      { name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>jDataView<span class="pl-pds">'</span></span>, location<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>jDataView/src<span class="pl-pds">'</span></span>, main<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>jdataview<span class="pl-pds">'</span></span> },
      { name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>JBrowse<span class="pl-pds">'</span></span>, location<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>jbrowse/src/JBrowse<span class="pl-pds">'</span></span> },
      { name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>SashimiPlot<span class="pl-pds">'</span></span>, location<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>../js<span class="pl-pds">'</span></span> },
    ],
  })
&#x3C;/<span class="pl-ent">script</span>>
&#x3C;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>spec/SashimiPlot.spec.js<span class="pl-pds">"</span></span>>&#x3C;/<span class="pl-ent">script</span>>
&#x3C;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>sandbox<span class="pl-pds">"</span></span> <span class="pl-e">style</span>=<span class="pl-s"><span class="pl-pds">"</span><span class="pl-c1">overflow</span>:<span class="pl-c1">hidden</span>; <span class="pl-c1">height</span>:<span class="pl-c1">1</span><span class="pl-k">px</span>;<span class="pl-pds">"</span></span>>&#x3C;/<span class="pl-ent">div</span>>
</pre></div>
<p>The "packages" in the require statement puts all these packages in the
right "namespace" for the AMD includes, and the "specs" are defined like
<code>&#x3C;script type="text/javascript" src="spec/Projection.spec.js">&#x3C;/script></code></p>
<p>Finally, run-jasmine.js is used to check the results of the jasmine tests (it
is run via phantomjs in the travis-CI script). It is a special version for the
most recent version of jasmine (2.4)
<a href="https://gist.github.com/vmeln/b6cbb319d9a0efc816be">https://gist.github.com/vmeln/b6cbb319d9a0efc816be</a></p>
<p>For an example of the project using this, see
<a href="https://github.com/cmdcolin/sashimiplot">https://github.com/cmdcolin/sashimiplot</a></p></div><div style="margin-top:200px"></div></article></div></main></div><footer style="margin-top:100px"><a href="/">Home</a> <a href="/archive">Blog archive</a> <a href="https://github.com/cmdcolin/">Github</a> <a href="https://twitter.com/cmdcolin">Twitter</a> <a href="/projects">Projects</a> <a href="/photos">Photos</a> <a href="/rss.xml">RSS</a><a href="/about">About</a> </footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Creating a testing framework for JBrowse plugins","date":"2016-04-19","slug":"2016-04-19","html":"\u003cp\u003eTesting client side apps requires a couple of tedious steps: Organizing\nthe git clone, the dependencies, wrangling up a web server, the test\nframework, etc.\u003c/p\u003e\n\u003cp\u003eWhen testing a plugin for jbrowse, the dependency tree is interesting\nbecause the plugin \"depends\" on JBrowse to run, but we will use\ntravis-CI and bower inside the git repo for our plugin to accomplish\nthis.\u003c/p\u003e\n\u003cp\u003eIn this scenario, we will\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eUse bower to install jasmine and JBrowse (our platform that we write\nthe plugin for)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eUse nginx to launch a webserver on travis-CI\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eUse the phantomjs run-jasmine.js script to check jasmine test\nresults\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eWithout further ado\u003c/p\u003e\n\u003cp\u003eHere is the .travis.yml\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-yaml\"\u003e\u003cpre\u003e\u003cspan class=\"pl-ent\"\u003esudo\u003c/span\u003e: \u003cspan class=\"pl-c1\"\u003efalse\u003c/span\u003e\n\u003cspan class=\"pl-ent\"\u003eaddons\u003c/span\u003e:\n  \u003cspan class=\"pl-ent\"\u003eapt\u003c/span\u003e:\n    \u003cspan class=\"pl-ent\"\u003epackages\u003c/span\u003e:\n      - \u003cspan class=\"pl-s\"\u003enginx\u003c/span\u003e\n\u003cspan class=\"pl-ent\"\u003ecache\u003c/span\u003e:\n  \u003cspan class=\"pl-ent\"\u003eapt\u003c/span\u003e: \u003cspan class=\"pl-c1\"\u003etrue\u003c/span\u003e\n  \u003cspan class=\"pl-ent\"\u003edirectories\u003c/span\u003e:\n    - \u003cspan class=\"pl-s\"\u003e$HOME/.cache/bower\u003c/span\u003e\n\u003cspan class=\"pl-ent\"\u003ebefore_install\u003c/span\u003e:\n  - \u003cspan class=\"pl-s\"\u003enpm install -g jshint bower\u003c/span\u003e\n\u003cspan class=\"pl-ent\"\u003einstall\u003c/span\u003e:\n  - \u003cspan class=\"pl-s\"\u003ebower install\u003c/span\u003e\n\u003cspan class=\"pl-ent\"\u003ebefore_script\u003c/span\u003e:\n  - \u003cspan class=\"pl-s\"\u003ecat test/travis.conf | envsubst \u003e test/travis-envsubst.conf\u003c/span\u003e\n  - \u003cspan class=\"pl-s\"\u003enginx -c `pwd`/test/travis-envsubst.conf\u003c/span\u003e\n\u003cspan class=\"pl-ent\"\u003escript\u003c/span\u003e:\n  - \u003cspan class=\"pl-s\"\u003ephantomjs test/run-jasmine.js http://localhost:9000/test/\u003c/span\u003e\n  - \u003cspan class=\"pl-s\"\u003ejshint js\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eRefer to\n\u003ca href=\"http://searchvoidstar.tumblr.com/post/141858047213/running-nginx-on-containerised-travis-ci-pt-2\"\u003ehttp://searchvoidstar.tumblr.com/post/141858047213/running-nginx-on-containerised-travis-ci-pt-2\u003c/a\u003e\nfor details on the nginx setup\u003c/p\u003e\n\u003cp\u003eHere is the bower.json\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-json\"\u003e\u003cpre\u003e{\n  \u003cspan class=\"pl-ent\"\u003e\"name\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003esashimiplot\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n  \u003cspan class=\"pl-ent\"\u003e\"homepage\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ehttps://github.com/cmdcolin/sashimiplot\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n  \u003cspan class=\"pl-ent\"\u003e\"description\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003eSashimi track type for jbrowse\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n  \u003cspan class=\"pl-ent\"\u003e\"main\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ejs/main.js\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n  \u003cspan class=\"pl-ent\"\u003e\"keywords\"\u003c/span\u003e: [\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ebioinformatics\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e, \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ejbrowse\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e],\n  \u003cspan class=\"pl-ent\"\u003e\"license\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003eMIT\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n  \u003cspan class=\"pl-ent\"\u003e\"ignore\"\u003c/span\u003e: [\n    \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e**/.*\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n    \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003enode_modules\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n    \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ebower_components\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n    \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003esrc\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n    \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003etest\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n    \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003etests\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n  ],\n  \u003cspan class=\"pl-ent\"\u003e\"devDependencies\"\u003c/span\u003e: {\n    \u003cspan class=\"pl-ent\"\u003e\"jasmine-core\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ejasmine#^2.4.1\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n    \u003cspan class=\"pl-ent\"\u003e\"jbrowse\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003egit://github.com/GMOD/jbrowse.git#master\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n  }\n}\n\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThe key thing here is that it installs jasmine and JBrowse. I set\n.bowerrc to install both jasmine and JBrowse to the \"test\" directory\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-json\"\u003e\u003cpre\u003e{\n  \u003cspan class=\"pl-ent\"\u003e\"directory\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003etest\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n}\n\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWith this setup, bower will make a \"flat dependency tree\" in the test\ndirectory, so it will look like this\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-shell\"\u003e\u003cpre\u003e    $ ls -1 \u003cspan class=\"pl-c1\"\u003etest\u003c/span\u003e\n    FileSaver\n    dbind\n    dgrid\n    dijit\n    dojo\n    dojox\n    \u003cspan class=\"pl-k\"\u003e*\u003c/span\u003eindex.html\u003cspan class=\"pl-k\"\u003e*\u003c/span\u003e\n    jDataView\n    jasmine-core\n    jbrowse\n    json-schema\n    jszlib\n    lazyload\n    put-selector\n    \u003cspan class=\"pl-k\"\u003e*\u003c/span\u003erun-jasmine.js\u003cspan class=\"pl-k\"\u003e*\u003c/span\u003e\n    \u003cspan class=\"pl-k\"\u003e*\u003c/span\u003espec\u003cspan class=\"pl-k\"\u003e*\u003c/span\u003e\n    \u003cspan class=\"pl-k\"\u003e*\u003c/span\u003etravis.conf\u003cspan class=\"pl-k\"\u003e*\u003c/span\u003e\n    util\n    xstyle\n\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eHere the asterisks indicate things that are part of our app, other's are\nautomatically installed by bower (jbrowse, jasmine-core, the dojo\ndependencies, and other things)\u003c/p\u003e\n\u003cp\u003eThen we can create the jasmine test/index.html to be something like this\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-text-html-basic\"\u003e\u003cpre\u003e\u0026#x3C;!DOCTYPE html PUBLIC \u003cspan class=\"pl-s\"\u003e\"-//W3C//DTD HTML 4.01 Transitional//EN\"\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\"http://www.w3.org/TR/html4/loose.dtd\"\u003c/span\u003e\u003e\n\n\u0026#x3C;\u003cspan class=\"pl-ent\"\u003emeta\u003c/span\u003e /\u003e\nJasmine Spec Runner\n\n\u0026#x3C;\u003cspan class=\"pl-ent\"\u003elink\u003c/span\u003e \u003cspan class=\"pl-e\"\u003erel\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003estylesheet\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"pl-e\"\u003ehref\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ejasmine-core/lib/jasmine-core/jasmine.css\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e /\u003e\n\u0026#x3C;\u003cspan class=\"pl-ent\"\u003escript\u003c/span\u003e \u003cspan class=\"pl-e\"\u003esrc\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ejasmine-core/lib/jasmine-core/jasmine.js\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003e\u0026#x3C;/\u003cspan class=\"pl-ent\"\u003escript\u003c/span\u003e\u003e\n\u0026#x3C;\u003cspan class=\"pl-ent\"\u003escript\u003c/span\u003e \u003cspan class=\"pl-e\"\u003esrc\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ejasmine-core/lib/jasmine-core/boot.js\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003e\u0026#x3C;/\u003cspan class=\"pl-ent\"\u003escript\u003c/span\u003e\u003e\n\u0026#x3C;\u003cspan class=\"pl-ent\"\u003escript\u003c/span\u003e\n  \u003cspan class=\"pl-e\"\u003etype\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003etext/javascript\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"pl-e\"\u003esrc\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003edojo/dojo.js\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"pl-e\"\u003edata-dojo-config\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003easync: 1\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003e\u0026#x3C;/\u003cspan class=\"pl-ent\"\u003escript\u003c/span\u003e\u003e\n\u0026#x3C;\u003cspan class=\"pl-ent\"\u003escript\u003c/span\u003e \u003cspan class=\"pl-e\"\u003etype\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003etext/javascript\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003e\n  \u003cspan class=\"pl-c1\"\u003erequire\u003c/span\u003e({\n    baseUrl\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e.\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e,\n    packages\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e [\n      \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003edojo\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e,\n      \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003edijit\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e,\n      \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003edojox\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e,\n      \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003ejszlib\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e,\n      { name\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003elazyload\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e, location\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003elazyload\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e, main\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003elazyload\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e },\n      \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003edgrid\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e,\n      \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003exstyle\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e,\n      \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eput-selector\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e,\n      \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eFileSaver\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e,\n      { name\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003ejDataView\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e, location\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003ejDataView/src\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e, main\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003ejdataview\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e },\n      { name\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eJBrowse\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e, location\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003ejbrowse/src/JBrowse\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e },\n      { name\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eSashimiPlot\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e, location\u003cspan class=\"pl-k\"\u003e:\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e../js\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e },\n    ],\n  })\n\u0026#x3C;/\u003cspan class=\"pl-ent\"\u003escript\u003c/span\u003e\u003e\n\u0026#x3C;\u003cspan class=\"pl-ent\"\u003escript\u003c/span\u003e \u003cspan class=\"pl-e\"\u003etype\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003etext/javascript\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"pl-e\"\u003esrc\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003espec/SashimiPlot.spec.js\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003e\u0026#x3C;/\u003cspan class=\"pl-ent\"\u003escript\u003c/span\u003e\u003e\n\u0026#x3C;\u003cspan class=\"pl-ent\"\u003ediv\u003c/span\u003e \u003cspan class=\"pl-e\"\u003eid\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003esandbox\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"pl-e\"\u003estyle\u003c/span\u003e=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003eoverflow\u003c/span\u003e:\u003cspan class=\"pl-c1\"\u003ehidden\u003c/span\u003e; \u003cspan class=\"pl-c1\"\u003eheight\u003c/span\u003e:\u003cspan class=\"pl-c1\"\u003e1\u003c/span\u003e\u003cspan class=\"pl-k\"\u003epx\u003c/span\u003e;\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003e\u0026#x3C;/\u003cspan class=\"pl-ent\"\u003ediv\u003c/span\u003e\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThe \"packages\" in the require statement puts all these packages in the\nright \"namespace\" for the AMD includes, and the \"specs\" are defined like\n\u003ccode\u003e\u0026#x3C;script type=\"text/javascript\" src=\"spec/Projection.spec.js\"\u003e\u0026#x3C;/script\u003e\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eFinally, run-jasmine.js is used to check the results of the jasmine tests (it\nis run via phantomjs in the travis-CI script). It is a special version for the\nmost recent version of jasmine (2.4)\n\u003ca href=\"https://gist.github.com/vmeln/b6cbb319d9a0efc816be\"\u003ehttps://gist.github.com/vmeln/b6cbb319d9a0efc816be\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eFor an example of the project using this, see\n\u003ca href=\"https://github.com/cmdcolin/sashimiplot\"\u003ehttps://github.com/cmdcolin/sashimiplot\u003c/a\u003e\u003c/p\u003e"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2016-04-19"},"buildId":"ZX-mJrY2D6b7s-erSHNlC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>