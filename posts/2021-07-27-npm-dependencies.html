<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="shortcut icon" href="favicon.ico"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><meta name="description" content="Blogging for the future"/><title>Do you understand your NPM dependencies?</title><meta name="next-head-count" content="6"/><link rel="preload" href="/_next/static/css/895e0128ed383e47.css" as="style"/><link rel="stylesheet" href="/_next/static/css/895e0128ed383e47.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e1f6961df2961232.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e1f6961df2961232.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-7c3bf82eed00c281.js" defer=""></script><script src="/_next/static/chunks/pages/_app-76cd57bf65f05d70.js" defer=""></script><script src="/_next/static/chunks/162-34cdd443a23a768b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-2c663bbcac870718.js" defer=""></script><script src="/_next/static/wRE5shyr7ZdzrAZY-3qqN/_buildManifest.js" defer=""></script><script src="/_next/static/wRE5shyr7ZdzrAZY-3qqN/_ssgManifest.js" defer=""></script><script src="/_next/static/wRE5shyr7ZdzrAZY-3qqN/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="min-h-screen"><main><div class="container mx-auto px-5"><div class="text-2xl md:text-4xl font-bold py-14 border-b border-accent-2 flex flex-col lg:flex-row items-center"><a class="hover:underline" href="/">Misc scribbles</a></div><article class="mb-32"><h1 class="text-2xl md:text-2xl lg:text-2xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">Do you understand your NPM dependencies?<!-- --> - <!-- -->2021-07-27</h1><div class="max-w-1xl mx-auto"><div class="markdown-styles_markdown__h_8de"><p>You are writing a library...or your writing an app and you want to publish some
of the components of it as a library...</p>
<p>Here are some questions in the form of comments</p>
<ul>
<li>
<p>Did you realize that your yarn.lock will be ignored for anyone who installs
your libraries?</p>
</li>
<li>
<p>Did you realize this means that your perfectly running test suite with your
yarn.lock could be a failing case for consumers of your app unless you don’t
use semver strings like ^1.0.0 and just hardcode it to 1.0.0?</p>
</li>
<li>
<p>Did you realize the default of ^1.0.0 automatically gets minor version bumps
which are often fairly substantial changes, e.g. even breaking possibly?</p>
</li>
<li>
<p>Did you know that larger libraries like @material-ui/core don’t like to bump
their major version all the time for example so large changes are often made
to the minor version?</p>
</li>
<li>
<p>Did you know if you run <code>yarn upgrade</code>, it may update what is in your yarn.lock file but will not update what is in your package.json?</p>
</li>
<li>
<p>Did you realize that this means that if you depend on the results of running <code>yarn upgrade</code> e.g. it gave you a bugfix, you will be shipping buggy code to consumers of your library?</p>
</li>
</ul>
<p>Just something to be aware of! You can always ride the dragon and accept these
minor breakages from semver bumps, but it can introduce some issues for your
consumers</p>
<p>Random fun thing: Adding a yarn package can even downgrade some other packages.
For example if you have ^6.0.0 in your package.json, you yarn upgrade it up to
^6.1.0 but then later install another library that requires a hard 6.0.1, yarn
will decide to downgrade you to 6.0.1</p>
</div></div></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"><div class="py-14 flex flex-col lg:flex-row items-center"><div class="m-4"><a class="hover:underline" href="/">Home</a></div><div class="m-4"><a class="hover:underline" href="https://github.com/cmdcolin">Github</a></div><div class="m-4"><a class="hover:underline" href="https://twitter.com/cmdcolin">Twitter</a></div><div class="m-4"><a class="hover:underline" href="/projects">Projects</a></div><div class="m-4"><a class="hover:underline" href="/rss.xml">RSS</a></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Do you understand your NPM dependencies?","date":"2021-07-27","slug":"2021-07-27-npm-dependencies","content":"\u003cp\u003eYou are writing a library...or your writing an app and you want to publish some\nof the components of it as a library...\u003c/p\u003e\n\u003cp\u003eHere are some questions in the form of comments\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eDid you realize that your yarn.lock will be ignored for anyone who installs\nyour libraries?\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDid you realize this means that your perfectly running test suite with your\nyarn.lock could be a failing case for consumers of your app unless you don’t\nuse semver strings like ^1.0.0 and just hardcode it to 1.0.0?\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDid you realize the default of ^1.0.0 automatically gets minor version bumps\nwhich are often fairly substantial changes, e.g. even breaking possibly?\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDid you know that larger libraries like @material-ui/core don’t like to bump\ntheir major version all the time for example so large changes are often made\nto the minor version?\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDid you know if you run \u003ccode\u003eyarn upgrade\u003c/code\u003e, it may update what is in your yarn.lock file but will not update what is in your package.json?\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDid you realize that this means that if you depend on the results of running \u003ccode\u003eyarn upgrade\u003c/code\u003e e.g. it gave you a bugfix, you will be shipping buggy code to consumers of your library?\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eJust something to be aware of! You can always ride the dragon and accept these\nminor breakages from semver bumps, but it can introduce some issues for your\nconsumers\u003c/p\u003e\n\u003cp\u003eRandom fun thing: Adding a yarn package can even downgrade some other packages.\nFor example if you have ^6.0.0 in your package.json, you yarn upgrade it up to\n^6.1.0 but then later install another library that requires a hard 6.0.1, yarn\nwill decide to downgrade you to 6.0.1\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2021-07-27-npm-dependencies"},"buildId":"wRE5shyr7ZdzrAZY-3qqN","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>