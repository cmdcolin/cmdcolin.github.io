<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/39906f0ead253838.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-d10a5ca28d3f2087.js"/><script src="/_next/static/chunks/fd9d1056-86b8edb61a7addbb.js" async=""></script><script src="/_next/static/chunks/582-0cff27f5472401dd.js" async=""></script><script src="/_next/static/chunks/main-app-cd804b1a70ba284d.js" async=""></script><script src="/_next/static/chunks/231-26142438061866f4.js" async=""></script><script src="/_next/static/chunks/app/page-963abe75e6aad650.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bid%5D/page-ce940a9c9090656b.js" async=""></script><title>Making a static site blog with the Next.js &#x27;app&#x27; directory</title><meta name="description" content="A blog"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body><div style="margin-bottom:100px"><a href="/">Misc scribbles</a></div><article><div><h1>Making a static site blog with the Next.js &#x27;app&#x27; directory</h1><h4>2023-04-08</h4></div><div><p>I just converted my blog to use the Next.js 'app' directory, and thought I'd
show how you can make your own static site with it. Static export of the Next.js
'app' directory was added in version 13.3
<a href="https://nextjs.org/blog/next-13-3#static-export-for-app-router">https://nextjs.org/blog/next-13-3#static-export-for-app-router</a></p>
<h2 id="tldr"><a aria-hidden="true" tabindex="-1" href="#tldr"><a href="#tldr" style="margin-right: 10px">#</a></a>TL;DR</h2>
<p>See here</p>
<p><a href="https://github.com/cmdcolin/nextjs-appdir-blog">https://github.com/cmdcolin/nextjs-appdir-blog</a></p>
<p>If you take nothing else away from this article, let it be that</p>
<ul>
<li>
<p>The 'app' dir, with react server components, can be used to create static
websites</p>
</li>
<li>
<p>That react server components (RSC) can be "async function components" whereas
this does not exist on the client side. It's quite interesting</p>
</li>
</ul>
<p>The exact step-by-step here is probably unnecessary but just trying to show the
raw basics</p>
<h2 id="step-1-run-create-next-app"><a aria-hidden="true" tabindex="-1" href="#step-1-run-create-next-app"><a href="#step-1-run-create-next-app" style="margin-right: 10px">#</a></a>Step 1. Run create-next-app</h2>
<p>I accepted all defaults but added "YES" to the use experimental app directory</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="bash" data-theme="one-dark-pro"><code data-language="bash" data-theme="one-dark-pro" style="display: grid;"><span data-line=""> </span>
<span data-line=""><span style="color:#61AFEF">$</span><span style="color:#98C379"> npx</span><span style="color:#98C379"> create-next-app</span><span style="color:#98C379"> myblog</span></span>
<span data-line=""><span style="color:#61AFEF">✔</span><span style="color:#98C379"> Would</span><span style="color:#98C379"> you</span><span style="color:#98C379"> like</span><span style="color:#98C379"> to</span><span style="color:#98C379"> use</span><span style="color:#98C379"> TypeScript</span><span style="color:#98C379"> with</span><span style="color:#98C379"> this</span><span style="color:#98C379"> project?</span><span style="color:#98C379"> …</span><span style="color:#98C379"> No</span><span style="color:#98C379"> /</span><span style="color:#98C379"> YES</span></span>
<span data-line=""><span style="color:#61AFEF">✔</span><span style="color:#98C379"> Would</span><span style="color:#98C379"> you</span><span style="color:#98C379"> like</span><span style="color:#98C379"> to</span><span style="color:#98C379"> use</span><span style="color:#98C379"> ESLint</span><span style="color:#98C379"> with</span><span style="color:#98C379"> this</span><span style="color:#98C379"> project?</span><span style="color:#98C379"> …</span><span style="color:#98C379"> No</span><span style="color:#98C379"> /</span><span style="color:#98C379"> YES</span></span>
<span data-line=""><span style="color:#61AFEF">✔</span><span style="color:#98C379"> Would</span><span style="color:#98C379"> you</span><span style="color:#98C379"> like</span><span style="color:#98C379"> to</span><span style="color:#98C379"> use</span><span style="color:#98C379"> `</span><span style="color:#61AFEF">src/</span><span style="color:#98C379">`</span><span style="color:#61AFEF"> directory</span><span style="color:#98C379"> with</span><span style="color:#98C379"> this</span><span style="color:#98C379"> project?</span><span style="color:#98C379"> …</span><span style="color:#98C379"> NO</span><span style="color:#98C379"> /</span><span style="color:#98C379"> Yes</span></span>
<span data-line=""><span style="color:#61AFEF">✔</span><span style="color:#98C379"> Would</span><span style="color:#98C379"> you</span><span style="color:#98C379"> like</span><span style="color:#98C379"> to</span><span style="color:#98C379"> use</span><span style="color:#98C379"> experimental</span><span style="color:#98C379"> `</span><span style="color:#61AFEF">app/</span><span style="color:#98C379">`</span><span style="color:#61AFEF"> directory</span><span style="color:#98C379"> with</span><span style="color:#98C379"> this</span><span style="color:#98C379"> project?</span><span style="color:#98C379"> …</span><span style="color:#98C379"> No</span><span style="color:#98C379"> /</span><span style="color:#98C379"> YES</span></span>
<span data-line=""><span style="color:#61AFEF">✔</span><span style="color:#98C379"> What</span><span style="color:#98C379"> import</span><span style="color:#98C379"> alias</span><span style="color:#98C379"> would</span><span style="color:#98C379"> you</span><span style="color:#98C379"> like</span><span style="color:#98C379"> configured?</span><span style="color:#98C379"> …</span><span style="color:#98C379"> @/</span><span style="color:#E5C07B">*</span></span>
<span data-line=""><span style="color:#61AFEF">Creating</span><span style="color:#98C379"> a</span><span style="color:#98C379"> new</span><span style="color:#98C379"> Next.js</span><span style="color:#98C379"> app</span><span style="color:#98C379"> in</span><span style="color:#98C379"> /home/cdiesh/myblog.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#61AFEF">Using</span><span style="color:#98C379"> npm.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#61AFEF">Initializing</span><span style="color:#98C379"> project</span><span style="color:#98C379"> with</span><span style="color:#98C379"> template:</span><span style="color:#98C379"> app</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span style="color:#61AFEF">Installing</span><span style="color:#98C379"> dependencies:</span></span>
<span data-line=""><span style="color:#61AFEF">-</span><span style="color:#98C379"> react</span></span>
<span data-line=""><span style="color:#61AFEF">-</span><span style="color:#98C379"> react-dom</span></span>
<span data-line=""><span style="color:#61AFEF">-</span><span style="color:#98C379"> next</span></span>
<span data-line=""><span style="color:#61AFEF">-</span><span style="color:#98C379"> typescript</span></span>
<span data-line=""><span style="color:#61AFEF">-</span><span style="color:#98C379"> @types/react</span></span>
<span data-line=""><span style="color:#61AFEF">-</span><span style="color:#98C379"> @types/node</span></span>
<span data-line=""><span style="color:#61AFEF">-</span><span style="color:#98C379"> @types/react-dom</span></span>
<span data-line=""><span style="color:#61AFEF">-</span><span style="color:#98C379"> eslint</span></span>
<span data-line=""><span style="color:#61AFEF">-</span><span style="color:#98C379"> eslint-config-next</span></span></code></pre></figure>
<h2 id="step-2-edit-nextconfigjs"><a aria-hidden="true" tabindex="-1" href="#step-2-edit-nextconfigjs"><a href="#step-2-edit-nextconfigjs" style="margin-right: 10px">#</a></a>Step 2. Edit next.config.js</h2>
<p>Add 'output': 'export' to the next.config.js file</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="typescript" data-theme="one-dark-pro"><code data-language="typescript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#7F848E;font-style:italic">/** </span><span style="color:#C678DD;font-style:italic">@type</span><span style="color:#E5C07B;font-style:italic"> {import('next').NextConfig}</span><span style="color:#7F848E;font-style:italic"> */</span></span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> nextConfig</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">  output</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'export'</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#E5C07B">module</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">exports</span><span style="color:#56B6C2"> =</span><span style="color:#E06C75"> nextConfig</span></span></code></pre></figure>
<h2 id="step-3-create-the-page-that-will-display-your-posts"><a aria-hidden="true" tabindex="-1" href="#step-3-create-the-page-that-will-display-your-posts"><a href="#step-3-create-the-page-that-will-display-your-posts" style="margin-right: 10px">#</a></a>Step 3. Create the page that will display your posts</h2>
<p>Create a new directory like this on the command line, yes there are square
brackets in the directory name</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="bash" data-theme="one-dark-pro"><code data-language="bash" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#61AFEF">mkdir</span><span style="color:#D19A66"> -p</span><span style="color:#98C379"> app/posts/</span><span style="color:#56B6C2">\[</span><span style="color:#98C379">id</span><span style="color:#56B6C2">\]</span><span style="color:#98C379">/</span></span></code></pre></figure>
<p>Then make a file page.tsx in there so it is 'app/posts/[id]/page.tsx'</p>
<p>Then on this page, fill in with this</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="tsx" data-theme="one-dark-pro"><code data-language="tsx" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">getPostById</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">getAllPosts</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> '@/lib/api'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// Generate the post, note that this is a "react server component"! it is</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// allowed to be async</span></span>
<span data-line=""><span style="color:#C678DD">export</span><span style="color:#C678DD"> default</span><span style="color:#C678DD"> async</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> Post</span><span style="color:#ABB2BF">({</span></span>
<span data-line=""><span style="color:#E06C75">  params</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75;font-style:italic">id</span><span style="color:#ABB2BF"> },</span></span>
<span data-line=""><span style="color:#ABB2BF">}: {</span></span>
<span data-line=""><span style="color:#E06C75">  params</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> }</span></span>
<span data-line=""><span style="color:#ABB2BF">}) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> { </span><span style="color:#E5C07B">html</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">title</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">date</span><span style="color:#ABB2BF"> } </span><span style="color:#56B6C2">=</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> getPostById</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;</span><span style="color:#E06C75">article</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">h1</span><span style="color:#ABB2BF">></span><span style="color:#C678DD">{</span><span style="color:#E06C75">title</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">h1</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">h4</span><span style="color:#ABB2BF">></span><span style="color:#C678DD">{</span><span style="color:#E06C75">date</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">h4</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#D19A66;font-style:italic"> dangerouslySetInnerHTML</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#ABB2BF">{ </span><span style="color:#E06C75">__html</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">html</span><span style="color:#ABB2BF"> }</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /></span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;/</span><span style="color:#E06C75">article</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">  )</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// This function can statically allow nextjs to find all the posts that you</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// have made, and statically generate them</span></span>
<span data-line=""><span style="color:#C678DD">export</span><span style="color:#C678DD"> async</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> generateStaticParams</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> posts</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> getAllPosts</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> posts</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">post</span><span style="color:#C678DD"> =></span><span style="color:#ABB2BF"> ({</span></span>
<span data-line=""><span style="color:#E06C75">    id</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">post</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">  }))</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// Set the title of the page to be the post title, note that we no longer use</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// e.g. next/head in app dir, and this can be async just like the server</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// component</span></span>
<span data-line=""><span style="color:#C678DD">export</span><span style="color:#C678DD"> async</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> generateMetadata</span><span style="color:#ABB2BF">({</span></span>
<span data-line=""><span style="color:#E06C75">  params</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75;font-style:italic">id</span><span style="color:#ABB2BF"> },</span></span>
<span data-line=""><span style="color:#ABB2BF">}: {</span></span>
<span data-line=""><span style="color:#E06C75">  params</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> }</span></span>
<span data-line=""><span style="color:#ABB2BF">}) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> { </span><span style="color:#E5C07B">title</span><span style="color:#ABB2BF"> } </span><span style="color:#56B6C2">=</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> getPostById</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">    title</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<h2 id="step-4-fix-the-cart-being-ahead-of-the-horse-parse-the-markdown-blogposts"><a aria-hidden="true" tabindex="-1" href="#step-4-fix-the-cart-being-ahead-of-the-horse-parse-the-markdown-blogposts"><a href="#step-4-fix-the-cart-being-ahead-of-the-horse-parse-the-markdown-blogposts" style="margin-right: 10px">#</a></a>Step 4. Fix the cart being ahead of the horse: parse the markdown blogposts</h2>
<p>In the last post, I use functions "getAllPosts" and "getPostById", these are
functions that I define that parse my markdown blog posts.</p>
<p>So let's make those functions. The code below performs markdown parsing manually
using unified/remark/rehype and allows github flavored markdown. See Footnote 1
for more info. So first install these</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="bash" data-theme="one-dark-pro"><code data-language="bash" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#61AFEF">npm</span><span style="color:#98C379"> install</span><span style="color:#98C379"> gray-matter</span><span style="color:#98C379"> unified</span><span style="color:#98C379"> remark-gfm</span><span style="color:#98C379"> remark-parse</span><span style="color:#98C379"> remark-rehype</span><span style="color:#98C379"> rehype-stringify</span><span style="color:#98C379"> rehype-autolink-headings</span><span style="color:#98C379"> rehype-slug</span><span style="color:#98C379"> @leafac/rehype-shiki</span><span style="color:#98C379"> shiki</span></span></code></pre></figure>
<p>And then, add this code</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="typescript" data-theme="one-dark-pro"><code data-language="typescript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#7F848E;font-style:italic">// lib/api.ts</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#E06C75"> fs</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'fs'</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#E06C75"> matter</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'gray-matter'</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#E06C75"> path</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'path'</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">unified</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> 'unified'</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#E06C75"> remarkGfm</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'remark-gfm'</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#E06C75"> rehypeSlug</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'rehype-slug'</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#E06C75"> rehypeAutolinkHeadings</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'rehype-autolink-headings'</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#E06C75"> remarkParse</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'remark-parse'</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#E06C75"> remarkRehype</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'remark-rehype'</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#E06C75"> rehypeStringify</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'rehype-stringify'</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#E06C75"> rehypePrettyCode</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'rehype-pretty-code'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> postsDirectory</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> path</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">join</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">process</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">cwd</span><span style="color:#ABB2BF">(), </span><span style="color:#98C379">'_posts'</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> getPostFiles</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> fs</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">readdirSync</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">postsDirectory</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> getParser</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#61AFEF"> unified</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">remarkParse</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">remarkRehype</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">remarkGfm</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">rehypePrettyCode</span><span style="color:#ABB2BF">, {</span></span>
<span data-line=""><span style="color:#E06C75">      theme</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'one-dark-pro'</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">    })</span></span>
<span data-line=""><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">rehypeStringify</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">rehypeStringify</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">rehypeSlug</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">rehypeAutolinkHeadings</span><span style="color:#ABB2BF">, {</span></span>
<span data-line=""><span style="color:#61AFEF">      content</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75;font-style:italic">arg</span><span style="color:#C678DD"> =></span><span style="color:#ABB2BF"> ({</span></span>
<span data-line=""><span style="color:#E06C75">        type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'element'</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">        tagName</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'a'</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">        properties</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#E06C75">          href</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">`#</span><span style="color:#C678DD">${</span><span style="color:#61AFEF">String</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">arg</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">properties</span><span style="color:#ABB2BF">?.</span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">          style</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'margin-right: 10px'</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">        },</span></span>
<span data-line=""><span style="color:#E06C75">        children</span><span style="color:#ABB2BF">: [{ </span><span style="color:#E06C75">type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'text'</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'#'</span><span style="color:#ABB2BF"> }],</span></span>
<span data-line=""><span style="color:#ABB2BF">      }),</span></span>
<span data-line=""><span style="color:#ABB2BF">    })</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// small speedup from caching this parser</span></span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> parser</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> getParser</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">export</span><span style="color:#C678DD"> async</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> getPostById</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">id</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> realId</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> id</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">replace</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">/</span><span style="color:#56B6C2">\.</span><span style="color:#E06C75">md</span><span style="color:#C678DD">$</span><span style="color:#E06C75">/</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">''</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> fullPath</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> path</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">join</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">postsDirectory</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E06C75">realId</span><span style="color:#C678DD">}</span><span style="color:#98C379">.md`</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> { </span><span style="color:#E5C07B">data</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">content</span><span style="color:#ABB2BF"> } </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> matter</span><span style="color:#ABB2BF">(</span><span style="color:#C678DD">await</span><span style="color:#E5C07B"> fs</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">promises</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">readFile</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">fullPath</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">'utf8'</span><span style="color:#ABB2BF">))</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> html</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#E5C07B"> parser</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">process</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">content</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> date</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> data</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">date</span><span style="color:#C678DD"> as</span><span style="color:#E5C07B"> Date</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#ABB2BF">    ...</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">    title</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">data</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">title</span><span style="color:#C678DD"> as</span><span style="color:#E5C07B"> string</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">    id</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">realId</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">    date</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E5C07B">date</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">toISOString</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">slice</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">10</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">    html</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">html</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">value</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">toString</span><span style="color:#ABB2BF">(),</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">export</span><span style="color:#C678DD"> async</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> getPageMarkdown</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">string_</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#ABB2BF"> { </span><span style="color:#E5C07B">data</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">content</span><span style="color:#ABB2BF"> } </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> matter</span><span style="color:#ABB2BF">(</span></span>
<span data-line=""><span style="color:#E5C07B">    fs</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">readFileSync</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">path</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">join</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'_pages'</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">string_</span><span style="color:#ABB2BF">), </span><span style="color:#98C379">'utf8'</span><span style="color:#ABB2BF">),</span></span>
<span data-line=""><span style="color:#ABB2BF">  )</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> html</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#E5C07B"> parser</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">process</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">content</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#ABB2BF">    ...</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">    html</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">html</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">value</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">toString</span><span style="color:#ABB2BF">(),</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">export</span><span style="color:#C678DD"> async</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> getAllPosts</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> posts</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#E5C07B"> Promise</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">all</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">getPostFiles</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">id</span><span style="color:#C678DD"> =></span><span style="color:#61AFEF"> getPostById</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">)))</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> posts</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">sort</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">post1</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">post2</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">post1</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">date</span><span style="color:#56B6C2"> ></span><span style="color:#E5C07B"> post2</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">date</span><span style="color:#C678DD"> ?</span><span style="color:#56B6C2"> -</span><span style="color:#D19A66">1</span><span style="color:#C678DD"> :</span><span style="color:#D19A66"> 1</span><span style="color:#ABB2BF">))</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<h2 id="step-5-create-a-blog-index-showing-all-your-blogposts"><a aria-hidden="true" tabindex="-1" href="#step-5-create-a-blog-index-showing-all-your-blogposts"><a href="#step-5-create-a-blog-index-showing-all-your-blogposts" style="margin-right: 10px">#</a></a>Step 5. Create a 'blog index' showing all your blogposts</h2>
<p>Edit the <code>app/page.tsx</code> file, and replace with the below: this is the root of
your site</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="tsx" data-theme="one-dark-pro"><code data-language="tsx" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#7F848E;font-style:italic">// app/page.tsx</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#E06C75"> Link</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'next/link'</span></span>
<span data-line=""><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">getAllPosts</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> '@/lib/api'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">export</span><span style="color:#C678DD"> default</span><span style="color:#C678DD"> async</span><span style="color:#C678DD"> function</span><span style="color:#61AFEF"> Page</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> posts</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> await</span><span style="color:#61AFEF"> getAllPosts</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">h1</span><span style="color:#ABB2BF">>My blog&#x3C;/</span><span style="color:#E06C75">h1</span><span style="color:#ABB2BF">></span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">h2</span><span style="color:#ABB2BF">>All posts:&#x3C;/</span><span style="color:#E06C75">h2</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E06C75">ul</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#C678DD">        {</span><span style="color:#E5C07B">posts</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">post</span><span style="color:#C678DD"> =></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">          const</span><span style="color:#ABB2BF"> { </span><span style="color:#E5C07B">id</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">date</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">title</span><span style="color:#ABB2BF"> } </span><span style="color:#56B6C2">=</span><span style="color:#E06C75"> post</span></span>
<span data-line=""><span style="color:#C678DD">          return</span><span style="color:#ABB2BF"> (</span></span>
<span data-line=""><span style="color:#ABB2BF">            &#x3C;</span><span style="color:#E06C75">li</span><span style="color:#D19A66;font-style:italic"> key</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">id</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">              &#x3C;</span><span style="color:#E5C07B">Link</span><span style="color:#D19A66;font-style:italic"> href</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#98C379">`/posts/</span><span style="color:#C678DD">${</span><span style="color:#E06C75">id</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#C678DD">                {</span><span style="color:#E06C75">date</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> - </span><span style="color:#C678DD">{</span><span style="color:#E06C75">title</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">              &#x3C;/</span><span style="color:#E5C07B">Link</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">            &#x3C;/</span><span style="color:#E06C75">li</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">          )</span></span>
<span data-line=""><span style="color:#ABB2BF">        })</span><span style="color:#C678DD">}</span></span>
<span data-line=""><span style="color:#ABB2BF">      &#x3C;/</span><span style="color:#E06C75">ul</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">    &#x3C;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">></span></span>
<span data-line=""><span style="color:#ABB2BF">  )</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<h2 id="step-6-put-markdown-files-in-the-_posts-dir"><a aria-hidden="true" tabindex="-1" href="#step-6-put-markdown-files-in-the-_posts-dir"><a href="#step-6-put-markdown-files-in-the-_posts-dir" style="margin-right: 10px">#</a></a>Step 6. Put markdown files in the <code>_posts</code> dir</h2>
<p>Example</p>
<p>_posts/2023-04-08-first-post.md</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="markdown" data-theme="one-dark-pro"><code data-language="markdown" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#ABB2BF">---</span></span>
<span data-line=""><span style="color:#ABB2BF">title: First post</span></span>
<span data-line=""><span style="color:#ABB2BF">date: 2023-04-08</span></span>
<span data-line=""><span style="color:#E06C75">---</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">Hello world!</span></span></code></pre></figure>
<h2 id="step-7-deploy-to-github-pages"><a aria-hidden="true" tabindex="-1" href="#step-7-deploy-to-github-pages"><a href="#step-7-deploy-to-github-pages" style="margin-right: 10px">#</a></a>Step 7. Deploy to Github Pages</h2>
<p>Create your repo named <code>yourname.github.io</code> under yourname account</p>
<p>Then run</p>
<pre><code>npm install gh-pages
</code></pre>
<p>Then add a "predeploy" and "deploy" script to package.json</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="json" data-theme="one-dark-pro"><code data-language="json" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#ABB2BF">{</span></span>
<span data-line=""><span style="color:#E06C75">  "private"</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">  "scripts"</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#E06C75">    "dev"</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"next"</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">    "build"</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"next build"</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">    "start"</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"next dev"</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">    "lint"</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"next lint"</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">    "predeploy"</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"npm run build &#x26;&#x26; touch out/.nojekyll"</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">    "deploy"</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"gh-pages -d out -t true"</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E06C75">    "postdeploy"</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"git push --follow-tags"</span></span>
<span data-line=""><span style="color:#ABB2BF">  },</span></span>
<span data-line=""><span style="color:#FFFFFF">...</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<p>Then when you use <code>npm run deploy</code> it will build, push to github pages, and push
to the the regular content to the main branch too</p>
<h2 id="result"><a aria-hidden="true" tabindex="-1" href="#result"><a href="#result" style="margin-right: 10px">#</a></a>Result</h2>
<p>Source <a href="https://github.com/cmdcolin/nextjs-appdir-blog">https://github.com/cmdcolin/nextjs-appdir-blog</a></p>
<p>Deployed <a href="https://cmdcolin.github.io/nextjs-appdir-blog">https://cmdcolin.github.io/nextjs-appdir-blog</a></p>
<p>I manually added <code>basePath: "/nextjs-appdir-blog",</code> to <code>next.config.js</code> to
deploy it to that sub-URI, if you deploy without a sub-URI, you won't need this</p>
<h2 id="footnote-1-the-unifiedremarkrehype-stack"><a aria-hidden="true" tabindex="-1" href="#footnote-1-the-unifiedremarkrehype-stack"><a href="#footnote-1-the-unifiedremarkrehype-stack" style="margin-right: 10px">#</a></a>Footnote 1. The unified/remark/rehype stack</h2>
<p>I use the 'unified/remark/rehype' stack for parsing my blogpost markdown. My
unified/remark/rehype setup allows github flavored markdown (so e.g. links are
automatically converted to <code>&#x3C;a href></code>s) and code will be highlighted by
<a href="https://github.com/shikijs/shiki">https://github.com/shikijs/shiki</a> which I found did a pretty good job with e.g.
typescript (I look forward to maybe a treesitter powered coloring, if you find
this let me know)</p>
<h2 id="footnote-2-why-not-mdx"><a aria-hidden="true" tabindex="-1" href="#footnote-2-why-not-mdx"><a href="#footnote-2-why-not-mdx" style="margin-right: 10px">#</a></a>Footnote 2. Why not MDX?</h2>
<p>There may be some temptation to use things like MDX for your blog, and indeed, I
used MDX with my original blog setup with the <code>pages</code> directory
(<a href="https://cmdcolin.github.io/posts/2021-12-26-nextjs#using-mdx-for-blogposts-in-nextjs">https://cmdcolin.github.io/posts/2021-12-26-nextjs#using-mdx-for-blogposts-in-nextjs</a>)
but to me it is overkill and harder to understand. If it is desirable or needed
to use it for your setup, see
<a href="https://github.com/hashicorp/next-mdx-remote#react-server-components-rsc--nextjs-app-directory-support">https://github.com/hashicorp/next-mdx-remote#react-server-components-rsc--nextjs-app-directory-support</a></p></div><div style="margin-top:200px"></div></article><footer style="margin-top:100px"><a href="/">Home</a><a href="/archive">Blog archive</a><a href="https://github.com/cmdcolin/">Github</a><a href="/projects">Projects</a> <a href="/photos">Photos</a><a href="/books">Books</a><a href="/about">About</a><a href="/uses">Uses</a></footer><script src="/_next/static/chunks/webpack-d10a5ca28d3f2087.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/39906f0ead253838.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[5751,[],\"\"]\n5:I[9275,[],\"\"]\n7:I[1343,[],\"\"]\n8:I[231,[\"231\",\"static/chunks/231-26142438061866f4.js\",\"931\",\"static/chunks/app/page-963abe75e6aad650.js\"],\"\"]\na:I[6130,[],\"\"]\n6:[\"id\",\"2023-04-08-nextjs-appdir-blog\",\"d\"]\nb:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/39906f0ead253838.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"buildId\":\"MbZJnZ4qTVAuZoocZ4TiS\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/2023-04-08-nextjs-appdir-blog\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"2023-04-08-nextjs-appdir-blog\",\"d\"],{\"children\":[\"__PAGE__?{\\\"id\\\":\\\"2023-04-08-nextjs-appdir-blog\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"2023-04-08-nextjs-appdir-blog\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L3\",\"$L4\"],null],null]},[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$6\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"children\":[[\"$\",\"div\",null,{\"style\":{\"marginBottom\":100},\"children\":[\"$\",\"$L8\",null,{\"href\":\"/\",\"children\":\"Misc scribbles\"}]}],[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}],[\"$\",\"footer\",null,{\"style\":{\"marginTop\":100},\"children\":[[\"$\",\"$L8\",null,{\"href\":\"/\",\"children\":\"Home\"}],[\"$\",\"$L8\",null,{\"href\":\"/archive\",\"children\":\"Blog archive\"}],[\"$\",\"$L8\",null,{\"href\":\"https://github.com/cmdcolin/\",\"children\":\"Github\"}],[\"$\",\"$L8\",null,{\"href\":\"/projects\",\"children\":\"Projects\"}],\" \",[\"$\",\"$L8\",null,{\"href\":\"/photos\",\"children\":\"Photos\"}],[\"$\",\"$L8\",null,{\"href\":\"/books\",\"children\":\"Books\"}],[\"$\",\"$L8\",null,{\"href\":\"/about\",\"children\":\"About\"}],[\"$\",\"$L8\",null,{\"href\":\"/uses\",\"children\":\"Uses\"}]]}]]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$L9\"],\"globalErrorComponent\":\"$a\",\"missingSlots\":\"$Wb\"}]]\n"])</script><script>self.__next_f.push([1,"d:I[4910,[\"722\",\"static/chunks/app/posts/%5Bid%5D/page-ce940a9c9090656b.js\"],\"default\"]\nc:Tbfdf,"])</script><script>self.__next_f.push([1,"\u003cp\u003eI just converted my blog to use the Next.js 'app' directory, and thought I'd\nshow how you can make your own static site with it. Static export of the Next.js\n'app' directory was added in version 13.3\n\u003ca href=\"https://nextjs.org/blog/next-13-3#static-export-for-app-router\"\u003ehttps://nextjs.org/blog/next-13-3#static-export-for-app-router\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"tldr\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#tldr\"\u003e\u003ca href=\"#tldr\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eTL;DR\u003c/h2\u003e\n\u003cp\u003eSee here\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/cmdcolin/nextjs-appdir-blog\"\u003ehttps://github.com/cmdcolin/nextjs-appdir-blog\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eIf you take nothing else away from this article, let it be that\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eThe 'app' dir, with react server components, can be used to create static\nwebsites\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThat react server components (RSC) can be \"async function components\" whereas\nthis does not exist on the client side. It's quite interesting\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe exact step-by-step here is probably unnecessary but just trying to show the\nraw basics\u003c/p\u003e\n\u003ch2 id=\"step-1-run-create-next-app\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-1-run-create-next-app\"\u003e\u003ca href=\"#step-1-run-create-next-app\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 1. Run create-next-app\u003c/h2\u003e\n\u003cp\u003eI accepted all defaults but added \"YES\" to the use experimental app directory\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"bash\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"bash\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e npx\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e create-next-app\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e myblog\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e✔\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e Would\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e you\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e like\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e to\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e use\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e TypeScript\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e with\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e this\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e project?\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e …\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e No\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e /\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e YES\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e✔\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e Would\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e you\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e like\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e to\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e use\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e ESLint\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e with\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e this\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e project?\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e …\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e No\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e /\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e YES\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e✔\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e Would\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e you\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e like\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e to\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e use\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e `\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003esrc/\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e directory\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e with\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e this\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e project?\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e …\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e NO\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e /\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e Yes\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e✔\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e Would\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e you\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e like\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e to\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e use\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e experimental\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e `\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eapp/\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e directory\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e with\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e this\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e project?\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e …\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e No\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e /\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e YES\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e✔\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e What\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e import\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e alias\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e would\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e you\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e like\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e configured?\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e …\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e @/\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e*\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003eCreating\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e a\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e Next.js\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e app\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e in\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e /home/cdiesh/myblog.\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003eUsing\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e npm.\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003eInitializing\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e project\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e with\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e template:\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e app\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003eInstalling\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e dependencies:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e react\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e react-dom\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e next\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e typescript\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e @types/react\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e @types/node\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e @types/react-dom\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e eslint\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e eslint-config-next\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003ch2 id=\"step-2-edit-nextconfigjs\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-2-edit-nextconfigjs\"\u003e\u003ca href=\"#step-2-edit-nextconfigjs\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 2. Edit next.config.js\u003c/h2\u003e\n\u003cp\u003eAdd 'output': 'export' to the next.config.js file\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"typescript\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"typescript\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e/** \u003c/span\u003e\u003cspan style=\"color:#C678DD;font-style:italic\"\u003e@type\u003c/span\u003e\u003cspan style=\"color:#E5C07B;font-style:italic\"\u003e {import('next').NextConfig}\u003c/span\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e */\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e nextConfig\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  output\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'export'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003emodule\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eexports\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e nextConfig\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003ch2 id=\"step-3-create-the-page-that-will-display-your-posts\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-3-create-the-page-that-will-display-your-posts\"\u003e\u003ca href=\"#step-3-create-the-page-that-will-display-your-posts\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 3. Create the page that will display your posts\u003c/h2\u003e\n\u003cp\u003eCreate a new directory like this on the command line, yes there are square\nbrackets in the directory name\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"bash\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"bash\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003emkdir\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e -p\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e app/posts/\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e\\[\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e\\]\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e/\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003eThen make a file page.tsx in there so it is 'app/posts/[id]/page.tsx'\u003c/p\u003e\n\u003cp\u003eThen on this page, fill in with this\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"tsx\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"tsx\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003egetPostById\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003egetAllPosts\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e '@/lib/api'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// Generate the post, note that this is a \"react server component\"! it is\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// allowed to be async\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e default\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e async\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e Post\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  params\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: { \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  params\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ehtml\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etitle\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003edate\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getPostById\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003earticle\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eh1\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003etitle\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eh1\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eh4\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edate\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eh4\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e dangerouslySetInnerHTML\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e{ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e__html\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ehtml\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003earticle\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// This function can statically allow nextjs to find all the posts that you\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// have made, and statically generate them\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e async\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e generateStaticParams\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e posts\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getAllPosts\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e posts\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e ({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    id\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }))\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// Set the title of the page to be the post title, note that we no longer use\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// e.g. next/head in app dir, and this can be async just like the server\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// component\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e async\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e generateMetadata\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  params\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: { \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  params\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etitle\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getPostById\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    title\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003ch2 id=\"step-4-fix-the-cart-being-ahead-of-the-horse-parse-the-markdown-blogposts\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-4-fix-the-cart-being-ahead-of-the-horse-parse-the-markdown-blogposts\"\u003e\u003ca href=\"#step-4-fix-the-cart-being-ahead-of-the-horse-parse-the-markdown-blogposts\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 4. Fix the cart being ahead of the horse: parse the markdown blogposts\u003c/h2\u003e\n\u003cp\u003eIn the last post, I use functions \"getAllPosts\" and \"getPostById\", these are\nfunctions that I define that parse my markdown blog posts.\u003c/p\u003e\n\u003cp\u003eSo let's make those functions. The code below performs markdown parsing manually\nusing unified/remark/rehype and allows github flavored markdown. See Footnote 1\nfor more info. So first install these\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"bash\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"bash\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003enpm\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e install\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e gray-matter\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e unified\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e remark-gfm\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e remark-parse\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e remark-rehype\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e rehype-stringify\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e rehype-autolink-headings\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e rehype-slug\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e @leafac/rehype-shiki\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e shiki\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003eAnd then, add this code\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"typescript\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"typescript\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// lib/api.ts\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e fs\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'fs'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e matter\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'gray-matter'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e path\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'path'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eunified\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'unified'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e remarkGfm\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'remark-gfm'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e rehypeSlug\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'rehype-slug'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e rehypeAutolinkHeadings\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'rehype-autolink-headings'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e remarkParse\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'remark-parse'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e remarkRehype\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'remark-rehype'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e rehypeStringify\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'rehype-stringify'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e rehypePrettyCode\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'rehype-pretty-code'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e postsDirectory\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e path\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ecwd\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(), \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'_posts'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getPostFiles\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e fs\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ereaddirSync\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epostsDirectory\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getParser\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e unified\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003euse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eremarkParse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003euse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eremarkRehype\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003euse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eremarkGfm\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003euse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003erehypePrettyCode\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e      theme\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'one-dark-pro'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003euse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003erehypeStringify\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003euse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003erehypeStringify\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003euse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003erehypeSlug\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003euse\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003erehypeAutolinkHeadings\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#61AFEF\"\u003e      content\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003earg\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e ({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        type\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'element'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        tagName\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'a'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        properties\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e          href\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`#\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003earg\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eproperties\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e?.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e          style\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'margin-right: 10px'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e        children\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: [{ \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'text'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'#'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e }],\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      }),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// small speedup from caching this parser\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e parser\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getParser\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e async\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getPostById\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e realId\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e id\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ereplace\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e\\.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003emd\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e''\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e fullPath\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e path\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003epostsDirectory\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003erealId\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e.md`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003econtent\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e matter\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e fs\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epromises\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ereadFile\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003efullPath\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'utf8'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e html\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e parser\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003econtent\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e date\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e data\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edate\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e as\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e Date\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    ...\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    title\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003etitle\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e as\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e string\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    id\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003erealId\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    date\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003edate\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003etoISOString\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eslice\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e10\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    html\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ehtml\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003etoString\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e async\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getPageMarkdown\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003estring_\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003econtent\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e matter\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E5C07B\"\u003e    fs\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ereadFileSync\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epath\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'_pages'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003estring_\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e), \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e'utf8'\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e html\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e parser\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eprocess\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003econtent\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    ...\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    html\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003ehtml\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003etoString\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e async\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getAllPosts\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e posts\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e Promise\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003eall\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003egetPostFiles\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getPostById\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e)))\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e posts\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003esort\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e((\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003epost1\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003epost2\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003epost1\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edate\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e \u003e\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e post2\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edate\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e ?\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e -\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e :\u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003e 1\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003ch2 id=\"step-5-create-a-blog-index-showing-all-your-blogposts\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-5-create-a-blog-index-showing-all-your-blogposts\"\u003e\u003ca href=\"#step-5-create-a-blog-index-showing-all-your-blogposts\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 5. Create a 'blog index' showing all your blogposts\u003c/h2\u003e\n\u003cp\u003eEdit the \u003ccode\u003eapp/page.tsx\u003c/code\u003e file, and replace with the below: this is the root of\nyour site\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"tsx\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"tsx\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#7F848E;font-style:italic\"\u003e// app/page.tsx\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e Link\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e 'next/link'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003egetAllPosts\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e '@/lib/api'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e default\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e async\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e Page\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003e posts\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003e getAllPosts\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eh1\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003eMy blog\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eh1\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eh2\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003eAll posts:\u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eh2\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eul\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e        {\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eposts\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#61AFEF\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E06C75;font-style:italic\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e          const\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e { \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003edate\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003etitle\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e } \u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003e post\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e          return\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e (\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e            \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eli\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e key\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e              \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eLink\u003c/span\u003e\u003cspan style=\"color:#D19A66;font-style:italic\"\u003e href\u003c/span\u003e\u003cspan style=\"color:#56B6C2\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`/posts/\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e`\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#C678DD\"\u003e                {\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003edate\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e - \u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003etitle\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e              \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E5C07B\"\u003eLink\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e            \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eli\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e          )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e        })\u003c/span\u003e\u003cspan style=\"color:#C678DD\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e      \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003eul\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e    \u0026#x3C;/\u003c/span\u003e\u003cspan style=\"color:#E06C75\"\u003ediv\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003ch2 id=\"step-6-put-markdown-files-in-the-_posts-dir\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-6-put-markdown-files-in-the-_posts-dir\"\u003e\u003ca href=\"#step-6-put-markdown-files-in-the-_posts-dir\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 6. Put markdown files in the \u003ccode\u003e_posts\u003c/code\u003e dir\u003c/h2\u003e\n\u003cp\u003eExample\u003c/p\u003e\n\u003cp\u003e_posts/2023-04-08-first-post.md\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"markdown\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"markdown\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e---\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003etitle: First post\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003edate: 2023-04-08\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e---\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003eHello world!\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003ch2 id=\"step-7-deploy-to-github-pages\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#step-7-deploy-to-github-pages\"\u003e\u003ca href=\"#step-7-deploy-to-github-pages\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eStep 7. Deploy to Github Pages\u003c/h2\u003e\n\u003cp\u003eCreate your repo named \u003ccode\u003eyourname.github.io\u003c/code\u003e under yourname account\u003c/p\u003e\n\u003cp\u003eThen run\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003enpm install gh-pages\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen add a \"predeploy\" and \"deploy\" script to package.json\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\" data-language=\"json\" data-theme=\"one-dark-pro\"\u003e\u003ccode data-language=\"json\" data-theme=\"one-dark-pro\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  \"private\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#D19A66\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e  \"scripts\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    \"dev\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"next\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    \"build\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"next build\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    \"start\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"next dev\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    \"lint\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"next lint\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    \"predeploy\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"npm run build \u0026#x26;\u0026#x26; touch out/.nojekyll\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    \"deploy\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"gh-pages -d out -t true\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E06C75\"\u003e    \"postdeploy\"\u003c/span\u003e\u003cspan style=\"color:#ABB2BF\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#98C379\"\u003e\"git push --follow-tags\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FFFFFF\"\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#ABB2BF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003eThen when you use \u003ccode\u003enpm run deploy\u003c/code\u003e it will build, push to github pages, and push\nto the the regular content to the main branch too\u003c/p\u003e\n\u003ch2 id=\"result\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#result\"\u003e\u003ca href=\"#result\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eResult\u003c/h2\u003e\n\u003cp\u003eSource \u003ca href=\"https://github.com/cmdcolin/nextjs-appdir-blog\"\u003ehttps://github.com/cmdcolin/nextjs-appdir-blog\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eDeployed \u003ca href=\"https://cmdcolin.github.io/nextjs-appdir-blog\"\u003ehttps://cmdcolin.github.io/nextjs-appdir-blog\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI manually added \u003ccode\u003ebasePath: \"/nextjs-appdir-blog\",\u003c/code\u003e to \u003ccode\u003enext.config.js\u003c/code\u003e to\ndeploy it to that sub-URI, if you deploy without a sub-URI, you won't need this\u003c/p\u003e\n\u003ch2 id=\"footnote-1-the-unifiedremarkrehype-stack\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-1-the-unifiedremarkrehype-stack\"\u003e\u003ca href=\"#footnote-1-the-unifiedremarkrehype-stack\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 1. The unified/remark/rehype stack\u003c/h2\u003e\n\u003cp\u003eI use the 'unified/remark/rehype' stack for parsing my blogpost markdown. My\nunified/remark/rehype setup allows github flavored markdown (so e.g. links are\nautomatically converted to \u003ccode\u003e\u0026#x3C;a href\u003e\u003c/code\u003es) and code will be highlighted by\n\u003ca href=\"https://github.com/shikijs/shiki\"\u003ehttps://github.com/shikijs/shiki\u003c/a\u003e which I found did a pretty good job with e.g.\ntypescript (I look forward to maybe a treesitter powered coloring, if you find\nthis let me know)\u003c/p\u003e\n\u003ch2 id=\"footnote-2-why-not-mdx\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-2-why-not-mdx\"\u003e\u003ca href=\"#footnote-2-why-not-mdx\" style=\"margin-right: 10px\"\u003e#\u003c/a\u003e\u003c/a\u003eFootnote 2. Why not MDX?\u003c/h2\u003e\n\u003cp\u003eThere may be some temptation to use things like MDX for your blog, and indeed, I\nused MDX with my original blog setup with the \u003ccode\u003epages\u003c/code\u003e directory\n(\u003ca href=\"https://cmdcolin.github.io/posts/2021-12-26-nextjs#using-mdx-for-blogposts-in-nextjs\"\u003ehttps://cmdcolin.github.io/posts/2021-12-26-nextjs#using-mdx-for-blogposts-in-nextjs\u003c/a\u003e)\nbut to me it is overkill and harder to understand. If it is desirable or needed\nto use it for your setup, see\n\u003ca href=\"https://github.com/hashicorp/next-mdx-remote#react-server-components-rsc--nextjs-app-directory-support\"\u003ehttps://github.com/hashicorp/next-mdx-remote#react-server-components-rsc--nextjs-app-directory-support\u003c/a\u003e\u003c/p\u003e"])</script><script>self.__next_f.push([1,"4:[\"$\",\"article\",null,{\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h1\",null,{\"children\":\"Making a static site blog with the Next.js 'app' directory\"}],[\"$\",\"h4\",null,{\"children\":\"2023-04-08\"}]]}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$c\"}}],[\"$\",\"$Ld\",null,{}]]}]\n9:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Making a static site blog with the Next.js 'app' directory\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"A blog\"}]]\n3:null\n"])</script></body></html>