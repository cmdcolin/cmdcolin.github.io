Creating a unified logging system in wxWidgets
==============================================

As we all know, **[wxWidgets](http://wxwidgets.org/)** is a great
cross-platform C++ library.

One goal I had for wxWidgets was to create a unified logging system with
the [**wxLog**](http://docs.wxwidgets.org/trunk/classwx_log.html)
classes. I wanted to use
[**wxLogStderr**](http://docs.wxwidgets.org/trunk/classwx_log_stderr.html)
to create a logfile alongside with the
[**wxLogWindow**](http://docs.wxwidgets.org/trunk/classwx_log_window.html)
to allow the user to see logs realtime and
[**wxLogGui**](http://docs.wxwidgets.org/trunk/classwx_log_gui.html)
allows the logging functions to produce message boxes and status bar
updates automatically.

To combine wxLog classes together, we need to use
[**wxLog::SetActiveTarget**](http://docs.wxwidgets.org/trunk/classwx_log.html#ac7ea85f71c8d3ecd4247f412be410505)
to make the log active, and then use **wxLogChain** to keep them
together. However, note that for **wxLogWindow** is a subclass of
**wxLogChain**, so it creates the chain automatically. Also, wxLogWindow
does not need to use wxLog::SetActiveTarget because of default parameter
**bool bPassToOld = true**

![](../../media/74465456164_0.png)

**Figure 1.** The wxLog inheritance chart. Note that wxLogWindow is a
subclass of wxLogChain so it automatically has chaining methods.

The second concern with this logging system is that I want to log
verbose outputs to the logfile, but **wxLogGui** produces message boxes
for **wxLogVerbose** messages. I can't disable verbose messages for it
since the function **wxLog::SetVerbose** is static, so I needed to find
a way to suppress verboseÂ  message boxes another way. To do so, I
created a **wxLogGuiMod** subclass that ignores wxLOG\_INFO(verbose)
level messages.

Without further ado, here is the code. Note: order of operations are
sort of important here.


       wxLog::SetLogLevel(wxLOG_Max);
       wxLog::SetVerbose();
       //create logfile
       wxFFile *test=new wxFFile("yourLogFile.log","a");
       wxLog *temp=new wxLogStderr(test->fp());
       wxLog::SetActiveTarget(temp);
       //create loggui and chain it
       wxLog::SetActiveTarget(new wxLogChain(new wxLogGuiMod()));
       //create logwindow
       new wxLogWindow(this, wxS("Log messages"),true);//true to make visible at start
       //no need to setactivetarget or wxlogchain on wxLogWindow
       

The declaration of wxLogGuiMod, a small subclass that ignroes
wxLogVerbose so that verbose messages don't create popups by wxLogGui


        class wxLogGuiMod :public wxLogGui {
           protected:
           virtual void DoLogRecord(wxLogLevel level,
                                 const wxString& msg,
                                 const wxLogRecordInfo& info);
        };
        void wxLogGuiMod::DoLogRecord(wxLogLevel level,
                                 const wxString& msg,
                                 const wxLogRecordInfo& info)
        {
           if(level==wxLOG_Info ) return;
           else wxLogGui::DoLogRecord(level,msg,info);
        }

Original thread
<https://forums.wxwidgets.org/viewtopic.php?f=1&t=38480&sid=dd67d6ac9b8fab93d7320a3cf44bcebf#unread>

::: {#footer}
[ January 25th, 2014 1:11am ]{#timestamp} [wxwidgets]{.tag} [code]{.tag}
[programming]{.tag}
:::
